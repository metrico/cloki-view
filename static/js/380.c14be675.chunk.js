"use strict";(self.webpackChunkqryn_view=self.webpackChunkqryn_view||[]).push([[380],{9964:function(e,n){n.Z=function(e){return function(n){n({type:"SET_DATA_SOURCES",dataSources:e})}}},12624:function(e,n,t){t.r(n),t.d(n,{default:function(){return NC}});var r=t(30168),i=t(56352),a=t(16806),o=t.n(a),l=t(1413),s=t(37762),u=t(29439),c=t(70816),d=t.n(c),f=t(47313),p=t(58467),v=t(87975);function h(e){return function(n){n({type:"SET_FROM_TIME",toTime:e})}}var g=function(e){return function(n){n({type:"SET_IS_EMBED",isEmbed:e})}},m=function(e){return function(n){n({type:"SET_LEFT_PANEL",left:e})}},x=function(e){return function(n){n({type:"SET_RIGHT_PANEL",right:e})}};function b(e){return function(e){e({type:"SET_TO_TIME"})}}var y=function(e){return function(n){n({type:"SET_URL_LOCATION",urlLocation:e})}},Z=function(e){return function(n){n({type:"SET_URL_QUERY_PARAMS",urlQueryParams:e})}},w=function(e){return function(n){n({type:"SET_SPLIT_VIEW",isSplit:e})}},S=["step","theme","time"],j=["label"],k=["left","right"],C=["start","stop"],T=["isSubmit","isSplit","autoTheme","isEmbed"];var _=t(66367),I=t(36426),D=t(78899),N=t(95765),M=t(16429),E=t(83929),R=t(44758),O=t(36063),L=t(62256),V=function(e){return function(n){n({type:"SET_QUERY_HISTORY",queryHistory:e})}},z=t(74165),F=t(15861),B=t(4942),H=t(93433),P=t(56573),q=t(21090),A=function(e){return function(n){n({type:"SET_IS_EMPTY_VIEW",isEmptyView:e})}};var Q=t(59376),W=t(41156),U=t(34605),J=t(98589),G=t(33532),K=t(99004),Y=t(3051),X=t(31700),$=t(93601),ee=t(8859),ne=t(50514),te=t(32288),re=t(34193),ie=t(98789),ae=t(79254),oe=t(91469),le=t(60206),se=t(6021),ue=t(56148),ce=t(78392),de=t(58892),fe=function(){for(var e=arguments.length,n=new Array(e),t=0;t<e;t++)n[t]=arguments[t];return n.filter((function(e){return e})).join(" ")},pe=function(e){for(var n=(0,Q.Z)((0,W.Z)(e)),t=(0,U.Z)((0,J.Z)(e)),r=[],i=n;(0,G.Z)(i,t);)r.push(i),i=(0,K.Z)(i,1);return r},ve=function(e){return be(new Date).find((function(n){return n.label===e}))},he=function(e,n){if(e instanceof Date){var t=(0,$.Z)(e);if((0,ee.Z)(t))return t}if(!(e instanceof String))return n;var r=(0,ne.Z)(e.toString());return(0,ee.Z)(r)?r:void 0},ge=function(e,n){var t,r,i=Math.floor(n/2);return null===(t=Array(n))||void 0===t||null===(r=t.fill(0))||void 0===r?void 0:r.map((function(n,t){return(null===e||void 0===e?void 0:e.getFullYear())-i+t}))},me=function(e,n){var t=e.dateStart,r=e.dateEnd,i=e.label,a=n.dateStart,o=n.dateEnd;return i===n.label||!!(t&&a&&r&&o)&&((0,de.Z)(t,a)&&(0,de.Z)(r,o))},xe=function(e,n,t){var r=e.dateStart,i=e.dateEnd;if(r&&i){var a=(0,te.Z)([r,n]),o=(0,re.Z)([i,t]);return[a,(0,ie.Z)(a,o)?(0,ae.Z)(a,1):o]}return[r,i]},be=function(e){return[{label:"Last 5 minutes",dateStart:(0,oe.Z)(e,-5),dateEnd:e},{label:"Last 15 minutes",dateStart:(0,oe.Z)(e,-15),dateEnd:e},{label:"Last 30 minutes",dateStart:(0,oe.Z)(e,-30),dateEnd:e},{label:"Last 1 hour",dateStart:(0,le.Z)(e,-1),dateEnd:e},{label:"Last 3 hours",dateStart:(0,le.Z)(e,-3),dateEnd:e},{label:"Last 6 hours",dateStart:(0,le.Z)(e,-6),dateEnd:e},{label:"Last 12 hours",dateStart:(0,le.Z)(e,-12),dateEnd:e},{label:"Last 24 hours",dateStart:(0,le.Z)(e,-24),dateEnd:e},{label:"Today",dateStart:(0,se.Z)(e),dateEnd:(0,ue.Z)(e)},{label:"Yesterday",dateStart:(0,se.Z)((0,K.Z)(e,-1)),dateEnd:(0,ue.Z)((0,K.Z)(e,-1))},{label:"This Week",dateStart:(0,Q.Z)(e),dateEnd:(0,U.Z)(e)},{label:"Last Week",dateStart:(0,Q.Z)((0,ce.Z)(e,-1)),dateEnd:(0,U.Z)((0,ce.Z)(e,-1))},{label:"Last 7 Days",dateStart:(0,ce.Z)(e,-1),dateEnd:e}]};be(new Date);function ye(e){return e/1e6}function Ze(e){return new Date(e).getTime()+"000000"}function we(e){var n=new Date(e);return Math.round(n.getTime()/1e3)}var Se=function(e){return e||parseInt((new Date).getTime()+"000000")},je=function(e,n){var t,r,i=ve(e),a=i.dateStart,o=i.dateEnd;return"metrics"===n?(t=we(a),r=we(o)):(t=parseInt(Ze(a)),r=parseInt(Ze(o))),{pStart:t,pStop:r,dateStart:a,dateEnd:o}};function ke(e,n,t){var r=q.Z.getState(),i=r.time,a=r.from,o=r.to,l=q.Z.getState()[t],s=null===l||void 0===l?void 0:l.find((function(e){return e.id===n})),u=s.start,c=s.stop,d=Se(i),f=s.label,p=u,v=c,h=0,g=0;if(ve(f)){var m=je(f,e),x=m.pStart,b=m.pStop;"traces"===e?(h=Math.round(x/1e9),g=Math.round(b/1e9)):(h=x,g=b)}else"metrics"===e?(h=we(p),g=we(v)):"logs"===e?(h=parseInt(Ze(p)),g=parseInt(Ze(v))):"traces"===e?(h=we(p),g=we(v)):(h=parseInt(Ze(p)),g=parseInt(Ze(v)));var y="&start="+(a||h)+"&end="+(o||g),Z=parseInt(a||h);return{tDiff:(parseInt(o||g)-Z)/("metrics"===e?1:1e6),time:d,parsedTime:y}}function Ce(e){return Te.apply(this,arguments)}function Te(){return(Te=(0,F.Z)((0,z.Z)().mark((function e(n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n(A(!0));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _e=t(82751),Ie=t(16031);function De(e){var n=[];try{var t,r=(0,s.Z)(e);try{for(r.s();!(t=r.n()).done;){var i=t.value,a=Object.keys(i.metric);for(var o in a)n.includes(a[o])||n.push(a[o])}}catch(l){r.e(l)}finally{r.f()}}catch(u){console.log(u)}return n}function Ne(e){var n=[];try{var t,r=(0,s.Z)(e);try{for(r.s();!(t=r.n()).done;)for(var i=t.value,a=Object.keys(i),o=0,l=a;o<l.length;o++){var u=l[o];n.includes(u)||n.push(u)}}catch(c){r.e(c)}finally{r.f()}}catch(d){console.log(d)}return n}function Me(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"logs";if("flux"===n||"traces"===n)try{return e}catch(m){console.log(m)}else{var t=De(e);try{for(var r=[],i=e.length,a=t.length,o=0;o<i;o++){for(var l=e[o],s=l.metric,c=(0,u.Z)(l.value,2),d=c[0],f=c[1],p={},v=0;v<a;v++){var h=t[v];p[h]=s[h]||""}p.time=d,p.value=f,r.push(p)}var g=(0,Ie.sortBy)(r,(function(e){return e.time}));return g}catch(m){console.log(m)}}}var Ee,Re=t(1582),Oe=t(71424),Le=t(60065),Ve=t(62975),ze=t(46417),Fe=c,Be=function(e){return(0,Ve.iv)(Ee||(Ee=(0,r.Z)(["\n    border: none;\n    background: none;\n    color: ",";\n    cursor: pointer;\n    &:hover {\n        text-decoration: underline;\n    }\n"])),e.primaryLight)};function He(e){var n,t,r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"logs",a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=null===(n=q.Z.getState())||void 0===n||null===(t=n[o.panel])||void 0===t?void 0:t.find((function(e){return e.id===o.id}));s&&(o.dataSourceId=s.dataSourceId,o.url=s.dataSourceURL);var u=null===(r=q.Z.getState())||void 0===r?void 0:r.theme,c=Le.n[u];return e.length>0&&"traces"===i?null===e||void 0===e?void 0:e.map((function(e){return"durationMs"===e.accessorKey?{header:"Duration Ms",accessorKey:e.accessorKey,cell:function(e){return function(e){return e.getValue()+" ms"}(e)}}:"startTimeUnixNano"===e.accessorKey?{header:"Start Time",accessorKey:e.accessorKey,cell:function(e){return function(e){return new Re.Z("en-US").format(e.getValue()/1e6)}(e)}}:"traceID"===e.accessorKey||"traceId"===e.accessorKey?{header:"Trace Id",accessorKey:e.accessorKey,cell:function(e){return(0,ze.jsx)("button",{onClick:function(n){return function(e,t){var r=q.Z.dispatch,i=q.Z.getState()[e.panel],a=q.Z.getState().right,o=window.innerWidth<=1013,s=i.find((function(n){return n.id===e.id}));"left"!==e.panel||o||r(w(!0));var u=JSON.parse(JSON.stringify(a)),c=JSON.parse(JSON.stringify(s));try{var d=(0,l.Z)((0,l.Z)({},u[0]),{},{id:u[0].id,idRef:"Trace "+t,panel:"right",queryType:"range",dataSourceType:"traces",dataSourceId:e.dataSourceId,dataSourceURL:e.url,expr:t,limit:100,step:100,tableView:!1,chartView:!1,isShowTs:!1,isBuilder:!1,isLogsVolume:!1,browserOpen:!1,open:!0,labels:[],values:[],direction:"backwards"});r(x([d])),r(Cn("traces",t,"range",c.limit||100,"right",d.id,"backwards",e.dataSourceId,e.url))}catch(n){console.log(n)}}(o,e.getValue())},className:(0,Ve.cx)(Be(c)),children:e.getValue()})}}:"rootServiceName"===e.accessorKey?{header:"Service Name",accessorKey:e.accessorKey,cell:function(e){return e.getValue()}}:"rootTraceName"===e.accessorKey?{header:"Trace Name",accessorKey:e.accessorKey,cell:function(e){return e.getValue()}}:e})):e.length>0&&"flux"===i?null===e||void 0===e?void 0:e.map((function(e){return e.accessorKey===a||"_time"===e.accessorKey?{header:"Time",accessorKey:e.accessorKey,cell:function(e){return function(e){return Fe(e.getValue()).format("YYYY-MM-DDTHH:mm:ss.SSZ")}(e)}}:e})):e.length>0?[{header:"Time",accessorKey:"time",cell:function(e){return function(e){return Fe(parseInt(e.getValue()+"000")).format("YYYY-MM-DDTHH:mm:ss.SSZ")}(e)}}].concat((0,H.Z)(e),[{header:"Value",accessorKey:"value"}]):[]}function Pe(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"logs",t=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=null===e||void 0===e?void 0:e.map((function(e){return{header:e,accessorKey:e,id:e,cell:function(e){return e.getValue()}}}));return He(i,n,t,r)}Re.Z.addDefaultLocale(Oe.Z);var qe=function(e){return function(n){n({type:"SET_LEFT_DATAVIEW",leftDataView:e})}},Ae=function(e){return function(n){n({type:"SET_RIGHT_DATAVIEW",rightDataView:e})}};function Qe(e){return"left"===e?{state:"leftDataView",action:qe}:{state:"rightDataView",action:Ae}}function We(e){var n=e.result,t=e.debugMode,r=e.dispatch,i=e.panel,a=e.id,o=e.type,s=e.dsType,c=e.raw,f={panel:i,id:a,type:o};if("traces"===o)try{var p=Ne(n);if(p.length>0){var v=function(e){var n=e[0],t=Object.entries(n);if(t){var r=t.find((function(e){var n=(0,u.Z)(e,2),t=(n[0],n[1]);return d().isDate(t)}));return(null===r||void 0===r?void 0:r[0])||null}}(n),h=Pe(p,o,v,{panel:i,id:a,type:o}),g=Me(n,o),m={columnsData:h,dataRows:g,panel:i,id:a};if((null===h||void 0===h?void 0:h.length)>0&&(null===g||void 0===g?void 0:g.length)>0){var x,b,y={id:a,type:"vector",raw:c,dsType:s,data:{tableData:m},tableData:m,total:(null===m||void 0===m||null===(x=m.dataRows)||void 0===x?void 0:x.length)||0},Z=Qe(i),w=Z.action,S=Z.state,j=null===(b=q.Z.getState())||void 0===b?void 0:b[S];if(j.some((function(e){return e.id===y.id}))){r(w([]));var k=j.filter((function(e){return e.id!==y.id}));r(w([].concat((0,H.Z)(k),[(0,l.Z)({},y)])))}else{r(w([].concat((0,H.Z)(j),[y])))}}}}catch($){console.log($)}else if("flux"===o)try{var C=Ne(n);if(C.length>0){var T=function(e){var n=e[0],t=Object.entries(n);if(t){var r=t.find((function(e){var n=(0,u.Z)(e,2),t=(n[0],n[1]);return d().isDate(t)}));return(null===r||void 0===r?void 0:r[0])||null}}(n),_=Pe(C,o,T,f),I=Me(n,o),D={columnsData:_,dataRows:I,panel:i,id:a};if((null===_||void 0===_?void 0:_.length)>0&&(null===I||void 0===I?void 0:I.length)>0){var N,M,E={id:a,type:"vector",data:{tableData:D},raw:c,dsType:s,tableData:D,total:(null===D||void 0===D||null===(N=D.dataRows)||void 0===N?void 0:N.length)||0},R=Qe(i),O=R.action,L=R.state,V=null===(M=q.Z.getState())||void 0===M?void 0:M[L];if(V.some((function(e){return e.id===E.id}))){r(O([]));var z=V.filter((function(e){return e.id!==E.id}));r(O([].concat((0,H.Z)(z),[(0,l.Z)({},E)])))}else{r(O([].concat((0,H.Z)(V),[E])))}}}}catch($){console.log($)}else try{var F=De(n);if(F.length>0){var B=Pe(F,o,null,f),P=Me(n),A={columnsData:B,dataRows:P,panel:i,id:a};if(B.length>0&&P.length>0){var Q,W,U={id:a,type:"vector",data:{tableData:A}||{},raw:c,dsType:s,tableData:A||{},total:(null===A||void 0===A||null===(Q=A.dataRows)||void 0===Q?void 0:Q.length)||0},J=Qe(i),G=J.action,K=J.state,Y=null===(W=q.Z.getState())||void 0===W?void 0:W[K];if(Y.some((function(e){return e.id===U.id}))){r(G([]));var X=Y.filter((function(e){return e.id!==U.id}));r(G([].concat((0,H.Z)(X),[(0,l.Z)({},U)])))}else{r(G([].concat((0,H.Z)(Y),[U])))}}}}catch($){t&&console.log("\ud83d\udea7 getData / getting an error from rendering vector type streams"),console.log($)}}function Ue(e){return(null===e||void 0===e?void 0:e.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{id:(0,_e.x0)()})})))||[]}function Je(e){var n,t=[{header:"Time",accessorKey:"time",cell:function(e){return function(e){return d()(e.getValue()).format("YYYY-MM-DDTHH:mm:ss.SSZ")}(e)}},{header:"Metric",accessorKey:"metric"},{header:"Value",accessorKey:"value"}],r=function(e){return e.map((function(e){var n=e.metric,t=e.values;return{metric:JSON.stringify(n),rows:t.map((function(e){var t=(0,u.Z)(e,2),r=t[0],i=t[1];return{time:r,metric:JSON.stringify(n),value:i}})),get rowsLength(){var e;return null===(e=this.rows)||void 0===e?void 0:e.length},get title(){return"'".concat(this.metric,"' (").concat(this.rowsLength,")")}}}))}(e),i=[],a=(0,s.Z)(r);try{for(a.s();!(n=a.n()).done;){var o=n.value;i.push(o.rows)}}catch(c){a.e(c)}finally{a.f()}var l=(0,Ie.sortBy)(i.flat(),(function(e){return e.time}));return{columnsData:t,dataRows:l,total:l.length}}function Ge(e){var n=e.result,t=e.debugMode,r=e.dispatch,i=e.panel,a=e.id,o=e.raw,s=e.dsType,u=e.isLogsVolume,c=Je(n),d=function(e){return"left"===e?{state:"leftDataView",action:qe}:{state:"rightDataView",action:Ae}}(i);try{var f,p=Ue(n),v={id:a,type:"matrix",tableData:c,data:p,dsType:s,raw:o,total:(null===p||void 0===p?void 0:p.length)||0},h=d.action,g=d.state,m=null===(f=q.Z.getState())||void 0===f?void 0:f[g];if(m.some((function(e){return e.id===v.id}))){if(u){var x=(0,H.Z)(m).map((function(e){return e.id===a?(0,l.Z)((0,l.Z)({},e),{},{logsVolumeData:p,total:p.length}):e}));r(h([])),r(h(x))}else{r(h([]));var b=m.filter((function(e){return e.id!==v.id}));r(h([].concat((0,H.Z)(b),[(0,l.Z)({},v)])))}}else{r(h([].concat((0,H.Z)(m),[v])))}}catch(y){t&&console.log("\ud83d\udea7 getData / getting an error from rendering matrix type streams"),console.log(y)}}var Ke=function(e){return function(n){n({type:"SET_LOGS",logs:e})}},Ye=t(69059);function Xe(e){return(0,ze.jsx)("span",{title:e.getValue(),children:e.getValue()})}function $e(e){var n=[{id:"time",header:"Time",accessorKey:"time",cell:function(e){return n=e,d()(parseInt(n.getValue())/1e6).format("YYYY-MM-DDTHH:mm:ss.SSZ");var n}},{id:"stream",header:"Stream",accessorKey:"stream",cell:function(e){return Xe(e)}},{id:"log",accessorKey:"log",header:"Log",cell:function(e){return Xe(e)}}],t=function(e){return null===e||void 0===e?void 0:e.map((function(e){var n=e.stream,t=e.values;return{stream:"".concat(JSON.stringify(n)),rows:null===t||void 0===t?void 0:t.map((function(e){var t=(0,u.Z)(e,2),r=t[0],i=t[1];return{time:r,stream:JSON.stringify(n),log:i}})),get rowsLength(){var e;return(null===this||void 0===this||null===(e=this.rows)||void 0===e?void 0:e.length)||0}}}))}(e),r=(null===t||void 0===t?void 0:t.length)||0,i=[];if(r>0){var a,o=(0,s.Z)(t);try{for(o.s();!(a=o.n()).done;){var l=a.value;i.push(l.rows)}}catch(c){o.e(c)}finally{o.f()}}return{columnsData:n,dataRows:(0,Ie.sortBy)(i.flat(),(function(e){return e.time})),length:r}}function en(e){var n=e.result,t=e.raw,r=e.time,i=e.debugMode,a=e.queryType,o=e.panel,s=e.id,u=e.dispatch,c=e.dsType,d=e.direction,f=e.isLogsVolume,p=dn(n,d),v=function(e){return"left"===e?{state:"leftDataView",action:qe}:{state:"rightDataView",action:Ae}}(o),h=$e(n),g=cn(p,d);var m,x={id:s,type:"stream",tableData:{},data:[{}],raw:"[]",labels:[],total:0,isLogsVolume:f,dsType:c};if(g)try{var b;(function(e){return un.apply(this,arguments)})(u(Ke(g||[]))).then((function(){0===g.length&&(i&&console.log("\ud83d\udea7 getData / getting no messages sorted"),u(A(!0))),u(A(!1))}));var y=Array.from(new Set(null===g||void 0===g?void 0:g.map((function(e){return Object.keys(e.tags)})))),Z=(m=y,[].concat.apply([],m).filter((function(e,n,t){return t.indexOf(e)===n})));x={id:s,type:"stream",dsType:c,tableData:h,data:g,isLogsVolume:f,raw:t,labels:(0,H.Z)(Z),total:(null===g||void 0===g?void 0:g.length)||0};var w=v.action,S=v.state,j=null===(b=q.Z.getState())||void 0===b?void 0:b[S];if(j.some((function(e){return e.id===x.id}))){if(f){var k=(0,H.Z)(j).map((function(e){if(e.id===s){var n,t=[];null!==e&&void 0!==e&&e.logsVolumeData&&(null===(n=e.logsVolumeData)||void 0===n?void 0:n.length)>0&&(t=(0,H.Z)(e.logsVolumeData));var r=(0,l.Z)({},x);return(0,l.Z)((0,l.Z)({},r),{},{logsVolumeData:t})}return e}));u(w([])),u(w(k))}else{var C;u(w([]));var T=j.filter((function(e){return e.id!==x.id}));C=[].concat((0,H.Z)(T),[(0,l.Z)({},x)]),u(w(C))}}else{var _=[].concat((0,H.Z)(j),[x]);u(w(_))}"instant"===a&&u((0,Ye.H)(r))}catch(L){console.log(L)}else{var I,D=v.action,N=v.state,M=null===(I=q.Z.getState())||void 0===I?void 0:I[N];if(M.some((function(e){return e.id===x.id}))){var E;u(D([]));var R=(null===M||void 0===M?void 0:M.filter((function(e){return e.id!==x.id})))||[];E=[].concat((0,H.Z)(R),[(0,l.Z)({},x)]),u(D(E))}else{var O=[].concat((0,H.Z)(M),[x]);u(D(O))}}}function nn(e){return"left"===e?{state:"leftDataView",action:qe}:{state:"rightDataView",action:Ae}}function tn(e){return rn.apply(this,arguments)}function rn(){return rn=(0,F.Z)((0,z.Z)().mark((function e(n){var t,r,i,a,o,s,u,c,d,f,p,v,h,g,m,x,b,y,Z;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=n.result,r=n.debugMode,i=n.dispatch,a=n.panel,o=n.id,s=n.type,u=n.dsType,c=n.queryType,d=n.raw,"trace-search"!==c){e.next=6;break}return e.next=4,We(n);case 4:e.next=7;break;case 6:try{v={id:o,type:s,dsType:u,tableData:{},data:t,raw:d,labels:[],open:!0,total:null===t||void 0===t||null===(f=t.resourceSpans)||void 0===f?void 0:f.length},h=nn(a),g=h.action,m=h.state,(x=null===(p=q.Z.getState())||void 0===p?void 0:p[m]).some((function(e){return e.id===v.id}))?([],i(g([])),y=x.filter((function(e){return e.id!==v.id})),b=[].concat((0,H.Z)(y),[(0,l.Z)({},v)]),i(g(b))):(Z=[].concat((0,H.Z)(x),[v]),i(g(Z)))}catch(w){r&&console.log(" \ud83d\udea7 getData / getting an error from rendering Traces type streams",w),console.log(w)}case 7:case"end":return e.stop()}}),e)}))),rn.apply(this,arguments)}function an(e){return(0,ze.jsx)("span",{title:e.getValue(),children:e.getValue()})}function on(e){var n,t=[{accessorKey:"time",header:function(){return(0,ze.jsx)("span",{children:"Time"})},cell:function(e){return function(e){return d()(e.getValue()).format("YYYY-MM-DDTHH:mm:ss.SSZ")}(e)}},{header:"Metric",cell:function(e){return an(e)},accessorKey:"metric"},{header:"Value",accessorKey:"value",cell:function(e){return an(e)}}],r=function(e){return e.map((function(e){var n=e.metric,t=e.values;return{metric:JSON.stringify(n),rows:t.map((function(e){var t=(0,u.Z)(e,2),r=t[0],i=t[1];return{time:r,metric:JSON.stringify(n),value:i}})),get rowsLength(){var e;return null===(e=this.rows)||void 0===e?void 0:e.length},get title(){return"'".concat(this.metric,"' (").concat(this.rowsLength,")")}}}))}(e),i=[],a=(0,s.Z)(r);try{for(a.s();!(n=a.n()).done;){var o=n.value;i.push(o.rows)}}catch(c){a.e(c)}finally{a.f()}var l=(0,Ie.sortBy)(i.flat(),(function(e){return e.time}));return{columnsData:t,dataRows:l,total:l.length}}function ln(e){var n=e.result,t=e.debugMode,r=e.dispatch,i=e.panel,a=e.id,o=e.raw,s=e.dsType;n=function(e){return[{metric:{__name__:"Flux"},values:e.map((function(e){return Object.values(e).map((function(e,n){return isNaN(+e)?null:(e instanceof Date?e.getTime()/1e3:e)+(0===n?0:"")})).filter((function(e){return!!e}))}))}]}(n);var c=on(n),f=function(e){return"left"===e?{state:"leftDataView",action:qe}:{state:"rightDataView",action:Ae}}(i);try{var p,v=Ue(n),h=function(e){var n=e.result,t=e.panel,r=e.id,i=e.type,a={panel:t,id:r,type:i},o=Ne(e.result),l=function(e){var n=e[0],t=Object.entries(n);if(t){var r=t.find((function(e){var n=(0,u.Z)(e,2),t=(n[0],n[1]);return d().isDate(t)}));return(null===r||void 0===r?void 0:r[0])||null}}(n),s=Pe(o,i,l,a),c=Me(n,i),f={columnsData:s,dataRows:c,panel:t,id:r};if((null===s||void 0===s?void 0:s.length)>0&&(null===c||void 0===c?void 0:c.length)>0)return f}(e),g={id:a,type:"vector",tableData:c,data:{chartData:v,tableData:h},dsType:s,raw:o,total:(null===v||void 0===v?void 0:v.length)||0},m=f.action,x=f.state,b=null===(p=q.Z.getState())||void 0===p?void 0:p[x];if(b.some((function(e){return e.id===g.id}))){r(m([]));var y=b.filter((function(e){return e.id!==g.id}));r(m([].concat((0,H.Z)(y),[(0,l.Z)({},g)])))}else{r(m([].concat((0,H.Z)(b),[g])))}}catch(Z){t&&console.log("\ud83d\udea7 getData / getting an error from rendering Flux type streams"),console.error(Z)}}var sn=q.Z.getState().debugMode;function un(){return(un=(0,F.Z)((0,z.Z)().mark((function e(n){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n;case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cn(e,n){return"forward"===n?function(e){var n=performance.now(),t=null===e||void 0===e?void 0:e.sort((function(e,n){return e.timestamp-n.timestamp})),r=performance.now()-n;sn&&console.log("\ud83d\udea7 getData / sorting logs took: ",r," ms");return t}(e):function(e){var n=performance.now(),t=null===e||void 0===e?void 0:e.sort((function(e,n){return n.timestamp-e.timestamp})),r=performance.now()-n;sn&&console.log("\ud83d\udea7 getData / sorting logs took: ",r," ms");return t}(e)}function dn(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"backwards",t=performance.now(),r=[];null===e||void 0===e||e.forEach((function(e){e.values.forEach((function(n,t){var i=(0,u.Z)(n,2),a=i[0],o=i[1];r.push({type:"stream",timestamp:ye(a),text:o,tags:e.stream||{},isShowTs:!0,isBuilder:!1,showLabels:!1,id:(0,_e.x0)()})}))}));var i=performance.now()-t;return sn&&console.log("\ud83d\udea7 getData / mapping logs took: ",i," ms"),cn(r,n)}function fn(e){return pn.apply(this,arguments)}function pn(){return(pn=(0,F.Z)((0,z.Z)().mark((function e(n){var t;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=n.type,e.t0=t,e.next="streams"===e.t0?4:"vector"===e.t0?7:"matrix"===e.t0?10:"scalar"===e.t0?13:"flux"===e.t0?16:"traces"===e.t0?19:22;break;case 4:return e.next=6,en(n);case 6:case 9:case 12:case 15:case 18:case 21:return e.abrupt("break",24);case 7:return e.next=9,We(n);case 10:return e.next=12,Ge(n);case 13:return e.next=15,Ge(n);case 16:return e.next=18,ln(n);case 19:return e.next=21,tn(n);case 22:return e.next=24,en(n);case 24:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function vn(e){return function(n){n({type:"SET_RESPONSE_TYPE",responseType:e})}}var hn=t(13997),gn=t.n(hn);function mn(e){return xn.apply(this,arguments)}function xn(){return(xn=(0,F.Z)((0,z.Z)().mark((function e(n){var t,r,i,a,o,l,s;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={meta:[],data:[],statistics:{elapsed:.360986682,rows_read:0,bytes_read:0}},r=gn().parse(n,{header:!0,comments:!0,dynamicTyping:!0}),e.next=5,r.data.map((function(e){return delete e[""],delete e.table,delete e.result,e}));case 5:for(t.data=e.sent,t.data.length=t.data.length-2,i=0,a=Object.entries(t.data[0]);i<a.length;i++)o=(0,u.Z)(a[i],2),l=o[0],s=o[1],t.meta.push({name:l,type:typeof s});return t.rows=t.data.length,e.abrupt("return",t);case 12:return e.prev=12,e.t0=e.catch(0),e.abrupt("return",n);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function bn(e,n){return"left"===e?m(n):x(n)}var yn=function(e,n,t,r,i,a){fn({result:{resourceSpans:[],result:[],length:0},raw:[],time:ke(e,r,t).time,debugMode:q.Z.getState().debugMode,dispatch:n,type:"traces",dsType:e,panel:t,id:r,ts:Date.now(),queryType:a,open:!0})};function Zn(e,n,t,r,i,a,o,l){return wn.apply(this,arguments)}function wn(){return wn=(0,F.Z)((0,z.Z)().mark((function e(n,t,r,i,a,o,s,u){var c,d,f,p,v,h,g,m,x,b,y,Z,w,S,j,k,C,T,_,I,D,N,M,E,R,O,L,V;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(p=ke(n,a,i),v=p.time,h=q.Z.getState(),g=h.debugMode,"traces"===n&&("trace-search"===s&&(null===t||void 0===t||null===(m=t.data)||void 0===m||null===(x=m.traces)||void 0===x?void 0:x.length)>0&&fn({result:t.data.traces||[],raw:t.data,time:v,debugMode:g,dispatch:r,dsType:n,type:n,panel:i,open:!0,id:a,ts:Date.now(),queryType:s}),(null===t||void 0===t||null===(b=t.data)||void 0===b||null===(y=b.resourceSpans)||void 0===y?void 0:y.length)>0&&fn({result:(null===t||void 0===t?void 0:t.data)||[],raw:null===t||void 0===t?void 0:t.data,time:v,debugMode:g,dispatch:r,type:n,dsType:n,panel:i,open:!0,id:a,ts:Date.now(),queryType:s})),"flux"!==n){e.next=6;break}return e.next=6,mn(null===t||void 0===t?void 0:t.data).then((function(e){var t;(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.length)>0&&fn({result:e.data||[],raw:null===e||void 0===e?void 0:e.data,time:v,debugMode:g,queryType:s,dispatch:r,dsType:n,type:n,panel:i,open:!0,id:a,ts:Date.now(),direction:o})}));case 6:0===(null===t||void 0===t||null===(c=t.data)||void 0===c||null===(d=c.streams)||void 0===d?void 0:d.length)&&(fn({result:[],raw:"[]",time:v,debugMode:g,queryType:s,dispatch:r,open:!0,type:"streams",dsType:n,panel:i,id:a,ts:Date.now(),direction:o,isLogsVolume:u}),r(A(!0))),null!==t&&void 0!==t&&null!==(f=t.data)&&void 0!==f&&f.data?(N=null===t||void 0===t||null===(Z=t.data)||void 0===Z||null===(w=Z.data)||void 0===w?void 0:w.result,M=null===t||void 0===t||null===(S=t.data)||void 0===S||null===(j=S.data)||void 0===j?void 0:j.resultType,E={hasStats:!1,statsData:{}},null!==t&&void 0!==t&&null!==(k=t.data)&&void 0!==k&&null!==(C=k.data)&&void 0!==C&&C.stats&&(null===(T=Object.keys(null===t||void 0===t||null===(_=t.data)||void 0===_||null===(I=_.data)||void 0===I?void 0:I.stats))||void 0===T?void 0:T.length)>0&&(E={hasStats:!0,statsData:(0,l.Z)({},null===t||void 0===t||null===(R=t.data)||void 0===R||null===(O=R.data)||void 0===O?void 0:O.stats)}),L=q.Z.getState()[i],V=null===L||void 0===L?void 0:L.map((function(e){var n,t;return e.id===a?(0,l.Z)((0,l.Z)({},e),{},{hasStats:(null===(n=E)||void 0===n?void 0:n.hasStats)||!1,statsData:(null===(t=E)||void 0===t?void 0:t.statsData)||{},open:!0}):e})),r(bn(i,V)),r(vn(n)),fn({result:N,raw:null===t||void 0===t||null===(D=t.data)||void 0===D?void 0:D.data,time:v,debugMode:g,queryType:s,dispatch:r,type:M,dsType:n,open:!0,panel:i,id:a,ts:Date.now(),direction:o,isLogsVolume:u})):Ce(r);case 8:case"end":return e.stop()}}),e)}))),wn.apply(this,arguments)}var Sn=t(70804);function jn(e){var n=e.match(/\[(.*?)\]/gm),t=(null===n||void 0===n?void 0:n[0].replace(/\[\]']+/g,"").trim())||"",r=0;if(Array.isArray(n)){var i,a,o,l=t.match((0,Sn.Z)(/^([0-9.]+)(ns|us|ms|s|m|h)?$/,{tnum:1,trange:2})),s=("string"===typeof(null===l||void 0===l||null===(i=l.groups)||void 0===i?void 0:i.tnum)?parseInt(null===l||void 0===l||null===(a=l.groups)||void 0===a?void 0:a.tnum):1)/function(e){var n=/^(ns|us|ms|s|m|h)$/,t={ns:1e9,us:1e6,s:1,m:1/60,h:1/3600},r=new Map(Object.entries(t));return n.test(e)&&"string"===typeof e?r.get(e)||1/60:r.get("m")||1/60}((null===l||void 0===l||null===(o=l.groups)||void 0===o?void 0:o.trange)||"m");r=s}return r}function kn(e,n){window.bosco.send(e,n)}function Cn(e,n,t,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"backwards",u=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"",d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,f=arguments.length>10&&void 0!==arguments[10]&&arguments[10],p={url:"",requestHeaders:{},method:{value:""},headers:[],auth:{method:{value:"GET"},basicAuth:{value:!0},fields:{basicAuth:[{name:"user",value:""},{name:"password",value:""}]}},hasSettings:!1},v="",h="";if(""!==u){var g,b,y,Z,w,S,j=q.Z.getState().dataSources,k=j.find((function(e){return e.id===u}));if(k&&(null===(g=Object.keys(k))||void 0===g?void 0:g.length)>0){var C=j.find((function(e){return e.id===u})),T=""!==p.url?p.url:C.url;p=(0,l.Z)((0,l.Z)({},C),{},{url:T,hasSettings:!0})}if((null===(b=p)||void 0===b||null===(y=b.headers)||void 0===y?void 0:y.length)>0){var _,I={},D=(0,s.Z)(p.headers);try{for(D.s();!(_=D.n()).done;){var N=_.value,M=(0,B.Z)({},String(N.header),N.value);I=(0,l.Z)((0,l.Z)({},I),M)}}catch(ne){D.e(ne)}finally{D.f()}p.requestHeaders=I||{}}if(null!==(Z=p)&&void 0!==Z&&null!==(w=Z.auth)&&void 0!==w&&null!==(S=w.basicAuth)&&void 0!==S&&S.value){var E,R,O,L,V=null===(E=p)||void 0===E||null===(R=E.auth)||void 0===R||null===(O=R.fields)||void 0===O?void 0:O.basicAuth,Q={username:"",password:""},W=(0,s.Z)(V);try{for(W.s();!(L=W.n()).done;){var U=L.value;"user"===(null===U||void 0===U?void 0:U.name)&&(Q.username=U.value,v=U.value),"password"===(null===U||void 0===U?void 0:U.name)&&(Q.password=U.value,h=U.value)}}catch(ne){W.e(ne)}finally{W.f()}p.requestHeaders=(0,l.Z)({},p.requestHeaders)}}var J=function(e,n){var t=q.Z.getState()[i];!function(e,n,t){"left"===e?n(m(t)):"right"===e&&n(x(t))}(i,e,function(e,n,t){return(0,H.Z)(e).map((function(e){return e.id===n?(0,l.Z)((0,l.Z)({},e),{},{loading:t||!1}):e}))}(t,a,n))},G=q.Z.getState().debugMode,K=function(e,n){var t,r=(null===(t=Object.keys(n))||void 0===t?void 0:t.length)>0?n:void 0;return"flux"===e?{method:"POST",headers:r||{Accept:"application/csv","Content-Type":"application/vnd.flux"}}:{method:"GET",headers:r||{"Content-Type":"application/json"}}}(e,p.requestHeaders),Y=jn(n),X=function(e,n,t,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6?arguments[6]:void 0,l=arguments.length>7?arguments[7]:void 0,s=arguments.length>8?arguments[8]:void 0,u=arguments.length>9?arguments[9]:void 0,c=arguments.length>10?arguments[10]:void 0,d=q.Z.getState().isSplit?2:1,f=window.innerWidth,p=ke(e,u,c),v=p.parsedTime,h=p.time,g=a,m=0;0===(m=s>0?s:f/Math.round(f/r*10/d))&&(m=1);var x="&step=".concat(m),b="".concat(encodeURIComponent(n)),y="";switch(e){case"logs":default:y="".concat(g,"/loki/api/v1");break;case"metrics":y="".concat(g,"/api/v1");break;case"flux":y="".concat(g,"/api/v2/query");break;case"traces":y="trace-search"===o?"".concat(l):"".concat(g,"/api/traces/").concat(n,"/json")}return{queryUrl:y,encodedQuery:b,parsedTime:v,time:h,queryStep:x,limit:t,direction:i,queryType:o}}(e,n,r,Y,o,p.url||"",t,c,d,a,i),$=function(e,n,t){return function(e,n,t){var r=n.queryUrl,i=n.encodedQuery,a=n.limit,o=n.parsedTime,l=n.queryStep,s=n.direction,u=n.time;return"metrics"===e||"logs"===e?"instant"===t?"".concat(r,"/query?query=").concat(i,"&limit=").concat(a,"&time=").concat(u,"&direction=").concat(s):"".concat(r,"/query_range?query=").concat(i,"&limit=").concat(a).concat(o).concat(l,"&direction=").concat(s):"flux"===e?"".concat(r):"traces"===e?"trace-search"===t?"".concat(r).concat(o):"".concat(r):""}(e,t,n)}(e,t,X),ee=function(e,n){var t,r=null===(t=q.Z.getState())||void 0===t?void 0:t["".concat(i,"DataView")],o=null===r||void 0===r?void 0:r.find((function(e){return e.id===a}));o&&(o.loading=e),function(e,n,t){t("left"===e?qe(n):Ae(n))}(i,r,n)};return function(){var r=(0,F.Z)((0,z.Z)().mark((function r(s){var u,d,p;return(0,z.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(ee(!0,s),J(s,!0),""!==c){r.next=6;break}return"trace-search"===t&&yn(e,s,i,a,o,t),J(s,!1),r.abrupt("return");case 6:if(""!==n||"trace-search"===t){r.next=10;break}return"traces"===e&&yn(e,s,i,a,o,t),J(s,!1),r.abrupt("return");case 10:if("undefined"!=typeof u&&u.cancel("Cancelling the previous request"),u=P.Z.CancelToken.source(),K.cancelToken=u.token,r.prev=13,"POST"!==(null===K||void 0===K?void 0:K.method)){r.next=19;break}return r.next=17,null===P.Z||void 0===P.Z||null===(d=P.Z.post($,n,K))||void 0===d?void 0:d.then((function(n){Zn(e,n,s,i,a,o,t)})).catch((function(e){Ce(s),s(A(!0)),ee(!1,s),G&&console.log("Error loading flux data",e)})).finally((function(){ee(!1,s),J(s,!1)}));case 17:r.next=22;break;case 19:if("GET"!==(null===K||void 0===K?void 0:K.method)){r.next=22;break}return r.next=22,null===P.Z||void 0===P.Z||null===(p=P.Z.get($,(0,l.Z)({auth:{username:v,password:h}},K)))||void 0===p?void 0:p.then((function(n){Zn(e,n||{data:{data:[]}},s,i,a,o,t,f),G&&kn({level:"info",id:a,type:e,direction:o},a),J(s,!1)})).catch((function(n){Ce(s),s(A(!0)),ee(!1,s),J(s,!1),G&&(kn({level:"error",id:a,type:e,direction:o},a),console.log("getting an error from response: ",n))})).finally((function(){J(s,!1),ee(!1,s)}));case 22:r.next=28;break;case 24:r.prev=24,r.t0=r.catch(13),J(s,!1),console.log(r.t0);case 28:case"end":return r.stop()}}),r,null,[[13,24]])})));return function(e){return r.apply(this,arguments)}}()}var Tn,_n,In,Dn,Nn,Mn,En,Rn,On,Ln,Vn,zn,Fn,Bn,Hn,Pn,qn,An,Qn,Wn,Un,Jn,Gn,Kn,Yn,Xn,$n,et,nt,tt,rt,it,at,ot=function(e){return function(n){n({type:"SET_HISTORY_OPEN",historyOpen:e})}},lt=t(56410),st=t(96217),ut=t(68816),ct=t(78941),dt=t(52586),ft=t(9165),pt=t(72106),vt=t(72191),ht=t(61729),gt=t(77782),mt=t(65726),xt=t(22166),bt=t(66859),yt=t(61113),Zt=t(8454),wt=t(30735),St=t(41801),jt=t(14606),kt=t(81543),Ct=t(55863),Tt=t(38167),_t=t(36240),It=t(57983),Dt=t(42361),Nt=t(73696),Mt=t(33947),Et=t(64864),Rt=t(48644),Ot=((0,St.Z)(Et.z)(Tn||(Tn=(0,r.Z)(["\n    background: none;\n    border: none;\n    display: flex;\n    height: 26px;\n    color: ",";\n    cursor: pointer;\n"])),(function(e){return e.isActive?e.theme.inputTextFocus:e.theme.textColor})),St.Z.div(_n||(_n=(0,r.Z)(["\n    display: flex;\n    justify-content: space-between;\n    padding: 10px 7px 4px 5px;\n    background: ",";\n"])),(function(e){return e.theme.widgetContainer})),St.Z.div(In||(In=(0,r.Z)(["\n    display: flex;\n    align-items: center;\n    .selector {\n        margin-left: 10px;\n        .label {\n            flex: 1;\n            color: ",";\n            padding: 4px 8px;\n            font-size: 12px;\n            text-transform: uppercase;\n            background: ",";\n            border-radius: 4px;\n            white-space: nowrap;\n        }\n    }\n    input {\n        color: ",";\n        background: ",";\n        border: none;\n        outline: none;\n        padding: 4px 8px;\n        font-size: 1em;\n        border-radius: 3px;\n        line-height: 1.5;\n        margin: 0px 5px;\n        &:focus {\n            color: orange;\n        }\n        &.limit {\n            width: 50px;\n        }\n\n        &.date-time-range {\n            width: 120px;\n        }\n    }\n"])),(function(e){return e.theme.inputLabelColor}),(function(e){return e.theme.inputLabelBg}),(function(e){return e.theme.textColor}),(function(e){return e.theme.inputBg})),St.Z.div(Dn||(Dn=(0,r.Z)(["\n    display: flex;\n    align-items: center;\n    margin-left: 20px;\n    display: flex;\n    align-items: center;\n    transition: 0.2s all;\n    height: 26px;\n    .selector {\n        margin-left: 10px;\n        .label {\n            flex: 1;\n            color: ",";\n            padding: 4px 8px;\n            font-size: 12px;\n            text-transform: uppercase;\n            background: ",";\n            border-radius: 4px;\n            white-space: nowrap;\n        }\n        .input {\n            background: ",";\n        }\n    }\n    & div {\n        display: flex;\n        align-items: center;\n    }\n"])),(function(e){return e.theme.inputLabelColor}),(function(e){return e.theme.mainBgColor}),(function(e){return e.theme.inputLabelBg})),(0,St.Z)(Et.z)(Nn||(Nn=(0,r.Z)(["\n    background: ",";\n    border: 1px solid ",";\n    color: ",";\n    text-overflow: ellipsis;\n    transition: 0.2s all;\n    display:flex;\n    align-items:center;\n    height: 26px;\n    &:hover {\n        background: ",";\n    }\n    span {\n        margin:0;\n        padding:0;\n        @media screen and (max-width: 565px) {\n        display: none;\n        }\n    }\n"])),(function(e){return e.theme.buttonDefault}),(function(e){return e.theme.buttonBorder}),(function(e){return e.theme.textColor}),(function(e){return e.theme.buttonHover})),(0,St.Z)(Rt.K)(Mn||(Mn=(0,r.Z)(["\n    color: ",";\n    background: ",";\n    border: 1px solid ",";\n    height: 18px;\n    margin-right: 4px;\n    &:focus {\n        color: orange;\n    }\n"])),(function(e){return e.theme.textColor}),(function(e){return e.theme.inputBg}),(function(e){return e.theme.buttonBorder})),(0,St.Z)(Et.z)(En||(En=(0,r.Z)(["\n    background: ",";\n    border: 1px solid ",";\n    color: ",";\n    border-radius: 3px;\n    height: 26px;\n    margin:0px 1px;\n    padding: ",";\n    span {\n        margin-left: 5px;\n    }\n    svg {\n        margin: 0;\n        padding: 0;\n    }\n    &:hover {\n        color: orange;\n    }\n"])),(function(e){return e.theme.buttonDefault}),(function(e){return e.theme.buttonBorder}),(function(e){return e.theme.textColor}),(function(e){return"small"===e.size?"3px 5px":""}))),Lt=((0,St.Z)(Ot)(Rn||(Rn=(0,r.Z)(["\n    background: ",";\n    color: ",";\n    cursor: ",";\n    text-overflow: ellipsis;\n    transition: 0.2s all;\n    height: 26px;\n    span {\n        margin-left: 4px;\n        color: ",";\n        @media screen and (max-width: 565px) {\n        display: none;\n    }\n    }\n    &:hover {\n        background: ",";\n    }\n    \n"])),(function(e){return e.theme.buttonDefault}),(function(e){var n=e.isActive,t=e.theme;return n?"orange":t.textColor}),(function(e){return e.isActive?"pointer":"not-allowed"}),(function(e){return e.theme.textColor}),(function(e){return e.theme.buttonHover})),(0,St.Z)((function(e){return(0,ze.jsx)(Mt.ZP,(0,l.Z)({anchor:"bottom",style:{maxHeight:"250px"},variant:"persistent"},e))}))((function(e){var n=e.theme;return{"& .MuiPaper-root":{borderTop:"1px solid ".concat(n.buttonBorder)}}}))),Vt=(0,St.Z)(vt.Z)(On||(On=(0,r.Z)(['\n    height: "320px";\n    background: ',";\n"])),(function(e){return e.theme.inputBg})),zt=(0,St.Z)(kt.Z)(Ln||(Ln=(0,r.Z)(["\n    color: ",";\n    background: ",";\n    border:1px solid ",";\n    cursor: pointer;\n    font-size: 13px;\n    background-color: transparent;\n    padding: 6px 10px;\n    border: none;\n    border-radius: 3px 3px 0px 0px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border-bottom: 1px solid transparent;\n    transition: 0.2s all;\n\n    &:hover {\n        background-color: ",";\n    }\n\n    &:focus {\n        color: ",";\n        background: ",";\n        border-radius: 3px 3px 0px 0px;\n\n        outline-offset: 2px;\n    }\n\n    &."," {\n        border-bottom: 1px solid ",";\n    }\n\n    &."," {\n        opacity: 0.5;\n        cursor: not-allowed;\n    }\n    @media screen and (max-width: 360px) {\n        span {\n            display: none;\n        }\n        padding: 5px 20px;\n    }\n"])),(function(e){return e.theme.textColor}),(function(e){return e.theme.buttonDefault}),(function(e){return e.theme.buttonBorder}),(function(e){return e.theme.buttonHover}),(function(e){return e.theme.textColor}),(function(e){return e.theme.buttonDefault}),Ct.Z.selected,(function(e){return e.theme.primaryDark}),jt.Z.disabled),Ft=(0,St.Z)(_t.Z)(Vn||(Vn=(0,r.Z)(["\n    height: 16px;\n    width: 16px;\n    margin-right: 3px;\n"]))),Bt=(0,St.Z)(ct.Z)(zn||(zn=(0,r.Z)(["\n    height: 16px;\n    width: 16px;\n    margin-right: 3px;\n"]))),Ht=(0,St.Z)(Tt.Z)(Fn||(Fn=(0,r.Z)(["\n    height: 16px;\n    width: 16px;\n    margin-right: 3px;\n"]))),Pt=(0,St.Z)(ft.Z)(Bn||(Bn=(0,r.Z)(["\n    height: 16px;\n    width: 16px;\n    margin-right: 3px;\n"]))),qt=(0,St.Z)(It.Z)(Hn||(Hn=(0,r.Z)(["\n    height: 21px;\n    width: 16px;\n    padding: 0px 3px;\n    border-radius: 3px 0px 0px 3px;\n    background: ",";\n"])),(function(e){return e.theme.inputBg})),At=St.Z.div(Pn||(Pn=(0,r.Z)(["\n    padding: 0px 15px;\n    font-size: 13px;\n    display: flex;\n    align-items: center;\n    color: ",";\n    justify-content: space-between;\n    background: ",";\n    height: 37px;\n"])),(function(e){return e.theme.textColor}),(function(e){return e.theme.tabHeader})),Qt=(0,St.Z)(Nt.Z)(qn||(qn=(0,r.Z)(["\n    width: 100%;\n    background: ",";\n"])),(function(e){return e.theme.widgetContainer})),Wt=(0,St.Z)(Dt.Z)(An||(An=(0,r.Z)(["\n    min-width: 320px;\n    background: ",";\n    border-bottom: 4px solid ",";\n    display: flex;\n    align-items: center;\n    align-content: space-between;\n"])),(function(e){return e.theme.tabHeader}),(function(e){return e.theme.historyRow})),Ut=St.Z.div(Qn||(Qn=(0,r.Z)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    color: ",";\n    font-size: 14px;\n    flex: 1;\n    padding: 20px;\n    height: 50%;\n"])),(function(e){return e.theme.textColor})),Jt=St.Z.div(Wn||(Wn=(0,r.Z)(["\n    height: 250px;\n    overflow-y: auto;\n    color: ",";\n    background: ",";\n    &.starredCont {\n        height: 210px;\n    }\n    &::-webkit-scrollbar {\n        width: 5px;\n        background: ",";\n    }\n    &::-webkit-scrollbar-corner {\n        background: transparent;\n      }\n    &::-webkit-scrollbar-thumb {\n        border-radius: 5px;\n        background: ",";\n    }\n"])),(function(e){return e.theme.textColor}),(function(e){return e.theme.tabBg}),(function(e){return e.theme.buttonDefault}),(function(e){return e.theme.scrollbarThumb})),Gt=(0,St.Z)(Ot)(Un||(Un=(0,r.Z)(["\n    padding: 3px 6px;\n    background: ",";\n    border: 1px solid ",";\n    border-radius: 3px;\n    border: none;\n    color: ",";\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    margin: 0px 6px;\n    cursor: pointer;\n    min-height: 20px;\n"])),(function(e){return e.theme.buttonDefault}),(function(e){return e.theme.buttonBorder}),(function(e){return e.theme.textColor})),Kt=St.Z.div(Jn||(Jn=(0,r.Z)(["\n    height: 100px;\n    width: 240px;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    padding: 20px;\n    background: ",";\n    border:1px solid ",";\n    margin: 10px;\n    border-radius: 3px;\n    & div {\n        font-size: 15px;\n        color: ",";\n        line-height: 1.5;\n    }\n    & small {\n        font-size: 12px;\n        color: ",";\n        line-height: 1.5;\n        margin-bottom: 10px;\n    }\n"])),(function(e){return e.theme.buttonDefault}),(function(e){return e.theme.buttonBorder}),(function(e){return e.theme.textPrimaryAccent}),(function(e){return e.theme.textColor})),Yt=(0,St.Z)(Gt)(Gn||(Gn=(0,r.Z)(["\n    background: ",";\n    color: ",";\n    white-space: nowrap;\n    .open-icon {\n        display: none;\n    }\n    .open-text {\n        display: flex;\n        font-size: 12px;\n    }\n    @media screen and (max-width: 1070px) {\n        .open-icon {\n            display: flex;\n        }\n        .open-text {\n            display: none;\n            \n        }\n    }\n"])),(function(e){return e.theme.primaryDark}),(function(e){return e.theme.buttonText})),Xt=(0,St.Z)(Gt)(Kn||(Kn=(0,r.Z)(["\n    font-weight: bold;\n    padding: 10px 20px;\n    background: ",";\n    color: ",";\n    margin: 0;\n    width: 100%;\n    white-space: nowrap;\n"])),(function(e){return e.theme.primaryDark}),(function(e){return e.theme.buttonText})),$t=(0,St.Z)(Gt)(Yn||(Yn=(0,r.Z)(["\n    background: none;\n    color: ",";\n\n    position: absolute;\n    right: 0;\n"])),(function(e){return e.theme.textColor})),er=(0,St.Z)(Gt)(Xn||(Xn=(0,r.Z)(["\n    background: ",";\n    border:1px solid ",";\n    padding: 8px 16px;\n"])),(function(e){return e.theme.buttonDefault}),(function(e){return e.theme.buttonBorder})),nr=(0,St.Z)(Gt)($n||($n=(0,r.Z)(["\n    background: ",";\n    color:",";\n    padding: 8px 16px;\n"])),(function(e){return e.theme.primaryDark}),(function(e){return e.theme.buttonText})),tr=St.Z.input(et||(et=(0,r.Z)(["\n    color: ",";\n    background: ",";\n    border:none;\n    height: 21px;\n    margin: 0px 10px 0px 0px;\n    padding: 0px;\n    font-size: 13px;\n    border-radius: 0px 3px 3px 0px;\n    font-family: monospace;\n    font-size: 12px;\n    &:focus {\n        outline: none;\n        color: ",";\n    }\n"])),(function(e){return e.theme.textColor}),(function(e){return e.theme.inputBg}),(function(e){return e.theme.inputTextFocus})),rr=St.Z.span(nt||(nt=(0,r.Z)(['\n    flex: 1;\n    font-family: monospace;\n    display:flex;\n    align-items: center;\n    font-size: "13px";\n    color: ',";\n    white-space: nowrap;\n    padding: 4px 0px;\n    overflow: hidden;\n    text-overflow: ellipsis;\n"])),(function(e){return e.theme.textColor})),ir=St.Z.div(tt||(tt=(0,r.Z)(["\n    display: flex;\n    flex: 1;\n    justify-content: space-between;\n    .open-button {\n        display: none;\n    }\n    .inline-params {\n        align-items: center;\n        display: ",";\n        flex: 1;\n        grid-template-columns: 1fr 0.25fr 0.25fr auto;\n        margin-right: 5px;\n    }\n\n    .open-button {\n        display: flex;\n        color: ",";\n        background: none;\n        border: none;\n    }\n    .block-params {\n        display: ",";\n        flex-direction: column;\n        flex: 1;\n        p {\n            display: flex;\n            align-items: center;\n            flex: 1;\n            line-height: 1.5;\n            font-size: 12px;\n            font-family: monospace;\n            span {\n                margin-left: 3px;\n                &.key {\n                    flex: 1;\n                }\n                &.value {\n                    flex: 3;\n                }\n            }\n        }\n    }\n    @media screen and (max-width: 1070px) {\n        .inline-params {\n            display: none;\n        }\n    }\n"])),(function(e){return e.open?"none":"grid"}),(function(e){return e.theme.buttonText}),(function(e){return e.open?"flex":"none"})),ar=St.Z.div(rt||(rt=(0,r.Z)(["\n    padding: 5px 0px;\n    padding-left: 10px;\n    border: 1px solid ",";\n    margin: 5px;\n    border-radius: 3px;\n    font-size: 13px;\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n"])),(function(e){return e.theme.historyRow})),or=St.Z.div(it||(it=(0,r.Z)(["\n    @media screen and (max-width: 1370px) {\n        display: none;\n    }\n"]))),lr=t(66149),sr=t(33604),ur=t(96467),cr=t(97762),dr=t(4117),fr=t(45859),pr=t(79727),vr=t(43262),hr=St.Z.div(at||(at=(0,r.Z)(["\n    background: ",";\n    #alert-dialog-title {\n        color: ",";\n    }\n    #alert-dialog-description {\n        color: ",";\n        font-weight: normal;\n    }\n"])),(function(e){return e.theme.widgetContainer}),(function(e){return e.theme.textColor}),(function(e){return e.theme.textOff}));function gr(e){var n=e.clearHistory,t=e.dialogType,r=(0,f.useState)(!1),i=(0,u.Z)(r,2),a=i[0],o=i[1],l=(0,vr.Fg)(),s=function(){o(!1)};return(0,ze.jsx)(fr.Z,{theme:l,children:(0,ze.jsxs)("div",{children:[(0,ze.jsx)(D.Z,{title:"Clear Query History",children:(0,ze.jsx)(Xt,{onClick:function(){o(!0)},children:"Clear History"})}),(0,ze.jsx)(lr.Z,{open:a,onClose:s,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",PaperProps:{classes:{root:pr.ht}},children:(0,ze.jsxs)(hr,{children:[(0,ze.jsxs)(sr.Z,{id:"alert-dialog-title",children:["Are you sure you want to clear the ",t," ","History?"]}),(0,ze.jsx)(ur.Z,{children:(0,ze.jsxs)(cr.Z,{id:"alert-dialog-description",children:["Click \u2018Clear History\u2019 to delete your"," ",t," history permanently"]})}),(0,ze.jsxs)(dr.Z,{children:[(0,ze.jsx)(er,{onClick:s,children:"Cancel"}),(0,ze.jsx)(nr,{onClick:function(){n(),o(!1)},autoFocus:!0,children:"Clear History"})]})]})})]})})}function mr(e){var n=e.message;return(0,ze.jsx)(Ut,{children:n})}var xr=t(11198);function br(e){var n=e.onClose;return(0,ze.jsx)($t,{onClick:n,children:(0,ze.jsx)(xr.Z,{style:{height:"16px",width:"16px"}})})}var yr,Zr,wr,Sr,jr,kr,Cr,Tr,_r=t(62424),Ir=t(403),Dr=t(83618),Nr=t(50567),Mr=t(88620),Er=t(47347),Rr=t(82395),Or=t(70501),Lr=t(9019),Vr=t(70943),zr=t(93345),Fr=t(80038),Br=t(8885),Hr=t(39231),Pr=t(94836),qr=t(47131),Ar=t(89790),Qr=t(54045),Wr=t(68659),Ur=t(20644),Jr=t(87910),Gr=t(8121),Kr=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"],Yr=["Su","Mo","Tu","We","Th","Fr","Sa"],Xr={FIRST_MONTH:Symbol("firstMonth"),SECOND_MONTH:Symbol("secondMonth")},$r="dateTimeRange",ei=t(68658),ni=q.Z.getState().theme,ti=Le.n[ni],ri=function(){var e=q.Z.getState().theme;return(0,ei.Z)({palette:{mode:e,primary:{main:ti.textColor}}})},ii=St.Z.select(yr||(yr=(0,r.Z)(["\n    cursor: pointer;\n    position: relative;\n    font-size: 14px;\n    color: ",";\n    background: ",";\n    border: none;\n    border-radius: 3px;\n    padding: 4px 8px;\n    line-height: 20px;\n    flex: 1;\n    &::-webkit-scrollbar {\n        width: 5px;\n        background: ",";\n    }\n    &::-webkit-scrollbar-corner {\n        background: transparent;\n    }\n\n    &::-webkit-scrollbar-thumb {\n        border-radius: 5px;\n        background: ",";\n    }\n"])),(function(e){return e.theme.textColor}),(function(e){return e.theme.inputBg}),(function(e){return e.theme.inputBg}),(function(e){return e.theme.scrollbarThumb})),ai=(0,Br.Z)((function(){return(0,Fr.Z)({iconContainer:{padding:5,color:ti.textColor},icon:{padding:10,color:ti.textColor,"&:hover":{color:ti.textColor,background:"none"}},selector:{color:ti.textColor,borderBottom:"1px solid ".concat(ti.textColor)}})}))((function(e){var n=e.date,t=e.classes,r=e.setDate,i=e.nextDisabled,a=e.prevDisabled,o=e.onClickNext,l=e.onClickPrevious,s=(0,vr.Fg)();return(0,ze.jsx)(fr.Z,{theme:s,children:(0,ze.jsxs)(Lr.ZP,{container:!0,justifyContent:"space-between",alignItems:"center",style:{marginTop:"20px"},children:[(0,ze.jsx)(Lr.ZP,{item:!0,className:t.iconContainer,children:(0,ze.jsx)(qr.Z,{disabled:a,onClick:l,children:(0,ze.jsx)(Ar.Z,{style:{color:a?s.textOff:s.textColor}})})}),(0,ze.jsx)(Lr.ZP,{item:!0,children:(0,ze.jsx)(ii,{value:(0,Jr.Z)(n),onChange:function(e){r((0,Wr.Z)(n,parseInt(e.target.value)))},children:Kr.map((function(e,n){return(0,ze.jsx)("option",{value:n,children:e},e)}))})}),(0,ze.jsx)(Lr.ZP,{item:!0,children:(0,ze.jsx)(ii,{value:(0,Gr.Z)(n),onChange:function(e){r((0,Ur.Z)(n,parseInt(e.target.value)))},children:ge(n,30).map((function(e){return(0,ze.jsx)("option",{className:"custom-option",value:e,children:e},e)}))})}),(0,ze.jsx)(Lr.ZP,{item:!0,className:t.iconContainer,children:(0,ze.jsx)(qr.Z,{disabled:i,onClick:o,children:(0,ze.jsx)(Qr.Z,{style:{color:i?s.textOff:s.textColor}})})})]})})})),oi=(0,Br.Z)((function(){return(0,Fr.Z)({leftBorderRadius:{borderRadius:"50% 0 0 50%"},rightBorderRadius:{borderRadius:"0 50% 50% 0"},buttonContainer:{display:"flex"},button:{height:30,width:30,padding:0},inactive:{color:"gray"},outlined:{border:"1px solid #11abab"},buttonText:{lineHeight:1.6,color:"primary"},filled:{"&:hover":{backgroundColor:"#11abab",color:"text.primary"},backgroundColor:"#11abab",color:"text.primary"},highlighted:{backgroundColor:"#14b8b852"},contrast:{color:"text.primary"}})}))((function(e){var n=e.classes;return(0,ze.jsx)(I.a,{theme:ri,children:(0,ze.jsx)("div",{className:fe(n.buttonContainer,e.startOfRange&&n.leftBorderRadius,e.endOfRange&&n.rightBorderRadius,!e.disabled&&e.highlighted&&n.highlighted,e.disabled&&n.disabled),children:(0,ze.jsx)(qr.Z,{className:fe(n.button,!e.disabled&&e.outlined&&n.outlined,!e.disabled&&e.filled&&n.filled),disabled:e.disabled,onClick:e.onClick,onMouseOver:e.onHover,children:(0,ze.jsx)(yt.Z,{color:e.disabled?"text.secondary":"text.primary",className:fe(n.buttonText,!e.disabled&&e.filled&&n.contrast,e.disabled&&n.inactive),variant:"body2",children:e.value})})})})})),li=-1,si=1,ui=(0,Br.Z)((function(e){return(0,Fr.Z)({root:{width:260,background:e.mainBgColor},weekDaysContainer:{marginTop:5,paddingLeft:30,paddingRight:30},daysContainer:{paddingLeft:15,paddingRight:15,marginTop:10,marginBottom:20}})}))((function(e){var n,t,r=(0,vr.Fg)(),i=(0,f.useState)(r),a=(0,u.Z)(i,2),o=a[0],l=a[1],s=e.classes,c=e.helpers,d=e.handlers,p=e.value,v=e.dateRange,h=e.marker,g=e.setValue,m=e.minDate,x=e.maxDate,b=(0,u.Z)(e.navState,2),y=b[0],Z=b[1];return(0,f.useEffect)((function(){l(r)}),[r,l]),(0,ze.jsx)(I.a,{theme:r,children:(0,ze.jsx)(Or.Z,{square:!0,elevation:0,className:s.root,style:{background:r.mainBgColor},children:(0,ze.jsxs)(Lr.ZP,{container:!0,children:[(0,ze.jsx)(ai,{date:p,setDate:g,nextDisabled:!Z,prevDisabled:!y,onClickPrevious:function(){return d.onMonthNavigate(h,li)},onClickNext:function(){return d.onMonthNavigate(h,si)}}),(0,ze.jsx)(Lr.ZP,{item:!0,container:!0,direction:"row",justifyContent:"space-between",className:s.weekDaysContainer,children:Yr.map((function(e){return(0,ze.jsx)("div",{style:{color:r.textColor,fontSize:"10px"},children:e},e)}))}),(0,ze.jsx)(Lr.ZP,{item:!0,container:!0,direction:"column",justifyContent:"space-between",className:s.daysContainer,children:(n=pe(p),t=7,Array.from({length:Math.ceil(n.length/t)},(function(e,r){return n.slice(r*t,r*t+t)}))).map((function(e,n){return(0,ze.jsx)(Lr.ZP,{container:!0,direction:"row",justifyContent:"center",children:e.map((function(e){var n=function(e,n){var t=e.dateStart;return t&&(0,Y.Z)(n,t)}(v,e),t=function(e,n){var t=e.dateEnd;return t&&(0,Y.Z)(n,t)}(v,e),r=function(e){var n=e.dateStart,t=e.dateEnd;return!(!n||!t)&&(0,Y.Z)(n,t)}(v),i=function(e,n){var t=e.dateStart,r=e.dateEnd;return t&&r&&((0,X.Z)(n,{start:t,end:r})||(0,Y.Z)(n,t)||(0,Y.Z)(n,r))}(v,e)||c.inHoverRange(e);return(0,ze.jsx)(oi,{themeSelected:o,filled:n||t,outlined:(0,Hr.Z)(e),highlighted:i&&!r,disabled:!(0,ie.Z)(p,e)||!(0,X.Z)(e,{start:m,end:x}),startOfRange:n&&!r,endOfRange:t&&!r,onClick:function(){return d.onDayClick(e)},onHover:function(){return d.onDayHover(e)},value:(0,Pr.Z)(e)},(0,lt.Z)(e,"mm-dd-yyyy"))}))},n)}))})]})})})})),ci=St.Z.div(Zr||(Zr=(0,r.Z)(["\n    display: flex;\n    flex-direction: column;\n    padding: 10px;\n    max-height: 250px;\n    overflow-y: auto;\n    flex: 1;\n    margin-top: 10px;\n    margin-bottom: 10px;\n    padding: 5px;\n    &::-webkit-scrollbar {\n        width: 5px;\n        background: ",";\n    }\n    &::-webkit-scrollbar-corner {\n        background: transparent;\n      }\n\n    &::-webkit-scrollbar-thumb {\n        border-radius: 5px;\n        background: ",";\n    }\n    button {\n        background: none;\n        text-align: left;\n        border: none;\n        padding: 10px;\n        line-height: 1.5;\n        border-radius: 3px;\n        font-size: 12px;\n        cursor: pointer;\n        &:hover {\n            background: ",";\n        }\n    }\n"])),(function(e){return e.theme.buttonHover}),(function(e){return e.theme.buttonDefault}),(function(e){return e.theme.buttonHover})),di=function(e){var n=(0,vr.Fg)();return(0,ze.jsx)(I.a,{theme:n,children:(0,ze.jsx)(ci,{children:e.ranges.map((function(t,r){return(0,ze.jsx)("button",{onClick:function(){e.setRange(t),e.onClose()},children:(0,ze.jsx)("span",{style:{fontWeight:me(t,e.selectedRange)?"bold":"normal",color:me(t,e.selectedRange)?"orange":n.textColor,whiteSpace:"nowrap"},children:t.label})},r)}))})})},fi=t(66713),pi=t(28165),vi=t(31238),hi=St.Z.div(wr||(wr=(0,r.Z)(["\n    display: ",";\n    flex-direction: column;\n    margin: 20px;\n    margin-top: 30px;\n    .time-selectors {\n        display: ",";\n        flex-direction: column;\n        margin-bottom: 15px;\n        .label {\n            font-size: 0.85em;\n            color: ",";\n            width: 50px;\n            margin-left: 5px;\n            margin-bottom: 5px;\n            white-space: nowrap;\n        }\n        .input-group {\n            display: flex;\n            margin-bottom: 20px;\n            input {\n                background:",";\n                color:",";\n            }\n            .date-time-ranged {\n                font-size: 14px;\n                width: 170px;\n                line-height: 20px;\n                border: 1px solid ",";\n                color: ",";\n                margin: 0;\n                padding: 0px 8px;\n                margin-right: 5px;\n                &:focus {\n                    border: 1px solid\n                        ",";\n                }\n            }\n        }\n    }\n"])),(function(e){return e.isDisplay?"flex":"none"}),(function(e){return e.isDisplay?"flex":"none"}),(function(e){return e.theme.inputLabelColor}),(function(e){return e.theme.inputBg}),(function(e){return e.theme.textColor}),(function(e){return e.theme.buttonHover}),(function(e){return e.theme.textColor}),(function(e){return e.theme.buttonDefault})),gi=(0,St.Z)(Et.z)(Sr||(Sr=(0,r.Z)(["\n    color: ",";\n    background: ",";\n    padding: 6px;\n    justify-content: center;\n    margin-top: 10px;\n    margin-bottom: 10px;\n    cursor: pointer;\n    &:hover {\n        background: ",";\n    }\n"])),(function(e){return e.theme.buttonText}),(function(e){return e.theme.primaryDark}),(function(e){return e.theme.primaryLight})),mi=(0,St.Z)(Et.z)(jr||(jr=(0,r.Z)(["\n    color: ",";\n    background: ",";\n    border: 1px solid ",";\n    padding: 8px;\n    &:hover {\n        background: ",";\n        color: ",";\n    }\n"])),(function(e){return e.theme.textColor}),(function(e){return e.theme.buttonDefault}),(function(e){return e.theme.buttonBorder}),(function(e){return e.theme.buttonHover}),(function(e){return e.theme.textColor}));function xi(e){var n=e.getEditedStartDate,t=e.getEditedEndDate,r=e.handleStart,i=e.handleStop,a=e.onTimeRangeSet,l=e.setCalendarOpen,s=e.isFullCalendar,u=e.setStopCalendar,c=e.setStartCalendar,d=e.startCalendarOpen,f=e.stopCalendarOpen,p=e.isHorizontal,v=e.styles,h=e.isMobile,g=(0,vi.F)();return(0,ze.jsx)(I.a,{theme:g,children:(0,ze.jsxs)(hi,{isDisplay:v,children:[(0,ze.jsxs)("div",{className:"time-selectors",children:[(0,ze.jsx)("span",{className:"label",children:"From"}),(0,ze.jsxs)("div",{className:"input-group",children:[(0,ze.jsx)("input",{className:"date-time-ranged",value:o().sanitize(n()),onChange:function(e){return r(e,!1)},onBlur:function(e){return r(e,!0)}}),(0,ze.jsx)(mi,{onClick:function(){s?l((function(e){return!e})):(l((function(e){return!e||!d})),u((function(){return!1})),c((function(e){return!e})))},children:(0,ze.jsx)(pi.Z,{style:{height:"16px",width:"16px"}})})]})]}),(0,ze.jsxs)("div",{className:"time-selectors",children:[(0,ze.jsx)("span",{className:"label",children:"To"}),(0,ze.jsxs)("div",{className:"input-group",children:[(0,ze.jsx)("input",{className:"date-time-ranged",value:o().sanitize(t()),onChange:function(e){return i(e,!1)},onBlur:function(e){return i(e,!0)}}),(0,ze.jsx)(mi,{onClick:function(){s?l((function(e){return!e})):(l((function(e){return!e||!f})),c((function(){return!1})),u((function(e){return!e})))},children:(0,ze.jsx)(pi.Z,{style:{height:"16px",width:"16px"}})})]})]}),(0,ze.jsx)(gi,{isHorizontal:p,isMobile:h,onClick:function(e){a(e)},children:"Apply Time Range"})]})})}var bi=St.Z.button(kr||(kr=(0,r.Z)(["\n    padding: 10px;\n    border-radius: 3px;\n    color: ",";\n    font-size: 1em;\n    border: none;\n    background: none;\n    display: flex;\n\n    cursor: pointer;\n    align-items: center;\n    justify-content: center;\n    margin-bottom: 10px;\n    &:hover {\n        background: #11111155;\n    }\n    span {\n        margin-right: 4px;\n        font-size: 12px;\n    }\n"])),(function(e){return e.theme.textPrimaryAccent})),yi=St.Z.div(Cr||(Cr=(0,r.Z)(["\n    position: absolute;\n    .header {\n        padding: 10px;\n        justify-content: space-between;\n    }\n    .headerItem {\n        text-align: center;\n    }\n    .dateComplete {\n        font-size: 0.85em;\n    }\n    .divider {\n        border-left: 1px solid action;\n        margin-bottom: 20;\n    }\n    .container {\n        position: relative;\n        z-index: 1000;\n        right: 75%; // this should be 100% by default\n        top: 30px;\n        display: flex;\n        flex-direction: column;\n        overflow-y: auto;\n        background: ",";\n    }\n    .applyButton {\n        color: white;\n        background: hsl(0, 0%, 31%);\n        border: 1px solid hsl(0, 0%, 31%);\n        padding: 6px 8px;\n        border-radius: 3px;\n        margin-left: 10px;\n        cursor: pointer;\n    }\n"])),(function(e){return e.theme.mainBgColor})),Zi=function(e){var n=e.ranges,t=e.dateRange,a=e.minDate,o=e.maxDate,s=e.firstMonth,c=e.setFirstMonth,d=e.secondMonth,p=e.setSecondMonth,h=e.setDateRange,g=e.helpers,m=e.handlers,x=(0,vr.Fg)(),b=(0,f.useState)(!1),y=(0,u.Z)(b,2),Z=y[0],w=y[1],S="Last 5 minutes",j=(new Date(Date.now()-3e5),new Date(Date.now()),(0,Vr.Z)(d,s)>=2),k={dateRange:t,minDate:a,maxDate:o,helpers:g,handlers:m},C=(0,i.I0)(),T=(0,f.useState)(t.dateStart),D=(0,u.Z)(T,2),N=D[0],M=D[1],E=(0,f.useState)(t.dateEnd),R=(0,u.Z)(E,2),O=R[0],L=R[1],V=(0,f.useState)(!0),z=(0,u.Z)(V,2),F=z[0],B=z[1],H=(0,f.useState)(t.label)||S,P=(0,u.Z)(H,1)[0],q=(0,_.useMediaQuery)({query:"(min-width: 1013px)"}),A=(0,_.useMediaQuery)({query:"(max-width: 1013px)"}),Q=(0,_.useMediaQuery)({query:"(orientation: portrait)"}),W=(0,i.v9)((function(e){return e.isSplit})),U=(0,f.useState)(!1),J=(0,u.Z)(U,2),K=J[0],Y=J[1],X=(0,f.useState)(!1),$=(0,u.Z)(X,2),ne=$[0],te=$[1];(0,f.useEffect)((function(){if(P){var e=ve(P);M(e.dateStart),L(e.dateEnd)}}),[L,M,P]);var re=function(e,n){e.preventDefault();var t=new Date(e.target.value);n&&(0,ee.Z)(t)?L(t):L(e.target.value)},ie=function(e,n){e.preventDefault();var t=new Date(e.target.value);n&&(0,ee.Z)(t)?M(t):M(e.target.value)},ae=function(n){n.preventDefault();var r=new Date(N),i=new Date(O);(0,Ir.Z)(r)&&!(0,zr.Z)(t.dateStart,r)&&(C((0,v.qv)(r)),M(r)),(0,ee.Z)(i)&&!(0,zr.Z)(t.dateEnd,i)&&(C((0,v.wW)(i)),L(i));var a=(0,ee.Z)(i)&&(0,Ir.Z)(r),o=(0,G.Z)(r,i),l=!(0,zr.Z)(t.dateStart,r)||!(0,zr.Z)(t.dateEnd,i);a&&o&&l?(C((0,v.Xn)("")),h({dateStart:r,dateEnd:i}),oe({dateStart:r,dateEnd:i}),e.onClose(n)):o||console.log("Invalid time range")},oe=function(e){localStorage.setItem($r,JSON.stringify(e))},le=function(){return(0,ee.Z)(N)?(0,lt.Z)(N,"yyy-MM-dd HH:mm:ss"):N},se=function(){return(0,ee.Z)(O)?(0,lt.Z)(O,"yyy-MM-dd HH:mm:ss"):"undefined"!==typeof O?O:""};return(0,ze.jsx)(I.a,{theme:x,children:(0,ze.jsx)(yi,{children:(0,ze.jsx)(Or.Z,{className:"container",elevation:5,children:(0,ze.jsxs)(Lr.ZP,{display:"flex",style:{flex:"1"},children:[Z&&q&&(0,ze.jsxs)(Lr.ZP,{container:!0,direction:"row",wrap:"nowrap",children:[(0,ze.jsx)(ui,(0,l.Z)((0,l.Z)({},k),{},{value:s,setValue:c,navState:[!0,j],marker:Xr.FIRST_MONTH})),(0,ze.jsx)("div",{className:"divider"}),(0,ze.jsx)(ui,(0,l.Z)((0,l.Z)({},k),{},{value:d,setValue:p,navState:[j,!0],marker:Xr.SECOND_MONTH}))]}),Z&&!q&&!Q&&!F&&!W&&(0,ze.jsxs)(Lr.ZP,{container:!0,direction:"row",wrap:"nowrap",children:[K&&(0,ze.jsx)(ui,(0,l.Z)((0,l.Z)({},k),{},{value:s,setValue:c,navState:[!0,j],marker:Xr.FIRST_MONTH})),ne&&(0,ze.jsx)(ui,(0,l.Z)((0,l.Z)({},k),{},{value:d,setValue:p,navState:[j,!0],marker:Xr.SECOND_MONTH}))]}),(0,ze.jsxs)(Lr.ZP,{display:"flex",flex:1,children:[(0,ze.jsxs)("div",{style:{display:"flex",flexDirection:"column",flex:"1"},children:[A&&(0,ze.jsxs)(ze.Fragment,{children:[(0,ze.jsx)("div",{style:{maxHeight:Q?"60vh":"50vh",overflowY:"auto",display:F?"flex":"none",flex:1,flexDirection:"column"},children:(0,ze.jsx)(di,{selectedRange:t,isHorizontal:!Q,ranges:n,setRange:h,onClose:e.onClose})}),(0,ze.jsx)(xi,{styles:!F,getEditedStartDate:le,isHorizontal:!Q,isMobile:!0,isFullCalendar:!1,getEditedEndDate:se,handleStart:ie,handleStop:re,onTimeRangeSet:ae,calendarOpen:Z,stopCalendarOpen:ne,startCalendarOpen:K,setCalendarOpen:w,setStopCalendar:te,setStartCalendar:Y}),A&&(0,ze.jsxs)(bi,{onClick:function(){B((function(e){return!e}))},theme:x,children:[(0,ze.jsx)("span",{children:F?"Set Absolute Time":"Set Relative Time"}),(0,ze.jsx)(fi.Z,{className:(0,Ve.iv)(Tr||(Tr=(0,r.Z)(["\n                                                        font-size: 12px;\n                                                    "])))})]})]}),!A&&(0,ze.jsx)(xi,{styles:!0,isMobile:!1,isFullCalendar:!0,getEditedStartDate:le,getEditedEndDate:se,handleStart:ie,handleStop:re,onTimeRangeSet:ae,calendarOpen:Z,setCalendarOpen:w}),Z&&A&&!F&&(0,ze.jsxs)(Lr.ZP,{container:!0,direction:"row",wrap:"nowrap",children:[K&&(0,ze.jsx)(ui,(0,l.Z)((0,l.Z)({},k),{},{value:s,setValue:c,navState:[!0,j],marker:Xr.FIRST_MONTH})),ne&&(0,ze.jsx)(ui,(0,l.Z)((0,l.Z)({},k),{},{value:d,setValue:p,navState:[j,!0],marker:Xr.SECOND_MONTH}))]})]}),(0,ze.jsx)("div",{className:"divider"}),q&&(0,ze.jsx)(Lr.ZP,{style:{display:"flex",flex:1},children:(0,ze.jsx)(di,{selectedRange:t,ranges:n,setRange:h,onClose:e.onClose})})]})]})})})})},wi=function(e){return function(n){n({type:"SET_RANGE_OPEN",rangeOpen:e})}};var Si,ji,ki=t(88999),Ci=t(21411),Ti=t(24064),_i=St.Z.div(Si||(Si=(0,r.Z)(['\n    display: flex;\n    flex-direction: column;\n    justify-content: "center";\n    padding: "3px";\n    .time-span {\n        text-align: center;\n    }\n'])));function Ii(e){var n=e.dateRange,t=(0,vr.Fg)();return(0,ze.jsx)(I.a,{theme:t,children:(0,ze.jsxs)(_i,{children:[(0,ze.jsx)("span",{className:"time-span",children:(0,ee.Z)(n.dateStart)?(0,lt.Z)(n.dateStart,"yyyy/MM/dd HH:mm:ss"):n.dateStart}),(0,ze.jsx)("span",{className:"time-span",children:"to"}),(0,ze.jsx)("span",{className:"time-span",children:(0,ee.Z)(n.dateEnd)?(0,lt.Z)(n.dateEnd,"yyyy/MM/dd HH:mm:ss"):"undefined"!==typeof n.dateEnd?n.dateEnd:""})]})})}var Di=(0,Ve.iv)(ji||(ji=(0,r.Z)(["\n    svg {\n        font-size: 1.15em;\n        margin: 0px 2px;\n    }\n    .tooltip {\n        background-color: red;\n        display: flex;\n        align-items: center;\n        justify-items: center;\n    }\n\n    @media screen and (max-width: 1200px) {\n        font-size: 1em;\n        padding: 8px;\n        color: #ddd;\n        line-height: 1.5;\n        svg {\n            margin-right: 0;\n        }\n        span {\n            display: none;\n        }\n    }\n"]))),Ni=function(e){try{var n=localStorage.getItem(e);if("string"===typeof n){var t=JSON.parse(n);if(t.dateStart&&t.dateEnd)return JSON.parse(n)}}catch(r){return console.log(r),{dateStart:"",dateEnd:""}}},Mi=function(e){return(0,ze.jsx)(Ti.Z,(0,l.Z)({id:e.id,elevation:0,anchorOrigin:{vertical:"bottom",horizontal:"left"},PaperProps:{sx:{background:e.qryntheme.buttonDefault,color:e.qryntheme.textColor}},transformOrigin:{vertical:"bottom",horizontal:"left"}},e))},Ei=["1m","5m","10m","30m","1h","3h","6h","12h","24h"];var Ri=function(e){var n=Date.now(),t=e.id,r=e.minDate,a=e.maxDate,o=e.startTs,s=e.stopTs,c=e.label,d=e.onLabelChange,p=e.onStartChange,v=e.onStopChange,h=e.pickerOpen,g=e.onPickerOpen,m=(0,_.useMediaQuery)({query:"(max-width: 1013px)"}),x=(0,i.v9)((function(e){return e.isSplit})),b=(0,vr.Fg)(),y={label:"Last 5 minutes",dateStart:new Date(Date.now()-3e5),dateEnd:new Date(Date.now())},Z=function(){try{var e=Ni($r);if(!e)return y;if(""!==(null===e||void 0===e?void 0:e.label)&&"undefined"!==typeof e.label){var n=ve(null===e||void 0===e?void 0:e.label);e.dateStart=n.dateStart,e.dateEnd=n.dateEnd}else e.dateStart=new Date(e.dateStart),e.dateEnd=new Date(e.dateEnd);return e}catch(t){if((0,Ir.Z)(o)&&(0,Ir.Z)(s))return{dateStart:o,dateEnd:s}}},w=he(r,(0,Dr.Z)(n,-10)),S=he(a,(0,Dr.Z)(n,10)),j=xe(Z()||{},w,S),k=(0,u.Z)(j,2),C=k[0],T=k[1],M=(0,f.useState)((0,l.Z)({},Z())),E=(0,u.Z)(M,2),R=E[0],O=E[1],L=(0,f.useState)(),V=(0,u.Z)(L,2),z=V[0],F=V[1],B=(0,f.useState)(C||n),H=(0,u.Z)(B,2),P=H[0],q=H[1],A=(0,f.useState)(T||(0,ae.Z)(P,1)),Q=(0,u.Z)(A,2),W=Q[0],U=Q[1],J=(0,f.useMemo)((function(){return{dateStart:o,dateEnd:s,label:c}}),[o,s,c]);(0,f.useEffect)((function(){d(J.label)}),[J.label]);var K=R.dateStart,$=R.dateEnd,ne=function(){var e=(0,i.I0)(),n=(0,f.useRef)(null),t=function(n){"Escape"===n.key&&e(wi(!1))},r=function(t){n.current&&!n.current.contains(t.target)&&e(wi(!1))};return(0,f.useEffect)((function(){return document.addEventListener("keydown",t,!0),document.addEventListener("click",r,!0),function(){document.removeEventListener("keydown",t,!0),document.removeEventListener("click",r,!0)}})),{ref:n}}().ref,oe=function(e){localStorage.setItem($r,JSON.stringify(e))},le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===e||void 0===e||e.preventDefault(),g(!1)},se={inHoverRange:function(e){return K&&!$&&z&&(0,Nr.Z)(z,K)&&(0,X.Z)(e,{start:K,end:z})}},ue={onDayClick:function(e){if(!K||$||(0,G.Z)(e,K))O({dateStart:e,dateEnd:void 0});else{var n={dateStart:K,dateEnd:e};ce(n),oe(n),O(n),d(""),le()}F(e)},onDayHover:function(e){K&&!$&&(z&&(0,Y.Z)(e,z)||F(e))},onMonthNavigate:function(e,n){if(e===Xr.FIRST_MONTH){var t=(0,ae.Z)(P,n);(0,G.Z)(t,W)&&q(t)}else{var r=(0,ae.Z)(W,n);(0,G.Z)(P,r)&&U(r)}}};function ce(e){var n=e.dateStart,t=e.dateEnd,r=e.label,i=(0,Ir.Z)(n),a=(0,Ir.Z)(t),o="undefined"!==typeof r;i&&p(n),a&&v(t),o&&d(r)}var de=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"range",t="backward"===e?Mr.Z:Er.Z,r={years:0,months:0,days:0,hours:0,minutes:0,seconds:0};"range"===n?r=(0,Rr.Z)({start:K,end:$}):n.includes("d")?r.days=parseInt(n):n.includes("h")?r.hours=parseInt(n):n.includes("m")?r.minutes=parseInt(n):n.includes("s")&&(r.seconds=parseInt(n));var i={dateStart:t(K,r),dateEnd:t($,r),label:""};O(i),oe(i),ce(i)},fe=(0,f.useState)(null),pe=(0,u.Z)(fe,2),ge=pe[0],me=pe[1],ye=Boolean(ge),Ze=(0,f.useState)(null),we=(0,u.Z)(Ze,2),Se=we[0],je=we[1],ke=Boolean(Se),Ce=function(e,n,t){me(null),je(null),n&&t&&de(n,t)};return(0,ze.jsxs)("div",{style:{display:"flex"},children:[!m&&!x&&(0,ze.jsxs)(ze.Fragment,{children:[(0,ze.jsx)(Ot,{onClick:function(){de("backward")},attachedside:"r",emptySide:"l",className:(0,Ve.cx)(Di),children:(0,ze.jsx)(Ci.Z,{})}),(0,ze.jsx)(Ot,{onClick:function(e){me((function(n){return e.currentTarget}))},attachedside:"both",size:"small",className:(0,Ve.cx)(Di),"aria-controls":ye?"backward-menu":void 0,"aria-haspopup":"true","aria-expanded":ye?"true":void 0,children:(0,ze.jsx)(bt.Z,{})}),(0,ze.jsx)(Mi,{id:"backward-menu",anchorEl:ge,open:ye,onClose:Ce,qryntheme:b,children:Ei.map((function(e){return(0,ze.jsx)(N.Z,{sx:{"&.MuiMenuItem-root":{fontSize:12}},onClick:function(n){return Ce(0,"backward",e)},children:e},"".concat(e," l"))}))})]}),(0,ze.jsx)(D.Z,{title:c?(0,ze.jsx)(Ii,{dateRange:R}):"",children:(0,ze.jsxs)(Ot,{onClick:function(e){e.preventDefault(),!0===h?le(e):g(!0)},className:(0,Ve.cx)(Di),attachedside:"both",children:[(0,ze.jsx)(ki.Z,{}),(0,ze.jsx)("span",{children:c||((0,ee.Z)(R.dateStart)?(0,lt.Z)(R.dateStart,"yyyy/MM/dd HH:mm:ss"):R.dateStart)+"-"+((0,ee.Z)(R.dateEnd)?(0,lt.Z)(R.dateEnd,"yyyy/MM/dd HH:mm:ss"):"undefined"!==typeof R.dateEnd?R.dateEnd:"")})]})}),!m&&!x&&(0,ze.jsxs)(ze.Fragment,{children:[(0,ze.jsx)(Ot,{onClick:function(e){je((function(n){return e.currentTarget}))},id:"forward-button-".concat(t),size:"small",className:(0,Ve.cx)(Di),"aria-controls":ke?"forward-menu".concat(t):void 0,"aria-haspopup":"true","aria-expanded":ke?"true":void 0,children:(0,ze.jsx)(bt.Z,{})}),(0,ze.jsx)(Mi,{id:"forward-menu-".concat(t),anchorEl:Se,open:ke,onClose:Ce,qryntheme:b,children:Ei.map((function(e){return(0,ze.jsx)(N.Z,{sx:{"&.MuiMenuItem-root":{fontSize:12}},onClick:function(n){return Ce(0,"forward",e)},children:e},"".concat(e," r"))}))}),(0,ze.jsx)(Ot,{onClick:function(){de("forward")},attachedside:"l",className:(0,Ve.cx)(Di),children:(0,ze.jsx)(gt.Z,{})})]}),h?(0,ze.jsx)("div",{tabIndex:0,ref:ne,children:(0,ze.jsx)(I.a,{theme:b,children:(0,ze.jsx)(Zi,{dateRange:R,minDate:w,maxDate:S,ranges:be(new Date),firstMonth:P,secondMonth:W,setFirstMonth:function(e){(0,G.Z)(e,W)&&q(e)},setSecondMonth:function(e){(0,Nr.Z)(e,P)&&U(e)},setDateRange:function(e){var n=e.label,t=e.dateStart,r=e.dateEnd;t&&r&&(e.label=n,e.dateStart=t=(0,te.Z)([t,w]),e.dateEnd=r=(0,re.Z)([r,S]),O(e),oe(e),ce(e),q(t),U((0,ie.Z)(t,r)?(0,ae.Z)(t,1):r))},helpers:se,handlers:ue,onClose:le})})}):null]})};function Oi(e){var n=e.historyTabHeader,t=e.historyTab,r=e.starredHistoryTab,i=e.closeButton,a=e.linksTabHeader,o=e.linksTab,l=e.settingTab,s=e.settingTabHeader;return(0,ze.jsxs)(Vt,{defaultValue:0,children:[(0,ze.jsxs)(Wt,{children:[(0,ze.jsxs)(zt,{children:[(0,ze.jsx)(Ft,{}),(0,ze.jsx)("span",{children:"Queries"})]}),(0,ze.jsxs)(zt,{children:[(0,ze.jsx)(Pt,{}),(0,ze.jsx)("span",{children:"Links"})]}),(0,ze.jsxs)(zt,{children:[(0,ze.jsx)(Bt,{}),(0,ze.jsx)("span",{children:"Starred"})]}),(0,ze.jsxs)(zt,{children:[(0,ze.jsx)(Ht,{}),(0,ze.jsx)("span",{children:"Settings"})]}),i]}),(0,ze.jsxs)(Qt,{value:0,children:[n,t]}),(0,ze.jsxs)(Qt,{value:1,children:[a,o]}),(0,ze.jsx)(Qt,{value:2,children:r}),(0,ze.jsxs)(Qt,{value:3,children:[s,l]})]})}function Li(e){var n,t=e.pos,r=e.item,i=e.copyLink,a=e.handleDelete,o=e.handleStarLinkItem,l=e.handleSubmit,s=e.label,c=(0,f.useState)(!1),d=(0,u.Z)(c,2),p=d[0],v=d[1],h=r.fromDate,g=r.toDate,m=r.type,x=r.url,b=r.queryInput,y=r.limit;return(0,ze.jsxs)(ir,{open:p,children:[(0,ze.jsx)(Vi,{pos:t,onOpen:p}),(0,ze.jsx)("button",{className:"open-button",onClick:function(){v((function(e){return!e}))},children:p?(0,ze.jsx)(xt.Z,{fontSize:"small"}):(0,ze.jsx)(mt.Z,{fontSize:"small"})}),(0,ze.jsxs)("div",{className:"inline-params",children:[(0,ze.jsx)(D.Z,{title:"API URL",children:(0,ze.jsxs)("span",{style:{display:"flex",alignItems:"center"},children:[(0,ze.jsx)(ft.Z,{fontSize:"small",style:{marginRight:"3px"}})," ",x]})}),(0,ze.jsxs)("span",{style:{whiteSpace:"nowrap"},children:["limit: ",y]}),(0,ze.jsxs)("span",{style:{whiteSpace:"nowrap"},children:["step: ",null===r||void 0===r||null===(n=r.params)||void 0===n?void 0:n.step]}),(0,ze.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"center"},children:[" ",(0,ze.jsx)(D.Z,{title:"".concat(h," - ").concat(g),children:(0,ze.jsx)(pt.Z,{style:{marginRight:"3px",height:"14px",width:"14px"}})})," ",(0,ze.jsxs)(or,{children:[h," - ",g]})]})]}),(0,ze.jsxs)("div",{className:"block-params",children:[(0,ze.jsxs)("p",{children:[(0,ze.jsx)("span",{className:"key",children:" Query:"})," ",(0,ze.jsx)("span",{className:"value",children:b})," "]}),(0,ze.jsxs)("p",{children:[(0,ze.jsx)("span",{className:"key",children:" API URL:"})," ",(0,ze.jsx)("span",{className:"value",children:x})," "]}),(0,ze.jsxs)("p",{children:[(0,ze.jsx)("span",{className:"key",children:" Data Source Type:"})," ",(0,ze.jsx)("span",{className:"value",children:m})," "]}),(0,ze.jsxs)("p",{children:[(0,ze.jsx)("span",{className:"key",children:"From: "})," ",(0,ze.jsx)("span",{className:"value",children:h})," "]}),(0,ze.jsxs)("p",{children:[(0,ze.jsx)("span",{className:"key",children:" To: "})," ",(0,ze.jsxs)("span",{className:"value",children:[" ",g]})," "]}),(0,ze.jsxs)("p",{children:[(0,ze.jsx)("span",{className:"key",children:"Limit: "})," ",(0,ze.jsx)("span",{className:"value",children:y})," "]}),(0,ze.jsxs)("p",{children:[(0,ze.jsx)("span",{className:"key",children:" Step:"})," ",(0,ze.jsx)("span",{className:"value",children:r.params.step})," "]})]}),(0,ze.jsx)(zi,{item:r,onOpen:p,copyLink:i,handleDelete:a,handleStarLinkItem:o,handleSubmit:l,label:s})]})}function Vi(e){var n=e.pos,t=e.onOpen;return(0,ze.jsx)("div",{style:{display:t?"none":"flex",width:"30vw"},children:(0,ze.jsxs)(rr,{children:["Link ",n," "]})})}function zi(e){var n=e.item,t=e.onOpen,r=e.copyLink,i=e.handleDelete,a=e.handleStarLinkItem,o=e.handleSubmit,l=e.label,s=(0,vr.Fg)(),c=(0,f.useState)(null),d=(0,u.Z)(c,2),p=d[0],v=d[1],h=Boolean(p),g=(0,f.useState)(!1),m=(0,u.Z)(g,2),x=m[0],b=m[1];return(0,ze.jsxs)("div",{style:{display:"flex",flexDirection:t?"column-reverse":"row",justifyContent:"space-between",alignItems:"center"},children:[(0,ze.jsx)(ze.Fragment,{children:(0,ze.jsx)(D.Z,{title:"Copy Link to Clipboard",placement:"right-end",children:(0,ze.jsxs)("span",{style:{display:"flex"},children:[(0,ze.jsx)(Gt,{onClick:function(e){return r(null===n||void 0===n?void 0:n.data,"link",x)},isActive:!0,style:{flex:1},className:"URL-COPY",attachedside:"r",children:(0,ze.jsx)(ft.Z,{style:{height:"14px",width:"14px"},fontSize:"small"})}),(0,ze.jsx)(Gt,{attachedside:"l",onClick:function(e){v((function(n){return e.currentTarget})),b((function(e){return x}))},size:"small",className:"date-time-selector","aria-controls":h?"backward-menu":void 0,"aria-haspopup":"true","aria-expanded":h?"true":void 0,children:(0,ze.jsx)(bt.Z,{fontSize:"small"})}),(0,ze.jsx)(Mi,{id:"backward-menu",anchorEl:p,open:h,onClose:function(e,n,t){v(null)},qryntheme:s,size:"small",children:(0,ze.jsx)(N.Z,{style:{padding:"0 14px"},children:(0,ze.jsx)(M.Z,{children:(0,ze.jsx)(E.Z,{style:{padding:"0",marginRight:0,cursor:l?"default":"not-allowed"},checked:x,onChange:function(e){b((function(n){return Boolean(e.target.checked)}))},control:(0,ze.jsx)(R.Z,{style:{paddingRight:"0px",marginRight:"3px"},sx:{"& .MuiSvgIcon-root":{fontSize:14}},disabled:!l}),label:(0,ze.jsx)(yt.Z,{style:{fontSize:"12px",color:s.textColor},children:"Relative time"})})})},"relativeTime")})]})})}),(0,ze.jsx)(D.Z,{title:"Delete Query",children:(0,ze.jsx)(Gt,{onClick:function(e){return i(n)},children:(0,ze.jsx)(st.Z,{style:{height:"14px",width:"14px"},fontSize:"small"})})}),(0,ze.jsx)(D.Z,{title:"Star / Unstar Link",children:(0,ze.jsx)(Gt,{onClick:function(){return a(n)},children:n.starred?(0,ze.jsx)(ut.Z,{style:{height:"14px",width:"14px"},fontSize:"small"}):(0,ze.jsx)(ct.Z,{style:{height:"14px",width:"14px"},fontSize:"small"})})}),(0,ze.jsx)(D.Z,{title:"Search Logs from Query",children:(0,ze.jsxs)(Yt,{onClick:function(){return o(null===n||void 0===n?void 0:n.data)},children:[(0,ze.jsx)(ht.Z,{className:"open-icon",fontSize:"small"}),(0,ze.jsx)("span",{className:"open-text",children:"Open In New Tab"})]})})]})}function Fi(e){var n=e.queryHistory,t=e.copyQuery,r=e.handleDelete,i=e.handleStarItem,a=e.handleSubmit,o=e.filtered,l=e.emptyMessage,s=e.isStarred,c=(0,f.useState)([]),d=(0,u.Z)(c,2),p=d[0],v=d[1];function h(e){var n="";if("string"===typeof e)try{n=JSON.parse(e).queryInput}catch(t){n=e}return n}return(0,f.useEffect)((function(){v(n)}),[]),(0,f.useEffect)((function(){o.length>0&&v(o)}),[o]),(0,f.useEffect)((function(){v(n)}),[n]),(0,ze.jsx)(Jt,{className:s?"starredCont":"",children:p.length>0?null===p||void 0===p?void 0:p.map((function(e,n){return(0,ze.jsxs)(ar,{children:[(0,ze.jsx)("span",{style:{color:"#666",paddingRight:"10px",width:"10px",display:"flex",alignItems:"center"},children:p.length-n}),(0,ze.jsx)(D.Z,{title:e.data,children:(0,ze.jsxs)(rr,{children:[h(e.data)," "]})}),(0,ze.jsx)("span",{children:(0,lt.Z)(e.timestamp,"yyyy/MM/dd HH:mm:ss")}),(0,ze.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,ze.jsx)(D.Z,{title:"Copy Query to Clipboard",children:(0,ze.jsx)(Gt,{onClick:function(){return t(e.data)},children:(0,ze.jsx)(dt.Z,{style:{height:"14px",width:"14px"},fontSize:"small"})})}),(0,ze.jsx)(D.Z,{title:"Delete Query",children:(0,ze.jsx)(Gt,{onClick:function(){return r(e)},children:(0,ze.jsx)(st.Z,{style:{height:"14px",width:"14px"},fontSize:"small"})})}),(0,ze.jsx)(D.Z,{title:"Star / Unstar Query",children:(0,ze.jsx)(Gt,{onClick:function(){return i(e)},children:e.starred?(0,ze.jsx)(ut.Z,{style:{height:"14px",width:"14px"},fontSize:"small"}):(0,ze.jsx)(ct.Z,{style:{height:"14px",width:"14px"},fontSize:"small"})})}),(0,ze.jsx)(D.Z,{title:"Search Logs from Query",children:(0,ze.jsxs)(Yt,{onClick:function(){return a(e)},children:[(0,ze.jsx)(gt.Z,{className:"open-icon"}),(0,ze.jsx)("span",{className:"open-text",children:"Show Results"})]})})]})]},n)})):(0,ze.jsx)(mr,{message:l})})}function Bi(e){var n=e.linksHistory,t=e.copyLink,r=e.handleDelete,i=e.handleStarLinkItem,a=e.handleSubmit,o=e.filtered,l=e.emptyMessage,s=e.isStarred,c=e.label,d=(0,f.useState)([]),p=(0,u.Z)(d,2),v=p[0],h=p[1];return(0,f.useEffect)((function(){h(n)}),[]),(0,f.useEffect)((function(){o.length>0&&h(o)}),[o]),(0,f.useEffect)((function(){h(n)}),[n]),(0,ze.jsx)(Jt,{className:s?"starredCont":"",children:v.length>0?null===v||void 0===v?void 0:v.map((function(e,n){return(0,ze.jsxs)(ar,{children:[(0,ze.jsx)("span",{style:{paddingRight:"10px",color:"#666",width:"10px",display:"flex",alignItems:"center"},children:(null===v||void 0===v?void 0:v.length)-n}),(0,ze.jsx)(Li,{pos:(null===v||void 0===v?void 0:v.length)-n,item:e,copyLink:t,handleDelete:r,handleStarLinkItem:i,handleSubmit:a,label:c})]},n)})):(0,ze.jsx)(mr,{message:l})})}function Hi(e){var n=e.starredQueries,t=e.starredLinks,r=e.handleDeleteQuery,i=e.handleDeleteLink,a=e.handleStarItem,o=e.handleStarLinkItem,l=e.handleSubmitQuery,s=e.handleSubmitLink,c=e.filteredLinks,d=e.filteredQueries,p=e.setFilteredStarLink,v=e.setFilteredStarQuery,h=e.filterItems,g=e.emptyQueryMessage,m=e.emptyLinkMessage,x=e.copyQuery,b=e.label,y=(0,f.useState)([]),Z=(0,u.Z)(y,2),w=Z[0],S=Z[1],j=(0,f.useState)([]),k=(0,u.Z)(j,2),C=k[0],T=k[1];return(0,f.useEffect)((function(){S(n),T(t)}),[]),(0,f.useEffect)((function(){c.length>0&&T(c),d.length>0&&S(d)}),[c,d]),(0,f.useEffect)((function(){S(n),T(t)}),[n,t]),(0,ze.jsxs)(vt.Z,{defaultValue:0,children:[(0,ze.jsxs)(Wt,{children:[(0,ze.jsx)(zt,{children:"Queries"}),(0,ze.jsx)(zt,{children:"Links"})]}),(0,ze.jsxs)(Qt,{value:0,children:[(0,ze.jsx)(Pi,{searchQueriesText:"Queries",queryHistory:n,filterItems:h,setFilteredItems:v}),(0,ze.jsx)(Fi,{queryHistory:w,copyQuery:x,handleDelete:r,handleStarItem:a,handleSubmit:l,filtered:d,emptyMessage:g,isStarred:!0})]}),(0,ze.jsxs)(Qt,{value:1,children:[(0,ze.jsx)(Pi,{searchQueriesText:"Links",queryHistory:t,filterItems:h,setFilteredItems:p}),(0,ze.jsx)(Bi,{linksHistory:C,copyQuery:x,handleDelete:i,handleStarLinkItem:o,handleSubmit:s,filtered:c,emptyMessage:m,isStarred:!0,label:b})]})]})}function Pi(e){var n=e.queryHistory,t=e.filterItems,r=e.setFilteredItems,i=e.searchQueriesText,a=(0,f.useState)(""),l=(0,u.Z)(a,2),s=l[0],c=l[1];return(0,ze.jsx)(At,{children:(0,ze.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,ze.jsx)(qt,{}),(0,ze.jsx)(tr,{type:"text",value:o().sanitize(s),onChange:function(e){var i=e.target.value;c(i);var a=t(n,i);a.length>0?r(a):r([])},placeholder:"Search ".concat(i)})," ",(0,ze.jsxs)("span",{style:{margin:"0px 4px"},children:["Total: ",n.length]})]})})}function qi(e){var n=e.queryHistory,t=e.linksHistory;return(0,ze.jsx)(At,{children:(0,ze.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,ze.jsxs)("span",{style:{margin:"0px 4px"},children:["Query History Rows: ",null===n||void 0===n?void 0:n.length]})," | ",(0,ze.jsxs)("span",{style:{margin:"0px 4px"},children:["Links History Rows: ",null===t||void 0===t?void 0:t.length]})]})})}function Ai(e){var n=e.clearHistory,t=e.clearLinksHistory;return(0,ze.jsx)(Jt,{children:(0,ze.jsxs)("div",{style:{display:"flex"},children:[(0,ze.jsxs)(Kt,{children:[(0,ze.jsx)("div",{children:"Clear Query History"}),(0,ze.jsx)("small",{children:"Delete all of your query history, permanently."}),(0,ze.jsx)(gr,{dialogType:"Query",clearHistory:n})]}),(0,ze.jsxs)(Kt,{children:[(0,ze.jsx)("div",{children:"Clear Links History"}),(0,ze.jsx)("small",{children:"Delete all of your links history, permanently."}),(0,ze.jsx)(gr,{dialogType:"Links",clearHistory:t})]})]})})}var Qi=function(e){var n="Link Copied To Clipboard",t=(0,i.I0)(),r=(0,L.Z)().historyStore(),a=(0,Zt.Z)(),o=(0,i.v9)((function(e){return e.queryHistory})),s=(0,i.v9)((function(e){return e.linksHistory})),c=(0,i.v9)((function(e){return e.historyOpen})),d=(0,vr.Fg)(),p=(0,f.useState)([]),h=(0,u.Z)(p,2),g=h[0],m=h[1],x=(0,f.useState)([]),b=(0,u.Z)(x,2),y=b[0],Z=b[1],w=(0,f.useState)([]),S=(0,u.Z)(w,2),j=S[0],k=S[1],C=(0,f.useState)([]),T=(0,u.Z)(C,2),_=T[0],I=T[1],D=(0,f.useState)([]),N=(0,u.Z)(D,2),M=N[0],E=N[1],R=(0,f.useState)(!1),z=(0,u.Z)(R,2),F=z[0],B=z[1],H=(0,i.v9)((function(e){return e})),P=H.start,q=H.stop,A=(0,i.v9)((function(e){return e.label}));function Q(e){var n=r.remove(e);t(V(n)),t((0,v.el)({message:"Query deleted succesfully",type:_r.m.info}))}function W(e){var n=a.remove(e);t((0,wt.Z)(n))}function U(e){var n={};try{n=JSON.parse(e.data)}catch(x){n=(0,l.Z)({},{id:"",limit:100,panel:"left",queryInput:"",queryType:"range",direction:"forward"})}var r=n,i=r.id,a=r.limit,o=r.panel,s=r.queryInput,u=r.queryType,c=r.type,d=r.dataSourceId,f=r.url,p=r.direction,v="",h=0;if(s.includes("$__interval")){var g=(q.getTime()-P.getTime())/1e3/30/+1..toFixed(1),m=Math.round(g*window.devicePixelRatio.toFixed(2));v=s.replace(/\[\$__interval\]/,"[".concat(m,"s]")),h=m}else v=s;t(Cn(c,v,u,a,o,i,p||"forward",d,f,h))}function J(e){window.open(e)}function G(e,n){return null===e||void 0===e?void 0:e.filter((function(e){return e.data.toLowerCase().includes(n.toLowerCase())}))}function K(e){E(e)}function Y(e){var n=(0,l.Z)((0,l.Z)({},e),{},{starred:!e.starred}),i=r.update(n);t(V(i)),n.starred?t((0,v.el)({message:"Query starred succesfully",type:_r.m.success})):t((0,v.el)({message:"Query unstarred succesfully",type:_r.m.success}))}function X(e){var n=(0,l.Z)((0,l.Z)({},e),{},{starred:!e.starred}),r=a.update(n);t((0,wt.Z)(r)),n.starred?t((0,v.el)({message:"Link starred succesfully",type:_r.m.success})):t((0,v.el)({message:"Link unstarred succesfully",type:_r.m.success}))}function $(){t((0,v.el)({type:"success",message:n}))}function ee(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"query",t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new URL(e).hash,i=new URLSearchParams(r.replace(/#/,""));i.set("label",A);var a=new URL(window.location.href);a.hash="#".concat(i.toString());var o="query"===n?JSON.parse(e).queryInput:t&&A?a:e;setTimeout((function(){var e;null!==(e=navigator)&&void 0!==e&&e.clipboard&&window.isSecureContext?function(e){navigator.clipboard.writeText(e).then((function(){$()}),(function(e){console.log("error on copy",e)}))}(o):function(e){var n=document.createElement("textarea");n.value=e,n.style={position:"fixed",left:"-999999px",top:"-999999px"},document.body.appendChild(n),n.focus(),n.select(),new Promise((function(e,t){$(),document.execCommand("copy")?e():t(),n.remove()}))}(o)}),200)}function ne(){var e=r.clean();t(V(e)),(null===e||void 0===e?void 0:e.length)<1&&t((0,v.el)({message:"Query History cleared succesfully",type:_r.m.info}))}return(0,f.useEffect)((function(){var e=(null===o||void 0===o?void 0:o.filter((function(e){return e.starred})))||[],n=(null===s||void 0===s?void 0:s.filter((function(e){return e.starred})))||[];B(n),m(e)}),[o,s]),(0,ze.jsx)(O.Z,{theme:d,children:c&&(0,ze.jsx)(Lt,{anchor:"bottom",style:{maxHeight:"250px"},open:c,variant:"persistent",theme:d,children:(0,ze.jsx)(Oi,{historyTabHeader:(0,ze.jsx)(Pi,{searchQueriesText:"Queries",queryHistory:o,clearHistory:ne,filterItems:G,setFilteredItems:function(e){Z(e)}}),historyTab:(0,ze.jsx)(Fi,{queryHistory:o,copyQuery:ee,handleDelete:Q,handleStarItem:Y,handleSubmit:U,filtered:y,emptyMessage:"There is no query history. Please execute some queries and you will see a history here."}),linksTabHeader:(0,ze.jsx)(Pi,{searchQueriesText:"Links",queryHistory:s,filterItems:G,setFilteredItems:function(e){k(e)}}),linksTab:(0,ze.jsx)(Bi,{linksHistory:s,copyLink:ee,handleDelete:W,handleStarLinkItem:X,handleSubmit:J,filtered:j,label:A,emptyMessage:"There is no links history. Please execute some queries and share links and you will see a history here."}),starredTabHeader:(0,ze.jsx)(Pi,{searchQueriesText:"Queries",queryHistory:g,clearHistory:ne,filterItems:G,setFilteredItems:K}),starredTab:(0,ze.jsx)(Fi,{queryHistory:g,copyQuery:ee,handleDelete:Q,handleStarItem:Y,handleSubmit:U,filtered:M,emptyMessage:"Click the \u2018Star\u2019 icon to save queries and find them here to reuse again"}),starredHistoryTab:(0,ze.jsx)(Hi,{starredQueries:g,starredLinks:F,handleDeleteQuery:Q,handleDeleteLink:W,handleStarItem:Y,handleStarLinkItem:X,handleSubmitQuery:U,handleSubmitLink:J,filterItems:G,setFilteredStarLink:function(e){I(e)},setFilteredStarQuery:K,filteredQueries:M,filteredLinks:_,emptyQueryMessage:"Click the 'Star' icon to save links and find them here to reuse again",emptyLinkMessage:"Click the 'Star' icon to save queries and find them here to reuse again",copyQuery:ee,label:A}),settingTabHeader:(0,ze.jsx)(qi,{queryHistory:o,linksHistory:s}),settingTab:(0,ze.jsx)(Ai,{clearHistory:ne,clearLinksHistory:function(){var e=a.clean();t((0,wt.Z)(e)),(null===e||void 0===e?void 0:e.length)<1&&t((0,v.el)({message:"Links History cleared succesfully",type:_r.m.info}))}}),closeButton:(0,ze.jsx)(br,{onClose:function(){t(ot(!1))}})})})})},Wi=t(99811),Ui=function(e){var n=e.type,t=e.actualQuery,r=e.total,i=e.dataView;return(0,f.useMemo)((function(){var e=("matrix"===n||"flux"===n)&&(null===t||void 0===t?void 0:t.tableView),a="stream"===n&&(null===t||void 0===t?void 0:t.tableView),o="",l="",s="",u="";if(e){var c,d=25*(null===i||void 0===i||null===(c=i.tableData)||void 0===c?void 0:c.total),f=d<330?d:330;o="".concat(f+25,"px"),s="".concat(f,"px"),l="fit-content",u="fit-content"}if("vector"===n||a){var p=25*r,v=p<330?p:330;o="".concat(v+25,"px"),s="".concat(v,"px"),l="fit-content",u="fit-content"}if("stream"===n&&(null===t||void 0===t||!t.tableView)){var h=25*r<350?"fit-content":"inherit";o=h,s=h,l="fit-content",u="fit-content"}return"matrix"!==n&&"flux"!==n||null!==t&&void 0!==t&&t.tableView||(o="fit-content",s="400px",l="fit-content",u="fit-content"),{regularCont:o,regularView:s,maxCont:l,maxView:u}}),[r,n,null===t||void 0===t?void 0:t.tableView])},Ji=function(e){var n,t=e.total,r=e.panelSize,i=e.dataView,a=0;"matrix"===i.type?a=null===i||void 0===i||null===(n=i.tableData)||void 0===n?void 0:n.total:a=t;return(0,f.useMemo)((function(){var e=25*a;return"max"===r?e:"min"===r?0:e<310?e:310}),[r])},Gi=function(e){var n=e.panel,t=e.dataView;return(0,f.useMemo)((function(){var e={};return n&&t&&(e=null===n||void 0===n?void 0:n.find((function(e){return e.id===t.id}))),e}),[n,t])};function Ki(e){var n=e.name;return(0,ze.jsx)(ze.Fragment,{children:n})}var Yi,Xi,$i,ea,na,ta,ra,ia,aa,oa,la=t(85281),sa=(St.Z.div(Yi||(Yi=(0,r.Z)(["\n  background: ",";\n  border: 1px solid ",";\n  margin: 5px;\n  padding: 6px;\n  overflow-y: auto;\n  overflow-x: hidden;\n  position: relative;\n  flex: 1;\n  border-radius: 3px;\n\n  &::-webkit-scrollbar {\n    width: 5px;\n  }\n  &::-webkit-scrollbar-corner {\n    background: transparent;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    border-radius: 5px;\n    background: ",";\n  }\n"])),(function(e){return e.theme.mainBgColor}),(function(e){return e.theme.buttonBorder}),(function(e){return e.theme.scrollbarThumb})),St.Z.div(Xi||(Xi=(0,r.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex: 1;\n  height: 100%;\n  font-size: 0.75em;\n  letter-spacing: 1px;\n  padding: 30px;\n  color: ",";\n  background: ",";\n  text-align: center;\n"])),(function(e){return e.theme.textOff}),(function(e){return e.theme.secondaryWidgetContainer}))),ua=(St.Z.div($i||($i=(0,r.Z)(["\n  display: flex;\n  align-items: center;\n  font-size: 10px;\n  font-family: monospace;\n  margin: 0px 10px;\n  color: ",";\n  span {\n    background: ",";\n    padding: 4px;\n    border-radius: 4px;\n    border: 1px solid ",";\n    margin: 0px 5px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n"])),(function(e){return e.theme.textColor}),(function(e){return e.theme.inputBg}),(function(e){return e.theme.buttonBorder})),St.Z.div(ea||(ea=(0,r.Z)(["\n  display: flex;\n  min-height: min-content;\n  flex-direction: column;\n  height: 100%;\n"]))),(0,St.Z)(la.Z)(na||(na=(0,r.Z)(["\n  position: absolute;\n  top: 50px;\n  left: 0;\n  right: 0;\n  margin: auto;\n"]))),St.Z.div(ta||(ta=(0,r.Z)(["\n  overflow-y: auto;\n  margin: 2px;\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  max-height: 100vh;\n  &::-webkit-scrollbar {\n    background: transparent;\n  }\n  ::-webkit-scrollbar-corner {\n    background: transparent;\n  }\n  &::-webkit-scrollbar-thumb {\n    background: transparent;\n  }\n"])))),ca=St.Z.div(ra||(ra=(0,r.Z)(["\n  display: flex;\n  align-items: center;\n  color: ",";\n  font-size: 12px;\n  .header-actions {\n    justify-self: flex-end;\n    .header-icon {\n      padding: 1px 2px;\n      margin: 0px 2px;\n      border-radius: 3px;\n      cursor: pointer;\n      color: ",";\n      &:hover {\n        background: ",";\n      }\n    }\n  }\n  .view-header-info {\n    display: flex;\n    flex: 1;\n    align-items: center;\n    span {\n      margin: 0px 3px;\n      .exp {\n        font-family: monospace;\n      }\n    }\n  }\n"])),(function(e){return e.theme.textColor}),(function(e){return e.theme.textColor}),(function(e){return e.theme.buttonDefault})),da=St.Z.div(ia||(ia=(0,r.Z)(["\n  margin: 0px 2px;\n  padding: 2px;\n  font-size: 10px;\n  border: 1px solid ",";\n  border-radius: 3px;\n"])),(function(e){return e.theme.buttonBorder})),fa=St.Z.div(aa||(aa=(0,r.Z)(["\n  display: flex;\n  align-items: center;\n  margin: 0px 12px;\n  flex: 1;\n  max-width: 450px;\n  overflow-x: auto;\n  &::-webkit-scrollbar {\n    width: 5px;\n    height: 5px;\n  }\n  &::-webkit-scrollbar-corner {\n    background: transparent;\n  }\n  &::-webkit-scrollbar-thumb {\n    border-radius: 5px;\n    background: ",";\n  }\n"])),(function(e){return e.theme.scrollbarThumb})),pa=St.Z.div(oa||(oa=(0,r.Z)(["\n  background: ",";\n  color: ",";\n  display: flex;\n  flex-direction: column;\n  padding: 20px;\n  div {\n    width: 100%;\n    overflow-wrap: break-word;\n    font-family: monospace;\n  }\n  p {\n    padding: 10px;\n    font-size: 12px;\n    display: flex;\n    flex: 1;\n    align-items: center;\n    flex-wrap: wrap;\n    span.label {\n      background: ",";\n      color: ",";\n      margin: 2px;\n      padding: 2px;\n      border-radius: 2px;\n    }\n  }\n  h4 {\n    margin-bottom: 20px;\n    padding-bottom: 4px;\n    border-bottom: 1px solid ",";\n  }\n  pre {\n    font-family: monospace;\n  }\n  small {\n    font-size: 10px;\n  }\n"])),(function(e){return e.theme.widgetContainer}),(function(e){return e.theme.textColor}),(function(e){return e.theme.buttonBorder}),(function(e){return e.theme.widgetContainer}),(function(e){return e.theme.buttonBorder})),va=t(33973),ha=t(29428),ga=function(e){var n=e.labels;return(null===n||void 0===n?void 0:n.length)>0?(0,ze.jsxs)("p",{children:["Labels:",n.map((function(e,n){return(0,ze.jsx)("span",{className:"label",children:e},n)}))]}):null},ma=function(e){var n=e.idRef,t=e.expr,r=e.queryType;return(0,ze.jsxs)(ze.Fragment,{children:[(0,ze.jsx)("h4",{children:n}),(0,ze.jsx)("div",{children:(0,ze.jsx)("p",{children:t})}),(0,ze.jsxs)("p",{children:["Query Type: ",r]})]})},xa=function(e){var n=e.expr,t=e.idRef,r=e.labels,i=e.limit,a=e.queryType,o=e.total,s={idRef:t,expr:n,queryType:a},u={labels:r};return(0,ze.jsxs)(pa,{children:[(0,ze.jsx)(ma,(0,l.Z)({},s)),(0,ze.jsx)(ga,(0,l.Z)({},u)),(0,ze.jsxs)("p",{children:["Limit: ",i]}),(0,ze.jsxs)("p",{children:["Total: ",o]})]})};function ba(e){var n=e.expr,t=e.idRef,r=e.labels,i=e.queryType,a=e.limit,o=e.total,l=e.onClose,s=e.open,u=(0,vr.Fg)();return(0,ze.jsx)(I.a,{theme:u,children:(0,ze.jsx)(lr.Z,{open:s,onClose:l,PaperProps:{classes:{root:pr.ht}},children:(0,ze.jsx)(xa,{expr:n,idRef:t,labels:r,queryType:i,limit:a,total:o})})})}function ya(e){var n=(e||{fixedSize:!1}).fixedSize,t=(0,_.useMediaQuery)({query:"(max-width: 1013px)"}),r=(0,f.useState)(!1),i=(0,u.Z)(r,2),a=i[0],o=i[1],s=(0,f.useState)(!0),c=(0,u.Z)(s,2),d=c[0],p=c[1],v=(0,vr.Fg)(),h=e.actualQuery,g=e.dataView,m=e.type,x=e.total,b=e.setMinimize,y=e.setMaxHeight,Z=(0,f.useMemo)((function(){var e="matrix"===m&&(null===h||void 0===h?void 0:h.tableView),n="stream"===m&&(null===h||void 0===h?void 0:h.tableView);return"matrix"!==m&&"flux"!==m||null!==h&&void 0!==h&&h.tableView?"stream"!==m||null!==h&&void 0!==h&&h.tableView?"vector"===m||e||n?"Table":"empty"===m?"No Results":void 0:"Logs":"Chart"}),[m,null===h||void 0===h?void 0:h.tableView]),w=(0,f.useCallback)((function(){d?(b(),p(!1)):(y(),p(!0))}),[d,b,y]),S=(0,f.useCallback)((function(){o(!0)}),[]),j=(0,f.useMemo)((function(){var e;return(null===g||void 0===g||null===(e=g.labels)||void 0===e?void 0:e.join("  |  "))||""}),[g.labels]),k=(0,f.useMemo)((function(){var n;if(null!==g&&void 0!==g&&null!==(n=g.labels)&&void 0!==n&&n.length){if((null===g||void 0===g?void 0:g.labels.length)>4){var t=(0,H.Z)(g.labels).slice(0,4);return(0,ze.jsxs)(ze.Fragment,{children:[t.map((function(n,t){return(0,ze.jsx)(da,{children:(0,ze.jsx)(Ki,(0,l.Z)({name:n},e.theme))},t)}))," ","..."]})}return(0,ze.jsx)(ze.Fragment,{children:g.labels.map((function(n,t){return(0,ze.jsx)(da,{children:(0,ze.jsx)(Ki,(0,l.Z)({name:n},e.theme))},t)}))})}}),[g.labels,e.theme]);if(h){var C,T=h.idRef,N=h.expr,M=h.limit,E=h.queryType;return(0,ze.jsx)(I.a,{theme:v,children:(0,ze.jsxs)(ca,{children:[(0,ze.jsxs)("div",{className:"view-header-info",children:[(0,ze.jsx)("span",{children:(0,ze.jsx)("span",{className:"exp",children:Z})}),(0,ze.jsx)(D.Z,{title:(null===h||void 0===h?void 0:h.expr)||"",children:(0,ze.jsxs)("span",{children:[" ",(0,ze.jsx)("span",{className:"exp",children:null===h||void 0===h?void 0:h.idRef})]})}),!t&&(0,ze.jsxs)(ze.Fragment,{children:[(0,ze.jsxs)("span",{children:["limit:"," ",(0,ze.jsx)("span",{className:"exp",children:null===h||void 0===h?void 0:h.limit})]}),(0,ze.jsxs)("span",{children:["count: ",(0,ze.jsx)("span",{className:"exp",children:x})]})]}),(null===g||void 0===g||null===(C=g.labels)||void 0===C?void 0:C.length)>0&&!t&&(0,ze.jsx)("span",{children:(0,ze.jsxs)(fa,{title:j,children:["labels:",k]})})]}),(0,ze.jsx)("div",{className:"header-actions",children:!n&&(0,ze.jsxs)(ze.Fragment,{children:[(0,ze.jsx)(va.Z,{className:"header-icon",style:{fontSize:"12px"},onClick:S}),(0,ze.jsx)(Ca,{isOpen:d,onClick:w})]})}),a&&(0,ze.jsx)(ba,{labels:g.labels||[],limit:M,expr:N,queryType:E,idRef:T,open:a,total:x,onClose:function(e){return o(!1)}})]})})}return null}var Za,wa,Sa,ja,ka,Ca=function(e){var n=e.isOpen,t=e.onClick;return n?(0,ze.jsx)(ha.Z,{className:"header-icon",onClick:t,style:{fontSize:"14px"}}):(0,ze.jsx)(Ar.Z,{className:"header-icon",onClick:t,style:{fontSize:"14px"}})};function Ta(e){var n=(0,vr.Fg)();return e.loading?null:(0,ze.jsx)(I.a,{theme:n,children:(0,ze.jsx)(sa,{children:"Please adjust search parameters and click on \u2018Show Results\u2019 button"})})}var _a=St.Z.div(Za||(Za=(0,r.Z)(["\n    margin: 4px;\n    padding: 5px;\n    margin-top: 0px;\n    border: 1px solid ",";\n    border-radius: 3px;\n    display: flex;\n    flex-direction: column;\n    flex: ",";\n\n    height: ",";\n    .view-content {\n        height: ",";\n        display: ",";\n        flex-direction: ",";\n        flex: 1;\n    }\n"])),(function(e){return e.theme.buttonBorder}),(function(e){return"min"===e.size?0:1}),(function(e){return"regular"===e.size?e.vheight.regularCont:"max"===e.size?e.vheight.maxCont:"20px"}),(function(e){return"regular"===e.size?e.vheight.regularView:"max"===e.size?e.vheight.maxView:"0px"}),(function(e){return"min"===e.size?"none":(e.size,"flex")}),(function(e){return e.size,"column"})),Ia=(0,St.Z)(Nt.Z)(wa||(wa=(0,r.Z)(["\n    width: 100%;\n    background: ",";\n    height: inherit;\n    flex: 1;\n"])),(function(e){return e.theme.widgetContainer})),Da=((0,St.Z)(vt.Z)(Sa||(Sa=(0,r.Z)(["\n    display: flex;\n    height: 100%;\n"]))),(0,St.Z)(Dt.Z)(ja||(ja=(0,r.Z)(["\n    min-width: 320px;\n    background: ",";\n    border-bottom: 4px solid ",";\n    display: ",";\n    align-items: center;\n    align-content: space-between;\n"])),(function(e){return e.theme.tabHeader}),(function(e){return e.theme.historyRow}),(function(e){return"min"===e.panelsize?"none":"flex"}))),Na=(0,St.Z)(kt.Z)(ka||(ka=(0,r.Z)(["\n    color: ",";\n    background: ",";\n    border: 1px solid ",";\n    cursor: pointer;\n    font-size: 13px;\n    background-color: transparent;\n    padding: 6px 10px;\n    border: none;\n    border-radius: 3px 3px 0px 0px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border-bottom: 1px solid transparent;\n    transition: 0.2s all;\n\n    &:hover {\n        background-color: ",";\n    }\n\n    &:focus {\n        color: ",";\n        background: ",";\n        border-radius: 3px 3px 0px 0px;\n\n        outline-offset: 2px;\n    }\n\n    &."," {\n        border-bottom: 1px solid ",";\n    }\n\n    &."," {\n        opacity: 0.5;\n        cursor: not-allowed;\n    }\n    @media screen and (max-width: 360px) {\n        span {\n            display: none;\n        }\n        padding: 5px 20px;\n    }\n"])),(function(e){return e.theme.textColor}),(function(e){return e.theme.buttonDefault}),(function(e){return e.theme.buttonBorder}),(function(e){return e.theme.buttonHover}),(function(e){return e.theme.textColor}),(function(e){return e.theme.buttonDefault}),Ct.Z.selected,(function(e){return e.theme.primaryDark}),jt.Z.disabled);function Ma(e){var n=e.viewRef,t=e.panelSize,r=e.setStreamClose,i=e.setMinimize,a=e.setMaxHeight,o=e.actualQuery,s=e.total,u=e.loading;return(0,ze.jsxs)(_a,{ref:n,size:t,vheight:"regular",children:[(0,ze.jsx)(ya,(0,l.Z)({onClose:r,setMinimize:i,setMaxHeight:a,actualQuery:o,total:s,type:"empty",fixedSize:!0},e)),(0,ze.jsx)(Ta,{loading:u})]})}var Ea,Ra,Oa,La,Va,za=t(15671),Fa=t(43144),Ba=t(60136),Ha=t(29388),Pa=t(16912),qa={critical:["emerg","fatal","alert","crit","critical"],error:["err","eror","error"],warning:["warn","warning"],info:["info","information","notice"],debug:["dbug","debug"],trace:["trace"]},Aa={critical:"purple",error:"red",warning:"orange",info:"green",debug:"blue",trace:"lightblue",unknown:"gray"},Qa=(0,Pa.Z)((function(e,n){return{items:e,toggleItemActive:n}}));var Wa,Ua,Ja=(0,Ve.iv)(Ea||(Ea=(0,r.Z)(["\n    display: flex;\n    flex-wrap: wrap;\n    margin-top: 3px;\n"]))),Ga=St.Z.div(Ra||(Ra=(0,r.Z)(["\n    color: ",";\n    font-size: 12px;\n    cursor: pointer;\n    padding-left: 0.5rem;\n    margin-left: 0.25rem;\n    display: flex;\n    flex-direction: column;\n    margin-bottom: 2px;\n    margin-top: 2px;\n    font-family: monospace;\n    &:hover {\n        background: ",";\n    }\n\n    p {\n        display: inline-block;\n        overflow-wrap: anywhere;\n        margin-left: 3px;\n    }\n    border-left: 4px solid ",";\n    .log-ts-row {\n        display: flex;\n    }\n"])),(function(e){return e.theme.textColor}),(function(e){return e.theme.logBgColor}),(function(e){return e.rowColor})),Ka=St.Z.span(Oa||(Oa=(0,r.Z)(["\n    font-size: 12px;\n    color: ",";\n    line-height: 1.5;\n"])),(function(e){return e.theme.textPrimary})),Ya=St.Z.span(La||(La=(0,r.Z)(["\n    position: relative;\n    color: ",";\n    margin-right: 0.25rem;\n    white-space: nowrap;\n    font-size: 12px;\n    line-height: 1.5;\n"])),(function(e){return e.theme.textColor})),Xa=St.Z.div(Va||(Va=(0,r.Z)(["\n    overflow: hidden;\n    overflow-y: auto;\n    height: calc(100% - 20px);\n"])));function $a(e){var n=e.text,t=e.dateFormated,r=e.isMobile,i=e.isSplit,a=e.isShowTs;return(0,ze.jsxs)("div",{className:"log-ts-row",children:[a&&!r&&!i&&(0,ze.jsx)(Ya,{children:t}),(0,ze.jsxs)(Ka,{children:[(r||i)&&a&&(0,ze.jsx)("p",{children:t}),(0,ze.jsx)("p",{children:n})]})]})}var eo=St.Z.div(Wa||(Wa=(0,r.Z)(["\n    color: ",";\n    flex: 0;\n    background-color: hsl(220, 67%, 55%);\n    display: flex;\n    margin-left: 5px;\n    padding: 0 4px;\n    border-radius: 2px;\n    font-size: 12px;\n    align-items: center;\n    white-space: nowrap;\n"])),(function(e){return e.theme.buttonText})),no=St.Z.div(Ua||(Ua=(0,r.Z)(["\n    color: ",";\n    flex: 1;\n    display: flex;\n    &:hover {\n        background: ",";\n    }\n"])),(function(e){return e.theme.textPrimary}),(function(e){return e.theme.widgetContainer})),to={width:"18px",height:"18px"},ro=t(33774),io=["json","regexp","logfmt","pattern","~","="],ao=/{[^}]*}/,oo={newQuery:function(e,n,t){var r=(0,u.Z)(e,2),i=r[0],a=r[1];return"".concat(t[0]||"","{").concat(i).concat(n,'"').concat(a,'"}').concat(t[2]||"")},equalLabels:function(e,n,t){return"!="===n?oo.newQuery(e,n,t):"{}"},formatQuery:function(e,n){return"".concat(n[0]||"","{").concat(e||"","}").concat(n[2]||"")},splitLabels:function(e){var n,t;return(null===e||void 0===e||null===(n=e.match(/[^{}]+(?=})/g))||void 0===n||null===(t=n.map((function(e){return e.split(",")})))||void 0===t?void 0:t.flat())||[]},addLabel:function(e,n,t){return"!="===e?n:t},rmValueFromLabel:function(e,n){var t,r=null===e||void 0===e?void 0:e.split("=~"),i=(0,u.Z)(r,2),a=i[0],o=i[1],l=null===o||void 0===o?void 0:o.split(/[""]/)[1],s=null===l||void 0===l?void 0:l.split("|"),c=null===s||void 0===s?void 0:s.filter((function(e){return e.trim()!==(null===n||void 0===n?void 0:n.trim())}));if((null===c||void 0===c?void 0:c.length)>1){var d,f=null===c||void 0===c||null===(d=c.join("|"))||void 0===d?void 0:d.trim();return(null===a||void 0===a?void 0:a.trim())+'=~"'+f+'"'}var p=null===c||void 0===c||null===(t=c.join(""))||void 0===t?void 0:t.trim();return(null===a||void 0===a?void 0:a.trim())+'="'+p+'"'},rmNonEqValueFromLabel:function(e,n){var t,r=null===e||void 0===e?void 0:e.split("!~"),i=(0,u.Z)(r,2),a=i[0],o=i[1],l=null===o||void 0===o?void 0:o.split(/[""]/)[1],s=null===l||void 0===l?void 0:l.split("|"),c=null===s||void 0===s?void 0:s.filter((function(e){return e.trim()!==(null===n||void 0===n?void 0:n.trim())}));if((null===c||void 0===c?void 0:c.length)>1){var d,f=null===c||void 0===c||null===(d=c.join("|"))||void 0===d?void 0:d.trim();return(null===a||void 0===a?void 0:a.trim())+'!~"'+f+'"'}var p=null===c||void 0===c||null===(t=c.join(""))||void 0===t?void 0:t.trim();return(null===a||void 0===a?void 0:a.trim())+'!="'+p+'"'},addValueToLabel:function(e,n,t){var r=t?"=":"=~",i=null===e||void 0===e?void 0:e.split(r),a=(0,u.Z)(i,2),o=a[0],l=a[1],s=null===l||void 0===l?void 0:l.split(/[""]/)[1];return"".concat(o,'=~"').concat(null===s||void 0===s?void 0:s.trim(),"|").concat(null===n||void 0===n?void 0:n.trim(),'"')},addNonEqValueToLabel:function(e,n,t){var r=t?"!=":"!~",i=null===e||void 0===e?void 0:e.split(r),a=(0,u.Z)(i,2),o=a[0],l=a[1],s=null===l||void 0===l?void 0:l.split(/[""]/)[1];return"".concat(o,'!~"').concat(null===s||void 0===s?void 0:s.trim(),"|").concat(null===n||void 0===n?void 0:n.trim(),'"')},isEqualsQuery:function(e,n){var t=(0,u.Z)(n,2),r=t[0],i=t[1];return e==="{".concat(r,'="').concat(i,'"}')},editQuery:function(e,n,t,r){return oo.isEqualsQuery(e,n)&&null!==n?oo.equalLabels(n,t,r):lo.fromLabels(e,n,t,r)}},lo={fromLabels:function(e,n,t,r){var i=function(e,n,t){var r=(0,u.Z)(e,2),i=r[0],a=r[1],o="".concat(i,'="').concat(a,'"'),l="".concat(i,'!="').concat(a,'"'),c=oo.splitLabels(n);if(!c)return"";var d,f=(0,s.Z)(c);try{var p=function(){var e,r,s,u,c,f,p,v,h,g,m,x,b,y,Z,w,S,j,k,C,T,_=d.value,I=_.match(/([^{}=,~!]+)/gm),D=oo.splitLabels(n);if(!I)return{v:""};if(null!==a&&!_.includes(null===i||void 0===i?void 0:i.trim())&&(null===D||void 0===D||!D.some((function(e){return e.includes(i)})))){var N="!="===t?l:_,M=oo.addLabel(t,N,o);return{v:oo.splitLabels(n).concat(M).join(",")}}if(null!==a&&null!==_&&void 0!==_&&_.includes("=")&&(null===_||void 0===_||null===(e=_.split("="))||void 0===e||null===(r=e[0])||void 0===r?void 0:r.trim())===(null===i||void 0===i?void 0:i.trim())&&(null===_||void 0===_||!_.includes(a))){var E,R,O=oo.addValueToLabel(_,a,!0),L=new RegExp("".concat(_));return{v:null===oo||void 0===oo||null===(E=oo.splitLabels(n))||void 0===E||null===(R=E.join(","))||void 0===R?void 0:R.replace(L,O)}}if(null!==a&&null!==_&&void 0!==_&&_.includes("=~")&&(null===_||void 0===_||null===(s=_.split("=~"))||void 0===s||null===(u=s[0])||void 0===u?void 0:u.trim())===(null===i||void 0===i?void 0:i.trim())&&null!==_&&void 0!==_&&_.includes(a)){var V,z,F=oo.rmValueFromLabel(_,a),B=new RegExp("".concat(_));return{v:null===oo||void 0===oo||null===(V=oo.splitLabels(n))||void 0===V||null===(z=V.join(","))||void 0===z?void 0:z.replace(B,F)}}if(null!==a&&null!==_&&void 0!==_&&_.includes("=~")&&(null===_||void 0===_||null===(c=_.split("=~"))||void 0===c||null===(f=c[0])||void 0===f?void 0:f.trim())===(null===i||void 0===i?void 0:i.trim())&&(null===_||void 0===_||!_.includes(null===a||void 0===a?void 0:a.trim())))return{v:oo.addValueToLabel(_,a,!1)};if(null!==_&&void 0!==_&&_.includes("=")&&(null===_||void 0===_||null===(p=_.split("="))||void 0===p||null===(v=p[0])||void 0===v?void 0:v.trim())===(null===i||void 0===i?void 0:i.trim())&&((null===_||void 0===_||null===(h=_.split('"'))||void 0===h||null===(g=h[1])||void 0===g?void 0:g.trim())===(null===a||void 0===a?void 0:a.trim())||null===a)&&null!==D&&void 0!==D&&D.some((function(e){return e===_}))){var H=null===D||void 0===D?void 0:D.filter((function(e){return e!==_}));return{v:null===H||void 0===H?void 0:H.join(",")}}if(null!==_&&void 0!==_&&_.includes("!=")&&(null===_||void 0===_||null===(m=_.split("!="))||void 0===m||null===(x=m[0])||void 0===x?void 0:x.trim())===(null===i||void 0===i?void 0:i.trim())&&((null===_||void 0===_||null===(b=_.split('"'))||void 0===b||null===(y=b[1])||void 0===y?void 0:y.trim())===(null===a||void 0===a?void 0:a.trim())||null===a)&&null!==D&&void 0!==D&&D.some((function(e){return e===_}))){var P=null===D||void 0===D?void 0:D.filter((function(e){return e!==_}));return{v:null===P||void 0===P?void 0:P.join(",")}}if(null!==_&&void 0!==_&&_.includes("!=")&&(null===_||void 0===_||null===(Z=_.split("!=")[0])||void 0===Z?void 0:Z.trim())===(null===i||void 0===i?void 0:i.trim())){var q,A,Q=oo.addNonEqValueToLabel(_,a,!0),W=new RegExp("".concat(_));return{v:null===(q=oo.splitLabels(n))||void 0===q||null===(A=q.join(","))||void 0===A?void 0:A.replace(W,Q)}}if(null!==a&&null!==_&&void 0!==_&&_.includes("!~")&&(null===_||void 0===_||null===(w=_.split("!~"))||void 0===w||null===(S=w[0])||void 0===S?void 0:S.trim())===(null===i||void 0===i?void 0:i.trim())&&null!==_&&void 0!==_&&_.includes(a)){var U=oo.rmNonEqValueFromLabel(_,a),J=new RegExp("".concat(_));return{v:oo.splitLabels(n).join(",").replace(J,U)}}if(null!==_&&void 0!==_&&_.includes("!=")&&(null===_||void 0===_||null===(j=_.split("!="))||void 0===j||null===(k=j[0])||void 0===k?void 0:k.trim())===(null===i||void 0===i?void 0:i.trim())&&((null===_||void 0===_||null===(C=_.split('"'))||void 0===C||null===(T=C[1])||void 0===T?void 0:T.trim())===(null===a||void 0===a?void 0:a.trim())||null===a)&&null!==D&&void 0!==D&&D.some((function(e){return e===_}))){var G=null===D||void 0===D?void 0:D.filter((function(e){return e!==_}));return{v:null===G||void 0===G?void 0:G.join(",")}}};for(f.s();!(d=f.n()).done;){var v=p();if("object"===typeof v)return v.v}}catch(h){f.e(h)}finally{f.f()}return""}(n,e,t);return oo.formatQuery(i,r)}};function so(e,n,t,r,i){var a,o,l=oo.newQuery,s=oo.editQuery,u=[n,t],c=null===e||void 0===e?void 0:e.split(/[{}]/),d=(null===e||void 0===e?void 0:e.match(ao))&&c[1].length>7;return(null===(a=c[1])||void 0===a?void 0:a.length)<1&&"metrics"===i?"".concat(t,"{}"):(null===(o=c[1])||void 0===o?void 0:o.length)>1&&"metrics"===i?"".concat(t,"{").concat(c[1],"}"):d||"__name__"===n?s(e,u,r,c):l(u,r,c)}function uo(e,n,t,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"logs",o=(0,u.Z)(r,2),l=o[0],s=o[1],c=q.Z.dispatch,d=i?"!=":"=",f=q.Z.getState(),p=f.left,v=f.right,h=so(e,l,s,d,a);if("left"===n){var g=(0,H.Z)(p);g.forEach((function(e){e.id===t&&(e.expr=h)})),c(m(g))}if("right"===n){var b=(0,H.Z)(v);b.forEach((function(e){e.id===t&&(e.expr=h)})),c(x(b))}}function co(e,n,t,r){return e.includes("".concat(t).concat(n,'"').concat(r,'"'))}function fo(e,n,t){return po.apply(this,arguments)}function po(){return po=(0,F.Z)((0,z.Z)().mark((function e(n,t,r){var i,a,o,l,s,u,c,d,f=arguments;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=f.length>3&&void 0!==f[3]&&f[3],a=f.length>4?f[4]:void 0,n.preventDefault(),n.stopPropagation(),o=a.expr,l=a.panel,s=a.id,u=a.dataSourceType,c=co(o,"!=",t,r),d=co(o,"=",t,r),!(c&&i||d&&!i)){e.next=9;break}return e.abrupt("return");case 9:uo(o,l,s,[t,r],i,u);case 10:case"end":return e.stop()}}),e)}))),po.apply(this,arguments)}var vo=function(e){var n=e.dataSourceData,t=e.linkedFieldTags,r=e.buttonKey,a=e.value,o=e.openTraces,l=(0,i.v9)((function(e){return e.dataSources}));if(null!==n&&void 0!==n&&n.linkedFields){var s=n.linkedFields,c=function(e){var n,t;return(null===e||void 0===e||null===(n=e.fields)||void 0===n||null===(t=n.map((function(e){if(null!==e&&void 0!==e&&e.tagGroups){var n=Object.entries(null===e||void 0===e?void 0:e.tagGroups);return null===n||void 0===n?void 0:n.map((function(e){var n=(0,u.Z)(e,2);return{name:n[0],value:n[1]}}))}return[]})))||void 0===t?void 0:t.flat())||[]}(t),d=null===c||void 0===c?void 0:c.map((function(e){return e.name}));if((null===s||void 0===s?void 0:s.length)>0){var f=s[0],p=f.dataSourceId,v=f.linkType,h=f.internalLink,g=null===l||void 0===l?void 0:l.find((function(e){return e.id===p})),m=null===g||void 0===g?void 0:g.url;if(d.includes(r)&&a&&!0===h)return(0,ze.jsxs)(eo,{onClick:function(e){o(e,r,a,p,m,v)},children:[(0,ze.jsx)(ro.Z,{style:{width:"14px",height:"14px"}}),(0,ze.jsx)("span",{children:v})]})}}return null},ho=t(70306),go=t(48005);function mo(e){var n=e.label,t=e.value,r=e.actQuery;return(0,ze.jsxs)(ze.Fragment,{children:[(0,ze.jsx)("span",{"aria-label":"Filter for value",title:"Filter for value",onClick:function(e){return fo(e,n,t,!1,r)},className:"icon",children:(0,ze.jsx)(ho.Z,{color:"primary",style:to})}),(0,ze.jsx)("span",{"aria-label":"Filter out value",title:"Filter out value",onClick:function(e){return fo(e,n,t,!0,r)},className:"icon",children:(0,ze.jsx)(go.Z,{color:"primary",style:to})})]})}function xo(e){var n=e.tags,t=e.actQuery,r=e.dataSourceData,a=e.linkedFieldTags,o=(0,_.useMediaQuery)({query:"(max-width: 1013px)"}),s=(0,vi.F)(),c=(0,i.v9)((function(e){return e.isEmbed})),d=(0,i.I0)(),f=(0,i.v9)((function(e){return e.right})),p=function(n,t,r,i,a,s){var u;n.stopPropagation(),"left"!==(null===e||void 0===e||null===(u=e.actQuery)||void 0===u?void 0:u.panel)||o||d(w(!0));var c=JSON.parse(JSON.stringify(f)),p=JSON.parse(JSON.stringify(e.actQuery));try{var v=(0,l.Z)((0,l.Z)({},c[0]),{},{id:c[0].id,idRef:s+"="+r,panel:"right",queryType:"range",dataSourceType:s.toLowerCase()||"traces",dataSourceId:i||"32D16h5uYBqUUzhD",dataSourceURL:a,expr:r,limit:100,step:100,tableView:!1,chartView:!1,isShowTs:!1,browserOpen:!1,labels:[],values:[],direction:"forward",loading:!1,open:!0});d(Cn(s.toLowerCase()||"traces",r,"range",p.limit||100,"right",v.id,"forward",i||"32D16h5uYBqUUzhD",a)),d(x([v]))}catch(n){console.log(n)}};return(0,ze.jsx)(I.a,{theme:s,children:Object.entries(n).map((function(n,i){var o=(0,u.Z)(n,2),s=o[0],d=o[1];return(0,ze.jsx)(no,{children:(0,ze.jsxs)("div",{className:"value-tags",children:[!c&&(0,ze.jsx)(mo,{label:s,value:d,actQuery:t}),(0,ze.jsx)("span",{children:s}),(0,ze.jsxs)("span",{style:{flex:1},children:[d,(0,ze.jsx)(vo,(0,l.Z)((0,l.Z)({},e),{},{dataSourceData:r,linkedFieldTags:a,buttonKey:s,value:d,openTraces:p}))]})]},i)},i)}))})}function bo(e){var n=e.showLabels,t=e.tags,r=e.actQuery;return n?(0,ze.jsx)("div",{className:"value-tags-container",children:(0,ze.jsx)(xo,(0,l.Z)((0,l.Z)({},e),{},{tags:t,actQuery:r}))}):null}function yo(e){var n=e.toggleItemActive,t=e.index,r=e.log,i=e.actQuery,a=e.isMobile,o=e.isSplit,u=e.dataSourceData,d=r.tags,p=r.timestamp,v=r.text,h=r.showLabels,g=function(e,n){return(0,f.useMemo)((function(){var t;if((null===n||void 0===n||null===(t=n.linkedFields)||void 0===t?void 0:t.length)>0){var r,i=n.linkedFields.map((function(n){var t=n.id,r=n.regex,i=n.name,a=n.internalLink,o=new RegExp(r,"i"),l=e.match(o);return l&&(null===l||void 0===l?void 0:l.length)>0?{name:i,internalLink:a,id:t,tagGroups:l.groups}:{}})),a={tags:{},fields:[]},o=(0,s.Z)(i);try{for(o.s();!(r=o.n()).done;){var u=r.value;a.tags=(0,l.Z)((0,l.Z)({},a.tags),u.tagGroups),a.fields.push(u)}}catch(c){o.e(c)}finally{o.f()}return a}return{}}),[n,e])}(v,u),m=(0,f.useMemo)((function(){return function(e){var n=(null===e||void 0===e?void 0:e.severity)||(null===e||void 0===e?void 0:e.level);if(n){var t=Object.keys(qa).find((function(e){return qa[e].includes(n.toLowerCase())}));return Aa[t]}return Aa.unknown}(d)}),[d]),x=(0,f.useMemo)((function(){return function(e){return c(parseInt(e)).format("YYYY-MM-DD HH:mm:ss.SSS UTC")}(p)}),[p]),b={actQuery:i,tags:(0,l.Z)((0,l.Z)({},d),g.tags),linkedFieldTags:g,showLabels:h,dataSourceData:u},y={dateFormated:x,text:v,isMobile:a,isSplit:o,dataSourceData:u},Z={rowColor:m,onClick:function(){n(t)}};return(0,ze.jsxs)(Ga,(0,l.Z)((0,l.Z)({},Z),{},{children:[(0,ze.jsx)($a,(0,l.Z)((0,l.Z)({},y),{},{isShowTs:i.isShowTs})),(0,ze.jsx)(bo,(0,l.Z)({},b))]}))}function Zo(e){var n,t=e.items,r=e.toggleItemActive,a=e.actQuery,o=e.dataSourceId,l=a.splitted,s=Qa(t,r),u=(0,_.useMediaQuery)({query:"(max-width: 1013px)"}),c=function(e){return(0,f.useMemo)((function(){var n=null===e||void 0===e?void 0:e.linkedFields,t=null===e||void 0===e?void 0:e.id,r=null===e||void 0===e?void 0:e.name,i=null===e||void 0===e?void 0:e.url;if(e)return{linkedFields:n,id:t,name:r,url:i}}),[e])}((0,i.v9)((function(e){var n=e.dataSources;return null===n||void 0===n?void 0:n.find((function(e){return e.id===o}))})));return null===s||void 0===s||null===(n=s.items)||void 0===n?void 0:n.map((function(e,n){return(0,ze.jsx)(yo,{index:n,dataSourceId:o,dataSourceData:c,actQuery:a,log:e,isSplit:l,isMobile:u,toggleItemActive:r},n)}))}var wo,So,jo,ko,Co,To,_o,Io=function(e){(0,Ba.Z)(t,e);var n=(0,Ha.Z)(t);function t(e){var r;(0,za.Z)(this,t),(r=n.call(this,e)).toggleItemActive=function(e){return r.setState((function(n){var t=n.messages[e],r=n.messages.concat();return r[e]=(0,l.Z)((0,l.Z)({},t),{},{showLabels:!t.showLabels}),{messages:r}}))};var i=(e||[]).messages;return r.state={messages:i},r}return(0,Fa.Z)(t,[{key:"render",value:function(){var e=this.props.actualQuery,n=e.dataSourceId,t=this.state.messages;return(0,ze.jsx)(Xa,{children:(0,ze.jsx)(Zo,(0,l.Z)((0,l.Z)({},this.props),{},{dataSourceId:n,actQuery:e,items:t,toggleItemActive:this.toggleItemActive}))})}}]),t}(f.PureComponent),Do=t(24325),No=t(17432),Mo=t(23436),Eo=function(e,n,t,r){var i=(0,Mo.O4)(e.getValue(n),t);return r(i),i.passed},Ro={cell:function(e){return e.getValue()}},Oo=function(e,n){return{updateData:function(t,r,i){n(),e((function(e){return e.map((function(n,a){return a!==t?n:(0,l.Z)((0,l.Z)({},e[t]),{},(0,B.Z)({},r,i))}))}))}}},Lo=t(45987),Vo=["value","onChange","debounce","theme"],zo=function(e){return(0,Ve.iv)(wo||(wo=(0,r.Z)(["\n    color: ",";\n    background: ",";\n    border: 1px solid ",";\n    border-radius: 3px;\n    padding: 3px 8px;\n    font-size: 12px;\n"])),e.textColor,e.inputBg,e.buttonBorder)},Fo=function(e){var n=e.value,t=e.onChange,r=e.debounce,i=void 0===r?500:r,a=e.theme,s=(0,Lo.Z)(e,Vo),c=(0,f.useState)(n),d=(0,u.Z)(c,2),p=d[0],v=d[1];return(0,f.useEffect)((function(){v(n)}),[n]),(0,f.useEffect)((function(){var e=setTimeout((function(){t(p)}),i);return function(){return clearTimeout(e)}}),[p]),(0,ze.jsx)("input",(0,l.Z)((0,l.Z)({},s),{},{className:(0,Ve.cx)(zo(a)),value:o().sanitize(String(p)),onChange:function(e){return v(e.target.value)}}))},Bo=t(55748),Ho=t(22628),Po=t(79263),qo=t(53390),Ao=(0,Ve.iv)(So||(So=(0,r.Z)(["\n    display: flex;\n    align-items: center;\n    gap: 1px;\n"]))),Qo=(0,Ve.iv)(jo||(jo=(0,r.Z)(["\n    font-size: 12px;\n"]))),Wo=function(e){return(0,Ve.iv)(ko||(ko=(0,r.Z)(["\n    border-radius: 3px;\n    outline: none;\n    border: 1px solid ",";\n    background: ",";\n    color: ",";\n    padding: 3px 8px;\n    margin: 2px;\n    width: 70px;\n"])),e.buttonBorder,e.inputBg,e.textColor)},Uo=function(e){return(0,Ve.iv)(Co||(Co=(0,r.Z)(["\n    color: ",";\n    border: 1px solid ",";\n    background: ",";\n    padding: 3px 8px 2px 8px;\n    border-radius: 3px;\n    cursor: pointer;\n    font-size: 12px;\n"])),e.textColor,e.buttonBorder,e.inputBg)},Jo=((0,Ve.iv)(To||(To=(0,r.Z)(["\n    height: 12px;\n    width: 12px;\n"]))),function(e){return(0,Ve.iv)(_o||(_o=(0,r.Z)(["\n    display: flex;\n    align-items: center;\n    border: 1px solid ",";\n    color: ",";\n    background: ",";\n    cursor: pointer;\n"])),e.buttonBorder,e.textColor,e.buttonDefault)});var Go=function(e){e.getSelectedRowModel;var n=e.hasNextPage,t=e.hasPreviousPage,r=e.nextPage,i=e.pageCount,a=e.pageIndex,l=e.pageSize,s=e.previousPage,u=(e.refreshData,e.rerender,e.rowSelection,e.setPageIndex),c=e.setPageSize,d=e.totalRows,f=(0,vr.Fg)();return(0,ze.jsxs)(ze.Fragment,{children:[(0,ze.jsxs)("div",{style:{display:"flex",gap:"4px",alignItems:"center",flex:1,width:"100%",color:f.textColor,margin:"5px"},children:[(0,ze.jsx)("button",{className:(0,Ve.cx)(Jo(f)),onClick:function(){return u(0)},disabled:!t,children:(0,ze.jsx)(Ho.Z,{style:{height:"12px",width:"12px"}})}),(0,ze.jsx)("button",{className:(0,Ve.cx)(Jo(f)),onClick:function(){return s()},disabled:!t,children:(0,ze.jsx)(qo.Z,{style:{height:"12px",width:"12px"}})}),(0,ze.jsx)("button",{className:(0,Ve.cx)(Jo(f)),onClick:function(){return r()},disabled:!n,children:(0,ze.jsx)(Po.Z,{style:{height:"12px",width:"12px"}})}),(0,ze.jsx)("button",{className:(0,Ve.cx)(Jo(f)),onClick:function(){return u(i-1)},disabled:!n,children:(0,ze.jsx)(Bo.Z,{style:{height:"12px",width:"12px"}})}),(0,ze.jsx)("span",{className:(0,Ve.cx)(Ao,Qo),children:(0,ze.jsxs)("div",{children:["Page"," ",(0,ze.jsxs)("strong",{children:[a+1," of ",i]})]})}),(0,ze.jsxs)("span",{className:(0,Ve.cx)(Ao,Qo),children:["- Go to page:",(0,ze.jsx)("input",{type:"number",defaultValue:a+1,onChange:function(e){var n=e.target.value?Number(e.target.value)-1:0;u(n)},className:(0,Ve.cx)(Wo(f))})]}),(0,ze.jsx)("select",{className:(0,Ve.cx)(Uo(f)),value:o().sanitize(String(l)),onChange:function(e){c(Number(e.target.value))},children:[10,20,30,40,50].map((function(e){return(0,ze.jsxs)("option",{value:o().sanitize(String(e)),children:["Show ",e," Rows"]},e)}))}),(0,ze.jsxs)("div",{style:{fontSize:"12px",marginLeft:"6px"},children:[" ","Total: ",d," Rows"]})]}),(0,ze.jsx)("div",{className:"flex items-center gap-2"})]})},Ko=function(e){var n,t,r,i,a=e.columnFilterValue,o=e.getFacetedMinMaxValues,l=e.setFilterValue,s=(0,vr.Fg)(),u=null===(n=o())||void 0===n?void 0:n[0],c=Number(null!==u&&void 0!==u?u:""),d=null===(t=o())||void 0===t?void 0:t[1],f=Number(d);return(0,ze.jsxs)("div",{children:[(0,ze.jsxs)("div",{style:{display:"flex",gap:"4px",alignItems:"center",justifyContent:"center"},children:[(0,ze.jsx)(Fo,{theme:s,type:"number",min:c,max:f,value:null!==(r=null===a||void 0===a?void 0:a[0])&&void 0!==r?r:"",onChange:function(e){return l((function(n){return[e,null===n||void 0===n?void 0:n[1]]}))},placeholder:"Min ".concat(u?"(".concat(c,")"):""),className:"w-24 border shadow rounded"}),(0,ze.jsx)(Fo,{theme:s,type:"number",min:c,max:f,value:null!==(i=null===a||void 0===a?void 0:a[1])&&void 0!==i?i:"",onChange:function(e){return l((function(n){return[null===n||void 0===n?void 0:n[0],e]}))},placeholder:"Max ".concat(d?"(".concat(f,")"):""),className:"w-24 border shadow rounded"})]}),(0,ze.jsx)("div",{className:"h-1"})]})},Yo=function(e){var n=e.columnId,t=e.columnFilterValue,r=e.columnSize,i=e.setFilterValue,a=e.sortedUniqueValues,l=n+"list",s=(0,vr.Fg)();return(0,ze.jsxs)(f.Fragment,{children:[(0,ze.jsx)("datalist",{id:l,children:a.slice(0,5e3).map((function(e){return(0,ze.jsx)("option",{value:o().sanitize(e)},e)}))}),(0,ze.jsx)(Fo,{theme:s,type:"text",value:o().sanitize(null!==t&&void 0!==t?t:""),onChange:function(e){return i(e)},placeholder:"Search... (".concat(r,")"),className:"w-36 border shadow rounded",list:l}),(0,ze.jsx)("div",{className:"h-1"})]})};var Xo,$o,el=function(e){var n,t=e.column,r=null===(n=e.table.getPreFilteredRowModel().flatRows[0])||void 0===n?void 0:n.getValue(t.id),i=t.getFilterValue(),a=t.getFacetedUniqueValues(),l=(0,f.useMemo)((function(){return"number"===typeof r?[]:Array.from(a.keys()).sort()}),[a]);return"number"===typeof r?(0,ze.jsx)(Ko,{columnFilterValue:i,getFacetedMinMaxValues:t.getFacetedMinMaxValues,setFilterValue:t.setFilterValue}):(0,ze.jsx)(Yo,{columnId:t.id,columnFilterValue:o().sanitize(i),columnSize:a.size,setFilterValue:t.setFilterValue,sortedUniqueValues:l})},nl=t(74612),tl=t(32882),rl=(0,Ve.iv)(Xo||(Xo=(0,r.Z)(["\n    position: relative;\n    &.resizer {\n        position: absolute;\n        left: 0;\n        top: 0;\n        height: 100%;\n        width: 5px;\n        cursor: col-resize;\n        user-select: none;\n        touch-action: none;\n        &.isResizing {\n            background: blue;\n            opacity: 1;\n        }\n    }\n"]))),il=function(e,n){return(0,Ve.iv)($o||($o=(0,r.Z)(["\n    height: 14px !important;\n    width: 14px !important;\n    color: "," !important;\n    cursor: pointer;\n    border: 1px solid ",";\n    border-radius: 3px;\n    padding: 2px;\n"])),e,n)};function al(e,n){return"left"===n?e.getLeftVisibleCells():"right"===n?e.getRightVisibleCells():"center"===n?e.getCenterVisibleCells():e.getVisibleCells()}var ol,ll=function(e){var n=e.table,t=e.tableGroup,r=(e.columnResizeMode,(0,vr.Fg)()),i=function(e,n){return"left"===n?[e.getLeftHeaderGroups(),e.getLeftFooterGroups()]:"right"===n?[e.getRightHeaderGroups(),e.getRightFooterGroups()]:"center"===n?[e.getCenterHeaderGroups(),e.getCenterFooterGroups()]:[e.getHeaderGroups(),e.getFooterGroups()]}(n,t),a=(0,u.Z)(i,1)[0];return(0,ze.jsx)(I.a,{theme:r,children:(0,ze.jsxs)("table",{style:{width:"100%"},children:[(0,ze.jsx)("thead",{children:a.map((function(e){return(0,ze.jsx)("tr",{children:e.headers.map((function(e){var t;return(0,ze.jsxs)("th",{className:(0,Ve.cx)(rl),key:e.id,colSpan:e.colSpan,style:{width:e.getSize()},children:[" ",(0,ze.jsxs)("div",{style:{display:"flex",gap:"6px",alignItems:"center",fontSize:"13px"},children:[e.isPlaceholder?null:(0,Do.ie)(e.column.columnDef.header,e.getContext()),(0,ze.jsx)("div",{onMouseDown:e.getResizeHandler(),onTouchStart:e.getResizeHandler(),className:"resizer ".concat(e.column.getIsResizing()?"isResizing":"")}),(0,ze.jsxs)("div",{style:{fontSize:"12px",display:"flex",alignItems:"center",gap:"6px"},children:[e.column.getCanFilter()?(0,ze.jsx)("div",{children:(0,ze.jsx)(el,{column:e.column,table:n})}):null,(0,ze.jsx)("button",{onClick:e.column.getToggleSortingHandler(),style:{border:"none",background:"none",display:"flex",alignItems:"center"},title:"Sort",className:e.column.getCanSort()?"cursor-pointer select-none":"",children:null!==(t={asc:(0,ze.jsx)(tl.Z,{className:(0,Ve.cx)(il(r.textColor,r.buttonBorder))}),desc:(0,ze.jsx)(bt.Z,{className:(0,Ve.cx)(il(r.textColor,r.buttonBorder))})}[e.column.getIsSorted()])&&void 0!==t?t:(0,ze.jsx)(nl.Z,{className:(0,Ve.cx)(il(r.textColor,r.buttonBorder))})})]})]})]})}))},e.id)}))}),(0,ze.jsx)("tbody",{children:n.getRowModel().rows.map((function(e){return(0,ze.jsx)("tr",{children:al(e,t).map((function(e){return(0,ze.jsx)("td",{style:{width:e.column.getSize(),fontSize:"12px"},children:(0,Do.ie)(e.column.columnDef.cell,e.getContext())},e.id)}))},e.id)}))})]})})};var sl,ul=St.Z.div(ol||(ol=(0,r.Z)(["\n    padding: 5px;\n\n    table {\n        border-spacing: 0;\n        border: 1px solid ",";\n        border-radius: 4px;\n        border-bottom: none;\n        border-top: none;\n        color: ",";\n\n        tr {\n            :last-child {\n                td {\n                    border-bottom: none;\n                }\n            }\n        }\n\n        th,\n        td {\n            margin: 0;\n            padding: 0.45rem;\n            border-bottom: 1px solid ",";\n            border-right: 1px solid ",";\n            :last-child {\n                border-right: 0;\n            }\n        }\n\n        td {\n            input {\n                font-size: 12px;\n                padding: 0;\n                margin: 0;\n                border: 0;\n            }\n        }\n    }\n\n    .pagination {\n        padding: 0.5rem;\n    }\n"])),(function(e){return e.theme.buttonBorder}),(function(e){return e.theme.textColor}),(function(e){return e.theme.buttonBorder}),(function(e){return e.theme.buttonBorder}));function cl(e){var n,t=(0,f.useReducer)((function(){return{}}),{})[1],r=e.columns,i=e.data,a=(0,vr.Fg)(),l=(0,f.useState)(i),s=(0,u.Z)(l,2),c=s[0],d=s[1],p=(0,f.useState)({}),v=(0,u.Z)(p,2),h=v[0],g=v[1],m=(0,f.useState)([]),x=(0,u.Z)(m,2),b=x[0],y=x[1],Z=(0,f.useState)({}),w=(0,u.Z)(Z,2),S=w[0],j=w[1],k=(0,f.useState)([]),C=(0,u.Z)(k,2),T=C[0],_=C[1],D=(0,f.useState)(""),N=(0,u.Z)(D,2),M=N[0],E=N[1],R=function(){var e=(0,f.useRef)(!0),n=e.current,t=(0,f.useCallback)((function(){e.current=!1}),[]);return(0,f.useEffect)((function(){e.current=!0})),(0,f.useMemo)((function(){return[Boolean(n),t]}),[n,t])}(),O=(0,u.Z)(R,2),L=O[0],V=O[1],z=(0,f.useState)("onChange"),F=(0,u.Z)(z,1)[0],B=(0,Do.b7)({data:c,columns:r,defaultColumn:Ro,getCoreRowModel:(0,No.sC)(),getFilteredRowModel:(0,No.vL)(),getPaginationRowModel:(0,No.G_)(),getSortedRowModel:(0,No.tj)(),getGroupedRowModel:(0,No.qe)(),getFacetedRowModel:(0,No.o6)(),getFacetedUniqueValues:(0,No.JG)(),getFacetedMinMaxValues:(0,No.HO)(),onColumnFiltersChange:_,onGlobalFilterChange:E,globalFilterFn:Eo,autoResetPageIndex:L,enableColumnResizing:!0,columnResizeMode:F,onColumnVisibilityChange:g,onGroupingChange:y,onRowSelectionChange:j,meta:Oo(d,V),state:{grouping:b,columnFilters:T,globalFilter:M,columnVisibility:h}});return(0,f.useEffect)((function(){var e,n;"fullName"===(null===(e=B.getState().columnFilters[0])||void 0===e?void 0:e.id)&&("fullName"!==(null===(n=B.getState().sorting[0])||void 0===n?void 0:n.id)&&B.setSorting([{id:"fullName",desc:!1}]))}),[null===(n=B.getState().columnFilters[0])||void 0===n?void 0:n.id]),(0,ze.jsx)(I.a,{theme:a,children:(0,ze.jsxs)(ul,{theme:a,children:[(0,ze.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",margin:"4px",marginLeft:0},children:[(0,ze.jsx)("div",{style:{display:"flex",fontSize:"14px",gap:"6px",margin:"4px",marginLeft:0},children:B.getAllLeafColumns().map((function(e){return(0,ze.jsx)("div",{children:(0,ze.jsxs)("label",{style:{display:"flex",alignItems:"center",color:a.textColor},children:[(0,ze.jsx)("input",{type:"checkbox",checked:e.getIsVisible(),onChange:e.getToggleVisibilityHandler(),className:"mr-1"}),e.id]})},e.id)}))}),(0,ze.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"4px",fontSize:"14px",margin:"4px",color:a.textColor},children:["Search:",(0,ze.jsx)(Fo,{theme:a,style:{fontSize:"12px",padding:"3px 8px"},value:o().sanitize(null!==M&&void 0!==M?M:""),onChange:function(e){return E(String(e))},placeholder:"Search all columns..."})]})]}),(0,ze.jsx)("div",{style:{display:"flex"},children:(0,ze.jsx)(ll,{columnResizeMode:F,table:B,tableGroup:"center"})}),(0,ze.jsx)("div",{style:{display:"flex"},children:(0,ze.jsx)(Go,{getSelectedRowModel:B.getSelectedRowModel,hasNextPage:B.getCanNextPage(),hasPreviousPage:B.getCanPreviousPage(),nextPage:B.nextPage,pageCount:B.getPageCount(),pageIndex:B.getState().pagination.pageIndex,pageSize:B.getState().pagination.pageSize,previousPage:B.previousPage,refreshData:function(){return d(i)},rerender:t,rowSelection:S,setPageIndex:B.setPageIndex,setPageSize:B.setPageSize,totalRows:B.getPrePaginationRowModel().rows.length})})]})})}var dl=St.Z.div(sl||(sl=(0,r.Z)(["\n    display: block;\n    overflow: auto;\n    &::-webkit-scrollbar {\n        width: 5px;\n    }\n    &::-webkit-scrollbar-corner {\n        background: transparent;\n    }\n    &::-webkit-scrollbar-thumb {\n        border-radius: 5px;\n        background: ",";\n    }\n    .table {\n        border-spacing: 0;\n        border-radius: 4px;\n        font-size: 12px;\n        color: ",";\n        &::-webkit-scrollbar {\n            width: 5px;\n        }\n        &::-webkit-scrollbar-corner {\n            background: transparent;\n        }\n        &::-webkit-scrollbar-thumb {\n            border-radius: 5px;\n            background: ",";\n        }\n        .tr {\n            display: block;\n            :last-child {\n                .td {\n                    border-bottom: 0;\n                }\n            }\n        }\n        .th {\n            background: ",";\n            border-bottom: none;\n            padding: 3px;\n            :last-child {\n                box-sizing: unset !important;\n            }\n        }\n        .th,\n        .td {\n            display: block;\n            flex: 1;\n            margin: 0;\n            justify-content: space-between;\n            border-bottom: 1px solid\n                ",";\n            border-right: 1px solid\n                ",";\n            padding: 3px;\n            position: relative;\n            white-space: nowrap;\n            overflow: hidden;\n            .show-add-labels {\n                display: none;\n            }\n            &:hover {\n                .show-add-labels {\n                    display: flex;\n                    align-items: center;\n                }\n            }\n\n            :last-child {\n                border-right: 0;\n                padding-right: 0px;\n            }\n\n            .resizer {\n                display: inline-block;\n                background: ",";\n                width: 5px;\n                height: 100%;\n                position: absolute;\n                right: 0;\n                top: 0;\n                transform: translateX(50%);\n                z-index: 1;\n                // touch-action:none;\n                &.isResizing {\n                    background: red;\n                }\n            }\n        }\n    }\n\n    .pagination {\n        // padding: 0.5rem;\n    }\n"])),(function(e){return e.theme.scrollbarThumb}),(function(e){return e.theme.textColor}),(function(e){return e.theme.scrollbarThumb}),(function(e){return e.theme.buttonHover}),(function(e){return e.theme.buttonBorder}),(function(e){return e.theme.buttonBorder}),(function(e){return e.theme.buttonBorder})),fl=function(e){var n=e.data,t=n.columnsData,r=n.dataRows,i=e.actualQuery,a=e.height,o=e.size,l=e.width,s=(0,f.useMemo)((function(){return t}),[t]),u=(0,f.useMemo)((function(){return r}),[r]);return(0,ze.jsx)(dl,{children:t&&r&&(0,ze.jsx)(cl,{actQuery:i,columns:s,width:l,data:u,height:a,size:o})})},pl=t(10580),vl=t.n(pl);function hl(e){var n=e.id;try{return JSON.parse(localStorage.getItem("tabsState")||"{[".concat(n,"]:0}"))}catch(t){return(0,B.Z)({},n,0)}}var gl=t(76666),ml=t.n(gl),xl=window;xl.$=ml(),xl.jQuery=ml();t(70764),t(23187),t(16850),t(59682),t(48815),t(22073);var bl="".concat("qryn_view","_chart_type"),yl=function(){return{xaxis:{show:!0,mode:"time",timezone:"local",timeformat:"%Y-%m-%d %H:%M:%S",reserveSpace:!1,shadowSize:0},yaxis:{tickFormatter:Ll},grid:{show:!0,aboveData:!1,color:"#999",clickable:!0,hoverable:!0,autoHighlight:!1,highlightColor:"blue",mouseActiveRadius:30,borderWidth:0,minBorderMargin:0,labelMarginX:0,labelMarginY:0,shadowSize:0,margin:{left:5,right:5}},legend:{noColumns:0,position:"nw",show:!1},interaction:{redrawOverlayInterval:1},series:{stack:arguments.length>0&&void 0!==arguments[0]&&arguments[0],lines:{show:!0,lineWidth:1.5,shadowSize:0,zero:!1},bars:{align:"center",show:!1,barWidth:5e3,shadowSize:0,zero:!1},points:{show:!0,radius:1,shadowSize:0,zero:!1}},markings:{clickable:!1},crosshair:{color:"#88888855",mode:"xy",linewidth:1},selection:{mode:"x"}}},Zl=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{stack:n,lines:{show:!1,lineWidth:1.5,shadowSize:0,fill:n},bars:{show:!0,barWidth:0!==e?e:5e3,shadowSize:0},points:{show:!0,radius:.25,shadowSize:0}}},wl=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{stack:e,lines:{show:!0,lineWidth:1,shadowSize:0,stack:e,fill:e},bars:{show:!1,barWidth:0,shadowSize:0},points:{show:!1,radius:1,shadowSize:0}}},Sl=function(){return{stack:arguments.length>0&&void 0!==arguments[0]&&arguments[0],lines:{show:!1,lineWidth:1.5,shadowSize:0},bars:{show:!1,barWidth:0,shadowSize:0},points:{show:!0,radius:2,shadowSize:0}}};var jl=function(e){return 2===(null===e||void 0===e?void 0:e.length)?e[1]:e[1]-e[2]};function kl(e){return(null===e||void 0===e?void 0:e.length)>0&&(null===e||void 0===e?void 0:e.filter((function(e){return parseFloat(e.value)===parseFloat(jl(e.item.datapoint))})))||[]}function Cl(e){var n,t=kl(e);return(null===(n=t)||void 0===n?void 0:n.map((function(e){return o().sanitize(' <div style="display:flex;justify-content:space-between">\n                           <div style="display:flex;margin-right:10px;">\n                               <span style="background:'.concat(e.color,';\n                               height:6px;width:24px;pading:3px;\n                               border-radius:1px;margin:4px;"></span> \n                               <p style="display:flex;flex-wrap:wrap; justify-content:space-between;\n                               line-height:1.25">').concat(e.label,"</p> \n                            </div>\n                        <div>\n                    </div>\n                </div>\n    "))})).join(""))||[]}function Tl(e){var n=e.map((function(e){var n;return null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.map((function(e){var n=(0,u.Z)(e,2),t=n[0];n[1];return t}))})).flat().sort(),t=n[0],r=n[n.length-1],i=r-t;return{first:t,last:r,timeSpan:i/1e3/107e3,length:n.length,timeDiff:i,seriesLength:e.length}}var _l=function(e,n){var t=e.length,r=e.timeDiff,i=e.seriesLength;return Math.round(r/n/t*(1===i?.5:i-1)*1e3)};function Il(e){var n=Tl(e),t=n.timeSpan;return{timeformat:t>1?"%m/%d %H:%M":t>30?"%y/%m/%d %H:%M":"%H:%M:%S",min:n.first,max:n.last}}function Dl(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(e){case"bar":return Zl(n,t);case"line":default:return wl(t);case"points":return Sl(t)}}function Nl(e){var n,t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,a=(0,l.Z)({},e);return 0===(null===(n=Object.keys(e))||void 0===n?void 0:n.length)&&(a={level:"unknown"},1===i&&r&&(a={level:"logs"})),r&&a?null===(t=Object.entries(a))||void 0===t?void 0:t.map((function(e){var n=(0,u.Z)(e,2);n[0];return n[1]})):!r&&a?"{ "+Object.entries(a).map((function(e){var n=(0,u.Z)(e,2),t=n[0],r=n[1];return"".concat(t,'="').concat(r,'"')})).join(", ")+" }":""}function Ml(){var e=[];try{var n=localStorage.getItem("labelsSelected");return"string"===typeof n&&(e=JSON.parse(n)),e}catch(t){return console.log(t),e}}function El(e){var n=e.label.id,t=Ml();return(null===t||void 0===t?void 0:t.length)>0&&t.some((function(e){return e.id===n}))}function Rl(e,n){var t,r=Ml();if(r.length>0){var i=null===(t=r)||void 0===t?void 0:t.map((function(e){return e.id})),a=null===e||void 0===e?void 0:e.map((function(e){return null!==i&&void 0!==i&&i.includes(e.id)?function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=Dl(n,0,t),i=r.lines,a=r.bars,o=r.points;return(0,l.Z)((0,l.Z)({},e),{},{stack:t,bars:a,lines:i,points:o,isVisible:!0})}(e,n):function(e){return(0,l.Z)((0,l.Z)({},e),{},{lines:(0,l.Z)((0,l.Z)({},e.lines),{},{show:!1}),bars:(0,l.Z)((0,l.Z)({},e.bars),{},{show:!1}),points:(0,l.Z)((0,l.Z)({},e.points),{},{show:!1}),isVisible:!1})}(e)}));return a}return e}function Ol(e,n){var t=0;return"M"===n&&(t=1e6),"K"===n&&(t=1e3),e%t===0?0:1}function Ll(e,n){return e>999999?(e/1e6).toFixed(Ol(e,"M"))+" M":e>999?(e/1e3).toFixed(Ol(e,"K"))+" K":e.toFixed(n.tickDecimals)}var Vl=window.jQuery;function zl(e){var n=null;Vl("#tooltip").remove(),n=null,Vl(this).on("plothover",(function(t,r,i){e.unhighlight(),i?function(){for(var t=e.getData(),r=(0,u.Z)(i.datapoint,2),a=r[0],l=(r[1],JSON.parse(localStorage.getItem("labelsSelected")||"null")),s=function(e){return 2===(null===e||void 0===e?void 0:e.length)?e[1]:e[1]-e[2]},c=parseFloat(i.datapoint[1])%1?parseFloat(s(i.datapoint)).toFixed(3):s(i.datapoint),f=l.length>0,p=[],v=0;v<t.length;v++){var h=!f||El(t[v]),g=t[v].data.map((function(e){return e})).map((function(e){return e[0]})),m=t[v].data.map((function(e){return e}));if(g.includes(a)&&h){var x=g.indexOf(a),b=m.find((function(e){var n=(0,u.Z)(e,2),t=n[0];n[1];return t===a})),y=(0,u.Z)(b,2),Z=(y[0],y[1]);p.push({color:t[v].color,label:t[v].label,value:Z,plot:e,plotIndex:x,item:i,i:v})}}p.forEach((function(e){e.plot.highlight(e.i,e.plotIndex)}));var w=Cl(p);if(n!==i.datapoint){n=i.datapoint;var S=o().sanitize('<div style="'.concat("display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid #666;padding:6px;flex:1",'">\n                <p>',d()(i.datapoint[0]).format("YYYY-MM-DDTHH:mm:ss.SSSZ"),'</p>\n      \n                <p style="margin-left:10px">\n              Value: ').concat(c,'</p>\n                </div>\n               <div style="padding:3px">\n                ').concat(w,"\n                </div>"));Vl("#tooltip").remove();var j=S;if((null===p||void 0===p?void 0:p.length)>0){var k=function(e){var n=kl(e);if((null===n||void 0===n?void 0:n.length)>0){var t,r,i=null===n||void 0===n?void 0:n.sort((function(e,n){return e.label.length>n.label.length?0:1}));return i&&i.length>0?null===(t=i[0])||void 0===t||null===(r=t.label)||void 0===r?void 0:r.length:0}return 0}(p);!function(e,n,t,r){var i,a=window.innerWidth/2,l=window.event.clientX;i=l,l>a&&(i-=r<125?6*r+15:505);Vl(o().sanitize('<div id="tooltip">'.concat(t,"</div>"))).css({position:"absolute",display:"none",top:n,left:i,padding:"6px","font-size":"12px","flex-direction":"column","max-width":"500px","border-radius":"6px 6px 6px 6px","background-color":"#333",color:"#aaa"}).appendTo("body").fadeIn(125)}(i.pageX,i.pageY,j,k)}}}():(Vl("#tooltip").remove(),n=null)}))}var Fl,Bl,Hl,Pl,ql,Al,Ql,Wl={critical:"purple",error:"red",warning:"orange",info:"green",debug:"blue",trace:"lightblue",unknown:"gray"},Ul=function(e,n,t){return(0,f.useMemo)((function(){var r,i,a=[{data:[],label:[],isVisible:!0,shadowSize:0,id:""}];return(null===n||void 0===n?void 0:n.length)>0?(a=null===(r=(0,H.Z)(n))||void 0===r?void 0:r.map((function(e){var r,i,a={data:(r=null===e||void 0===e?void 0:e.values,(null===r||void 0===r?void 0:r.map((function(e){var n=(0,u.Z)(e,2);return[1e3*n[0],n[1]]})))||[]),label:Nl(null===e||void 0===e?void 0:e.metric,t,n.length),isVisible:!0,shadowSize:0,id:e.id};if(t){var o=(i=Nl(null===e||void 0===e?void 0:e.metric,t,n.length)||"",Wl[i[0]]||"gray");a.color=o}return a})),e?null===(i=a)||void 0===i?void 0:i.splice(0,20):a):a}),[e,n])},Jl=function(e){var n=e.tWidth,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return(0,f.useMemo)((function(){if(n){var e=(0,l.Z)({},yl(t));return e.xaxis.ticks=Math.round(n/125),e}return yl}),[n])},Gl=function(e){return(0,f.useMemo)((function(){return Le.n[e]}),[e])};function Kl(){return(0,f.useMemo)((function(){return function(){try{var e=localStorage.getItem("labelsSelected");if("string"===typeof e)return JSON.parse(e)}catch(n){return console.log(n),[]}}()}),[])}var Yl=St.Z.div(Fl||(Fl=(0,r.Z)(["\n  display: flex;\n  flex-wrap: wrap;\n  max-height: 60px;\n  overflow-y: auto;\n  margin: 5px;\n  &::-webkit-scrollbar {\n    width: 5px;\n    height: 5px;\n  }\n  &::-webkit-scrollbar-corner {\n    background: transparent;\n  }\n  &::-webkit-scrollbar-thumb {\n    border-radius: 5px;\n    background: ",";\n  }\n"])),(function(e){return e.theme.scrollbarThumb})),Xl=St.Z.div(Bl||(Bl=(0,r.Z)(["\n  font-size: 12px;\n  color: ",";\n  font-family: sans-serif;\n  display: flex;\n  align-items: center;\n  line-height: 1.5;\n  padding-right: 10px;\n  cursor: pointer;\n  opacity: ",";\n  border-radius: 3px;\n  &:hover {\n    background: ",";\n  }\n"])),(function(e){return e.theme.textColor}),(function(e){return e.isVisible?"1":".5"}),(function(e){return e.theme.buttonHover})),$l=St.Z.div(Hl||(Hl=(0,r.Z)(["\n  height: 4px;\n  width: 16px;\n  margin-right: 8px;\n  background: ",';\n  content: " ";\n'])),(function(e){return e.color})),es=St.Z.button(Pl||(Pl=(0,r.Z)(["\n  background: ",";\n  color: ",";\n  padding: 3px 12px;\n  border: 1px solid ",";\n  border-radius: ",";\n  cursor: pointer;\n  font-size: 12px;\n  line-height: 20px;\n  white-space: nowrap;\n  flex: 1;\n"])),(function(e){return e.isActive?e.theme.buttonDefault:e.theme.buttonHover}),(function(e){return e.theme.textColor}),(function(e){return e.theme.buttonBorder}),(function(e){return e.rightBtn?"0px 3px 3px 0px":e.leftBtn?"3px 0px 0px 3px":"none"})),ns=St.Z.div(ql||(ql=(0,r.Z)(["\n  display: flex;\n  align-items: center;\n  flex-direction: ",";\n\n  margin: 10px 25px;\n  justify-content: space-between;\n  .limit-cont {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    flex: 1;\n    margin-bottom: ",";\n    width: ",";\n    div {\n      flex: ",";\n      text-align: ",";\n    }\n  }\n  .chart-buttons-cont {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex: ",";\n    width: ",";\n  }\n"])),(function(e){return e.isMobile?"column":"row"}),(function(e){return e.isMobile?"10px":"0px"}),(function(e){return e.isMobile?"100%":"auto"}),(function(e){return e.isMobile?"1":"0"}),(function(e){return e.isMobile?"center":"left"}),(function(e){return e.isMobile?"1":"0"}),(function(e){return e.isMobile?"100%":"auto"})),ts=St.Z.div(Al||(Al=(0,r.Z)(["\n  font-size: 12px;\n  line-height: 20px;\n  padding: 3px 12px;\n  white-space: nowrap;\n  color: ",";\n  background: ",";\n  border: 1px solid ",";\n  border-radius: 3px;\n  cursor: pointer;\n  transition: 0.2s all;\n  &:hover {\n    background: ",";\n  }\n"])),(function(e){return e.theme.textColor}),(function(e){return e.theme.buttonDefault}),(function(e){return e.theme.buttonBorder}),(function(e){return e.theme.buttonHover})),rs=St.Z.div(Ql||(Ql=(0,r.Z)(["\n  height: inherit;\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  background: ",";\n  .chart-cont {\n    flex: 1;\n  }\n"])),(function(e){return e.theme.chartBg}));function is(e){var n=e.onLabelClick,t=e.labels,r=Kl(),i=(0,f.useMemo)((function(){return(null===r||void 0===r?void 0:r.length)>0}),[r]);function a(e){var n=e.id;return null===r||void 0===r?void 0:r.some((function(e){return e.id===n}))}return(0,ze.jsx)(Yl,{children:(null===t||void 0===t?void 0:t.length)&&(null===t||void 0===t?void 0:t.map((function(e,r){return(0,ze.jsxs)(Xl,{isVisible:!i||a(e),onClick:function(){return function(e){e.isVisible=!e.isVisible,n(t,e)}(e)},children:[(0,ze.jsx)($l,{color:e.color}),e.label]},r)})))})}function as(e){var n=e.isSpliced,t=e.handleNoLimitData,r=e.handleLimitData,i=e.matrixData;return n?(0,ze.jsxs)(ts,{onClick:t,children:[i.length>20?"Showing: 20 Series, Show All ":"Showing: ",i.length," Series"]}):(0,ze.jsxs)(ts,{onClick:r,children:["Showing: ",i.length," Series, Show Only 20 Series"]})}function os(e){var n=e.matrixData,t=e.chartType,r=e.handleNoLimitData,i=e.handleLimitData,a=e.isSpliced,o=e.onSetChartType,l=(0,vr.Fg)(),s=(0,_.useMediaQuery)({query:"(max-width: 565px)"});return(0,ze.jsx)(I.a,{theme:l,children:(0,ze.jsxs)(ns,{isMobile:s,children:[(0,ze.jsx)("div",{className:"limit-cont",children:(0,ze.jsx)(as,{isSpliced:a,handleNoLimitData:r,handleLimitData:i,matrixData:n})}),(0,ze.jsxs)("div",{className:"chart-buttons-cont",children:[(0,ze.jsx)(es,{isActive:"bar"===t,onClick:function(){o("bar")},leftBtn:!0,children:"bar chart"}),(0,ze.jsx)(es,{onClick:function(){o("line")},isActive:"line"===t,children:"line chart"}),(0,ze.jsx)(es,{onClick:function(){o("points")},isActive:"points"===t,rightBtn:!0,children:"points chart"})]})]})})}function ls(e){var n=e.theme,t=e.matrixData,r=e.chartType,i=e.handleLimitData,a=e.handleNoLimitData,o=e.isSpliced,l=e.onSetChartType,s=e.chartRef,u=e.onLabelClick,c=e.labels,d=e.isLogsVolume;return(0,ze.jsx)(I.a,{theme:n,children:(0,ze.jsxs)(rs,{children:[d?(0,ze.jsx)("div",{style:{display:"flex",justifyContent:"center",fontSize:"12px",color:n.textColor},children:"Logs Volume"}):(0,ze.jsx)(os,{matrixData:t,chartType:r,handleNoLimitData:a,handleLimitData:i,isSpliced:o,onSetChartType:l}),(0,ze.jsx)("div",{className:"chart-cont",children:(0,ze.jsx)("div",{ref:s,id:"chart-container",style:{flex:"1",minHeight:"97px",height:"100%",display:"block",position:"relative",paddingTop:"10px"}})}),(0,ze.jsx)(is,{onLabelClick:u,labels:c})]})})}function ss(e){var n=e.matrixData,t=e.actualQuery,r=e.type,a=e.tWidth,o=t.expr,s=t.dataSourceType,d=t.queryType,p=t.limit,h=t.panel,g=t.id,m=t.isLogsVolume,x=(0,f.useRef)(null),b=(0,i.v9)((function(e){return e.theme})),y=Gl(b),Z=window.jQuery;Z.fn.UseTooltip=zl;var w=Ul(!0,n,m&&"stream"===r),S=(0,i.I0)(),j=(0,f.useState)(!0),k=(0,u.Z)(j,2),C=k[0],T=k[1],_=(0,f.useState)(w),I=(0,u.Z)(_,2),D=I[0],N=I[1],M=(0,f.useState)(Ul(!1,n,m&&"stream"===r)),E=(0,u.Z)(M,1)[0],R=(0,f.useState)([]),O=(0,u.Z)(R,2),L=O[0],V=O[1],z=(0,f.useState)(x.current),F=(0,u.Z)(z,2),B=F[0],H=F[1],P=Jl({tWidth:a},m&&"stream"===r||!1),q=(0,f.useState)(P),A=(0,u.Z)(q,2),Q=A[0],W=A[1],U=(0,f.useMemo)((function(){var e=localStorage.getItem(bl);return m&&"stream"===r?"bar":""!==e?e:"line"}),[m]),J=(0,f.useState)(U),G=(0,u.Z)(J,2),K=G[0],Y=G[1];function X(e,n,t){var r=0;m&&"stream"===n&&(r=_l(Tl(e),a));var i=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];switch(e){case"bar":return{series:Zl(n,t)};case"line":default:return{series:wl(t)};case"points":return{series:Sl(t)}}}(n,r),o=Il(e),s=o.timeformat,u=o.min,c=o.max;return Z.plot(t,e,Z.extend(!0,{},Q,(0,l.Z)((0,l.Z)({},i),{},{xaxis:{timeformat:s,min:u,max:c}})))}function $(e){var n=Z(x.current),t=C?D:E,r=Rl(t,e);try{var i=X(r,e,n),a=i.getData();V(a),Z(x.current).UseTooltip(i),Y(e),function(e){localStorage.setItem(bl,e)}(e)}catch(o){console.log(t,o)}}function ee(e,n){var t=Z(x.current),i=C?D:E;e.preventDefault();var u=[],f=JSON.parse(localStorage.getItem("labelsSelected")||"null")||[];if((null===f||void 0===f?void 0:f.length)>0){var b=0;m&&"stream"===r&&(b=_l(Tl(i),a));var y=Dl(K,b,m&&"stream"===r),w=y.lines,j=y.bars,k=y.points,T=null===f||void 0===f?void 0:f.map((function(e){return e.id}));u=null===i||void 0===i?void 0:i.map((function(e){return T.includes(e.id)?(0,l.Z)((0,l.Z)({},e),{},{stack:m&&"stream"===r,bars:j,lines:w,points:k,isVisible:!0,shadowSize:0}):(0,l.Z)((0,l.Z)({},e),{},{lines:(0,l.Z)((0,l.Z)({},e.lines),{},{show:!1}),bars:(0,l.Z)((0,l.Z)({},e.bars),{},{show:!1}),points:(0,l.Z)((0,l.Z)({},e.points),{},{show:!1}),isVisible:!1,shadowSize:0})}))}else u=i;try{var _=Z.plot(t,u,Z.extend(!0,{},Q,{xaxis:{min:n.xaxis.from-1e5,max:n.xaxis.to+1e5,timeformat:Il(u).timeformat}}));Z(x.current).UseTooltip(_),setTimeout((function(){var e=n.xaxis.from,t=n.xaxis.to,r=new Date(c(parseInt(e)).format("YYYY-MM-DDTHH:mm:ss.SSSZ")),i=new Date(c(parseInt(t)).format("YYYY-MM-DDTHH:mm:ss.SSSZ")),a=(0,lt.Z)(r,"yyyy/MM/dd HH:mm:ss"),l=(0,lt.Z)(i,"yyyy/MM/dd HH:mm:ss"),u="".concat(a,"-").concat(l);S((0,v.wW)(i)),S((0,v.qv)(r)),S((0,v.Xn)(u)),S(Cn(s,o,d,p,h,g))}),400)}catch(I){console.log("error on chart redraw",I)}}(0,f.useEffect)((function(){H(x.current),V(null===D||void 0===D?void 0:D.map((function(e){return e.label}))),Z(x.current).bind("plotselected",ee),N(w),localStorage.setItem("labelsSelected",JSON.stringify([]))}),[]),(0,f.useEffect)((function(){W(Q),H(x.current),function(){var e=C?D:E,n=Z(x.current),t=Rl(e,null);try{var i=0;m&&"stream"===r&&(i=_l(Tl(t),a));var o=Il(t),l=o.timeformat,s=o.min,u=o.max,c=Dl(K,i,m&&"stream"===r),d=c.bars,f=c.lines,p=c.points,v=c.stack,h=Z.plot(n,t,Z.extend(!0,{},Q,{series:{stack:v,bars:d,lines:f,points:p},xaxis:{timeformat:l,min:s,max:u}})),g=h.getData();V(g),Z(x.current).UseTooltip(h)}catch(b){console.log(b)}}()}),[n,C]);if(n){var ne={height:e.vHeight,theme:y,matrixData:n,chartType:K,handleLimitData:function(e){T(!0)},handleNoLimitData:function(e){T(!1)},isSpliced:C,onSetChartType:$,chartRef:x,onLabelClick:function(e,n){var t=[],i=JSON.parse(localStorage.getItem("labelsSelected")||"null")||[];if(i.some((function(e){return e.id===n.id}))){var o=i.filter((function(e){return e.id!==n.id}));localStorage.setItem("labelsSelected",JSON.stringify(o)),t=o}else t=i.concat(n),localStorage.setItem("labelsSelected",JSON.stringify(t));if(t.length>0){var s,u=null===(s=t)||void 0===s?void 0:s.map((function(e){return e.id})),c=Dl(K,0),d=c.lines,f=c.bars,p=c.points,v=null===e||void 0===e?void 0:e.map((function(e){return u.includes(e.id)?(0,l.Z)((0,l.Z)({},e),{},{stack:m&&"stream"===r,bars:f,lines:d,points:p}):(0,l.Z)((0,l.Z)({},e),{},{lines:(0,l.Z)((0,l.Z)({},e.lines),{},{show:!1}),bars:(0,l.Z)((0,l.Z)({},e.bars),{},{show:!1}),points:(0,l.Z)((0,l.Z)({},e.points),{},{show:!1})})})),h=Il(v),g=h.timeformat,b=h.min,y=h.max,w=0;m&&"stream"===r&&(w=_l(Tl(v),a));var S=Z.plot(B,v,Z.extend(!0,{},Q,{series:Dl(K,w),xaxis:{timeformat:g,min:b,max:y}})),j=S.getData();V(j),Z(x.current).UseTooltip(S)}else{var k=C?D:E,T=0;m&&"stream"===r&&(T=_l(Tl(k),a));var _=Dl(K,T),I=_.lines,N=_.bars,M=_.points,R=null===k||void 0===k?void 0:k.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{bars:N,lines:I,points:M,isVisible:!0,shadowSize:0})})),O=Il(R),L=O.timeformat,z=O.min,F=O.max,H=Z.plot(B,R,Z.extend(!0,{},Q,{series:Dl(K,T||0,m&&"stream"===r),xaxis:{timeformat:L,min:z,max:F}})),P=H.getData();V(P),Z(x.current).UseTooltip(H)}},labels:L,isLogsVolume:m&&"stream"===r},te=new Set;return n.forEach((function(e){var n;null===e||void 0===e||null===(n=e.values)||void 0===n||n.forEach((function(e){return te.add(null===e||void 0===e?void 0:e[0])}))})),1===te.size&&"bar"!==K&&$("bar"),(0,ze.jsx)(ls,(0,l.Z)({},ne))}return null}function us(e){var n,t=e.viewRef,r=e.panelSize,a=e.viewHeight,o=e.setStreamClose,s=e.setMaxHeight,c=e.setMinimize,d=e.actualQuery,p=e.total,v=e.type,h=e.theight,g=e.viewWidth,m=e.tableData,x=e.streamData,b=e.logsVolumeData,y=d.isLogsVolume,Z=d.limit,w=(0,f.useState)(hl(d)[d.id]||0),S=(0,u.Z)(w,2),j=S[0],k=S[1],C=(0,f.useMemo)((function(){var n;return JSON.parse(JSON.stringify(null===e||void 0===e||null===(n=e.dataView)||void 0===n?void 0:n.raw))||[]}),[null===e||void 0===e||null===(n=e.dataView)||void 0===n?void 0:n.raw]),T=(0,i.v9)((function(e){return e.theme})),_=(0,f.useMemo)((function(){return"light"===T?"rjv-default":"tomorrow"}),[T]);return(0,ze.jsxs)(_a,{ref:t,size:r,vheight:a,children:[(0,ze.jsx)(ya,(0,l.Z)({onClose:o,setMinimize:c,setMaxHeight:s,actualQuery:d,total:p,type:v},e)),y&&(null===b||void 0===b?void 0:b.length)>0&&g>0&&(0,ze.jsx)("div",{children:(0,ze.jsx)(ss,(0,l.Z)((0,l.Z)({},e),{},{tWidth:g,chartLimit:Z,matrixData:b,actualQuery:d}))}),(0,ze.jsxs)(vt.Z,{defaultValue:hl(d)[d.id]||0,value:j,onChange:function(e,n){var t=(0,l.Z)((0,l.Z)({},hl(d)),{},(0,B.Z)({},d.id,n));localStorage.setItem("tabsState",JSON.stringify(t)),"number"===typeof n&&k((function(){return n}))},children:[(0,ze.jsxs)(Da,{panelsize:e.panelSize,children:[(0,ze.jsx)(Na,{children:"Logs"}),m&&(0,ze.jsx)(Na,{children:"Table"}),(0,ze.jsx)(Na,{children:"Raw"})]}),(0,ze.jsx)(Ia,{value:0,children:(0,ze.jsx)("div",{className:"view-content",children:(0,ze.jsx)(Io,(0,l.Z)((0,l.Z)({},e),{},{onClose:o,messages:x,actualQuery:d}))})}),(0,ze.jsx)(Ia,{value:1,children:(0,ze.jsx)("div",{className:"view-content",children:(0,ze.jsx)(fl,(0,l.Z)((0,l.Z)({},e),{},{height:h,data:m,actualQuery:d}))})}),(0,ze.jsx)(Ia,{value:2,children:(0,ze.jsx)("div",{className:"view-content",children:(0,ze.jsx)("div",{style:{padding:"20px"},children:(0,ze.jsx)(vl(),{theme:_,src:C})})})})]})]})}var cs,ds=function(e){var n,t=e.viewRef,r=e.panelSize,a=e.viewHeight,o=e.setStreamClose,s=e.setMaxHeight,c=e.setMinimize,d=e.actualQuery,p=e.total,v=e.type,h=e.theight,g=e.tableData,m=e.viewWidth,x=e.limit,b=e.streamData,y=(0,i.v9)((function(e){return e.theme})),Z=(0,f.useMemo)((function(){return"light"===y?"rjv-default":"tomorrow"}),[y]),w=(0,f.useState)(hl(d)[d.id]||0),S=(0,u.Z)(w,2),j=S[0],k=S[1],C=(0,f.useMemo)((function(){var n;return JSON.parse(JSON.stringify(null===e||void 0===e||null===(n=e.dataView)||void 0===n?void 0:n.raw))||[]}),[null===e||void 0===e||null===(n=e.dataView)||void 0===n?void 0:n.raw]);return(0,ze.jsxs)(_a,{ref:t,size:r,vheight:a,children:[(0,ze.jsx)(ya,(0,l.Z)({onClose:o,setMinimize:c,setMaxHeight:s,actualQuery:d,total:p,type:v},e)),(0,ze.jsxs)(vt.Z,{style:{display:"flex",flex:1,flexDirection:"column"},defaultValue:hl(d)[d.id]||0,value:j,onChange:function(e,n){var t=(0,l.Z)((0,l.Z)({},hl(d)),{},(0,B.Z)({},d.id,n));localStorage.setItem("tabsState",JSON.stringify(t)),"number"===typeof n&&k((function(){return n}))},children:[(0,ze.jsxs)(Da,{panelsize:e.panelSize,children:[(0,ze.jsx)(Na,{children:"Chart"}),(0,ze.jsx)(Na,{children:"Table"}),(0,ze.jsx)(Na,{children:"Raw"})]}),(0,ze.jsx)(Ia,{value:0,children:(0,ze.jsx)("div",{className:"view-content",style:{height:"100%"},children:(0,ze.jsx)(ss,(0,l.Z)((0,l.Z)({},e),{},{tWidth:m,chartLimit:x,matrixData:b,actualQuery:d}))})}),(0,ze.jsx)(Ia,{value:1,children:(0,ze.jsx)("div",{className:"view-content",children:(0,ze.jsx)(fl,(0,l.Z)((0,l.Z)({},e),{},{height:h,data:g,actualQuery:d}))})}),(0,ze.jsx)(Ia,{value:2,children:(0,ze.jsx)("div",{className:"view-content",children:(0,ze.jsx)("div",{style:{padding:"20px"},children:(0,ze.jsx)(vl(),{theme:Z,src:C})})})})]})]})},fs=function(e){var n,t=e.viewRef,r=e.panelSize,a=e.viewHeight,s=e.setStreamClose,c=e.setMinimize,d=e.setMaxHeight,p=e.actualQuery,v=e.total,h=e.type,g=e.theight,m=e.streamData,x=e.viewWidth,b=e.limit,y=(0,i.v9)((function(e){return e.theme})),Z=(0,f.useMemo)((function(){return"light"===y?"rjv-default":"tomorrow"}),[y]),w=(0,f.useRef)(null),S=(0,f.useMemo)((function(){var n;return JSON.parse(JSON.stringify(null===e||void 0===e||null===(n=e.dataView)||void 0===n?void 0:n.raw))||[]}),[null===e||void 0===e||null===(n=e.dataView)||void 0===n?void 0:n.raw]),j=(0,f.useState)(hl(p)[p.id]||0),k=(0,u.Z)(j,2),C=k[0],T=k[1];return(0,ze.jsxs)(_a,{ref:t,size:r,vheight:a,children:[(0,ze.jsx)(ya,(0,l.Z)({onClose:s,setMinimize:c,setMaxHeight:d,actualQuery:p,total:v,type:h},e)),(0,ze.jsxs)(vt.Z,{defaultValue:hl(p)[p.id]||0,value:C,onChange:function(e,n){var t=(0,l.Z)((0,l.Z)({},hl(p)),{},(0,B.Z)({},p.id,n));localStorage.setItem("tabsState",JSON.stringify(t)),"number"===typeof n&&T((function(){return n}))},children:[(0,ze.jsxs)(Da,{panelsize:e.panelSize,children:[(0,ze.jsx)(Na,{children:"Table"}),(0,ze.jsx)(Na,{children:"Raw"}),(null===m||void 0===m?void 0:m.chartData)&&(0,ze.jsx)(Na,{children:"Chart"})]}),(0,ze.jsx)(Ia,{value:0,children:(0,ze.jsx)("div",{className:"view-content",ref:w,id:o().sanitize("".concat(null===p||void 0===p?void 0:p.id,"-view")),children:(0,ze.jsx)(fl,(0,l.Z)((0,l.Z)({},e),{},{height:g,data:m.tableData,actualQuery:p}))})}),(0,ze.jsx)(Ia,{value:1,children:(0,ze.jsx)("div",{className:"view-content",children:(0,ze.jsx)("div",{style:{padding:"20px"},children:(0,ze.jsx)(vl(),{theme:Z,src:S})})})}),(null===m||void 0===m?void 0:m.chartData)&&(0,ze.jsx)(Ia,{value:2,children:(0,ze.jsx)("div",{className:"view-content",children:(0,ze.jsx)(ss,(0,l.Z)((0,l.Z)({},e),{},{tWidth:x,chartLimit:b,matrixData:m.chartData,actualQuery:p}))})})]})]})},ps=t(66781),vs=t.n(ps),hs={scrollPageDown:{binding:"s",label:"Scroll down"},scrollPageUp:{binding:"w",label:"Scroll up"},scrollToNextVisibleSpan:{binding:"f",label:"Scroll to the next visible span"},scrollToPrevVisibleSpan:{binding:"b",label:"Scroll to the previous visible span"},panLeft:{binding:["a","left"],label:"Pan left"},panLeftFast:{binding:["shift+a","shift+left"],label:"Pan left \u2014 Large"},panRight:{binding:["d","right"],label:"Pan right"},panRightFast:{binding:["shift+d","shift+right"],label:"Pan right \u2014 Large"},zoomIn:{binding:"up",label:"Zoom in"},zoomInFast:{binding:"shift+up",label:"Zoom in \u2014 Large"},zoomOut:{binding:"down",label:"Zoom out"},zoomOutFast:{binding:"shift+down",label:"Zoom out \u2014 Large"},collapseAll:{binding:"]",label:"Collapse All"},expandAll:{binding:"[",label:"Expand All"},collapseOne:{binding:"p",label:"Collapse One Level"},expandOne:{binding:"o",label:"Expand One Level"},searchSpans:{binding:"ctrl+b",label:"Search Spans"},clearSearch:{binding:"escape",label:"Clear Search"}};function gs(){if(cs)return cs;var e=new(vs())(document.body);return cs=e,e}var ms,xs,bs,ys,Zs,ws,Ss,js,ks,Cs,Ts,_s,Is,Ds,Ns,Ms,Es,Rs,Os=t(46123),Ls=t.n(Os),Vs=(0,Ve.iv)(ms||(ms=(0,r.Z)(["\n  position: relative;\n"]))),zs=function(e){return(0,Ve.iv)(xs||(xs=(0,r.Z)(["\ncolor: ",";\n"])),e.textColor)},Fs=(0,Ve.iv)(bs||(bs=(0,r.Z)(["\n  margin-bottom: 0.25rem;\n"]))),Bs=(0,Ve.iv)(ys||(ys=(0,r.Z)(["\n  margin-top: 0.25rem;\n  margin-bottom: 0.25rem;\n"]))),Hs=(0,Ve.iv)(Zs||(Zs=(0,r.Z)(["\n  margin: 0;\n  font-size:12px;\n  font-weight:bold;\n  font-family:monospace;\n"]))),Ps=(0,Ve.iv)(ws||(ws=(0,r.Z)(["\n  padding-left: 0.5rem;\n  padding-right: 0.5rem;\n"]))),qs=(0,Ve.iv)(Ss||(Ss=(0,r.Z)(["\n  padding-bottom: 0.5rem;\n"]))),As=(0,Ve.iv)(js||(js=(0,r.Z)(["\n  display: flex;\n"]))),Qs=((0,Ve.iv)(ks||(ks=(0,r.Z)(["\n  align-items: center;\n"]))),(0,Ve.iv)(Cs||(Cs=(0,r.Z)(["\n  align-items: start;\n"]))),(0,Ve.iv)(Ts||(Ts=(0,r.Z)(["\n  flex: 1 1 auto;\n  min-width: 0; /* 1 */\n  min-height: 0; /* 1 */\n"]))),(0,Ve.iv)(_s||(_s=(0,r.Z)(["\n  text-align: right;\n"])))),Ws=(0,Ve.iv)(Is||(Is=(0,r.Z)(["\n  display: inline-block;\n"]))),Us=(0,Ve.iv)(Ds||(Ds=(0,r.Z)(["\n // margin: -0.2rem 0.25rem 0 0;\n"]))),Js=(0,Ve.iv)(Ns||(Ns=(0,r.Z)(["\n  text-overflow: ellipsis;\n"]))),Gs=(0,Ve.iv)(Ms||(Ms=(0,r.Z)(["\n  width: 100%;\n"]))),Ks=(0,Ve.iv)(Es||(Es=(0,r.Z)(["\n  color: #aaa;\n"]))),Ys=((0,Ve.iv)(Rs||(Rs=(0,r.Z)(["\n  justify-content: flex-end;\n"]))),t(82374)),Xs=t.n(Ys);var $s=1e3,eu=1e3*$s,nu=60*eu,tu=60*nu,ru=24*tu,iu=Math.log10($s),au=[{unit:"d",microseconds:ru,ofPrevious:24},{unit:"h",microseconds:tu,ofPrevious:60},{unit:"m",microseconds:nu,ofPrevious:60},{unit:"s",microseconds:eu,ofPrevious:1e3},{unit:"ms",microseconds:$s,ofPrevious:1e3},{unit:"\u03bcs",microseconds:1,ofPrevious:1e3}];var ou=function(e,n,t){return function(e,n){var t=n+(Math.floor(Math.log10(Math.abs(e)))+1);return t<=0?Math.trunc(e):Number(e.toPrecision(t))}(e/t,n)*t};function lu(e){var n=(0,Ie.dropWhile)(au,(function(n,t){var r=n.microseconds;return t<au.length-1&&r>e})),t=(0,u.Z)(n,2),r=t[0],i=t[1];if(1e3===r.ofPrevious)return"".concat((0,Ie.round)(e/r.microseconds,2)).concat(r.unit);var a=Math.floor(e/r.microseconds),o="".concat(a).concat(r.unit),l=Math.round(e/i.microseconds%r.ofPrevious),s="".concat(l).concat(i.unit);return 0===l?o:"".concat(o," ").concat(s)}function su(e,n,t){return!(!Array.isArray(t.tags)||!t.tags.length)&&t.tags.some((function(t){return t.key===e&&t.value===n}))}var uu=su.bind(null,"span.kind","client"),cu=su.bind(null,"span.kind","server"),du=su.bind(null,"error",!0),fu=su.bind(null,"error","true"),pu=function(e){return du(e)||fu(e)};var vu,hu,gu,mu,xu=St.Z.div(vu||(vu=(0,r.Z)(["\n    pointer-events: none;\n"]))),bu=St.Z.div(hu||(hu=(0,r.Z)(["\n    position: absolute;\n    height: 100%;\n    width: 1px;\n    background: ",";\n    &:last-child {\n        width: 0;\n    }\n"])),(function(e){return e.theme.buttonBorder})),yu=(0,Ve.iv)(gu||(gu=(0,r.Z)(["\n    left: 0.25rem;\n    position: absolute;\n"]))),Zu=(0,Ve.iv)(mu||(mu=(0,r.Z)(["\n    left: initial;\n    right: 0.25rem;\n"])));function wu(e){var n,t=e.endTime,r=e.numTicks,i=e.showLabels,a=e.startTime;if(i){n=[];for(var o=(t||0)-(a||0),l=0;l<r;l++){var s=(a||0)+l/(r-1)*o;n.push(lu(s))}}for(var u=[],c=0;c<r;c++){var d=c/(r-1);u.push((0,ze.jsx)(bu,{theme:e.theme,"data-testid":"TicksID",style:{left:"".concat(100*d,"%")},children:n&&(0,ze.jsx)("span",{className:Ls()(yu,(0,B.Z)({},Zu,d>=1)),children:n[c]})},d))}return(0,ze.jsx)(xu,{children:u})}wu.defaultProps={endTime:null,showLabels:null,startTime:null};var Su,ju=["children","className"],ku=["children","className","width","style","theme"],Cu=function(e){return(0,Ve.iv)(Su||(Su=(0,r.Z)(["\n    color: ",";\n    display: flex;\n    flex: 0 1 auto;\n    flex-direction: row;\n"])),null===e||void 0===e?void 0:e.textColor)};function Tu(e){var n=e.children,t=e.className,r=void 0===t?"":t,i=(0,Lo.Z)(e,ju);return(0,ze.jsx)("div",(0,l.Z)((0,l.Z)({className:Ls()(Cu(e.theme),r)},i),{},{children:n}))}function _u(e){var n=e.children,t=e.className,r=void 0===t?"":t,i=e.width,a=e.style,o=e.theme,s=(0,Lo.Z)(e,ku),u="".concat(100*i,"%"),c=(0,l.Z)((0,l.Z)({},a),{},{flexBasis:u,maxWidth:u});return(0,ze.jsx)("div",(0,l.Z)((0,l.Z)({className:Ls()(Vs,r,zs(o)),style:c,"data-testid":"TimelineRowCell"},s),{},{children:n}))}Tu.defaultProps={className:""},_u.defaultProps={className:"",style:{}},Tu.Cell=_u;var Iu,Du,Nu=t(75115),Mu=t(96447),Eu=(0,Ve.iv)(Iu||(Iu=(0,r.Z)(["\n    align-items: center;\n    display: flex;\n    flex: none;\n    gap:2px;\n    justify-content: center;\n    margin-right: 0.5rem;\n"])));function Ru(e){var n=e.onExpandAll,t=e.onExpandOne,r=e.onCollapseAll,i=e.onCollapseOne;return(0,ze.jsxs)("div",{className:Eu,"data-testid":"TimelineCollapser",children:[(0,ze.jsx)(D.Z,{title:"Expand +1",children:(0,ze.jsx)(ha.Z,{fontSize:"small",style:{cursor:"pointer",color:e.theme.textColor},onClick:t})}),(0,ze.jsx)(D.Z,{title:"Collapse +1",children:(0,ze.jsx)(gt.Z,{fontSize:"small",style:{cursor:"pointer",color:e.theme.textColor},onClick:i})}),(0,ze.jsx)(D.Z,{title:"Expand All",children:(0,ze.jsx)(Nu.Z,{fontSize:"small",style:{cursor:"pointer",color:e.theme.textColor},onClick:n})}),(0,ze.jsx)(D.Z,{title:"Collapse All",children:(0,ze.jsx)(Mu.Z,{fontSize:"small",style:{cursor:"pointer",color:e.theme.textColor},onClick:r})})]})}!function(e){e.DragEnd="DragEnd",e.DragMove="DragMove",e.DragStart="DragStart",e.MouseEnter="MouseEnter",e.MouseLeave="MouseLeave",e.MouseMove="MouseMove"}(Du||(Du={}));var Ou,Lu,Vu,zu,Fu,Bu,Hu,Pu,qu,Au,Qu,Wu,Uu,Ju,Gu=Du,Ku=["getBounds","tag","resetBoundsOnResize"],Yu=0,Xu=function(){function e(n){var t=this,r=n.getBounds,i=n.tag,a=n.resetBoundsOnResize,o=void 0===a||a,l=(0,Lo.Z)(n,Ku);(0,za.Z)(this,e),this._bounds=void 0,this._isDragging=void 0,this._onMouseEnter=void 0,this._onMouseLeave=void 0,this._onMouseMove=void 0,this._onDragStart=void 0,this._onDragMove=void 0,this._onDragEnd=void 0,this._resetBoundsOnResize=void 0,this.getBounds=void 0,this.tag=void 0,this.handleMouseEnter=void 0,this.handleMouseMove=void 0,this.handleMouseLeave=void 0,this.handleMouseDown=void 0,this.resetBounds=function(){t._bounds=void 0},this._handleMinorMouseEvent=function(e){var n=e.button,r=e.clientX,i=e.type;if(!t._isDragging&&n===Yu){var a,o=null;if("mouseenter"===i)o=Gu.MouseEnter,a=t._onMouseEnter;else if("mouseleave"===i)o=Gu.MouseLeave,a=t._onMouseLeave;else{if("mousemove"!==i)throw new Error("invalid event type: ".concat(i));o=Gu.MouseMove,a=t._onMouseMove}if(a){var l=t._getPosition(r);a({event:e,type:o,value:l.value,x:l.x,manager:t,tag:t.tag})}}},this._handleDragEvent=function(e){var n,r=e.button,i=e.clientX,a=e.type,o=null;if("mousedown"===a){if(t._isDragging||r!==Yu)return;window.addEventListener("mousemove",t._handleDragEvent),window.addEventListener("mouseup",t._handleDragEvent);var l=(0,Ie.get)(document,"body.style");l&&(l.userSelect="none"),t._isDragging=!0,o=Gu.DragStart,n=t._onDragStart}else if("mousemove"===a){if(!t._isDragging)return;o=Gu.DragMove,n=t._onDragMove}else{if("mouseup"!==a)throw new Error("invalid event type: ".concat(a));if(!t._isDragging)return;t._stopDragging(),o=Gu.DragEnd,n=t._onDragEnd}if(n){var s=t._getPosition(i);n({event:e,type:o,value:s.value,x:s.x,manager:t,tag:t.tag})}},this.handleMouseDown=this._handleDragEvent,this.handleMouseEnter=this._handleMinorMouseEvent,this.handleMouseMove=this._handleMinorMouseEvent,this.handleMouseLeave=this._handleMinorMouseEvent,this.getBounds=r,this.tag=i,this._isDragging=!1,this._bounds=void 0,this._resetBoundsOnResize=Boolean(o),this._resetBoundsOnResize&&window.addEventListener("resize",this.resetBounds),this._onMouseEnter=l.onMouseEnter,this._onMouseLeave=l.onMouseLeave,this._onMouseMove=l.onMouseMove,this._onDragStart=l.onDragStart,this._onDragMove=l.onDragMove,this._onDragEnd=l.onDragEnd}return(0,Fa.Z)(e,[{key:"_getBounds",value:function(){return this._bounds||(this._bounds=this.getBounds(this.tag)),this._bounds}},{key:"_getPosition",value:function(e){var n=this._getBounds(),t=n.clientXLeft,r=n.maxValue,i=n.minValue,a=n.width,o=e-t,l=o/a;return null!=i&&l<i?(l=i,o=i*a):null!=r&&l>r&&(l=r,o=r*a),{value:l,x:o}}},{key:"_stopDragging",value:function(){window.removeEventListener("mousemove",this._handleDragEvent),window.removeEventListener("mouseup",this._handleDragEvent);var e=(0,Ie.get)(document,"body.style");e&&(e.userSelect=null),this._isDragging=!1}},{key:"isDragging",value:function(){return this._isDragging}},{key:"dispose",value:function(){this._isDragging&&this._stopDragging(),this._resetBoundsOnResize&&window.removeEventListener("resize",this.resetBounds),this._bounds=void 0,this._onMouseEnter=void 0,this._onMouseLeave=void 0,this._onMouseMove=void 0,this._onDragStart=void 0,this._onDragMove=void 0,this._onDragEnd=void 0}}]),e}(),$u=St.Z.div(Ou||(Ou=(0,r.Z)(["\n    left: 0;\n    position: absolute;\n    right: 0;\n    top: 0;\n"]))),ec=(0,Ve.iv)(Lu||(Lu=(0,r.Z)(['\n    border-left: 2px solid transparent;\n    cursor: col-resize;\n    height: 5000px;\n    margin-left: -1px;\n    position: absolute;\n    top: 0;\n    width: 1px;\n    z-index: 10;\n    &:hover {\n        border-left: 2px solid rgba(0, 0, 0, 0.3);\n    }\n    &::before {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        left: -8px;\n        right: 0;\n        content: " ";\n    }\n']))),nc=(0,Ve.iv)(Vu||(Vu=(0,r.Z)(["\n    background: rgba(136, 0, 136, 0.05);\n    width: unset;\n    &::before {\n        left: -2000px;\n        right: -2000px;\n    }\n"]))),tc=(0,Ve.iv)(zu||(zu=(0,r.Z)(["\n    border-left: 2px solid #808;\n    border-right: 1px solid #999;\n"]))),rc=(0,Ve.iv)(Fu||(Fu=(0,r.Z)(["\n    border-left: 1px solid #999;\n    border-right: 2px solid #808;\n"]))),ic=(0,Ve.iv)(Bu||(Bu=(0,r.Z)(['\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    &::before,\n    &::after {\n        border-right: 1px solid #ccc;\n        content: " ";\n        height: 9px;\n        position: absolute;\n        right: 9px;\n        top: 25px;\n    }\n    &::after {\n        right: 5px;\n    }\n']))),ac=(0,Ve.iv)(Hu||(Hu=(0,r.Z)(["\n    &::before,\n    &::after {\n        border-right: 1px solid rgba(136, 0, 136, 0.5);\n    }\n"]))),oc=function(e){(0,Ba.Z)(t,e);var n=(0,Ha.Z)(t);function t(e){var r;return(0,za.Z)(this,t),(r=n.call(this,e)).state=void 0,r._dragManager=void 0,r._rootElm=void 0,r._setRootElm=function(e){r._rootElm=e},r._getDraggingBounds=function(){if(!r._rootElm)throw new Error("invalid state");var e=r._rootElm.getBoundingClientRect(),n=e.left,t=e.width,i=r.props,a=i.min;return{clientXLeft:n,width:t,maxValue:i.max,minValue:a}},r._handleDragUpdate=function(e){var n=e.value;r.setState({dragPosition:n})},r._handleDragEnd=function(e){var n=e.manager,t=e.value;n.resetBounds(),r.setState({dragPosition:null}),r.props.onChange(t)},r._dragManager=new Xu({getBounds:r._getDraggingBounds,onDragEnd:r._handleDragEnd,onDragMove:r._handleDragUpdate,onDragStart:r._handleDragUpdate}),r._rootElm=void 0,r.state={dragPosition:null},r}return(0,Fa.Z)(t,[{key:"componentWillUnmount",value:function(){this._dragManager.dispose()}},{key:"render",value:function(){var e,n=this.props,t=n.position,r=n.columnResizeHandleHeight,i=this.state.dragPosition,a={left:"".concat(100*t,"%")},o=!1,l=!1;this._dragManager.isDragging()&&this._rootElm&&null!=i?(o=i<t,l=i>t,"".concat(100*i,"%"),e={left:"".concat(100*Math.min(t,i),"%"),right:"calc(".concat(100*(1-Math.max(t,i)),"% - 1px)")}):e=a;e.height=r;var s=o||l;return(0,ze.jsxs)($u,{ref:this._setRootElm,"data-testid":"TimelineColumnResizer",children:[(0,ze.jsx)("div",{className:Ls()(ic,s&&ac),style:a,"data-testid":"TimelineColumnResizer--gripIcon"}),(0,ze.jsx)("div",{"aria-hidden":!0,className:Ls()(ec,s&&nc,l&&rc,o&&tc),onMouseDown:this._dragManager.handleMouseDown,style:e,"data-testid":"TimelineColumnResizer--dragger"})]})}}]),t}(f.PureComponent),lc=St.Z.div(Pu||(Pu=(0,r.Z)(["\n    bottom: 0;\n    cursor: vertical-text;\n    left: 0;\n    position: absolute;\n    right: 0;\n    top: 0;\n    font-size:12px;\n"]))),sc=St.Z.div(qu||(qu=(0,r.Z)(["\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    width: 1px;\n    background-color: red;\n"]))),uc=(0,Ve.iv)(Au||(Au=(0,r.Z)(["\n    position: absolute;\n    top: 0;\n    bottom: 0;\n"]))),cc=(0,Ve.iv)(Qu||(Qu=(0,r.Z)(["\n    border-left: 1px solid;\n"]))),dc=(0,Ve.iv)(Wu||(Wu=(0,r.Z)(["\n    border-right: 1px solid;\n"]))),fc=(0,Ve.iv)(Uu||(Uu=(0,r.Z)(["\n    background-color: rgba(68, 68, 255, 0.2);\n    border-color: #44f;\n"]))),pc=(0,Ve.iv)(Ju||(Ju=(0,r.Z)(["\n    background-color: rgba(255, 68, 68, 0.2);\n    border-color: #f44;\n"])));function vc(e,n,t){return e+t*(n-e)}function hc(e,n,t){return(t-e)/(n-e)}function gc(e,n,t,r,i){var a,o=function(e,n){var t=e<n?[e,n]:[n,e],r=(0,u.Z)(t,2),i=r[0],a=r[1];return i>=1||a<=0?{isOutOfView:!0}:(i<0&&(i=0),a>1&&(a=1),{isDraggingLeft:e>n,left:"".concat(100*i,"%"),width:"".concat(100*(a-i),"%")})}(hc(e,n,t),hc(e,n,r));if(function(e){return Reflect.has(e,"isOutOfView")}(o))return null;var l=o.isDraggingLeft,s=o.left,c=o.width,d=(0,Ve.cx)((a={},(0,B.Z)(a,dc,!l),(0,B.Z)(a,pc,!i),(0,B.Z)(a,fc,i),a));return(0,ze.jsx)("div",{className:(0,Ve.cx)(uc,cc,d),style:{left:s,width:c},"data-testid":"Dragged"})}var mc,xc,bc,yc=function(e){(0,Ba.Z)(t,e);var n=(0,Ha.Z)(t);function t(e){var r;return(0,za.Z)(this,t),(r=n.call(this,e))._draggerReframe=void 0,r._root=void 0,r._setRoot=function(e){r._root=e},r._getDraggingBounds=function(){if(!r._root)throw new Error("invalid state");var e=r._root.getBoundingClientRect();return{clientXLeft:e.left,width:e.width}},r._handleReframeMouseMove=function(e){var n=e.value,t=(0,u.Z)(r.props.viewRangeTime.current,2),i=vc(t[0],t[1],n);r.props.updateNextViewRangeTime({cursor:i})},r._handleReframeMouseLeave=function(){r.props.updateNextViewRangeTime({cursor:void 0})},r._handleReframeDragUpdate=function(e){var n=e.value,t=r.props.viewRangeTime,i=t.current,a=t.reframe,o=(0,u.Z)(i,2),l=vc(o[0],o[1],n),s={reframe:{anchor:a?a.anchor:l,shift:l}};r.props.updateNextViewRangeTime(s)},r._handleReframeDragEnd=function(e){var n=e.manager,t=e.value,i=r.props.viewRangeTime,a=i.current,o=i.reframe,l=(0,u.Z)(a,2),s=vc(l[0],l[1],t),c=o?o.anchor:s,d=s<c?[s,c]:[c,s],f=(0,u.Z)(d,2),p=f[0],v=f[1];n.resetBounds(),r.props.updateViewRangeTime(p,v,"timeline-header")},r._draggerReframe=new Xu({getBounds:r._getDraggingBounds,onDragEnd:r._handleReframeDragEnd,onDragMove:r._handleReframeDragUpdate,onDragStart:r._handleReframeDragUpdate,onMouseLeave:r._handleReframeMouseLeave,onMouseMove:r._handleReframeMouseMove}),r._root=void 0,r}return(0,Fa.Z)(t,[{key:"componentDidUpdate",value:function(e,n,t){this.props.boundsInvalidator!==e.boundsInvalidator&&this._draggerReframe.resetBounds()}},{key:"componentWillUnmount",value:function(){this._draggerReframe.dispose()}},{key:"render",value:function(){var e,n=this.props.viewRangeTime,t=n.current,r=n.cursor,i=n.reframe,a=n.shiftEnd,o=n.shiftStart,l=(0,u.Z)(t,2),s=l[0],c=l[1];return!(null!=i||null!=a||null!=o)&&null!=r&&r>=s&&r<=c&&(e="".concat(100*hc(s,c,r),"%")),(0,ze.jsxs)(lc,{"aria-hidden":!0,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove,"data-testid":"TimelineViewingLayer",children:[null!=e&&(0,ze.jsx)(sc,{style:{left:e},"data-testid":"TimelineViewingLayer--cursorGuide"}),null!=i&&gc(s,c,i.anchor,i.shift,!1),null!=a&&gc(s,c,c,a,!0),null!=o&&gc(s,c,s,o,!0)]})}}]),t}(f.PureComponent),Zc=function(e){return(0,Ve.iv)(mc||(mc=(0,r.Z)(["\n    background:",";\n    border-bottom: 1px solid ",";\n    color:","\n    height: 38px;\n    line-height: 38px;\n    width: 100%;\n    z-index: 4;\n    position: relative;\n    font-size:12px;\n"])),e.mainBgColor,e.buttonBorder,e.textColor)},wc=(0,Ve.iv)(xc||(xc=(0,r.Z)(["\n    align-items: center;\n"]))),Sc=(0,Ve.iv)(bc||(bc=(0,r.Z)(["\n    flex: 1;\n    overflow: hidden;\n    margin: 0;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n"])));function jc(e){var n=e.duration,t=e.nameColumnWidth,r=e.numTicks,i=e.onCollapseAll,a=e.onCollapseOne,o=e.onColummWidthChange,l=e.onExpandAll,s=e.onExpandOne,c=e.updateViewRangeTime,d=e.updateNextViewRangeTime,f=e.viewRangeTime,p=e.columnResizeHandleHeight,v=(0,u.Z)(f.current,2),h=v[0],g=v[1];return(0,ze.jsxs)(Tu,{theme:e.theme,className:Zc(e.theme),"data-testid":"TimelineHeaderRow",children:[(0,ze.jsxs)(Tu.Cell,{theme:e.theme,className:Ls()(As,Ps,wc),width:t,id:"collapser",children:[(0,ze.jsx)("h4",{className:Sc,children:"Service & Operation"}),(0,ze.jsx)(Ru,{theme:e.theme,onCollapseAll:i,onExpandAll:l,onCollapseOne:a,onExpandOne:s})]}),(0,ze.jsxs)(Tu.Cell,{theme:e.theme,id:"ticker",width:1-t,children:[(0,ze.jsx)(yc,{boundsInvalidator:t,updateNextViewRangeTime:d,updateViewRangeTime:c,viewRangeTime:f}),(0,ze.jsx)(wu,{theme:e.theme,numTicks:r,startTime:h*n,endTime:g*n,showLabels:!0})]}),(0,ze.jsx)(oc,{columnResizeHandleHeight:p,position:t,onChange:o,min:.2,max:.85})]})}var kc=["#7db26c","#eab839","#6cd0e0","#ef853e","#e14c41","#1f78c1","#bb44a9","#715ea1","#4f8542","#cca300","#447ebb","#c05a16","#880f02","#0a427b","#6b1e61","#594578","#b6daa9","#f4d699","#6edaed","#f9ba90","#f29191","#83b6d8","#e5a9e2","#afa3e0","#629e51","#e6ad0f","#64b1c9","#e0752e","#bd1900","#0a52a3","#952d82","#614d93","#99c388","#f2cb6e","#66c6db","#f9924e","#ea6661","#5095ce","#d685ce","#7f6cb7","#3f6732","#977402","#30585f","#99430a","#5a140c","#052b51","#501648","#3e2a5a","#e0f9d7","#fceaca","#d1faff","#f9e2d2","#fce2de","#b8def4","#f9d7f9","#ddd9f7"];function Cc(e){if(7!==e.length)return[0,0,0];var n=e.slice(1,3),t=e.slice(3,5),r=e.slice(5);return[parseInt(n,16),parseInt(t,16),parseInt(r,16)]}var Tc=function(){function e(n,t){(0,za.Z)(this,e),this.colorsHex=void 0,this.colorsRgb=void 0,this.cache=void 0;var r=function(e,n){if(!n)return kc;var t=e.indexOf("#e14c41");t>-1&&e.splice(t,1);var r,i=[],a=(0,s.Z)(e);try{for(a.s();!(r=a.n()).done;){var o=r.value;i.push(o)}}catch(l){a.e(l)}finally{a.f()}return i}(n,t);this.colorsHex=r,this.colorsRgb=r.map(Cc),this.cache=new Map}return(0,Fa.Z)(e,[{key:"_getColorIndex",value:function(e){var n=this.cache.get(e);if(null==n){var t=this.hashCode(e.toLowerCase()),r=Math.abs(t%this.colorsHex.length);n=4===r?r+1:r,this.cache.set(e,n)}return n}},{key:"hashCode",value:function(e){var n,t=0;for(n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n);return t}},{key:"getColorByKey",value:function(e){var n=this._getColorIndex(e);return this.colorsHex[n]}},{key:"getRgbColorByKey",value:function(e){var n=this._getColorIndex(e);return this.colorsRgb[n]}},{key:"clear",value:function(){this.cache.clear()}}]),e}(),_c=(0,Pa.Z)((function(e,n){return new Tc(e,n)}));function Ic(e,n){return _c(kc,n).getColorByKey(e)}var Dc=function(){function e(n){(0,za.Z)(this,e),this.bufferLen=void 0,this.dataLen=void 0,this.heights=void 0,this.lastI=void 0,this.ys=void 0,this.ys=[],this.heights=[],this.bufferLen=n,this.dataLen=-1,this.lastI=-1}return(0,Fa.Z)(e,[{key:"profileData",value:function(e){e!==this.dataLen&&(this.dataLen=e,this.ys.length=e,this.heights.length=e,this.lastI>=e&&(this.lastI=e-1))}},{key:"calcHeights",value:function(e,n,t){null!=t&&(this.lastI=t);var r=e+this.bufferLen;if(!(r<=this.lastI)){r>=this.heights.length&&(r=this.heights.length-1);var i=this.lastI;for(-1===this.lastI&&(i=0,this.ys[0]=0);i<=r;){var a=this.heights[i]=n(i);this.ys[i+1]=this.ys[i]+a,i++}this.lastI=r}}},{key:"calcYs",value:function(e,n){for(;(null==this.ys[this.lastI]||e>this.ys[this.lastI])&&this.lastI<this.dataLen-1;)this.calcHeights(this.lastI,n)}},{key:"confirmHeight",value:function(e,n){var t=e;if(t>this.lastI)this.calcHeights(t,n);else{var r=n(t);if(r!==this.heights[t]){var i=r-this.heights[t];for(this.heights[t]=r;++t<=this.lastI;)this.ys[t]+=i;null!=this.ys[this.lastI+1]&&(this.ys[this.lastI+1]+=i)}}}},{key:"findFloorIndex",value:function(e,n){this.calcYs(e,n);var t,r=0,i=this.lastI;if(this.ys.length<2||e<this.ys[1])return 0;if(e>this.ys[i])return i;for(;r<i;)if(t=r+.5*(i-r)|0,e>this.ys[t]){if(e<=this.ys[t+1])return t;r=t}else{if(!(e<this.ys[t]))return t;if(e>=this.ys[t-1])return t-1;i=t}throw new Error("unable to find floor index for y=".concat(e))}},{key:"getRowPosition",value:function(e,n){return this.confirmHeight(e,n),{height:this.heights[e],y:this.ys[e]}}},{key:"getEstimatedHeight",value:function(){var e=this.ys[this.lastI]+this.heights[this.lastI];return this.lastI>=this.dataLen-1?0|e:e/(this.lastI+1)*this.heights.length|0}}]),e}(),Nc=function(e){(0,Ba.Z)(t,e);var n=(0,Ha.Z)(t);function t(e){var r;return(0,za.Z)(this,t),(r=n.call(this,e))._yPositions=void 0,r._knownHeights=void 0,r._startIndexDrawn=void 0,r._endIndexDrawn=void 0,r._startIndex=void 0,r._endIndex=void 0,r._viewHeight=void 0,r._scrollTop=void 0,r._isScrolledOrResized=void 0,r._htmlTopOffset=void 0,r._windowScrollListenerAdded=void 0,r._htmlElm=void 0,r._wrapperElm=void 0,r._itemHolderElm=void 0,r.getViewHeight=function(){return r._viewHeight},r.getBottomVisibleIndex=function(){var e=r._scrollTop+r._viewHeight;return r._yPositions.findFloorIndex(e,r._getHeight)},r.getTopVisibleIndex=function(){return r._yPositions.findFloorIndex(r._scrollTop,r._getHeight)},r.getRowPosition=function(e){return r._yPositions.getRowPosition(e,r._getHeight)},r.scrollToIndex=function(e){var n,t,i=r.props.scrollElement,a=(null===i||void 0===i?void 0:i.getBoundingClientRect().top)||0,o=((null===i||void 0===i?void 0:i.scrollTop)||0)+((null===(n=r._itemHolderElm)||void 0===n?void 0:n.getBoundingClientRect().top)||0)-a,l=r.getRowPosition(e).y;null===(t=r.props.scrollElement)||void 0===t||t.scrollTo({top:l+o-80})},r._onScroll=function(){r._isScrolledOrResized||(r._isScrolledOrResized=!0,window.requestAnimationFrame(r._positionList))},r._positionList=function(){if(r._isScrolledOrResized=!1,r._wrapperElm){r._calcViewIndexes();var e=r.props.viewBufferMin>r._startIndex?0:r._startIndex-r.props.viewBufferMin,n=r.props.viewBufferMin<r.props.dataLength-r._endIndex?r._endIndex+r.props.viewBufferMin:r.props.dataLength-1;(e<r._startIndexDrawn||n>r._endIndexDrawn)&&r.forceUpdate()}},r._initWrapper=function(e){r.props.windowScroller&&(r._wrapperElm=e,e&&(r._viewHeight=e.clientHeight))},r._initItemHolder=function(e){r._itemHolderElm=e,r._scanItemHeights()},r._scanItemHeights=function(){var e=r.props.getIndexFromKey;if(r._itemHolderElm){for(var n=null,t=null,i=!1,a=r._itemHolderElm.childNodes,o=a.length,l=0;l<o;l++){var s=a[l],u=s.getAttribute("data-item-key");if(u){var c=(s.firstElementChild||s).clientHeight;c!==r._knownHeights.get(u)&&(r._knownHeights.set(u,c),i?t=u:(i=!0,n=t=u))}else console.warn("itemKey not found")}if(null!=n&&null!=t){var d=e(n),f=t===n?d:e(t);r._yPositions.calcHeights(f,r._getHeight,d),r.forceUpdate()}}},r._getHeight=function(e){var n=r.props.getKeyFromIndex(e),t=r._knownHeights.get(n);return null!=t&&t===t?t:r.props.itemHeightGetter(e,n)},r._yPositions=new Dc(200),r._knownHeights=new Map,r._startIndexDrawn=Math.pow(2,20),r._endIndexDrawn=-Math.pow(2,20),r._startIndex=0,r._endIndex=0,r._viewHeight=-1,r._scrollTop=-1,r._isScrolledOrResized=!1,r._htmlTopOffset=-1,r._windowScrollListenerAdded=!1,r._htmlElm=document.documentElement,r._wrapperElm=void 0,r._itemHolderElm=void 0,r}return(0,Fa.Z)(t,[{key:"componentDidMount",value:function(){if(this.props.windowScroller){if(this._wrapperElm){var e=this._wrapperElm.getBoundingClientRect().top;this._htmlTopOffset=e+this._htmlElm.scrollTop}window.addEventListener("scroll",this._onScroll),this._windowScrollListenerAdded=!0}else{var n;this._wrapperElm=this.props.scrollElement,null===(n=this._wrapperElm)||void 0===n||n.addEventListener("scroll",this._onScroll)}}},{key:"componentDidUpdate",value:function(){this._itemHolderElm&&this._scanItemHeights()}},{key:"componentWillUnmount",value:function(){var e;this._windowScrollListenerAdded?window.removeEventListener("scroll",this._onScroll):null===(e=this._wrapperElm)||void 0===e||e.removeEventListener("scroll",this._onScroll)}},{key:"_isViewChanged",value:function(){if(!this._wrapperElm)return!1;var e=this.props.windowScroller,n=e?this._htmlElm.clientHeight:this._wrapperElm.clientHeight,t=e?this._htmlElm.scrollTop:this._wrapperElm.scrollTop;return n!==this._viewHeight||t!==this._scrollTop}},{key:"_calcViewIndexes",value:function(){if(this.props.windowScroller)this._viewHeight=window.innerHeight-this._htmlTopOffset,this._scrollTop=window.scrollY;else{if(!this._wrapperElm)return this._viewHeight=-1,this._startIndex=0,void(this._endIndex=0);this._viewHeight=this._wrapperElm.clientHeight,this._scrollTop=this._wrapperElm.scrollTop}var e=this._scrollTop,n=this._scrollTop+this._viewHeight;this._startIndex=this._yPositions.findFloorIndex(e,this._getHeight),this._endIndex=this._yPositions.findFloorIndex(n,this._getHeight)}},{key:"render",value:function(){var e,n,t=this.props,r=t.dataLength,i=t.getKeyFromIndex,a=t.initialDraw,o=void 0===a?100:a,s=t.itemRenderer,u=t.viewBuffer,c=t.viewBufferMin,d=this._getHeight,f=[];if(this._yPositions.profileData(r),this._wrapperElm){this._isViewChanged()&&this._calcViewIndexes();var p=c>this._startIndex?0:this._startIndex-c,v=c<r-this._endIndex?this._endIndex+c:r-1;p<this._startIndexDrawn||v>this._endIndexDrawn?(e=u>this._startIndex?0:this._startIndex-u,(n=this._endIndex+u)>=r&&(n=r-1)):(e=this._startIndexDrawn,n=this._endIndexDrawn>r-1?r-1:this._endIndexDrawn)}else e=0,n=(o<r?o:r)-1;this._yPositions.calcHeights(n,d,e||-1),this._startIndexDrawn=e,this._endIndexDrawn=n,f.length=n-e+1;for(var h=e;h<=n;h++){var g=this._yPositions.getRowPosition(h,d),m=g.y,x={height:g.height,top:m,position:"absolute"},b=i(h),y={"data-item-key":b};f.push(s(b,x,h,y))}var Z={style:{position:"inherit"},ref:this._initWrapper};this.props.windowScroller||(Z.onScroll=this._onScroll,Z.style.height="100%",Z.style.overflowY="auto");var w={position:"relative",height:this._yPositions.getEstimatedHeight()};return(0,ze.jsx)("div",(0,l.Z)((0,l.Z)({},Z),{},{children:(0,ze.jsx)("div",{style:w,children:(0,ze.jsx)("div",{style:{position:"absolute",top:0,margin:0,padding:0},className:this.props.itemsWrapperClassName,ref:this._initItemHolder,children:f})})}))}}]),t}(f.Component);Nc.defaultProps={initialDraw:100,itemsWrapperClassName:"",windowScroller:!1};var Mc,Ec,Rc,Oc=t(57822),Lc=t(54569),Vc="None",zc="Duration",Fc="Tag",Bc=(0,ei.Z)(),Hc={b10:"hsla(0, 0%, 7%, 0.404)",b15:"hsl(0, 0%, 7%)",b100:"hsl(0, 0%, 4%)",b200:"hsl(0, 0%, 8%)",b300:"hsl(0, 0%, 10%)",b400:"hsl(0, 0%, 16%)",b500:"hsl(0, 0%, 20%)"},Pc={w100:"hsl(0, 0%, 100%)",w200:"hsl(0, 0%, 96%)",w300:"hsl(0, 0%, 92%)",w400:"hsl(0, 0%, 88%)",w500:"hsl(0, 0%, 84%)"},qc={lg10:"hsla(0, 0%, 90%, 0.231)",lg15:"hsla(0, 0%, 90%, 0.333)",lg100:"hsl(0, 0%, 80%)",lg200:"hsl(0, 0%, 76%)",lg300:"hsl(0, 0%, 72%)",lg400:"hsl(0, 0%, 68%)",lg500:"hsl(0, 0%, 64%)",lg600:"hsl(0, 0%, 60%)",lg700:"hsl(0, 0%, 56%)"},Ac={dg10:"hsla(0, 0%, 48%, 0.231)",dg15:"hsla(0, 0%, 48%, 0.333)",dg50:"hsl(0, 0%, 18%)",dg90:"hsl(0, 0%, 25%)",dg100:"hsl(0, 0%, 28%)",dg200:"hsl(0, 0%, 32%)",dg300:"hsl(0, 0%, 36%)",dg400:"hsl(0, 0%, 40%)",dg500:"hsl(0, 0%, 44%)"},Qc={tq1:"hsl(181, 98%, 21%);",tq100:"hsl(180, 62%, 28%)",tq200:"hsl(180, 62%, 33%)",tq300:"hsl(180, 62%, 44%)",tq400:"hsl(180, 62%, 52%)",tq500:"hsl(180, 62%, 60%)"},Wc="hsl(39, 100%, 50%)",Uc=Hc.b300,Jc=Hc.b400,Gc=Hc.b100,Kc=Hc.b100,Yc=Hc.b400,Xc=Hc.b200,$c=qc.lg200,ed=Ac.dg500,nd=Pc.w300,td=Wc,rd=Hc.b15,id=Qc.tq200,ad=Qc.tq300,od=Qc.tq1,ld=Hc.b400,sd=Hc.b300,ud=Ac.dg90,cd=qc.lg700,dd=Ac.dg100,fd=Ac.dg15,pd=Hc.b400,vd=Ac.dg300,hd=Pc.w200,gd=Wc,md=Wc,xd=qc.lg400,bd=Hc.b10,yd=Hc.b300,Zd=(0,l.Z)((0,l.Z)({},Bc),{},{black:Hc,white:Pc,lightgrey:qc,textColor:$c,primaryDark:id,primaryLight:ad,primaryBorder:od,widgetContainer:ld,buttonDefault:dd,buttonHover:fd,buttonInactive:pd,buttonBorder:vd,buttonText:hd,inputBg:rd,inputTextFocus:gd,inputLabelColor:xd,inputLabelBg:bd,textOff:ed,textPrimary:nd,textPrimaryAccent:td,viewBg:yd,chartBg:"#111",historyRow:"#6c6b6b38",scrollbarThumb:"hsla(0, 0%, 48%, 0.5)",critical:"hsl(300, 100%, 25%)",error:"hsl(0, 100%, 50%)",warning:"hsl(60, 100%, 50%)",info:"hsl(120, 100%, 25%)",debug:"hsl(240, 100%, 50%)",trace:"hsl(195, 53%, 79%)",unknown:"hsl(0, 0%, 50%)",darkgrey:Ac,turquoise:Qc,logBgColor:Gc,tabActive:Kc,tabHeader:Yc,tabBg:Xc,mainBgColor:Uc,shBgColor:Jc,secondaryWidgetContainer:sd,widgetTitle:ud,widgetTitleBorder:cd,highlitedButton:md}),wd=(0,ei.Z)(),Sd={b10:"hsla(0, 0%, 7%, 0.404)",b15:"hsl(0, 0%, 7%)",b100:"hsl(0, 0%, 4%)",b200:"hsl(0, 0%, 8%)",b300:"hsl(0, 0%, 10%)",b400:"hsl(0, 0%, 16%)",b500:"hsl(0, 0%, 20%)"},jd={w100:"hsl(0, 0%, 100%)",w200:"hsl(0, 0%, 96%)",w300:"hsl(0, 0%, 92%)",wb:"#f9f9f9",w400:"hsl(180, 5%, 96%)",w500:"hsl(0, 0%, 92%)",w600:"hsla(180,5%,96%,1)",w700:"hsl(0,0%,98%)"},kd={lg10:"hsla(0, 0%, 90%, 0.231)",lg15:"hsla(0, 0%, 90%, 0.333)",lg100:"hsl(0, 0%, 80%)",lg200:"hsl(0, 0%, 76%)",lg300:"hsl(0, 0%, 72%)",lg400:"hsl(0, 0%, 68%)",lg500:"hsl(0, 0%, 64%)",lg600:"hsl(0, 0%, 60%)",lg700:"hsl(0, 0%, 56%)"},Cd={dg10:"hsla(0, 0%, 48%, 0.231)",dg15:"hsla(0, 0%, 48%, 0.333)",dg100:"hsl(0, 0%, 28%)",dg200:"hsl(0, 0%, 32%)",dg300:"hsl(0, 0%, 36%)",dg400:"hsl(0, 0%, 40%)",dg500:"hsl(0, 0%, 44%)"},Td={tq1:"hsl(181, 98%, 21%)",tq100:"hsl(180, 62%, 28%)",tq200:"hsl(180, 62%, 33%)",tq300:"hsl(180, 62%, 44%)",tq400:"hsl(180, 62%, 52%)",tq500:"hsl(180, 62%, 60%)"},_d={or100:"hsl(39, 100%, 50%)"},Id=jd.w100,Dd=jd.wb,Nd=jd.w100,Md=jd.w100,Ed=jd.w400,Rd=jd.w200,Od=Cd.dg100,Ld=kd.lg700,Vd=Sd.b300,zd=Td.tq200,Fd=jd.w100,Bd=Td.tq200,Hd=Td.tq300,Pd=Td.tq1,qd=jd.w200,Ad=jd.w200,Qd=kd.lg300,Wd=kd.lg700,Ud=jd.w100,Jd=jd.w700,Gd=kd.lg10,Kd=kd.lg100,Yd=jd.w200,Xd=_d.or100,$d=_d.or100,ef=kd.lg400,nf=jd.w100,tf=jd.w400,rf=_d,af={light:(0,l.Z)((0,l.Z)({},wd),{},{black:Sd,white:jd,lightgrey:kd,textColor:Od,primaryDark:Bd,primaryLight:Hd,primaryBorder:Pd,widgetContainer:qd,buttonDefault:Ud,buttonHover:Jd,buttonInactive:Gd,buttonText:Yd,buttonBorder:Kd,inputBg:Fd,inputTextFocus:Xd,inputLabelColor:ef,inputLabelBg:nf,textOff:Ld,textPrimary:Vd,textPrimaryAccent:zd,historyRow:"#6c6b6b38",viewBg:tf,chartBg:"#fff",scrollbarThumb:"hsla(0, 0%, 48%, 0.122)",critical:"hsl(300, 100%, 25%)",error:"hsl(0, 100%, 50%)",warning:rf,info:"hsl(120, 100%, 25%)",debug:"hsl(240, 100%, 50%)",trace:"hsl(195, 53%, 79%)",unknown:"hsl(0, 0%, 50%)",darkgrey:Cd,turquoise:Td,logBgColor:Nd,tabActive:Md,tabHeader:Ed,tabBg:Rd,mainBgColor:Id,shBgColor:Dd,secondaryWidgetContainer:Ad,widgetTitle:Qd,widgetTitleBorder:Wd,highlitedButton:$d}),dark:Zd},of=(0,Ve.iv)(Mc||(Mc=(0,r.Z)(["\n    bottom: 0;\n    left: 0;\n    position: absolute;\n    right: 0;\n    top: 0;\n    overflow: hidden;\n    z-index: 0;\n"]))),lf=(0,Ve.iv)(Ec||(Ec=(0,r.Z)(["\n    border-radius: 3px;\n    min-width: 2px;\n    position: absolute;\n    height: 36%;\n    top: 32%;\n"]))),sf=(0,Ve.iv)(Rc||(Rc=(0,r.Z)(['\n    color: #aaa;\n    font-size: 12px;\n    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;\n    line-height: 1em;\n    white-space: nowrap;\n    padding: 0 0.5em;\n    position: absolute;\n'])));function uf(e){return"".concat((100*e).toFixed(1),"%")}function cf(e){var n=e.viewEnd,t=e.viewStart,r=e.color,a=e.shortLabel,o=e.longLabel,l=e.onClick,s=e.rpc,c=e.className,d=e.labelClassName,p=(0,f.useState)(a),v=(0,u.Z)(p,2),h=v[0],g=v[1],m=(0,i.v9)((function(e){return e.theme})),x=(0,f.useMemo)((function(){return af[m]}),[m]);return(0,ze.jsx)(I.a,{theme:x,children:(0,ze.jsxs)("div",{className:Ls()(of,c),onClick:l,onMouseLeave:function(){return g(a)},onMouseOver:function(){return g(o)},"aria-hidden":!0,children:[(0,ze.jsx)("div",{"aria-label":h,className:lf,style:{background:r,left:uf(t),width:uf(n-t)},children:(0,ze.jsx)("div",{className:Ls()(sf,d),"data-testid":"SpanBar--label",children:h})}),(0,ze.jsx)("div",{}),s&&(0,ze.jsx)("div",{style:{background:s.color,left:uf(s.viewStart),width:uf(s.viewEnd-s.viewStart)}})]})})}var df,ff,pf,vf,hf,gf=f.memo(cf);function mf(e){return(0,Ie.get)((0,Ie.find)(e.references,(function(e){var n=e.span,t=e.refType;return n&&n.spanID&&("CHILD_OF"===t||"FOLLOWS_FROM"===t)})),"span")}var xf=function(e){return(0,Ve.iv)(df||(df=(0,r.Z)(["\n    color: ",";\n    position: relative;\n"])),e.viewBg)},bf=(0,Ve.iv)(ff||(ff=(0,r.Z)(["\n    &:hover {\n        cursor: pointer;\n    }\n"]))),yf=function(e){return(0,Ve.iv)(pf||(pf=(0,r.Z)(['\n    /* The size of the indentGuide is based off of the iconWrapper */\n    padding-right: calc(0.5rem + 12px);\n    height: 100%;\n    border-left: 1px solid transparent;\n    display: inline-flex;\n    &::before {\n        content: "";\n        padding-left: 1px;\n        background-color: ',";\n    }\n"])),e.buttonBorder)},Zf=function(e){return(0,Ve.iv)(vf||(vf=(0,r.Z)(["\n    border-color: ",";\n    &::before {\n        background-color: transparent;\n    }\n"])),e.widgetContainer)},wf=St.Z.span(hf||(hf=(0,r.Z)(["\n    position: absolute;\n    right: 0.25rem;\n"]))),Sf=function(e){(0,Ba.Z)(t,e);var n=(0,Ha.Z)(t);function t(e){var r;return(0,za.Z)(this,t),(r=n.call(this,e)).ancestorIds=void 0,r.handleMouseLeave=function(e,n){e.relatedTarget instanceof HTMLSpanElement&&(0,Ie.get)(e,"relatedTarget.dataset.ancestorId")===n||r.props.removeHoverIndentGuideId(n)},r.handleMouseEnter=function(e,n){e.relatedTarget instanceof HTMLSpanElement&&(0,Ie.get)(e,"relatedTarget.dataset.ancestorId")===n||r.props.addHoverIndentGuideId(n)},r.ancestorIds=function(e){var n=[];if(!e)return n;for(var t=mf(e);t;)n.push(t.spanID),t=mf(t);return n}(e.span),r.ancestorIds.push("root"),r.ancestorIds.reverse(),r}return(0,Fa.Z)(t,[{key:"render",value:function(){var e=this,n=this.props,t=n.childrenVisible,r=n.onClick,i=n.showChildrenIcon,a=n.span,o=a.hasChildren,s=a.spanID,u=o?{onClick:r,role:"switch","aria-checked":t}:null,c=i&&o&&(t?(0,ze.jsx)(ha.Z,{style:{color:this.props.theme.textColor}}):(0,ze.jsx)(gt.Z,{style:{color:this.props.theme.textColor}}));return(0,ze.jsxs)("span",(0,l.Z)((0,l.Z)({className:Ls()(xf(this.props.theme),(0,B.Z)({},bf,o))},u),{},{children:[this.ancestorIds.map((function(n){return(0,ze.jsx)("span",{className:Ls()(yf(e.props.theme),(0,B.Z)({},Zf(e.props.theme),e.props.hoverIndentGuideIds.has(n))),"data-ancestor-id":n,"data-testid":"SpanTreeOffset--indentGuide",onMouseEnter:function(t){return e.handleMouseEnter(t,n)},onMouseLeave:function(t){return e.handleMouseLeave(t,n)}},n)})),c&&(0,ze.jsx)(wf,{onMouseEnter:function(n){return e.handleMouseEnter(n,s)},onMouseLeave:function(n){return e.handleMouseLeave(n,s)},"data-testid":"icon-wrapper",children:c})]}))}}]),t}(f.PureComponent);Sf.displayName="UnthemedSpanTreeOffset",Sf.defaultProps={childrenVisible:!1,showChildrenIcon:!0};var jf,kf,Cf,Tf,_f,If,Df,Nf,Mf,Ef,Rf,Of,Lf,Vf,zf,Ff,Bf,Hf,Pf,qf,Af,Qf,Wf,Uf=Sf,Jf="spanBar",Gf="spanBarLabel",Kf="nameWrapper",Yf="nameWrapperMatchingFilter",Xf="jaegerView",$f=(0,Ve.F4)(jf||(jf=(0,r.Z)(["\n    from {\n      background-color: #68b9ff;\n    }\n    to {\n      background-color: default;\n    }\n  "]))),ep=(0,Ve.iv)(kf||(kf=(0,r.Z)(["\n    line-height: 27px;\n    overflow: hidden;\n    display: flex;\n"]))),np=(0,Ve.iv)(Cf||(Cf=(0,r.Z)(["\n    background-color: #fffce4;\n"]))),tp=(0,Ve.iv)(Tf||(Tf=(0,r.Z)(["\n    position: relative;\n    white-space: nowrap;\n    z-index: 1;\n    &:hover {\n        z-index: 1;\n    }\n"]))),rp=St.Z.small(_f||(_f=(0,r.Z)(["\n    color: #808080;\n    font-size: 80%;\n"]))),ip=(0,Ve.iv)(If||(If=(0,r.Z)(["\n    position: relative;\n"]))),ap=function(e){return(0,Ve.iv)(Df||(Df=(0,r.Z)(["\n    background: ",";\n    outline: 1px solid ",";\n"])),e.viewBg,e.viewBg)},op=function(e){return(0,Ve.iv)(Nf||(Nf=(0,r.Z)(["\n    background: #fff3d7;\n    outline: 1px solid ",";\n"])),e.viewBg)},lp=function(e){return(0,Ve.iv)(Mf||(Mf=(0,r.Z)(["\n    &:hover ."," {\n        opacity: 1;\n    }\n    &:hover ."," {\n        color: ",";\n    }\n    &:hover ."," {\n        background: ",";\n        background: linear-gradient(\n            90deg,\n            ",",\n            "," 75%,\n            #eee\n        );\n    }\n    &:hover ."," {\n        background-color: #f5f5f5;\n        outline: 1px solid ",";\n    }\n"])),Jf,Gf,e.textColor,Kf,e.viewBg,e.widgetContainer,e.viewBg,Xf,e.viewBg)},sp=(0,Ve.iv)(Ef||(Ef=(0,r.Z)(['\n    & .nameColumn::before {\n        content: " ";\n        height: 100%;\n        position: absolute;\n        width: 6px;\n        background-image: linear-gradient(\n            to right,\n            rgba(25, 25, 25, 0.25),\n            rgba(32, 32, 32, 0)\n        );\n        left: 100%;\n        z-index: -1;\n    }\n']))),up=(0,Ve.iv)(Rf||(Rf=(0,r.Z)(['\n    & .jaegerView::before {\n        content: " ";\n        height: 100%;\n        position: absolute;\n        width: 6px;\n        background-image: linear-gradient(\n            to left,\n            rgba(25, 25, 25, 0.25),\n            rgba(25, 25, 25, 0.25)\n        );\n        right: 0%;\n        z-index: 1;\n    }\n']))),cp=function(e){return(0,Ve.iv)(Of||(Of=(0,r.Z)(["\n    color: ",";\n    & ."," {\n        opacity: 1;\n    }\n    & ."," {\n        color: ",";\n    }\n    & .",", &:hover ."," {\n        background: ",";\n        box-shadow: 0 1px 0 ",";\n    }\n    & ."," {\n        background: ",";\n    }\n    &:hover ."," {\n        background: ",";\n    }\n"])),e.textColor,Jf,Gf,e.textColor,Kf,Kf,e.viewBg,e.inputBg,Yf,e.widgetContainer,Xf,e.widgetContainer)},dp=function(e){return(0,Ve.iv)(Lf||(Lf=(0,r.Z)(["\n    background-color: ",";\n    &:hover ."," {\n        background: ",";\n    }\n    &:hover ."," {\n        background-color: #f7f1c6;\n        outline: 1px solid ",";\n    }\n"])),e.widgetContainer,Kf,e.widgetContainer,Xf,e.viewBg)},fp=function(e){return(0,Ve.iv)(Vf||(Vf=(0,r.Z)(["\n    background-color: ",";\n    animation: "," 1s cubic-bezier(0.12, 0, 0.39, 0);\n    &\n        .",",\n        .",",\n        ."," {\n        background-color: ",";\n        animation: "," 1s cubic-bezier(0.12, 0, 0.39, 0);\n    }\n    & ."," {\n        opacity: 1;\n    }\n    & ."," {\n        color: ",";\n    }\n    &:hover .",", :hover ."," {\n        background: #d5ebff;\n        box-shadow: 0 1px 0 ",";\n    }\n"])),e.widgetContainer,$f,Kf,Xf,Yf,e.widgetContainer,$f,Jf,Gf,e.textColor,Kf,Xf,e.viewBg)},pp=function(e){return(0,Ve.iv)(Ff||(Ff=(0,r.Z)(["\n    color: ",';\n    cursor: pointer;\n    flex: 1 1 auto;\n    outline: none;\n    overflow-y: hidden;\n    overflow-x: auto;\n    margin-right: 8px;\n    padding-left: 4px;\n    padding-right: 0.25em;\n    position: relative;\n    -ms-overflow-style: none;\n    scrollbar-width: none;\n    &::-webkit-scrollbar {\n        display: none;\n    }\n    &::before {\n        content: " ";\n        position: absolute;\n        top: 4px;\n        bottom: 4px;\n        left: 0;\n        border-left: 4px solid;\n        border-left-color: inherit;\n    }\n    &:focus {\n        text-decoration: none;\n    }\n    &:hover > small {\n        color: ',";\n    }\n    text-align: left;\n    background: transparent;\n    border: none;\n"])),e.textColor,e.textColor)},vp=(0,Ve.iv)(Bf||(Bf=(0,r.Z)(["\n    &::before {\n        bottom: 0;\n    }\n"]))),hp=(0,Ve.iv)(Hf||(Hf=(0,r.Z)(["\n    padding: 0 0.25rem 0 0.5rem;\n    12px;\n"]))),gp=(0,Ve.iv)(Pf||(Pf=(0,r.Z)(["\n    font-weight: bold;\n    font-style: italic;\n"]))),mp=(0,Ve.iv)(qf||(qf=(0,r.Z)(["\n    border-radius: 6.5px;\n    color: #fff;\n    font-size: 0.85em;\n    margin-right: 0.25rem;\n    padding: 1px;\n"]))),xp=St.Z.i(Af||(Af=(0,r.Z)(["\n    border-radius: 6.5px;\n    display: inline-block;\n    font-size: 0.85em;\n    height: 1em;\n    margin-right: 0.25rem;\n    padding: 1px;\n    width: 1em;\n    vertical-align: middle;\n"]))),bp=(0,Ve.iv)(Qf||(Qf=(0,r.Z)(["\n    left: 100%;\n"]))),yp=(0,Ve.iv)(Wf||(Wf=(0,r.Z)(["\n    right: 100%;\n"]))),Zp=function(e){(0,Ba.Z)(t,e);var n=(0,Ha.Z)(t);function t(){var e;(0,za.Z)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i)))._detailToggle=function(){e.props.onDetailToggled(e.props.span.spanID)},e._childrenToggle=function(){e.props.onChildrenToggled(e.props.span.spanID)},e.getSpanBarLabel=function(e,n,t){var r,i=null!==(r=null===n||void 0===n?void 0:n.type)&&void 0!==r?r:"";if(i===Vc)return"";if(""===i||i===zc)return"(".concat(t,")");if(i===Fc){var a,o,l=null!==(a=null===n||void 0===n||null===(o=n.tag)||void 0===o?void 0:o.trim())&&void 0!==a?a:"";if(""!==l&&e.tags){var s,u,c,d=null===(s=e.tags)||void 0===s?void 0:s.find((function(e){return e.key===l})),f=null===(u=e.process)||void 0===u||null===(c=u.tags)||void 0===c?void 0:c.find((function(e){return e.key===l}));if(d)return"(".concat(d.value,")");if(f)return"(".concat(f.value,")")}}return""},e}return(0,Fa.Z)(t,[{key:"render",value:function(){var e,n,t,i,a,o=this.props,l=o.className,s=o.color,u=o.spanBarOptions,c=o.columnDivision,d=o.isChildrenExpanded,f=o.isDetailExpanded,p=o.isMatchingFilter,v=o.isFocused,h=o.numTicks,g=o.rpc,m=o.noInstrumentedServer,x=o.showErrorIcon,b=o.getViewedBounds,y=o.traceStartTime,Z=o.span,w=o.hoverIndentGuideIds,S=o.addHoverIndentGuideId,j=o.removeHoverIndentGuideId,k=o.clippingLeft,C=o.clippingRight,T=o.createSpanLink,_=Z.duration,I=Z.hasChildren,D=Z.operationName,N=Z.process.serviceName,M=lu(_),E=b(Z.startTime,Z.startTime+Z.duration),R=E.start,O=E.end,L="".concat(N,"::").concat(D);R>1-O?(i="".concat(L," | ").concat(M),a=yp):(i="".concat(M," | ").concat(L),a=bp);return(0,ze.jsxs)(Tu,{theme:this.props.theme,className:Ls()(lp,(e={},(0,B.Z)(e,cp(this.props.theme),f),(0,B.Z)(e,dp(this.props.theme),p),(0,B.Z)(e,(this.props.theme,(0,Ve.iv)(zf||(zf=(0,r.Z)(["\n    &:hover ."," {\n        background: #ffeccf;\n    }\n"])),Xf)),p&&f),(0,B.Z)(e,fp(this.props.theme),v),(0,B.Z)(e,sp,k),(0,B.Z)(e,up,C),e),l),children:[(0,ze.jsx)(Tu.Cell,{theme:this.props.theme,className:Ls()(tp,"nameColumn"),width:c,children:(0,ze.jsxs)("div",{className:Ls()(ep,Kf,(n={},(0,B.Z)(n,np,p),(0,B.Z)(n,"nameWrapperMatchingFilter",p),n)),children:[(0,ze.jsx)(Uf,{theme:this.props.theme,onClick:I?this._childrenToggle:void 0,childrenVisible:d,span:Z,hoverIndentGuideIds:w,addHoverIndentGuideId:S,removeHoverIndentGuideId:j}),(0,ze.jsxs)("button",{type:"button",className:Ls()(pp(this.props.theme),(0,B.Z)({},vp,f)),"aria-checked":f,title:L,onClick:this._detailToggle,role:"switch",style:{borderColor:s},tabIndex:0,children:[(0,ze.jsxs)("span",{className:Ls()(hp,(0,B.Z)({},gp,I&&!d)),children:[x&&(0,ze.jsx)(Oc.Z,{style:{backgroundColor:Z.errorIconColor?Z.errorIconColor:"#db2828"},className:mp}),N," ",g&&(0,ze.jsxs)("span",{children:[(0,ze.jsx)(Lc.Z,{})," ",(0,ze.jsx)(xp,{style:{background:g.color}}),g.serviceName]}),m&&(0,ze.jsxs)("span",{children:[(0,ze.jsx)(Lc.Z,{})," ",(0,ze.jsx)(xp,{style:{background:m.color}}),m.serviceName]})]}),(0,ze.jsx)(rp,{children:g?g.operationName:D}),(0,ze.jsxs)(rp,{children:[" ",this.getSpanBarLabel(Z,u,M)]})]}),T&&function(){var e=T(Z),n=function(e){return e?Object.values(e).reduce((function(e,n){return e+n.length}),0):0}(e);if(e&&1===n){var t,r,i,a,o,l,s=null!==(t=null!==(r=null!==(i=null===(a=e.logLinks)||void 0===a?void 0:a[0])&&void 0!==i?i:null===(o=e.metricLinks)||void 0===o?void 0:o[0])&&void 0!==r?r:null===(l=e.traceLinks)||void 0===l?void 0:l[0])&&void 0!==t?t:void 0;return s?(0,ze.jsx)("a",{href:s.href,target:"_blank",style:{marginRight:"5px"},rel:"noopener noreferrer",onClick:s.onClick?function(e){e.ctrlKey||e.metaKey||e.shiftKey||!s.onClick||(e.preventDefault(),s.onClick(e))}:void 0,children:s.content}):null}return null}()]})}),(0,ze.jsxs)(Tu.Cell,{theme:this.props.theme,className:Ls()(ip,Xf,(t={},(0,B.Z)(t,ap(this.props.theme),f),(0,B.Z)(t,op(this.props.theme),p&&f),t)),"data-testid":"span-view",style:{cursor:"pointer"},width:1-c,onClick:this._detailToggle,children:[(0,ze.jsx)(wu,{theme:this.props.theme,numTicks:h}),(0,ze.jsx)(gf,{rpc:g,viewStart:R,viewEnd:O,getViewedBounds:b,color:s,shortLabel:M,longLabel:i,traceStartTime:y,span:Z,labelClassName:"".concat(Gf," ").concat(a),className:Jf})]})]})}}]),t}(f.PureComponent);Zp.displayName="UnthemedSpanBarRow",Zp.defaultProps={className:"",rpc:null};var wp,Sp,jp,kp,Cp,Tp,_p,Ip,Dp,Np=Zp,Mp=(0,Ve.iv)(wp||(wp=(0,r.Z)(["\n    background: #ddd;\n"]))),Ep=(0,Ve.iv)(Sp||(Sp=(0,r.Z)(["\n    display: inline-block;\n    width: 1px;\n    height: 0.9em;\n    margin: 0 8px;\n    vertical-align: middle;\n"]))),Rp=(0,Ve.iv)(jp||(jp=(0,r.Z)(["\n    display: block;\n    height: 1px;\n    width: 100%;\n    margin: 24px 0;\n    clear: both;\n    position: relative;\n    top: -0.06em;\n"])));function Op(e){var n=e.className,t=e.style,r=e.type;return(0,ze.jsx)("div",{style:t,className:(0,Ve.cx)(Mp,"horizontal"===r?Rp:Ep,n)})}var Lp=(0,Ve.iv)(kp||(kp=(0,r.Z)(["\n    list-style: none;\n    margin: 0;\n    padding: 0;\n"]))),Vp=(0,Ve.iv)(Cp||(Cp=(0,r.Z)(["\n    margin-right: -8px;\n    display: flex;\n    flex-wrap: wrap;\n    justify-content: flex-end;\n"]))),zp=(0,Ve.iv)(Tp||(Tp=(0,r.Z)(["\n    display: inline-block;\n"]))),Fp=function(e){return(0,Ve.iv)(_p||(_p=(0,r.Z)(["\n    border-right: 1px solid ",";\n    padding: 0 8px;\n"])),e)},Bp=St.Z.span(Ip||(Ip=(0,r.Z)(["\n    color: ",";\n    margin-right: 0.25rem;\n    font-size: 12px;\n"])),(function(e){return e.theme.textColor})),Hp=St.Z.strong(Dp||(Dp=(0,r.Z)(["\n    color: ",";\n    margin-right: 0.55rem;\n    font-size: 12px;\n"])),(function(e){return e.theme.textColor}));function Pp(e){var n=e.className,t=e.divider,r=void 0!==t&&t,i=e.items;return(0,ze.jsx)("ul",{className:Ls()(Lp,n,r?Vp:""),children:i.map((function(n){var t=n.key,i=n.label,a=n.value;return(0,ze.jsxs)("li",{className:Ls()(zp,r?Fp(e.theme.buttonBorder):""),children:[(0,ze.jsx)(Bp,{theme:e.theme,children:i}),(0,ze.jsx)(Hp,{theme:e.theme,children:a})]},"".concat(t))}))})}var qp,Ap,Qp,Wp,Up,Jp="label",Gp=t(94795),Kp=t.n(Gp),Yp=t(69099);function Xp(e){var n=(0,f.useState)(!1),t=(0,u.Z)(n,2),r=t[0],i=t[1];return(0,ze.jsx)(D.Z,{title:r?"Copied":e.tooltipTitle,children:(0,ze.jsx)(Yp.Z,{type:"button",onClick:function(){i(!0)}})})}Xp.defaultProps={icon:"copy",className:void 0};var $p="copyIcon",ev=St.Z.div(qp||(qp=(0,r.Z)(["\n    background:",";\n    border: 1px solid ",";\n    margin-bottom: 0.5rem;\n    max-height: 450px;\n    overflow: auto;\n"])),(function(e){return e.theme.viewBg}),(function(e){return e.theme.buttonBorder})),nv=St.Z.tbody(Ap||(Ap=(0,r.Z)(["\n       vertical-align: baseline;\n"]))),tv=St.Z.tr(Qp||(Qp=(0,r.Z)(["\ncolor:",";\n       & > td {\n        padding: 0rem 0.5rem;\n        height: 30px;\n        line-height: 30px;\n        box-sizing: border-box;\n        font-size: 12px;\n        color:",";\n    }\n    &:nth-of-type(2n) > td {\n        background:",";\n    }\n    &:not(:hover) ."," {\n        visibility: hidden;\n    }\n"])),(function(e){return e.theme.textColor}),(function(e){return e.theme.textColor}),(function(e){return e.theme.widgetContainer}),$p),rv=St.Z.td(Wp||(Wp=(0,r.Z)(["\n    color: "," !important;\n    white-space: pre;\n    width: 125px;\n"])),(function(e){return e.theme.textColor})),iv=St.Z.td(Up||(Up=(0,r.Z)(["\n       text-align: right;\n"]))),av=/^(\[|\{)/;function ov(e){if("string"===typeof e&&av.test(e))try{return JSON.parse(e)}catch(n){}return e}var lv,sv,uv,cv,dv,fv,pv,vv,hv=function(e){return(0,ze.jsxs)("a",{href:e.href,title:e.title,target:"_blank",rel:"noopener noreferrer",children:[e.children," ",(0,ze.jsx)(ro.Z,{})]})};function gv(e){var n=e.data,t=e.linksGetter,r=e.theme;return(0,ze.jsx)(ev,{theme:r,"data-testid":"KeyValueTable",children:(0,ze.jsx)("table",{className:Gs,children:(0,ze.jsx)(nv,{children:n.map((function(e,i){var a,o={__html:Kp()(ov(e.value))},l=(0,ze.jsx)("div",{className:Ws,dangerouslySetInnerHTML:o}),s=t?t(n,i):null;return a=s&&s.length?(0,ze.jsx)("div",{children:(0,ze.jsx)(hv,{href:s[0].url,title:s[0].text,children:l})}):l,(0,ze.jsxs)(tv,{theme:r,children:[(0,ze.jsx)(rv,{theme:r,"data-testid":"KeyValueTable--keyColumn",children:e.key}),(0,ze.jsx)("td",{children:a}),(0,ze.jsx)(iv,{children:(0,ze.jsx)(Xp,{className:$p,copyText:JSON.stringify(e,null,2),tooltipTitle:"Copy JSON"})})]},"".concat(e.key,"-").concat(i))}))})})})}hv.defaultProps={title:""};var mv,xv,bv,yv,Zv=(0,Ve.iv)(lv||(lv=(0,r.Z)(["\n    cursor: pointer;\n    overflow: hidden;\n    display: flex;\n    align-items: center;\n    padding: 0.25em 0.1em;\n    font-size: 12px;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n    &:hover {\n        //   background: #e8e8e8;\n    }\n"]))),wv=(0,Ve.iv)(sv||(sv=(0,r.Z)(["\n    background: none;\n    cursor: initial;\n"]))),Sv=(0,Ve.iv)(uv||(uv=(0,r.Z)(["\n    &:hover {\n        //     background: #ddd;\n    }\n"]))),jv=(0,Ve.iv)(cv||(cv=(0,r.Z)(["\n    //  color: #aaa;\n"]))),kv=St.Z.ul(dv||(dv=(0,r.Z)(["\n    display: inline;\n    list-style: none;\n    padding: 0;\n"]))),Cv=St.Z.li(fv||(fv=(0,r.Z)(["\n    display: inline;\n    margin-left: 0.7em;\n    padding-right: 0.5rem;\n    border-right: 1px solid #ddd;\n    &:last-child {\n        padding-right: 0;\n        border-right: none;\n    }\n"]))),Tv=St.Z.span(pv||(pv=(0,r.Z)(["\n    color: #777;\n"]))),_v=St.Z.span(vv||(vv=(0,r.Z)(["\n    color: #bbb;\n    padding: 0 0.2em;\n"])));function Iv(e){var n=e.data;return Array.isArray(n)&&n.length?(0,ze.jsx)(kv,{children:n.map((function(e,n){return(0,ze.jsxs)(Cv,{children:[(0,ze.jsx)(Tv,{children:e.key}),(0,ze.jsx)(_v,{children:"="}),String(e.value)]},"".concat(e.key,"-").concat(n))}))}):null}function Dv(e){var n,t=e.className,r=e.data,i=e.highContrast,a=e.interactive,o=e.isOpen,s=e.label,u=e.linksGetter,c=e.onToggle,d=!Array.isArray(r)||!r.length,f=null,p=null;return a&&(f=o?(0,ze.jsx)(ha.Z,{fontSize:"small",style:{height:"13px",width:"13px"}}):(0,ze.jsx)(gt.Z,{fontSize:"small",style:{height:"13px",width:"13px"}}),p={"aria-checked":o,onClick:d?null:c,role:"switch"}),(0,ze.jsxs)("div",{className:Ls()(t,Js),children:[(0,ze.jsxs)("div",(0,l.Z)((0,l.Z)({className:Ls()(Zv,(n={},(0,B.Z)(n,wv,d),(0,B.Z)(n,Sv,i&&!d),n))},p),{},{"data-testid":"AccordianKeyValues--header",children:[f,(0,ze.jsxs)("strong",{"data-test":Jp,children:[s,o||":"]}),!o&&(0,ze.jsx)(Iv,{data:r})]})),o&&(0,ze.jsx)(gv,{theme:e.theme,data:r,linksGetter:u})]})}Iv.defaultProps={data:null},Dv.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};var Nv=St.Z.div(mv||(mv=(0,r.Z)(["\n   // border: 1px solid #d8d8d8;\n    position: relative;\n    margin-bottom: 0.25rem;\n"]))),Mv=St.Z.small(xv||(xv=(0,r.Z)(["\n//    color: #999;\n    font-size: 80%;\n"]))),Ev=St.Z.div(bv||(bv=(0,r.Z)(["\n  //  background: #f0f0f0;\n //   border-top: 1px solid #d8d8d8;\n  //  padding: 0.5rem 0.5rem 0.25rem 0.5rem;\n"]))),Rv=(0,Ve.iv)(yv||(yv=(0,r.Z)(["\n    display: flex;\n    align-items: center;\n  //  background: #e4e4e4;\n    color: inherit;\n   \n    font-size: 12px;\n    padding: 0.25rem 0.5rem;\n    &:hover {\n   //     background: #dadada;\n    }\n"])));function Ov(e){var n=e.interactive,t=e.isOpen,r=e.linksGetter,i=e.logs,a=e.openedItems,o=e.onItemToggle,s=e.onToggle,u=e.timestamp,c=null,d="span",p=null;n&&(c=t?(0,ze.jsx)(ha.Z,{style:{height:"13px",width:"12px"},className:Us}):(0,ze.jsx)(fi.Z,{style:{height:"13px",width:"12px"},className:Us}),d="a",p={"aria-checked":t,onClick:s,role:"switch"});var v=f.useMemo((function(){return i.map((function(e){var n,t=null===(n=Object.keys(e))||void 0===n?void 0:n.filter((function(e){return"timeUnixNano"!==e}));return{timestamp:parseInt(e.timeUnixNano)/1e3,fields:t.map((function(n){return{key:n,value:e[n]}}))}}))}),[i]);return(0,ze.jsxs)(Nv,{children:[(0,ze.jsxs)(d,(0,l.Z)((0,l.Z)({className:Rv},p),{},{children:[c," ",(0,ze.jsxs)("strong",{children:["Events (",v.length,")"]})]})),t&&(0,ze.jsxs)(Ev,{children:[(0,Ie.sortBy)(v,"timestamp").map((function(e,t){return(0,ze.jsx)(Dv,{className:t<v.length-1?Fs:null,data:e.fields||[],highContrast:!0,interactive:n,isOpen:!!a&&a.has(e),label:"".concat(lu(e.timestamp-u)),linksGetter:r,onToggle:n&&o?function(){return o(e)}:null},"".concat(e.timestamp,"-").concat(t))})),(0,ze.jsx)(Mv,{children:"Log timestamps are relative to the start time of the full trace."})]})]})}function Lv(e){var n=e.data,t=e.openedItems,r=e.onItemToggle,i=e.interactive;return(0,ze.jsx)("div",{children:n.map((function(e,a){var o;return(0,ze.jsxs)("div",{children:[(0,ze.jsx)("div",{},"".concat(e.spanID)),!(null===(o=e.tags)||void 0===o||!o.length)&&(0,ze.jsx)("div",{children:(0,ze.jsx)(Dv,{className:a<n.length-1?Fs:null,data:e.tags||[],highContrast:!0,interactive:i,isOpen:!!t&&t.has(e),label:"attributes",linksGetter:null,onToggle:i&&r?function(){return r(e)}:null})})]},a)}))})}Ov.defaultProps={interactive:!0,linksGetter:void 0,onItemToggle:void 0,onToggle:void 0,openedItems:void 0};var Vv,zv,Fv,Bv,Hv=function(e){var n=e.data,t=e.interactive,r=void 0===t||t,i=e.isOpen,a=e.onToggle,o=e.onItemToggle,s=e.openedItems,u=!Array.isArray(n)||!n.length,c=null,d="span",f=null;return r&&(c=i?(0,ze.jsx)(ha.Z,{className:Us}):(0,ze.jsx)(fi.Z,{className:Us}),d="a",f={"aria-checked":i,onClick:u?null:a,role:"switch"}),(0,ze.jsxs)("div",{children:[(0,ze.jsxs)(d,(0,l.Z)((0,l.Z)({},f),{},{children:[c,(0,ze.jsx)("strong",{children:(0,ze.jsx)("span",{children:"References"})})," ","(",n.length,")"]})),i&&(0,ze.jsx)(Lv,{data:n,openedItems:s,onItemToggle:o,interactive:r})]})},Pv=f.memo(Hv),qv=St.Z.div(Vv||(Vv=(0,r.Z)(["\n    max-height: 450px;\n    overflow: auto;\n"]))),Av=St.Z.ul(zv||(zv=(0,r.Z)(["\n    width: 100%;\n    list-style: none;\n    padding: 0;\n    margin: 0;\n"]))),Qv=St.Z.li(Fv||(Fv=(0,r.Z)(["\n    padding: 0.25rem 0.5rem;\n    vertical-align: top;\n    &:nth-of-type(2n) {\n        background: #f5f5f5;\n    }\n"])));function Wv(e){var n=e.data;return(0,ze.jsx)(qv,{"data-testid":"TextList",children:(0,ze.jsx)(Av,{children:n.map((function(e,n){return(0,ze.jsx)(Qv,{children:e},"".concat(n))}))})})}var Uv,Jv,Gv,Kv,Yv,Xv,$v,eh,nh=(0,Ve.iv)(Bv||(Bv=(0,r.Z)(["\n    cursor: pointer;\n    overflow: hidden;\n    padding: 0.25em 0.1em;\n    text-overflow: ellipsis;\n    font-size:12px;\n    white-space: nowrap;\n    &:hover {\n        background: #e8e8e8;\n    }\n"])));function th(e){var n=e.data;return(0,ze.jsx)(Wv,{data:n})}function rh(e){var n=e.className,t=e.data,r=e.headerClassName,i=e.interactive,a=e.isOpen,o=e.label,s=e.onToggle,u=e.TextComponent,c=void 0===u?th:u,d=!Array.isArray(t)||!t.length,f=Ls()(Us,(0,B.Z)({},jv,d)),p=null,v=null;return i&&(p=a?(0,ze.jsx)(ha.Z,{className:f,fontSize:"small"}):(0,ze.jsx)(gt.Z,{className:f,fontSize:"small"}),v={"aria-checked":a,onClick:d?null:s,role:"switch"}),(0,ze.jsxs)("div",{className:n||"",children:[(0,ze.jsxs)("div",(0,l.Z)((0,l.Z)({className:Ls()(nh,r)},v),{},{"data-testid":"AccordianText--header",children:[p,(0,ze.jsx)("strong",{children:o})," (",t.length,")"]})),a&&(0,ze.jsx)(c,{data:t})]})}rh.defaultProps={className:null,highContrast:!1,interactive:!0,onToggle:null};var ih=St.Z.div(Uv||(Uv=(0,r.Z)(["\n    display: flex;\n    align-items: flex-start;\n    justify-content: space-between;\n    gap: 0 1rem;\n    margin-bottom: 0.25rem;\n"]))),ah=St.Z.div(Jv||(Jv=(0,r.Z)(["\n    overflow: hidden;\n"]))),oh=St.Z.small(Gv||(Gv=(0,r.Z)(["\n    display: block;\n    letter-spacing: 0.25px;\n    margin: 0.5em 0 -0.75em;\n    text-align: right;\n    font-size: 80%;\n"]))),lh=St.Z.span(Kv||(Kv=(0,r.Z)(["\n    &::before {\n        color: #bbb;\n        content: attr(data-label);\n    }\n"]))),sh=(0,Ve.iv)(Yv||(Yv=(0,r.Z)(["\n    background: #fafafa;\n    border: 1px solid #e4e4e4;\n    margin-bottom: 0.25rem;\n"]))),uh=(0,Ve.iv)(Xv||(Xv=(0,r.Z)(["\n    background: #fff7e6;\n    padding: 0.25rem 0.5rem;\n    &:hover {\n        background: #ffe7ba;\n    }\n"]))),ch=St.Z.span($v||($v=(0,r.Z)(["\n    color: #d36c08;\n"]))),dh=St.Z.textarea(eh||(eh=(0,r.Z)(["\n    word-break: break-all;\n    white-space: pre;\n"])));function fh(e){var n,t=e.detailState,r=e.linksGetter,i=e.logItemToggle,a=e.logsToggle,o=e.processToggle,l=e.span,s=e.tagsToggle,u=e.traceStartTime,c=e.warningsToggle,d=e.stackTracesToggle,f=e.referencesToggle,p=e.referenceItemToggle,v=t.isTagsOpen,h=t.isProcessOpen,g=t.logs,m=t.isWarningsOpen,x=t.references,b=t.isStackTracesOpen,y=l.operationName,Z=l.process,w=l.duration,S=l.relativeStartTime,j=l.startTime,k=l.spanID,C=l.logs,T=l.tags,_=l.warnings,I=l.references,D=l.stackTraces,N=[{key:"svc",label:"Service:",value:Z.serviceName},{key:"duration",label:"Duration:",value:lu(w)},{key:"start",label:"Start Time:",value:lu(S)+bh(j)}].concat((0,H.Z)(l.childSpanCount>0?[{key:"child_count",label:"Child Count:",value:l.childSpanCount}]:[]));return(0,ze.jsxs)("div",{"data-testid":"span-detail-component",children:[(0,ze.jsxs)(ih,{children:[(0,ze.jsx)("h2",{className:Ls()(Hs),children:y}),(0,ze.jsx)(ah,{children:(0,ze.jsx)(Pp,{theme:e.theme,className:Qs,divider:!0,items:N})})]}),(0,ze.jsx)(Op,{className:Bs,type:"horizontal"}),(0,ze.jsxs)("div",{children:[(0,ze.jsxs)("div",{children:[(0,ze.jsx)(Dv,{theme:e.theme,data:T,label:"Attributes",linksGetter:r,isOpen:v,onToggle:function(){return s(k)}}),Z.tags&&(0,ze.jsx)(Dv,{theme:e.theme,className:Fs,data:Z.tags,label:"Resource",linksGetter:r,isOpen:h,onToggle:function(){return o(k)}})]}),(null===l||void 0===l||null===(n=l.events)||void 0===n?void 0:n.length)>0&&(0,ze.jsx)(Ov,{linksGetter:r,logs:l.events,isOpen:g.isOpen,openedItems:g.openedItems,onToggle:function(){return a(k)},onItemToggle:function(e){return i(k,e)},timestamp:u}),C&&C.length>0&&(0,ze.jsx)(Ov,{linksGetter:r,logs:C,isOpen:g.isOpen,openedItems:g.openedItems,onToggle:function(){return a(k)},onItemToggle:function(e){return i(k,e)},timestamp:u}),_&&_.length>0&&(0,ze.jsx)(rh,{className:sh,headerClassName:uh,label:(0,ze.jsx)(ch,{children:"Warnings"}),data:_,isOpen:m,onToggle:function(){return c(k)}}),D&&D.length&&(0,ze.jsx)(rh,{label:"Stack trace",data:D,isOpen:b,TextComponent:function(e){var n,t,r;(null===(n=e.data)||void 0===n?void 0:n.length)>1?t=e.data.map((function(e,n){return"StackTrace ".concat(n+1,":\n").concat(e)})).join("\n"):t=null===(r=e.data)||void 0===r?void 0:r[0];return(0,ze.jsx)(dh,{style:{cursor:"unset"},readOnly:!0,cols:10,rows:10,value:t})},onToggle:function(){return d(k)}}),I&&I.length>0&&(I.length>1||"CHILD_OF"!==I[0].refType)&&(0,ze.jsx)(Pv,{data:I,isOpen:x.isOpen,openedItems:x.openedItems,onToggle:function(){return f(k)},onItemToggle:function(e){return p(k,e)}}),(0,ze.jsxs)(oh,{children:[(0,ze.jsx)(lh,{"data-label":"SpanID:"})," ",k]})]})]})}var ph,vh,hh,gh,mh,xh,bh=function(e){var n;return" (".concat(null===(n=d()(e/1e3))||void 0===n?void 0:n.format("HH:mm:ss.SSS"),")")},yh=St.Z.span(ph||(ph=(0,r.Z)(['\n    cursor: pointer;\n    height: 100%;\n    overflow: hidden;\n    position: absolute;\n    width: 100%;\n    &::before {\n        border-left: 4px solid;\n        pointer-events: none;\n        width: 1000px;\n    }\n    &::after {\n        border-right: 1000px solid;\n        border-color: inherit;\n        cursor: pointer;\n        opacity: 0.2;\n    }\n\n    /* border-color inherit must come AFTER other border declarations for accent */\n    &::before,\n    &::after {\n        border-color: inherit;\n        content: " ";\n        position: absolute;\n        height: 100%;\n    }\n\n    &:hover::after {\n        opacity: 0.35;\n    }\n']))),Zh=St.Z.div(vh||(vh=(0,r.Z)(["\n    border: 1px solid ",";\n    border-top: 3px solid;\n    padding: 0.75rem;\n"])),(function(e){return e.theme.buttonBorder})),wh=function(e){(0,Ba.Z)(t,e);var n=(0,Ha.Z)(t);function t(){var e;(0,za.Z)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(e=n.call.apply(n,[this].concat(i)))._detailToggle=function(){e.props.onDetailToggled(e.props.span.spanID)},e._linksGetter=function(n,t){var r=e.props;return(0,r.linksGetter)(r.span,n,t)},e}return(0,Fa.Z)(t,[{key:"render",value:function(){var e=this.props,n=e.color,t=e.columnDivision,r=e.detailState,i=e.logItemToggle,a=e.logsToggle,o=e.eventsToggle,l=e.processToggle,s=e.referenceItemToggle,u=e.referencesToggle,c=e.warningsToggle,d=e.stackTracesToggle,f=e.span,p=e.tagsToggle,v=e.traceStartTime,h=e.hoverIndentGuideIds,g=e.addHoverIndentGuideId,m=e.removeHoverIndentGuideId,x=e.createSpanLink,b=e.focusedSpanId,y=e.topOfViewRefType;return(0,ze.jsxs)(Tu,{theme:this.props.theme,children:[(0,ze.jsxs)(Tu.Cell,{theme:this.props.theme,width:t,style:{overflow:"hidden"},children:[(0,ze.jsx)(Uf,{theme:this.props.theme,span:f,showChildrenIcon:!1,hoverIndentGuideIds:h,addHoverIndentGuideId:g,removeHoverIndentGuideId:m}),(0,ze.jsx)("span",{children:(0,ze.jsx)(yh,{onClick:this._detailToggle,style:{borderColor:n},"data-testid":"detail-row-expanded-accent"})})]}),(0,ze.jsx)(Tu.Cell,{theme:this.props.theme,width:1-t,children:(0,ze.jsx)(Zh,{theme:this.props.theme,style:{borderTopColor:n},children:(0,ze.jsx)(fh,{theme:this.props.theme,detailState:r,linksGetter:this._linksGetter,logItemToggle:i,logsToggle:a,eventsToggle:o,processToggle:l,referenceItemToggle:s,referencesToggle:u,warningsToggle:c,stackTracesToggle:d,span:f,tagsToggle:p,traceStartTime:v,createSpanLink:x,focusedSpanId:b,topOfViewRefType:y})})})]})}}]),t}(f.PureComponent),Sh=wh,jh=t(3665),kh=(0,Ve.iv)(hh||(hh=(0,r.Z)(["\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    width: 40px;\n    height: 40px;\n    position: fixed;\n    bottom: 30px;\n    right: 30px;\n    z-index: 1;\n"]))),Ch=(0,Ve.iv)(gh||(gh=(0,r.Z)(["\n    width: 100%;\n"]))),Th=St.Z.div(mh||(mh=(0,r.Z)(["\n    color: ",";\n    width: 100%;\n"])),(function(e){return e.theme.textColor}));!function(e){e.Explore="Explore",e.Panel="Panel"}(xh||(xh={}));var _h={bar:28,detail:161,detailWithLogs:197};var Ih,Dh=(0,Pa.Z)((function(e,n,t){return e?function(e,n,t){if(!e)return[];for(var r=null,i=[],a=0;a<e.length;a++){var o=e[a],l=o.spanID,s=o.depth,u=!1;null!=r&&(s>=r?u=!0:r=null),u||(n.has(l)&&(r=s+1),i.push({span:o,isDetail:!1,spanIndex:a}),t.has(l)&&i.push({span:o,isDetail:!0,spanIndex:a}))}return i}(e.spans,n,t):[]})),Nh=(0,Pa.Z)((function(e){var n=e.min,t=e.max,r=e.viewStart,i=e.viewEnd,a=t-n,o=n+r*a,l=t-(1-i)*a-o;return function(e,n){return{start:(e-o)/l,end:(n-o)/l}}}),Ie.isEqual),Mh=(0,Pa.Z)((function(e){var n=(0,u.Z)(e,2);return{left:n[0]>0,right:n[1]<1}}),Ie.isEqual),Eh=function(e){(0,Ba.Z)(t,e);var n=(0,Ha.Z)(t);function t(e){var r;return(0,za.Z)(this,t),(r=n.call(this,e)).listView=void 0,r.topTraceViewRef=(0,f.createRef)(),r.getViewRange=function(){return r.props.currentViewRangeTime},r.getSearchedSpanIDs=function(){return r.props.findMatchesIDs},r.getCollapsedChildren=function(){return r.props.childrenHiddenIDs},r.mapRowIndexToSpanIndex=function(e){return r.getRowStates()[e].spanIndex},r.mapSpanIndexToRowIndex=function(e){for(var n=r.getRowStates().length,t=0;t<n;t++){if(r.getRowStates()[t].spanIndex===e)return t}throw new Error("unable to find row for span index: ".concat(e))},r.setListView=function(e){var n=r.listView!==e;r.listView=e,e&&n&&r.props.registerAccessors(r.getAccessors())},r.getKeyFromIndex=function(e){var n=r.getRowStates()[e],t=n.isDetail,i=n.span;return"".concat(i.traceID,"--").concat(i.spanID,"--").concat(t?"detail":"bar")},r.getIndexFromKey=function(e){for(var n=e.split("--"),t=n[0],i=n[1],a="detail"===n[2],o=r.getRowStates().length,l=0;l<o;l++){var s=r.getRowStates()[l],u=s.span,c=s.isDetail;if(u.spanID===i&&u.traceID===t&&c===a)return l}return-1},r.getRowHeight=function(e){var n=r.getRowStates()[e],t=n.span;return n.isDetail?Array.isArray(t.logs)&&t.logs.length?_h.detailWithLogs:_h.detail:_h.bar},r.renderRow=function(e,n,t,i){var a=r.getRowStates()[t],o=a.isDetail,l=a.span,s=a.spanIndex;return o?r.renderSpanDetailRow(l,e,n,i):r.renderSpanBarRow(l,s,e,n,i)},r.scrollToSpan=function(e){if(null!=e){var n,t=r.getRowStates().findIndex((function(n){return n.span.spanID===e}));if(t>=0)null===(n=r.listView)||void 0===n||n.scrollToIndex(t)}},r.scrollToTop=function(){var e,n=r.props.topOfViewRef;null===n||void 0===n||null===(e=n.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},(0,e.setTrace)(e.trace,e.uiFind),r}return(0,Fa.Z)(t,[{key:"componentDidMount",value:function(){this.scrollToSpan(this.props.focusedSpanId)}},{key:"shouldComponentUpdate",value:function(e){for(var n=Object.keys(e),t=0;t<n.length;t+=1)if(e[n[t]]!==this.props[n[t]]){if("shouldScrollToFirstUiFindMatch"!==n[t])return!0;if(e[n[t]])return!0}return!1}},{key:"componentDidUpdate",value:function(e){var n=e.registerAccessors,t=e.trace,r=this.props,i=r.shouldScrollToFirstUiFindMatch,a=r.clearShouldScrollToFirstUiFindMatch,o=r.scrollToFirstVisibleSpan,l=r.registerAccessors,s=r.setTrace,u=r.trace,c=r.uiFind,d=r.focusedSpanId,f=r.focusedSpanIdForSearch;t!==u&&s(u,c),this.listView&&n!==l&&l(this.getAccessors()),i&&(o(),a()),d!==e.focusedSpanId&&this.scrollToSpan(d),f!==e.focusedSpanIdForSearch&&this.scrollToSpan(f)}},{key:"getRowStates",value:function(){var e=this.props,n=e.childrenHiddenIDs,t=e.detailStates,r=e.trace;return Dh(r,n,t)}},{key:"getClipping",value:function(){var e=this.props.currentViewRangeTime;return Mh(e)}},{key:"getViewedBounds",value:function(){var e=this.props,n=e.currentViewRangeTime,t=e.trace,r=(0,u.Z)(n,2),i=r[0],a=r[1];return Nh({min:t.startTime,max:t.endTime,viewStart:i,viewEnd:a})}},{key:"getAccessors",value:function(){var e=this.listView;if(!e)throw new Error("ListView unavailable");return{getViewRange:this.getViewRange,getSearchedSpanIDs:this.getSearchedSpanIDs,getCollapsedChildren:this.getCollapsedChildren,getViewHeight:e.getViewHeight,getBottomRowIndexVisible:e.getBottomVisibleIndex,getTopRowIndexVisible:e.getTopVisibleIndex,getRowPosition:e.getRowPosition,mapRowIndexToSpanIndex:this.mapRowIndexToSpanIndex,mapSpanIndexToRowIndex:this.mapSpanIndexToRowIndex}}},{key:"renderSpanBarRow",value:function(e,n,t,r,i){var a=e.spanID,o=e.process.serviceName,s=this.props,u=s.childrenHiddenIDs,c=s.childrenToggle,d=s.detailStates,f=s.detailToggle,p=s.findMatchesIDs,v=s.spanNameColumnWidth,h=s.trace,g=s.spanBarOptions,m=s.hoverIndentGuideIds,x=s.addHoverIndentGuideId,b=s.removeHoverIndentGuideId,y=s.createSpanLink,Z=s.focusedSpanId,w=s.focusedSpanIdForSearch,S=s.theme;if(!h)return null;var j=Ic(o,S),k=u.has(a),C=d.has(a),T=!!p&&p.has(a),_=a===Z||a===w,I=pu(e)||k&&function(e,n){for(var t=e[n].depth,r=n+1;r<e.length&&e[r].depth>t;r++)if(pu(e[r]))return!0;return!1}(h.spans,n),D=null;if(k){var N=function(e){if(e.length<=1||!uu(e[0]))return!1;for(var n=e[0].depth+1,t=1;t<e.length&&e[t].depth===n;){if(cu(e[t]))return e[t];t++}return null}(h.spans.slice(n));if(N){var M=this.getViewedBounds()(N.startTime,N.startTime+N.duration);D={color:Ic(N.process.serviceName,S),operationName:N.operationName,serviceName:N.process.serviceName,viewEnd:M.end,viewStart:M.start}}}var E=e.tags.find((function(e){return"peer.service"===e.key})),R=null;return!e.hasChildren&&E&&function(e){return e.tags.some((function(e){var n=e.key,t=e.value;return"span.kind"===n&&"client"===t}))}(e)&&(R={serviceName:E.value,color:Ic(E.value,S)}),(0,ze.jsx)(Th,(0,l.Z)((0,l.Z)({theme:this.props.theme,style:r},i),{},{children:(0,ze.jsx)(Np,{theme:this.props.theme,clippingLeft:this.getClipping().left,clippingRight:this.getClipping().right,color:j,spanBarOptions:g,columnDivision:v,isChildrenExpanded:!k,isDetailExpanded:C,isMatchingFilter:T,isFocused:_,numTicks:5,onDetailToggled:f,onChildrenToggled:c,rpc:D,noInstrumentedServer:R,showErrorIcon:I,getViewedBounds:this.getViewedBounds(),traceStartTime:h.startTime,span:e,hoverIndentGuideIds:m,addHoverIndentGuideId:x,removeHoverIndentGuideId:b,createSpanLink:y})}),t)}},{key:"renderSpanDetailRow",value:function(e,n,t,r){var i=e.spanID,a=e.process.serviceName,o=this.props,s=o.detailLogItemToggle,u=o.detailLogsToggle,c=o.detailEventsToggle,d=o.detailProcessToggle,f=o.detailReferencesToggle,p=o.detailReferenceItemToggle,v=o.detailWarningsToggle,h=o.detailStackTracesToggle,g=o.detailStates,m=o.detailTagsToggle,x=o.detailToggle,b=o.spanNameColumnWidth,y=o.trace,Z=o.hoverIndentGuideIds,w=o.addHoverIndentGuideId,S=o.removeHoverIndentGuideId,j=o.linksGetter,k=o.createSpanLink,C=o.focusedSpanId,T=o.topOfViewRefType,_=g.get(i);if(!y||!_)return null;var I=Ic(a,this.props.theme);return(0,ze.jsx)(Th,(0,l.Z)((0,l.Z)({theme:this.props.theme,style:(0,l.Z)((0,l.Z)({},t),{},{zIndex:1})},r),{},{children:(0,ze.jsx)(Sh,{theme:this.props.theme,color:I,columnDivision:b,onDetailToggled:x,detailState:_,linksGetter:j,logItemToggle:s,logsToggle:u,eventsToggle:c,processToggle:d,referenceItemToggle:p,referencesToggle:f,warningsToggle:v,stackTracesToggle:h,span:e,tagsToggle:m,traceStartTime:y.startTime,hoverIndentGuideIds:Z,addHoverIndentGuideId:w,removeHoverIndentGuideId:S,createSpanLink:k,focusedSpanId:C,topOfViewRefType:T})}),n)}},{key:"render",value:function(){var e=this.props.scrollElement;return(0,ze.jsxs)(ze.Fragment,{children:[(0,ze.jsx)(Nc,{ref:this.setListView,dataLength:this.getRowStates().length,itemHeightGetter:this.getRowHeight,itemRenderer:this.renderRow,viewBuffer:50,viewBufferMin:50,itemsWrapperClassName:Ch,getKeyFromIndex:this.getKeyFromIndex,getIndexFromKey:this.getIndexFromKey,windowScroller:!1,scrollElement:e}),(0,ze.jsx)(jh.Z,{className:kh,onClick:this.scrollToTop})]})}}]),t}(f.Component),Rh=Eh,Oh=["setSpanNameColumnWidth","updateNextViewRangeTime","updateViewRangeTime","viewRange","traceTimeline","topOfViewRef","focusedSpanIdForSearch"],Lh=St.Z.div(Ih||(Ih=(0,r.Z)(["\n    border-bottom: 1px solid ",";\n\n    & .json-markup {\n        line-height: 17px;\n        font-size: 13px;\n        font-family: monospace;\n        white-space: pre-wrap;\n    }\n\n    & .json-markup-key {\n        font-weight: bold;\n    }\n\n    & .json-markup-bool {\n        color: ",";\n    }\n\n    & .json-markup-string {\n        color: ",";\n        font-size:12px;\n        font-family:monospace;\n    }\n\n    & .json-markup-null {\n        color: ",";\n    }\n\n    & .json-markup-number {\n        color: ",";\n    }\n"])),(function(e){return e.theme.buttonBorder}),(function(e){return e.theme.textColor}),(function(e){return e.theme.textColor}),(function(e){return e.theme.textColor}),(function(e){return e.theme.textColor})),Vh=function(e){(0,Ba.Z)(t,e);var n=(0,Ha.Z)(t);function t(e){var r;return(0,za.Z)(this,t),(r=n.call(this,e)).collapseAll=function(){r.props.collapseAll(r.props.trace.spans)},r.collapseOne=function(){r.props.collapseOne(r.props.trace.spans)},r.expandAll=function(){r.props.expandAll()},r.expandOne=function(){r.props.expandOne(r.props.trace.spans)},r.state={height:0},r}return(0,Fa.Z)(t,[{key:"componentDidMount",value:function(){!function(e){var n=gs();Object.keys(e).forEach((function(t){var r=e[t];r&&n.bind(hs[t].binding,r)}))}({collapseAll:this.collapseAll,expandAll:this.expandAll,collapseOne:this.collapseOne,expandOne:this.expandOne})}},{key:"render",value:function(){var e=this,n=this.props,t=n.setSpanNameColumnWidth,r=n.updateNextViewRangeTime,i=n.updateViewRangeTime,a=n.viewRange,o=n.traceTimeline,s=n.topOfViewRef,u=n.focusedSpanIdForSearch,c=(0,Lo.Z)(n,Oh),d=c.trace;return(0,ze.jsxs)(Lh,{theme:this.props.theme,ref:function(n){return n&&e.setState({height:n.getBoundingClientRect().height})},children:[(0,ze.jsx)(jc,{theme:this.props.theme,duration:d.duration,nameColumnWidth:o.spanNameColumnWidth,numTicks:5,onCollapseAll:this.collapseAll,onCollapseOne:this.collapseOne,onColummWidthChange:t,onExpandAll:this.expandAll,onExpandOne:this.expandOne,viewRangeTime:a.time,updateNextViewRangeTime:r,updateViewRangeTime:i,columnResizeHandleHeight:this.state.height}),(0,ze.jsx)(Rh,(0,l.Z)((0,l.Z)((0,l.Z)({},c),o),{},{setSpanNameColumnWidth:t,currentViewRangeTime:a.time.current,topOfViewRef:s,focusedSpanIdForSearch:u}))]})}}]),t}(f.PureComponent),zh=Vh,Fh=["isLarge","className"];function Bh(e){e.isLarge,e.className;var n=(0,Lo.Z)(e,Fh);return(0,ze.jsx)(ro.Z,(0,l.Z)({},n))}Bh.defaultProps={isLarge:!1};var Hh=function(e){return(0,ze.jsxs)("a",{href:e.href,title:e.title,target:"_blank",rel:"noopener noreferrer",className:e.className,children:[e.children," ",(0,ze.jsx)(Bh,{})]})};function Ph(e){var n=e.links;return(0,ze.jsx)(Hh,{href:n[0].url,title:n[0].text,className:e.className})}var qh,Ah="<trace-without-root-span>",Qh=(0,Ve.iv)(qh||(qh=(0,r.Z)(["\n       display: inline-block;\n       white-space: pre;\n     "]))),Wh=/\W*\w+\W*/g;function Uh(e){var n=e.className,t=e.text,r=e.wordRegexp,i=void 0===r?Wh:r;if(!t)return"string"===typeof t?t:null;var a=[];i.exec("");for(var o=i.exec(t)||[t];o;)a.push((0,ze.jsx)("span",{className:n||Qh,children:o[0]},"".concat(t,"-").concat(a.length))),o=i.exec(t);return a}function Jh(e){var n=e.className,t=e.traceName,r=String(t||Ah),i=(0,ze.jsx)(Uh,{text:r});return(0,ze.jsx)("span",{className:n,children:i})}Uh.defaultProps={wordRegexp:Wh};var Gh=t(74443),Kh=t(88984),Yh=t.n(Kh)()(Object.defineProperty({archiveEnabled:!1,dependencies:{dagMaxNumServices:100,menuEnabled:!0},linkPatterns:[],menu:[],search:{maxLookback:{label:"2 Days",value:"2d"},maxLimit:1500},tracking:{gaID:null,trackErrors:!0}},"__mergeFields",{value:["dependencies","search","tracking"]}));function Xh(e){var n=e.references?e.references.find((function(e){return"CHILD_OF"===e.refType})):null;return n?n.span:null}var $h=/#\{([^{}]*)\}/g;function eg(e){var n=new Set;return e.replace($h,(function(e,t){return n.add(t),e})),Array.from(n)}function ng(e,n,t){return e.replace($h,(function(e,r){var i=t[r];return null==i?"":n(i)}))}function tg(e,n){if("string"!==typeof e)throw new Error("Invalid template");return{parameters:eg(e),template:ng.bind(null,e,n)}}function rg(e){if("string"===typeof e)return function(n){return n===e};if(Array.isArray(e))return function(n){return e.indexOf(n)>-1};if(null==e)return function(){return!0};throw new Error("Invalid value: ".concat(e))}var ig=function(e){return e};function ag(e,n){if(n)return n.find((function(n){return n.key===e}))}function og(e,n){return e.template(n)}function lg(e,n,t,r){var i=t[r],a="logs",l=n.process.tags===t;l&&(a="process"),n.tags===t&&(a="tags");var s=[];return e.forEach((function(e){if(e.type(a)&&e.key(i.key)&&e.value(i.value)){var r={},u=e.parameters.every((function(s){var u=ag(s,t);return u||l||(u=function(e,n){for(var t=n;t;){var r=ag(e,t.tags)||ag(e,t.process.tags);if(r)return r;t=Xh(t)}}(s,n)),u?(r[s]=u.value,!0):(console.warn(o().sanitize("Skipping link pattern, missing parameter ".concat(s," for key ").concat(i.key," in ").concat(a,".")),e.object),!1)}));u&&s.push({url:og(e.url,r),text:og(e.text,r)})}})),s}var sg,ug,cg,dg=(sg="linkPatterns",(0,Ie.get)(Yh,sg)||[]).map((function(e){try{var n=tg(e.url,encodeURIComponent),t=tg(e.text,ig);return{object:e,type:rg(e.type),key:rg(e.key),value:rg(e.value),url:n,text:t,parameters:(0,Ie.uniq)(n.parameters.concat(t.parameters))}}catch(r){return console.error("Ignoring invalid link pattern: ".concat(r),e),null}})).filter(Boolean),fg=(0,Gh.Z)(10)((function(e){return e?function(e,n){var t=[],r=Object.keys(n).filter((function(e){return"string"===typeof n[e]||"number"===n[e]}));return e.filter((function(e){return e.type("traces")})).forEach((function(e){var i={};e.parameters.every((function(e){var t=e;return!!r.includes(t)&&(i[e]=n[t],!0)}))&&t.push({url:og(e.url,i),text:og(e.text,i)})})),t}(dg,e):[]}));ug=dg,cg=new WeakMap;var pg,vg=(0,Ie.memoize)((function(e){for(var n,t=new Set(e.map((function(e){return e.spanID}))),r=function(r){if(e[r].references&&e[r].references.some((function(n){var i=n.traceID,a=n.spanID;return i===e[r].traceID&&t.has(a)})))return"continue";if(!n)return n=e[r],"continue";var i=e[r].references&&e[r].references.length||0,a=n.references&&n.references.length||0;(i<a||i===a&&e[r].startTime<n.startTime)&&(n=e[r])},i=0;i<e.length;i++)r(i);return n?"".concat(n.process.serviceName,": ").concat(n.operationName):""}),(function(e){return e.length?e[0].traceID:0})),hg=.9,gg=2,mg=200,xg=10,bg=60,yg=6;var Zg,wg,Sg=St.Z.canvas(pg||(pg=(0,r.Z)(["\n    // background: ",";\n    //background:red !important;\n    height: 60px;\n    position: absolute;\n    width: 100%;\n"])),(function(e){return e.theme.logBgColor})),jg=function(e){(0,Ba.Z)(t,e);var n=(0,Ha.Z)(t);function t(e){var r;return(0,za.Z)(this,t),(r=n.call(this,e))._canvasElm=void 0,r.theme=void 0,r.getColor=function(e){return function(e,n){return _c(kc,n).getRgbColorByKey(e)}(e,r.props.theme)},r._setCanvasRef=function(e){r._canvasElm=e},r._canvasElm=void 0,r}return(0,Fa.Z)(t,[{key:"componentDidMount",value:function(){this._draw()}},{key:"componentDidUpdate",value:function(){this._draw()}},{key:"_draw",value:function(){if(this._canvasElm){var e=this.props,n=e.valueWidth,t=e.items;!function(e,n,t,r,i){var a=new Map,o=n.length<bg?bg:Math.min(n.length,mg),l=2*window.innerWidth;e.width=l,e.height=o;var s=Math.min(yg,Math.max(gg,o/n.length)),u=o/n.length,c=e.getContext("2d",{alpha:!1});c.fillStyle=i,c.fillRect(0,0,l,o);for(var d=0;d<n.length;d++){var f=n[d],p=f.valueWidth,v=f.valueOffset,h=f.serviceName,g=v/t*l,m=p/t*l;m<xg&&(m=xg);var x=a.get(h);x||(x="rgba(".concat(r(h).concat(hg).join(),")"),a.set(h,x)),c.fillStyle=x,c.fillRect(g,d*u,m,s)}}(this._canvasElm,t,n,this.getColor,this.props.theme.logBgColor)}}},{key:"render",value:function(){return(0,ze.jsx)(Sg,{theme:this.props.theme,ref:this._setCanvasRef})}}]),t}(f.PureComponent),kg=jg,Cg=St.Z.div(Zg||(Zg=(0,r.Z)(["\n    height: 1.25rem;\n    position: relative;\n    display:flex;\n    align-items:center;\n"]))),Tg=St.Z.div(wg||(wg=(0,r.Z)(["\n    color: ",";\n    font-size: 0.75rem;\n    position: absolute;\n    user-select: none;\n"])),(function(e){return e.theme.textColor}));function _g(e){for(var n=e.numTicks,t=e.duration,r=[],i=0;i<n+1;i++){var a=i/n,o=1===a?{right:"0%"}:{left:"".concat(100*a,"%")};r.push((0,ze.jsx)(Tg,{theme:e.theme,style:o,"data-testid":"tick",children:lu(t*a)},a))}return(0,ze.jsx)(Cg,{children:r})}var Ig,Dg,Ng,Mg,Eg,Rg,Og=t(30686),Lg=St.Z.line(Ig||(Ig=(0,r.Z)(["\n    stroke: #aaa;\n    stroke-width: 1px;\n"])));function Vg(e){for(var n=e.numTicks,t=[],r=1;r<n;r++){var i="".concat(r/n*100,"%");t.push((0,ze.jsx)(Lg,{x1:i,y1:"0%",x2:i,y2:"100%"},r/n))}return(0,ze.jsx)("g",{"data-testid":"ticks","aria-hidden":"true",children:t})}var zg=St.Z.g(Dg||(Dg=(0,r.Z)(["\n    &:hover > .scrubber-handle-expansion {\n        fill-opacity: 1;\n    }\n    &:hover > .scrubber-handle {\n        fill: #44f;\n    }\n    &:hover + .scrubber.line {\n        stroke: #44f;\n    }\n"]))),Fg=Ls()((0,Ve.iv)(Ng||(Ng=(0,r.Z)(["\n        cursor: col-resize;\n        fill: #555;\n    "]))),"scrubber-handle"),Bg=(0,Ve.iv)(Mg||(Mg=(0,r.Z)(["\n    & .scrubber-handle-expansion {\n        fill-opacity: 1;\n    }\n    & .scrubber-handle {\n        fill: #44f;\n    }\n    & > .scrubber-line {\n        stroke: #44f;\n    }\n"]))),Hg=Ls()((0,Ve.iv)(Eg||(Eg=(0,r.Z)(["\n        cursor: col-resize;\n        fill-opacity: 0;\n        fill: #44f;\n    "]))),"scrubber-handle-expansion"),Pg=Ls()((0,Ve.iv)(Rg||(Rg=(0,r.Z)(["\n        pointer-events: none;\n        stroke: #555;\n    "]))),"scrubber-line");function qg(e){var n=e.isDragging,t=e.onMouseDown,r=e.onMouseEnter,i=e.onMouseLeave,a=e.position,o="".concat(100*a,"%"),l=Ls()((0,B.Z)({},Bg,n));return(0,ze.jsxs)("g",{className:l,"data-testid":"scrubber-component",children:[(0,ze.jsxs)(zg,{"data-testid":"scrubber-component-g",onMouseDown:t,onMouseEnter:r,onMouseLeave:i,children:[(0,ze.jsx)("rect",{"data-testid":"scrubber-component-rect-1",x:o,className:Hg,style:{transform:"translate(-4.5px)"},width:"9",height:"20"}),(0,ze.jsx)("rect",{"data-testid":"scrubber-component-rect-2",x:o,className:Fg,style:{transform:"translate(-1.5px)"},width:"3",height:"20"})]}),(0,ze.jsx)("line",{className:Pg,y2:"100%",x1:o,x2:o,"data-testid":"scrubber-component-line"})]})}var Ag,Qg,Wg,Ug,Jg,Gg,Kg,Yg,Xg=t(1568),$g="JaegerUiComponents__ViewingLayerResetZoomHoverClassName",em=(0,Og.iv)(Ag||(Ag=(0,r.Z)(["\n    display: none;\n    position: absolute;\n    right: 1%;\n    top: 10%;\n    z-index: 1;\n    background-color: hsla(210, 12%, 16%, 16%);\n    color: hsl(210, 12%, 16%);\n    &:hover {\n        background-color: hsla(210, 12%, 16%, 20%);\n        color: hsl(210, 12%, 16%);\n        \n    }\n"]))),nm=St.Z.div(Qg||(Qg=(0,r.Z)(["\n    cursor: vertical-text;\n    position: relative;\n    z-index: 1;\n    &:hover > ."," {\n        display: unset;\n    }\n"])),$g),tm=St.Z.svg(Wg||(Wg=(0,r.Z)(["\n    border: 1px solid ",";\n    /* need !important here to overcome something from semantic UI */\n    overflow: visible !important;\n    position: relative;\n    transform-origin: 0 0;\n    width: 100%;\n"])),(function(e){return e.theme.buttonBorder})),rm=St.Z.div(Ug||(Ug=(0,r.Z)(["\n    bottom: 0;\n    cursor: col-resize;\n    left: 0;\n    position: fixed;\n    right: 0;\n    top: 0;\n    user-select: none;\n"]))),im=St.Z.rect(Jg||(Jg=(0,r.Z)(["\n    fill: rgba(214, 214, 214, 0.5);\n"]))),am=St.Z.line(Gg||(Gg=(0,r.Z)(["\n    stroke: #f44;\n    stroke-width: 1;\n"]))),om=St.Z.rect(Kg||(Kg=(0,r.Z)(["\n    fill: #44f;\n"]))),lm=St.Z.rect(Yg||(Yg=(0,r.Z)(["\n    fill-opacity: 0.2;\n    fill: #44f;\n"]))),sm={SHIFT_END:"SHIFT_END",SHIFT_START:"SHIFT_START",REFRAME:"REFRAME"};var um=function(e){(0,Ba.Z)(t,e);var n=(0,Ha.Z)(t);function t(e){var r;return(0,za.Z)(this,t),(r=n.call(this,e)).state=void 0,r._root=void 0,r._draggerReframe=void 0,r._draggerStart=void 0,r._draggerEnd=void 0,r._setRoot=function(e){r._root=e},r._getDraggingBounds=function(e){if(!r._root)throw new Error("invalid state");var n=r._root.getBoundingClientRect(),t=n.left,i=n.width,a=(0,u.Z)(r.props.viewRange.time.current,2),o=a[0],l=a[1],s=1,c=0;return e===sm.SHIFT_START?s=l:e===sm.SHIFT_END&&(c=o),{clientXLeft:t,maxValue:s,minValue:c,width:i}},r._handleReframeMouseMove=function(e){var n=e.value;r.props.updateNextViewRangeTime({cursor:n})},r._handleReframeMouseLeave=function(){r.props.updateNextViewRangeTime({cursor:null})},r._handleReframeDragUpdate=function(e){var n=e.value,t=r.props.viewRange.time,i={reframe:{anchor:t.reframe?t.reframe.anchor:n,shift:n}};r.props.updateNextViewRangeTime(i)},r._handleReframeDragEnd=function(e){var n=e.manager,t=e.value,i=r.props.viewRange.time,a=i.reframe?i.reframe.anchor:t,o=t<a?[t,a]:[a,t],l=(0,u.Z)(o,2),s=l[0],c=l[1];n.resetBounds(),r.props.updateViewRangeTime(s,c,"minimap")},r._handleScrubberEnterLeave=function(e){var n=e.type===Gu.MouseEnter;r.setState({preventCursorLine:n})},r._handleScrubberDragUpdate=function(e){var n=e.event,t=e.tag,i=e.type,a=e.value;i===Gu.DragStart&&n.stopPropagation(),t===sm.SHIFT_START?r.props.updateNextViewRangeTime({shiftStart:a}):t===sm.SHIFT_END&&r.props.updateNextViewRangeTime({shiftEnd:a})},r._handleScrubberDragEnd=function(e){var n,t=e.manager,i=e.tag,a=e.value,o=(0,u.Z)(r.props.viewRange.time.current,2),l=o[0],s=o[1];if(i===sm.SHIFT_START)n=[a,s];else{if(i!==sm.SHIFT_END)throw new Error("bad state");n=[l,a]}t.resetBounds(),r.setState({preventCursorLine:!1}),r.props.updateViewRangeTime(n[0],n[1],"minimap")},r._resetTimeZoomClickHandler=function(){r.props.updateViewRangeTime(0,1)},r._draggerReframe=new Xu({getBounds:r._getDraggingBounds,onDragEnd:r._handleReframeDragEnd,onDragMove:r._handleReframeDragUpdate,onDragStart:r._handleReframeDragUpdate,onMouseMove:r._handleReframeMouseMove,onMouseLeave:r._handleReframeMouseLeave,tag:sm.REFRAME}),r._draggerStart=new Xu({getBounds:r._getDraggingBounds,onDragEnd:r._handleScrubberDragEnd,onDragMove:r._handleScrubberDragUpdate,onDragStart:r._handleScrubberDragUpdate,onMouseEnter:r._handleScrubberEnterLeave,onMouseLeave:r._handleScrubberEnterLeave,tag:sm.SHIFT_START}),r._draggerEnd=new Xu({getBounds:r._getDraggingBounds,onDragEnd:r._handleScrubberDragEnd,onDragMove:r._handleScrubberDragUpdate,onDragStart:r._handleScrubberDragUpdate,onMouseEnter:r._handleScrubberEnterLeave,onMouseLeave:r._handleScrubberEnterLeave,tag:sm.SHIFT_END}),r._root=void 0,r.state={preventCursorLine:!1},r}return(0,Fa.Z)(t,[{key:"componentWillUnmount",value:function(){this._draggerReframe.dispose(),this._draggerEnd.dispose(),this._draggerStart.dispose()}},{key:"_getMarkers",value:function(e,n){var t=function(e,n){var t=e<n?[e,n]:[n,e],r=(0,u.Z)(t,2),i=r[0],a=r[1];return{x:"".concat(100*i,"%"),width:"".concat(100*(a-i),"%"),leadingX:"".concat(100*n,"%")}}(e,n);return[(0,Xg.tZ)(lm,{x:t.x,y:"0",width:t.width,height:this.props.height-2},"fill"),(0,Xg.tZ)(om,{x:t.leadingX,y:"0",width:"1",height:this.props.height-2},"edge")]}},{key:"render",value:function(){var e=this.props,n=e.height,t=e.viewRange,r=e.numTicks,i=this.state.preventCursorLine,a=t.time,o=a.current,l=a.cursor,s=a.shiftStart,c=a.shiftEnd,d=a.reframe,f=null!=s||null!=c||null!=d,p=(0,u.Z)(o,2),v=p[0],h=p[1],g=0;v&&(g=100*v);var m,x=100;return h&&(x=100-100*h),f||null==l||i||(m="".concat(100*l,"%")),(0,Xg.BX)(nm,{"aria-hidden":!0,style:{height:n},children:[(0!==v||1!==h)&&(0,Xg.tZ)(Yp.Z,{onClick:this._resetTimeZoomClickHandler,css:em,className:$g,type:"button",variant:"contained",children:"Reset Selection"}),(0,Xg.BX)(tm,{theme:this.props.theme,height:n,ref:this._setRoot,onMouseDown:this._draggerReframe.handleMouseDown,onMouseLeave:this._draggerReframe.handleMouseLeave,onMouseMove:this._draggerReframe.handleMouseMove,children:[g>0&&(0,Xg.tZ)(im,{x:0,y:0,height:"100%",width:"".concat(g,"%")}),x>0&&(0,Xg.tZ)(im,{x:"".concat(100-x,"%"),y:0,height:"100%",width:"".concat(x,"%")}),(0,Xg.tZ)(Vg,{numTicks:r}),m&&(0,Xg.tZ)(am,{x1:m,y1:"0",x2:m,y2:n-2,strokeWidth:"1"}),null!=s&&this._getMarkers(v,s),null!=c&&this._getMarkers(h,c),(0,Xg.tZ)(qg,{isDragging:null!=s,onMouseDown:this._draggerStart.handleMouseDown,onMouseEnter:this._draggerStart.handleMouseEnter,onMouseLeave:this._draggerStart.handleMouseLeave,position:v||0}),(0,Xg.tZ)(qg,{isDragging:null!=c,position:h||1,onMouseDown:this._draggerEnd.handleMouseDown,onMouseEnter:this._draggerEnd.handleMouseEnter,onMouseLeave:this._draggerEnd.handleMouseLeave}),null!=d&&this._getMarkers(d.anchor,d.shift)]}),f&&(0,Xg.tZ)(rm,{})]})}}]),t}(f.PureComponent);function cm(e){return{valueOffset:e.relativeStartTime,valueWidth:e.duration,serviceName:e.process.serviceName}}var dm=(0,Pa.Z)((function(e){return e.spans.map(cm)})),fm=function(e){(0,Ba.Z)(t,e);var n=(0,Ha.Z)(t);function t(){return(0,za.Z)(this,t),n.apply(this,arguments)}return(0,Fa.Z)(t,[{key:"render",value:function(){var e=this.props,n=e.height,t=e.trace,r=e.viewRange,i=e.updateNextViewRangeTime,a=e.updateViewRangeTime;if(!t)return(0,ze.jsx)("div",{});var o=dm(t);return(0,ze.jsxs)("div",{className:Ls()(qs,Ps),children:[(0,ze.jsx)(_g,{theme:this.props.theme,numTicks:4,duration:t.duration}),(0,ze.jsxs)("div",{className:Vs,children:[(0,ze.jsx)(kg,(0,l.Z)((0,l.Z)({},this.props),{},{valueWidth:t.duration,items:o})),(0,ze.jsx)(um,{theme:this.props.theme,viewRange:r,numTicks:4,height:n||60,updateViewRangeTime:a,updateNextViewRangeTime:i})]})]})}}]),t}(f.PureComponent);fm.defaultProps={height:60};var pm,vm,hm,gm,mm,xm,bm,ym,Zm,wm,Sm=["renderer"],jm=St.Z.header(pm||(pm=(0,r.Z)(["\n    & > :first-of-type {\n        border-bottom: 1px solid ",";\n    }\n    & > :nth-of-type(2) {\n        background-color: ",";\n        border-bottom: 1px solid ",";\n    }\n    & > :last-child {\n        border-bottom: 1px solid ",";\n    }\n"])),(function(e){var n=e.theme;return null===n||void 0===n?void 0:n.buttonBorder}),(function(e){var n;return null===e||void 0===e||null===(n=e.theme)||void 0===n?void 0:n.widgetContainer}),(function(e){var n;return null===e||void 0===e||null===(n=e.theme)||void 0===n?void 0:n.buttonBorder}),(function(e){var n;return null===e||void 0===e||null===(n=e.theme)||void 0===n?void 0:n.widgetContainer})),km=St.Z.div(vm||(vm=(0,r.Z)(["\n    align-items: center;\n    display: flex;\n"]))),Cm=(0,Ve.iv)(hm||(hm=(0,r.Z)(["\n    align-items: center;\n    align-self: stretch;\n    background: inherit;\n    background-color: #fafafa;\n    border-bottom: 1px solid #ddd;\n    border-right: 1px solid #ddd;\n    color: inherit;\n    display: flex;\n    font-size: 1.4rem;\n    padding: 0 1rem;\n    margin-bottom: -1px;\n    &:hover {\n        background-color: #f0f0f0;\n        border-color: #ccc;\n    }\n"]))),Tm=(0,Ve.iv)(gm||(gm=(0,r.Z)(["\n    align-items: center;\n    display: flex;\n    flex: 1;\n\n    &:hover * {\n        text-decoration: underline;\n    }\n    &:hover > *,\n    &:hover small {\n        text-decoration: none;\n    }\n    /* Adapt styles when changing from a element into button */\n    background: transparent;\n    text-align: left;\n    border: none;\n"]))),_m=(0,Ve.iv)(mm||(mm=(0,r.Z)(["\n    font-size: 2.5rem;\n    transition: transform 0.07s ease-out;\n"]))),Im=(0,Ve.iv)(xm||(xm=(0,r.Z)(["\n    transform: rotate(90deg);\n"]))),Dm=function(e){return(0,Ve.iv)(bm||(bm=(0,r.Z)(["\n    color: ",";\n    flex: 1;\n    font-size: 14px;\n    font-weight: bold;\n    line-height: 1em;\n    margin: 0 0 0 0.5em;\n    padding:10px 0px;\n"])),e)},Nm=(0,Ve.iv)(ym||(ym=(0,r.Z)(["\n    margin-left: 0;\n"]))),Mm=(0,Ve.iv)(Zm||(Zm=(0,r.Z)(["\n    border-bottom: 1px solid #e4e4e4;\n    padding: 0.25rem 0.5rem !important;\n"]))),Em=St.Z.small(wm||(wm=(0,r.Z)(["\n    white-space: nowrap;\n    font-size: 80%;\n"]))),Rm=[{key:"timestamp",label:"Trace Start:",renderer:function(e){return d()((null===e||void 0===e?void 0:e.startTime)/1e3).format("YYYY-MM-DDTHH:mm:ss.SSSZ")}},{key:"duration",label:"Duration:",renderer:function(e){return lu(e.duration)}},{key:"service-count",label:"Services:",renderer:function(e){return new Set((0,Ie.values)(e.services).map((function(e){return e.name}))).size}},{key:"depth",label:"Depth:",renderer:function(e){return(0,Ie.get)((0,Ie.maxBy)(e.spans,"depth"),"depth",0)+1}},{key:"span-count",label:"Total Spans:",renderer:function(e){var n;return null===e||void 0===e||null===(n=e.spans)||void 0===n?void 0:n.length}}];function Om(e){var n,t,r=e.canCollapse,i=e.hideMap,a=e.hideSummary,o=e.onSlimViewClicked,s=e.slimView,u=e.trace,c=e.updateNextViewRangeTime,d=e.updateViewRangeTime,p=e.viewRange,v=(0,I.u)(),h=f.useMemo((function(){return u?fg(u):[]}),[u]);if(!u)return null;var g=!a&&!s&&Rm.map((function(e){var n=e.renderer,t=(0,Lo.Z)(e,Sm);return(0,l.Z)((0,l.Z)({},t),{},{value:n(u)})})),m=(0,ze.jsxs)("h1",{style:{color:null===e||void 0===e||null===(n=e.theme)||void 0===n?void 0:n.textColor},className:Ls()(Dm(null===e||void 0===e||null===(t=e.theme)||void 0===t?void 0:t.textColor),r&&Nm),children:[(0,ze.jsx)(Jh,{traceName:vg(u.spans)})," ",(0,ze.jsx)(Em,{className:Ks,children:u.traceID})]});return(0,ze.jsxs)(jm,{theme:e.theme,children:[(0,ze.jsxs)(km,{children:[h&&h.length>0&&(0,ze.jsx)(Ph,{links:h,className:Cm}),r?(0,ze.jsxs)("button",{type:"button",className:Tm,onClick:o,role:"switch","aria-checked":!s,children:[(0,ze.jsx)(gt.Z,{className:Ls()(_m,!s&&Im)}),m]}):m]}),g&&(0,ze.jsx)(Pp,{theme:e.theme,className:Mm,items:g}),!i&&!s&&(0,ze.jsx)(fm,(0,l.Z)((0,l.Z)({},e),{},{theme:v,trace:u,viewRange:p,updateNextViewRangeTime:c,updateViewRangeTime:d}))]})}var Lm=function(){function e(n){(0,za.Z)(this,e),this.isTagsOpen=void 0,this.isEventsOpen=void 0,this.isProcessOpen=void 0,this.logs=void 0,this.events=void 0,this.references=void 0,this.isWarningsOpen=void 0,this.isStackTracesOpen=void 0,this.isReferencesOpen=void 0;var t=n||{},r=t.isTagsOpen,i=t.isEventsOpen,a=t.isProcessOpen,o=t.isReferencesOpen,l=t.isWarningsOpen,s=t.isStackTracesOpen,u=t.logs,c=t.references,d=t.events;this.isTagsOpen=Boolean(r),this.isEventsOpen=Boolean(i),this.isProcessOpen=Boolean(a),this.isReferencesOpen=Boolean(o),this.isWarningsOpen=Boolean(l),this.isStackTracesOpen=Boolean(s),this.logs={isOpen:Boolean(u&&u.isOpen),openedItems:u&&u.openedItems?new Set(u.openedItems):new Set},this.events={isOpen:Boolean(d&&d.isOpen),openedItems:d&&d.openedItems?new Set(d.openedItems):new Set},this.references={isOpen:Boolean(c&&c.isOpen),openedItems:c&&c.openedItems?new Set(c.openedItems):new Set}}return(0,Fa.Z)(e,[{key:"toggleTags",value:function(){var n=new e(this);return n.isTagsOpen=!this.isTagsOpen,n}},{key:"toggleEvents",value:function(){var n=new e(this);return n.isEventsOpen=!this.isEventsOpen,n}},{key:"toggleEventItem",value:function(n){var t=new e(this);return t.events.openedItems.has(n)?t.events.openedItems.delete(n):t.events.openedItems.add(n),t}},{key:"toggleProcess",value:function(){var n=new e(this);return n.isProcessOpen=!this.isProcessOpen,n}},{key:"toggleReferences",value:function(){var n=new e(this);return n.references.isOpen=!this.references.isOpen,n}},{key:"toggleReferenceItem",value:function(n){var t=new e(this);return t.references.openedItems.has(n)?t.references.openedItems.delete(n):t.references.openedItems.add(n),t}},{key:"toggleWarnings",value:function(){var n=new e(this);return n.isWarningsOpen=!this.isWarningsOpen,n}},{key:"toggleStackTraces",value:function(){var n=new e(this);return n.isStackTracesOpen=!this.isStackTracesOpen,n}},{key:"toggleLogs",value:function(){var n=new e(this);return n.logs.isOpen=!this.logs.isOpen,n}},{key:"toggleLogItem",value:function(n){var t=new e(this);return t.logs.openedItems.has(n)?t.logs.openedItems.delete(n):t.logs.openedItems.add(n),t}}]),e}(),Vm=t(35323),zm=function(){function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];(0,za.Z)(this,e),this.value=void 0,this.children=void 0,this.value=n,this.children=t}return(0,Fa.Z)(e,[{key:"depth",get:function(){return this.children.reduce((function(e,n){return Math.max(n.depth+1,e)}),1)}},{key:"size",get:function(){var e=0;return this.walk((function(){return e++})),e}},{key:"addChild",value:function(n){return this.children.push(n instanceof e?n:new e(n)),this}},{key:"find",value:function(n){if(e.iterFunction(e.searchFunction(n))(this))return this;for(var t=0;t<this.children.length;t++){var r=this.children[t].find(n);if(r)return r}return null}},{key:"getPath",value:function(n){var t=e.iterFunction(e.searchFunction(n));return function e(n,r){var i=r.concat([n]);if(t(n))return i;for(var a=0;a<n.children.length;a++){var o=e(n.children[a],i);if(o)return o}return null}(this,[])}},{key:"walk",value:function(e){var n=[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;for(n.push({node:this,depth:t});n.length;){var r=n.pop(),i=r.node,a=r.depth;e(i.value,i,a),t=a+1;for(var o=i.children.length-1;o>=0;)n.push({node:i.children[o],depth:t}),o--}}}],[{key:"iterFunction",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return function(t){return e(t.value,t,n)}}},{key:"searchFunction",value:function(n){return"function"===typeof n?n:function(t,r){return n instanceof e?r===n:t===n}}}]),e}();var Fm=function(e){return e.serviceName},Bm=t(31507),Hm=t.n(Bm),Pm=function(e){return e.spanID},qm=function(e){return e.operationName},Am=function(e){return e.duration},Qm=function(e){return e.startTime},Wm=function(e){return e.processID},Um=(0,Vm.P1)((0,Vm.P1)((function(e){return e.span}),(function(e){return e.references||[]})),(function(e){return e.type}),(function(e,n){return e.find((function(e){return e.refType===n}))})),Jm=((0,Vm.P1)((function(e){return Um({span:e,type:"CHILD_OF"})}),(function(e){return e?e.spanID:null})),(0,Vm.P1)((function(e){if(!e.process)throw new Error("\n      you must hydrate the spans with the processes, perhaps\n      using hydrateSpansWithProcesses(), before accessing a span's process\n    ");return e.process}),Fm)),Gm=((0,Vm.P1)((function(e){return e.spans}),(function(e){return e.leftBound}),(function(e){return e.rightBound}),(function(e,n,t){return e.filter((function(e){return Qm(e)>=n&&Qm(e)<=t}))})),(0,Vm.P1)((function(e){return e.spans}),(function(e){return e.text}),(function(e,n){return Hm().filter(n,e,{extract:function(e){return"".concat(Jm(e)," ").concat(qm(e))}}).map((function(e){return e.original}))}))),Km=(0,Vm.P1)(Gm,(function(e){return e.reduce((function(e,n){return(0,l.Z)((0,l.Z)({},e),{},(0,B.Z)({},Pm(n),n))}),{})})),Ym=((0,Vm.P1)((function(e){return e.spans}),Km,(function(e,n){return e.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{muted:!n[Pm(e)]})}))})),function(e){return e.spans}),Xm=function(e){return e.processes},$m=(0,Vm.P1)((function(e){return e.span}),(function(e){return e.processes}),(function(e,n){return(0,l.Z)((0,l.Z)({},e),{},{process:n[Wm(e)]})})),ex=(0,Vm.P1)(Ym,(function(e){return e.reduce((function(e,n){return e.set(Pm(n),n)}),new Map)})),nx="__root__";function tx(e){var n=new Map(e.spans.map((function(e){return[e.spanID,new zm(e.spanID)]}))),t=new Map(e.spans.map((function(e){return[e.spanID,e]}))),r=new zm(nx);e.spans.forEach((function(e){var t=n.get(e.spanID);if(Array.isArray(e.references)&&e.references.length){var i=e.references[0],a=i.refType,o=i.spanID;if("CHILD_OF"!==a&&"FOLLOWS_FROM"!==a)throw new Error("Unrecognized ref type: ".concat(a));(n.get(o)||r).children.push(t)}else r.children.push(t)}));var i=function(e,n){var r=t.get(e.value),i=t.get(n.value);return+(r.startTime>i.startTime)||+(r.startTime===i.startTime)-1};return e.spans.forEach((function(e){var t=n.get(e.spanID);t.children.length>1&&t.children.sort(i)})),r.children.sort(i),r}(0,Vm.P1)(Ym,(function(e){return e.length}));var rx=(0,Vm.P1)(Ym,(function(e){return e.reduce((function(e,n){return e?Math.min(e,Qm(n)):Qm(n)}),null)})),ix=(0,Vm.P1)(Ym,rx,(function(e,n){return e.reduce((function(e,t){return e?Math.max(Qm(t)-n+Am(t),e):Am(t)}),null)})),ax=((0,Vm.P1)(rx,ix,(function(e,n){return e+n})),(0,Vm.P1)(tx,ex,(function(e,n){return e.children.map((function(e){return n.get(e.value)})).sort((function(e,n){return t=Qm(e),r=Qm(n),t-r;var t,r}))[0]}))),ox=((0,Vm.P1)(tx,(function(e){return e.depth-1})),(0,Vm.P1)((0,Vm.P1)((function(e){return e.trace}),tx),(0,Vm.P1)((function(e){return e.span}),Pm),(function(e,n){return e.getPath(n).length-1})),(0,Vm.P1)(Xm,(function(e){return Object.keys(e).reduce((function(n,t){return n.add(Fm(e[t]))}),new Set)}))),lx=((0,Vm.P1)(ox,(function(e){return e.size})),{ms:function(e){var n=ou(e,iu,$s);return"".concat(Xs().duration(n/$s).asMilliseconds(),"ms")},s:function(e){var n=ou(e,iu,eu);return"".concat(Xs().duration(n/$s).asSeconds(),"s")}}),sx=(0,Vm.P1)(ix,(function(e){return e>=eu?lx.s:lx.ms})),ux=((0,Vm.P1)((function(e){return e.duration}),(function(e){var n=e.unit;return lx[n]}),(function(e,n){return n(e)})),(0,Vm.P1)((function(e){return e.duration}),(0,Vm.P1)((function(e){return e.trace}),sx),(function(e,n){return n(e)})),(0,Vm.P1)((function(e){return e.trace}),(function(e){return e.spans}),(function(e){return e.sort}),(function(e,n,t){var r=t.dir,i=t.comparator,a=t.selector;return(0,H.Z)(n).sort((function(n,t){return r*i(a(n,e),a(t,e))}))})),(0,Vm.P1)(tx,(function(e){var n=new Map,t=0;return e.walk((function(e){return n.set(e,t++)})),n})));(0,Vm.P1)((0,Vm.P1)((function(e){return e.trace}),tx),(0,Vm.P1)((function(e){return e.span}),Pm),(function(e,n){var t=e.find(n);return t?t.size-1:-1})),(0,Vm.P1)((0,Vm.P1)((function(e){return e.trace}),ux),(function(e){return e.span}),(function(e,n){return e.get(Pm(n))})),(0,Vm.P1)((0,Vm.P1)((0,Vm.P1)((function(e){var n=Ym(e),t=Xm(e);return(0,l.Z)((0,l.Z)({},e),{},{spans:n.map((function(e){return $m({span:e,processes:t})}))})}),ax),(0,Vm.zB)({name:qm,serviceName:Jm})),(function(e){var n=e.name,t=e.serviceName;return"".concat(t,": ").concat(n)})),(0,Vm.P1)((function(e){return e.spans}),(0,Vm.P1)((function(e){return e.trace}),tx),(function(e){return e.collapsed}),(function(e,n,t){var r=t.reduce((function(e,t){return n.find(t).walk((function(n){return n!==t&&e.add(n)})),e}),new Set);return r.size>0?e.filter((function(e){return!r.has(Pm(e))})):e})),(0,Vm.P1)((function(e){return e.trace}),(function(e){var n=e.interval;return void 0===n?4:n}),(function(e){var n=e.width;return void 0===n?3:n}),(function(e,n,t){return(0,H.Z)((n+1).keys()).map((function(r){return{timestamp:rx(e)+ix(e)*(r/n),width:t}}))})),(0,Vm.P1)((function(e){return e}),Ym,(function(e,n){var t=new Map;return(0,l.Z)((0,l.Z)({},e),{},{spans:n.reduce((function(e,n){var r=t.has(Pm(n))?"".concat(Pm(n),"_").concat(t.get(Pm(n))):Pm(n),i=(0,l.Z)((0,l.Z)({},n),{},{spanID:r});return r!==Pm(n)&&console.warn("duplicate spanID in trace replaced",Pm(n),"new:",r),t.set(Pm(n),(t.get(Pm(n))||0)+1),e.concat([i])}),[])})})),(0,Vm.P1)((function(e){return e}),Ym,(function(e,n){return(0,l.Z)((0,l.Z)({},e),{},{spans:n.filter((function(e){return!!Qm(e)}))})}));function cx(e,n,t){return function(r){var i=n.get(r);if(i){var a;a="tags"===e?i.toggleTags():"process"===e?i.toggleProcess():"events"===e?i.toggleEvents():"warnings"===e?i.toggleWarnings():"references"===e?i.toggleReferences():"stackTraces"===e?i.toggleStackTraces():i.toggleLogs();var o=new Map(n);o.set(r,a),t(o)}}}function dx(e,n){return e.filter((function(e){return e.hasChildren})).length===n.size}var fx;function px(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.forEach((function(t){var r;t.depth=n,(null===(r=t.children)||void 0===r?void 0:r.length)>0&&(n+=1,t.children.forEach((function(r){t.spanID===r&&px(e,n)})))}))}function vx(e){var n,t=function(e){var n;return(null===(n=e.resourceSpans)||void 0===n?void 0:n.map((function(e){var n=e.resource;return e.instrumentationLibrarySpans.map((function(e){return e.spans.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{resource:n})}))}))}))).flat(2)}(e);return null===e||void 0===e||null===(n=e.resourceSpans)||void 0===n?void 0:n.map((function(e){var n,r,i,a,o,s=e.instrumentationLibrarySpans,u=t.find((function(e){return-1===Object.keys(e).indexOf("parentSpanId")})),c=(0,H.Z)(t),d=null===c||void 0===c?void 0:c.sort((function(e,n){return parseInt(e.startTimeUnixNano)-parseInt(n.startTimeUnixNano)})),f=(null===(n=d[0])||void 0===n?void 0:n.startTimeUnixNano)/1e3,p=(null===(r=d.map((function(e){return e.endTimeUnixNano})))||void 0===r||null===(i=r.sort())||void 0===i?void 0:i.reverse())[0]/1e3,v=null===t||void 0===t?void 0:t.map((function(e,n){var t,r,i,a=null===(t=e.attributes)||void 0===t?void 0:t.map((function(e){var n;return{key:null===e||void 0===e?void 0:e.key,value:null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.stringValue}})),o=null===e||void 0===e||null===(r=e.resource)||void 0===r||null===(i=r.attributes)||void 0===i?void 0:i.map((function(e){var n;return{key:null===e||void 0===e?void 0:e.key,value:null===e||void 0===e||null===(n=e.value)||void 0===n?void 0:n.stringValue}})),l=Math.round((null===e||void 0===e?void 0:e.endTimeUnixNano)/1e3)-Math.round((null===e||void 0===e?void 0:e.startTimeUnixNano)/1e3),s=(null===e||void 0===e?void 0:e.startTimeUnixNano)/1e3,u={serviceName:null===e||void 0===e?void 0:e.serviceName,tags:o};return{traceID:(null===e||void 0===e?void 0:e.traceID)||(null===e||void 0===e?void 0:e.traceId),spanID:(null===e||void 0===e?void 0:e.spanID)||e.spanId,parentSpanID:(null===e||void 0===e?void 0:e.parentSpanID)||(null===e||void 0===e?void 0:e.parentSpanId)||"",operationName:null===e||void 0===e?void 0:e.name,serviceName:null===e||void 0===e?void 0:e.serviceName,serviceTags:o,startTime:s,duration:l,relativeStartTime:0,events:(null===e||void 0===e?void 0:e.events)||[],logs:[],references:[],tags:a,processID:null===e||void 0===e?void 0:e.spanID,flags:0,dataFrameRowIndex:n,process:u,children:[]}}));if((null===(a=v)||void 0===a?void 0:a.length)>0)try{v.forEach((function(e){var n,t=null===(n=v)||void 0===n?void 0:n.some((function(n){return(null===n||void 0===n?void 0:n.spanID)===(null===e||void 0===e?void 0:e.parentSpanID)}));if(""!==(null===e||void 0===e?void 0:e.parentSpanID)&&t){var r,i,a,o,s=null===(r=v)||void 0===r?void 0:r.find((function(n){return n.spanID===e.parentSpanID}));s&&(v=null===(i=v)||void 0===i||null===(a=i.map((function(n){return n.spanID===s.spanID?(0,l.Z)((0,l.Z)({},n),{},{children:[].concat((0,H.Z)(n.children),[e.spanID])}):n})))||void 0===a?void 0:a.map((function(e){var n;return(null===e||void 0===e||null===(n=e.children)||void 0===n?void 0:n.length)>0?(0,l.Z)((0,l.Z)({},e),{},{hasChildren:!0,childSpanCount:e.children.length,relativeStartTime:e.startTime-v[0].startTime}):(0,l.Z)((0,l.Z)({},e),{},{relativeStartTime:e.startTime-v[0].startTime})}))),null===e||void 0===e||null===(o=e.references)||void 0===o||o.push({refType:"CHILD_OF",spanID:s.spanID,traceID:s.traceID,span:(0,l.Z)({},s)})}}))}catch(y){console.log(y)}px(v);var h={services:[],spans:[],traceID:"",traceName:"",processes:{},duration:0,startTime:0,endTime:0},g=null===(o=v)||void 0===o?void 0:o[0];if(s&&p&&f){var m=g.serviceName,x=g.name,b=g.traceID;h={services:v.map((function(e){return{name:e.serviceName,numberOfSpans:v.length}})),spans:v,traceID:u?null===u||void 0===u?void 0:u.traceID:b,traceName:u?"".concat(null===u||void 0===u?void 0:u.serviceName,": ").concat(null===u||void 0===u?void 0:u.name):"".concat(m,": ").concat(x),processes:{},duration:p-f,startTime:f,endTime:p}}return h}))}var hx,gx,mx,xx,bx,yx,Zx,wx=St.Z.div(fx||(fx=(0,r.Z)(["\n    margin: 4px;\n    padding: 5px;\n    margin-top:0px;\n    border: 1px solid ",";\n    border-radius: 3px;\n    display:flex;\n    flex-direction:column;\n    flex:",";\n \n    height: ",";\n    .view-content {\n        margin:3px;\n        height: ",";\n        display: ",";\n        flex-direction: ",";\n        flex:1;\n    }\n"])),(function(e){var n;return null===(n=e.theme)||void 0===n?void 0:n.buttonBorder}),(function(e){return"min"===e.size?0:1}),(function(e){var n,t;return"regular"===e.size?null===e||void 0===e||null===(n=e.vheight)||void 0===n?void 0:n.regularCont:"max"===(null===e||void 0===e?void 0:e.size)?null===e||void 0===e||null===(t=e.vheight)||void 0===t?void 0:t.maxCont:"20px"}),(function(e){var n,t;return"regular"===e.size?null===e||void 0===e||null===(n=e.vheight)||void 0===n?void 0:n.regularView:"max"===(null===e||void 0===e?void 0:e.size)?null===e||void 0===e||null===(t=e.vheight)||void 0===t?void 0:t.maxView:"0px"}),(function(e){return"min"===e.size?"none":(null===e||void 0===e||e.size,"flex")}),(function(e){return null===e||void 0===e||e.size,"column"}));function Sx(){return{}}function jx(e){var n=e.viewRef,t=e.panelSize,r=e.viewHeight,i=e.setStreamClose,a=e.setMaxHeight,o=e.setMinimize,s=e.actualQuery,c=e.total,d=e.type,p=e.dataView.data,v=(0,f.useMemo)((function(){return vx(p)[0]}),[p]),h=(0,vi.F)(),g=(0,f.useMemo)((function(){var e,n;if((null===v||void 0===v||null===(e=v.spans)||void 0===e?void 0:e.length)>0){var t=(n=v.spans,[{name:"traceID",type:"string",typeInfo:{frame:"string"}},{name:"spanID",type:"string",typeInfo:{frame:"string"}},{name:"parentSpanID",type:"string",typeInfo:{frame:"string"}},{name:"operationName",type:"string",typeInfo:{frame:"string"}},{name:"serviceName",type:"string",typeInfo:{frame:"string"}},{name:"serviceTags",type:"other",typeInfo:{frame:"json.RawMessage"}},{name:"startTime",type:"number",typeInfo:{frame:"float64"}},{name:"duration",type:"number",typeInfo:{frame:"float64"}},{name:"logs",type:"other",typeInfo:{frame:"json.RawMessage"}},{name:"references",type:"other",typeInfo:{frame:"json.RawMessage"}},{name:"tags",type:"other",typeInfo:{frame:"json.RawMessage"}}].map((function(e){var t=e.name,r=e.type,i=e.typeInfo;return{name:t,type:r,typeInfo:i,config:{},values:null===n||void 0===n?void 0:n.map((function(e){return e[t]})),entities:{},state:null}})));return{name:"Trace",refId:(null===s||void 0===s?void 0:s.idRef)||"Traces",fields:t,length:null===t||void 0===t?void 0:t.length}}return null}),[v,s]),m={traceProp:(0,l.Z)({},v)}.traceProp,x=function(){var e=(0,f.useState)(new Set),n=(0,u.Z)(e,2),t=n[0],r=n[1];return{hoverIndentGuideIds:t,addHoverIndentGuideId:(0,f.useCallback)((function(e){r((function(n){var t=new Set(n);return t.add(e),t}))}),[]),removeHoverIndentGuideId:(0,f.useCallback)((function(e){r((function(n){var t=new Set(n);return t.delete(e),t}))}),[])}}(),b=x.removeHoverIndentGuideId,y=x.addHoverIndentGuideId,Z=x.hoverIndentGuideIds,w=function(){var e=(0,f.useState)({time:{current:[0,1]}}),n=(0,u.Z)(e,2),t=n[0],r=n[1],i=(0,f.useCallback)((function(e){r((function(n){var t=(0,l.Z)((0,l.Z)({},n.time),e);return(0,l.Z)((0,l.Z)({},n),{},{time:t})}))}),[]);return{viewRange:t,updateViewRangeTime:(0,f.useCallback)((function(e,n){var t={current:[e,n]};r((function(e){return(0,l.Z)((0,l.Z)({},e),{},{time:t})}))}),[]),updateNextViewRangeTime:i}}(),S=w.viewRange,j=w.updateViewRangeTime,k=w.updateNextViewRangeTime,C=function(){var e=(0,f.useState)(new Set),n=(0,u.Z)(e,2),t=n[0],r=n[1],i=(0,f.useCallback)((function(e){if(0!==t.size){var n=-1,i=!0,a=e.reduce((function(e,t){return t.depth<=n&&(i=!0),i&&e.has(t.spanID)&&(e.delete(t.spanID),i=!1,n=t.depth),e}),new Set(t));r(a)}}),[t]),a=(0,f.useCallback)((function(e){if(!dx(e,t)){var n,i=e.reduce((function(e,t){return n&&t.depth<=n.depth?(e.add(n.spanID),t.hasChildren&&(n=t)):t.hasChildren&&!e.has(t.spanID)&&(n=t),e}),new Set(t));n&&i.add(n.spanID),r(i)}}),[t]),o=(0,f.useCallback)((function(){r(new Set)}),[]),l=(0,f.useCallback)((function(e){if(!dx(e,t)){var n=e.reduce((function(e,n){return n.hasChildren&&e.add(n.spanID),e}),new Set);r(n)}}),[t]),s=(0,f.useCallback)((function(e){var n=new Set(t);t.has(e)?n.delete(e):n.add(e),r(n)}),[t]);return{childrenHiddenIDs:t,expandOne:i,collapseOne:a,expandAll:o,collapseAll:l,childrenToggle:s}}(),T=C.expandOne,_=C.collapseOne,D=C.childrenToggle,N=C.collapseAll,M=C.childrenHiddenIDs,E=C.expandAll,R=function(e){var n=(0,f.useState)(new Map),t=(0,u.Z)(n,2),r=t[0],i=t[1],a=(0,f.useCallback)((function(e){var n=new Map(r);n.has(e)?n.delete(e):n.set(e,new Lm),i(n)}),[r]),o=(0,f.useCallback)((function(e,n){var t=r.get(e);if(t){var a=t.toggleEventItem(n),o=new Map(r);return o.set(e,a),i(o)}}),[r]),l=(0,f.useCallback)((function(e,n){var t=r.get(e);if(t){var a=t.toggleLogItem(n),o=new Map(r);return o.set(e,a),i(o)}}),[r]),s=(0,f.useCallback)((function(e,n){var t=r.get(e);if(t){var a=t.toggleReferenceItem(n),o=new Map(r);return o.set(e,a),i(o)}}),[r]);return{detailStates:r,toggleDetail:a,detailLogItemToggle:l,detailLogsToggle:(0,f.useCallback)((function(e){return cx("logs",r,i)(e)}),[r]),detailEventsItemToggle:o,detailEventsToggle:(0,f.useCallback)((function(e){return cx("events",r,i)(e)}),[r]),detailWarningsToggle:(0,f.useCallback)((function(e){return cx("warnings",r,i)(e)}),[r]),detailStackTracesToggle:(0,f.useCallback)((function(e){return cx("stackTraces",r,i)(e)}),[r]),detailReferenceItemToggle:s,detailReferencesToggle:(0,f.useCallback)((function(e){return cx("references",r,i)(e)}),[r]),detailProcessToggle:(0,f.useCallback)((function(e){return cx("process",r,i)(e)}),[r]),detailTagsToggle:(0,f.useCallback)((function(e){return cx("tags",r,i)(e)}),[r])}}(),O=R.detailStates,L=R.toggleDetail,V=R.detailLogItemToggle,z=R.detailLogsToggle,F=R.detailEventsToggle,B=R.detailProcessToggle,H=R.detailReferencesToggle,P=R.detailReferenceItemToggle,q=R.detailTagsToggle,A=R.detailWarningsToggle,Q=R.detailStackTracesToggle,W=(0,f.useState)(!1),U=(0,u.Z)(W,2),J=U[0],G=U[1],K=(0,f.useState)(.25),Y=(0,u.Z)(K,2),X=Y[0],$=Y[1],ee=(0,f.useMemo)((function(){return{childrenHiddenIDs:M,detailStates:O,hoverIndentGuideIds:Z,shouldScrollToFirstUiFindMatch:!1,spanNameColumnWidth:X,traceID:null===m||void 0===m?void 0:m.traceID}}),[M,O,Z,X,null===m||void 0===m?void 0:m.traceID]),ne=(0,f.useCallback)((function(){return G(!J)}),[J]);if(g&&v){var te=(0,l.Z)({ref:n,size:t,vheight:r},e);return(0,ze.jsx)(I.a,{theme:h,children:(0,ze.jsxs)(wx,(0,l.Z)((0,l.Z)({},te),{},{children:[(0,ze.jsx)(ya,(0,l.Z)((0,l.Z)({},e),{},{onClose:i,setMinimize:o,setMaxHeight:a,actualQuery:s,total:c,type:d})),(0,ze.jsxs)("div",{className:"view-content",children:[(0,ze.jsx)(Om,(0,l.Z)((0,l.Z)({},e),{},{canCollapse:!1,hideMap:!1,hideSummary:!1,theme:h,onSlimViewClicked:ne,onTraceGraphViewClicked:Sx,slimView:J,trace:m,updateNextViewRangeTime:k,updateViewRangeTime:j,viewRange:S})),(0,ze.jsx)(zh,(0,l.Z)((0,l.Z)({},e),{},{theme:h,registerAccessors:Sx,scrollToFirstVisibleSpan:Sx,trace:m,traceTimeline:ee,updateNextViewRangeTime:k,updateViewRangeTime:j,viewRange:S,setSpanNameColumnWidth:$,collapseAll:N,collapseOne:_,expandAll:E,expandOne:T,childrenToggle:D,clearShouldScrollToFirstUiFindMatch:Sx,detailLogItemToggle:V,detailLogsToggle:z,detailEventsToggle:F,detailWarningsToggle:A,detailStackTracesToggle:Q,detailReferencesToggle:H,detailReferenceItemToggle:P,detailProcessToggle:B,detailTagsToggle:q,detailToggle:L,setTrace:Sx,addHoverIndentGuideId:y,removeHoverIndentGuideId:b,linksGetter:Sx,uiFind:e.search,scrollElement:e.scrollElement}))]})]}))})}return null}function kx(e){var n,t,r,a,o,s=e.dataView,c=e.name,d=s.type,p=s.total,v=s.loading,h=(0,i.v9)((function(e){return e.isSplit})),g=(0,f.useRef)(null),m=(0,i.v9)((function(e){return e[c]})),x=(0,f.useState)("max"),b=(0,u.Z)(x,2),y=b[0],Z=b[1],w=Gi({panel:m,dataView:s}),S=(0,f.useState)(0),j=(0,u.Z)(S,2),k=j[0],C=j[1];(0,f.useEffect)((function(){var e,n;null!==g&&void 0!==g&&null!==(e=g.current)&&void 0!==e&&e.clientWidth&&C(null===(n=g.current)||void 0===n?void 0:n.clientWidth)}),[null===g||void 0===g||null===(n=g.current)||void 0===n?void 0:n.clientWidth]);var T=(0,f.useState)(s.data),_=(0,u.Z)(T,2),I=_[0],D=_[1],N=(0,f.useState)(s.tableData||{}),M=(0,u.Z)(N,2),E=M[0],R=M[1];(0,f.useEffect)((function(){D(s.data)}),[s.data,D,h]),(0,f.useEffect)((function(){R(s.tableData||{})}),[s.tableData,R]);var O=function(){D([]),R([])},L=function(){Z((function(e){return"min"!==e?"min":"regular"}))},V=function(){Z((function(e){return"max"!==e?"max":"regular"}))},z=Ji({total:p,panelSize:y,dataView:s}),F=Ui({type:d,actualQuery:w,total:p,dataView:s});if("traces"===d){var B=(0,l.Z)({viewRef:g,panelSize:y,viewHeight:F,setStreamClose:O,setMaxHeight:V,setMinimize:L,actualQuery:w,total:p,type:d,theight:z,tableData:E,viewWidth:k,streamData:I,theme:e.theme},e);return(0,ze.jsx)(jx,(0,l.Z)({},B))}if(w&&"matrix"===d&&(null===I||void 0===I?void 0:I.length)>0){var H=w.limit,P=(0,l.Z)({viewRef:g,panelSize:y,viewHeight:F,setStreamClose:O,setMaxHeight:V,setMinimize:L,actualQuery:w,total:p,type:d,theight:z,tableData:E,viewWidth:k,limit:H,streamData:I},e);return(0,ze.jsx)(ds,(0,l.Z)({},P))}if(w&&"stream"===d&&(null===I||void 0===I?void 0:I.length)>0){var q=(0,l.Z)({viewRef:g,panelSize:y,viewHeight:F,viewWidth:k,setStreamClose:O,setMaxHeight:V,logsVolumeData:s.logsVolumeData,setMinimize:L,actualQuery:w,total:p,type:d,theight:z,tableData:E,streamData:I},e);return(0,ze.jsx)(us,(0,l.Z)({},q))}if(w&&"vector"===d&&(null===I||void 0===I||null===(t=I.chartData)||void 0===t?void 0:t.length)>0||w&&"vector"===d&&(null===I||void 0===I||null===(r=I.tableData)||void 0===r||null===(a=r.dataRows)||void 0===a?void 0:a.length)>0){var A=w.limit,Q=(0,l.Z)({viewRef:g,panelSize:y,viewHeight:F,setStreamClose:O,setMinimize:L,setMaxHeight:V,actualQuery:w,total:p,type:d,theight:z,streamData:I,viewWidth:k,limit:A},e);return(0,ze.jsx)(fs,(0,l.Z)({},Q))}if(!w||null!==I&&void 0!==I&&null!==(o=I.dataRows)&&void 0!==o&&o.length||null!==I&&void 0!==I&&I.length)return null;var W=(0,l.Z)({viewRef:g,panelSize:y,setStreamClose:O,setMinimize:L,setMaxHeight:V,actualQuery:w,total:p,loading:v},e);return(0,ze.jsx)(Ma,(0,l.Z)({},W))}function Cx(e){var n=e.name,t=e.open,r=(0,vr.Fg)(),a=(0,f.useState)(n),o=(0,u.Z)(a,1)[0],s=(0,i.v9)((function(e){return e["".concat(o,"DataView")]})),c=(0,i.v9)((function(e){return e[o]})),d=(0,f.useMemo)((function(){return s.sort((function(e,n){return c.findIndex((function(n){return n.id===e.id}))-c.findIndex((function(e){return e.id===n.id}))}))}),[s,c]);return d.length>0?(0,ze.jsx)(I.a,{theme:r,children:(0,ze.jsxs)(ua,{children:[(0,ze.jsx)(Wi.Z,{section:"Data Views",localProps:e}),null===d||void 0===d?void 0:d.map((function(n,r){return(0,ze.jsx)(kx,(0,l.Z)((0,l.Z)({},e),{},{splitted:t,dataView:n}),r)}))]})}):null}var Tx=function(e){return(0,Ve.iv)(hx||(hx=(0,r.Z)(["\n    color: ",";\n    display: flex;\n    flex: 1;\n    flex-direction: column;\n    border: 1px solid ",";\n    margin-top: 5px;\n    border-radius: 5px;\n"])),e.textColor,e.buttonBorder)},_x=function(e){return(0,Ve.iv)(gx||(gx=(0,r.Z)(["\n    font-size: 14px;\n    background: ",";\n    padding: 5px;\n    border-bottom: 1px solid ",";\n"])),e.widgetContainer,e.buttonBorder)},Ix=function(e){return(0,Ve.iv)(mx||(mx=(0,r.Z)(["\n    display: table;\n"])))},Dx=(0,Ve.iv)(xx||(xx=(0,r.Z)(["\n    display: table-row;\n    font-size: 13px;\n"]))),Nx=function(e,n){return(0,Ve.iv)(bx||(bx=(0,r.Z)(["\n    display: table-cell;\n    padding: 5px;\n    border-top: 1px solid ",";\n    ","\n"])),e.buttonBorder,"key"===n?"color:".concat(e.textPrimary,";"):"")},Mx=(0,Ve.iv)(yx||(yx=(0,r.Z)(["\n    font-weight: lighter;\n"]))),Ex=(0,Ve.iv)(Zx||(Zx=(0,r.Z)(["\n    font-family: monospace;\n"])));function Rx(e){var n=e.data,t=n.hasStats,r=n.statsData,i=(0,vi.F)(),a=(0,f.useMemo)((function(){var e;return"object"!==typeof r&&void 0!==r&&(null===(e=Object.keys(r))||void 0===e?void 0:e.length)<1?[["key","val"]]:Object.entries(r)}),[r]);return(null===a||void 0===a?void 0:a.length)>0&&t?(0,ze.jsxs)("div",{className:(0,Ve.cx)(Tx(i)),children:[(0,ze.jsx)("div",{className:(0,Ve.cx)(_x(i)),children:"Stats"}),(0,ze.jsx)("div",{className:(0,Ve.cx)(Ix(i)),children:null===a||void 0===a?void 0:a.map((function(e,n){var t=(0,u.Z)(e,2),r=t[0],a=t[1];return(0,ze.jsxs)("div",{className:(0,Ve.cx)(Dx),children:[(0,ze.jsx)("div",{className:(0,Ve.cx)(Nx(i,"key"),Mx),children:r}),(0,ze.jsx)("div",{className:(0,Ve.cx)(Nx(i,"value"),Ex),children:a||""})]},n)}))})]}):null}var Ox,Lx,Vx,zx,Fx,Bx,Hx,Px,qx,Ax,Qx,Wx,Ux,Jx,Gx,Kx,Yx=t(81097),Xx=Et.z,$x=(0,St.Z)(_t.Z)(Ox||(Ox=(0,r.Z)(["\n    height: 18px;\n    color: ",";\n    width: 18px;\n"])),(function(e){return e.color})),eb=(0,St.Z)(Xx)(Lx||(Lx=(0,r.Z)(["\n    background: none;\n    margin-left: 5px;\n    color: ",";\n    background: ",";\n    border: 1px solid ",";\n    height: 28px;\n    span {\n        margin-left: 5px;\n    }\n    @media screen and (max-width: 1070px) {\n        display: flex;\n        gap: 2px;\n    }\n"])),(function(e){return e.theme.textColor}),(function(e){return e.theme.buttonDefault}),(function(e){return e.theme.buttonBorder})),nb=(0,St.Z)(Xx)(Vx||(Vx=(0,r.Z)(["\n    background: ",";\n    border: 1px solid ",";\n    text-overflow: ellipsis;\n    transition: 0.25s all;\n    padding-left: 6px;\n    justify-content: flex-start;\n    color: ",";\n    height: 28px;\n    &:hover {\n        background: ",";\n    }\n    @media screen and (max-width: 1070px) {\n        display: ",";\n        margin: 0;\n        gap: 2px;\n    }\n"])),(function(e){return e.theme.buttonDefault}),(function(e){return e.theme.buttonBorder}),(function(e){return e.theme.textColor}),(function(e){return e.theme.buttonHover}),(function(e){return e.isMobile?"flex":"none"})),tb=St.Z.div(zx||(zx=(0,r.Z)(["\n    display: flex;\n    margin-left: 0px;\n    flex-wrap: wrap;\n    border-radius: 3px;\n    gap: 2px;\n"]))),rb=(0,St.Z)(Xx,{shouldForwardProp:function(e){return(0,Yx.Z)(e)&&"loading"!==e}})(Fx||(Fx=(0,r.Z)(["\n    background: ",";\n    border: 1px solid ",";\n    color: ",";\n    transition: 0.25s all;\n    justify-content: center;\n    height: 28px;\n    margin: 0px 4px;\n    &:hover {\n        background: ",";\n    }\n    &:disabled {\n        background: ",";\n        border: 1px solid ",";\n        cursor: not-allowed;\n        color: ",";\n    }\n    @media screen and (max-width: 1070px) {\n        display: flex;\n        margin: 0;\n        gap: 2px;\n    }\n"])),(function(e){return e.loading?"#44bcd8":e.theme.primaryDark}),(function(e){return e.theme.primaryBorder}),(function(e){return e.theme.buttonText}),(function(e){return e.theme.primaryLight}),(function(e){return e.theme.buttonDefault}),(function(e){return e.theme.buttonBorder}),(function(e){return e.theme.textColor})),ib=(0,St.Z)(Xx)(Bx||(Bx=(0,r.Z)(["\n    background: none;\n    margin-left: 5px;\n    color: ",";\n    background: ",";\n    border: 1px solid ",";\n    height: 28px;\n    span {\n        margin-left: 5px;\n    }\n    display: ",";\n"])),(function(e){return e.theme.textColor}),(function(e){return e.theme.buttonDefault}),(function(e){return e.theme.buttonBorder}),(function(e){return e.isMobile||e.isSplit?"flex":"none"})),ab=St.Z.div(Hx||(Hx=(0,r.Z)(["\n    display: flex;\n    flex-wrap: wrap;\n    margin-bottom: 4px;\n    @media screen and (max-width: 1070px) {\n        display: flex;\n        gap: 2px;\n    }\n"]))),ob=St.Z.div(Px||(Px=(0,r.Z)(["\n    display: flex;\n    flex: 1;\n    align-items: center;\n    justify-content: space-between;\n    margin-bottom: 20px;\n    margin-right: 10px;\n    margin: 2px;\n"]))),lb=(St.Z.div(qx||(qx=(0,r.Z)(["\n    display: flex;\n    align-items: center;\n"]))),St.Z.div(Ax||(Ax=(0,r.Z)(["\n    display: flex;\n    flex: 1;\n    flex-direction: column;\n    background: ",";\n"])),(function(e){return e.theme.widgetContainer}))),sb=St.Z.div(Qx||(Qx=(0,r.Z)(["\n    margin: 20px;\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n    .options-input {\n        margin: 10px;\n        display: flex;\n        justify-content: space-between;\n    }\n"]))),ub=((0,St.Z)(Rt.K)(Wx||(Wx=(0,r.Z)(["\n    background: ",";\n    margin: 5px;\n    flex: 1;\n    padding: 5px 12px;\n    border: 1px solid ",";\n    color: ",";\n    &:focus {\n        border: 1px solid ",";\n    }\n"])),(function(e){return e.theme.inputBg}),(function(e){return e.theme.buttonBorder}),(function(e){return e.theme.textColor}),(function(e){return e.theme.buttonHover})),(0,St.Z)(Xx)(Ux||(Ux=(0,r.Z)(["\n    background: ",";\n    border: 1px solid ",";\n    color: ",";\n    height: 30px;\n    &:hover {\n        background: ",";\n    }\n"])),(function(e){return e.theme.primaryDark}),(function(e){return e.theme.primaryBorder}),(function(e){return e.theme.buttonText}),(function(e){return e.theme.primaryLight})),St.Z.label(Jx||(Jx=(0,r.Z)(["\n    font-size: 12px;\n    color: ",";\n    margin-left: 10px;\n"])),(function(e){return e.theme.inputLabelColor}))),cb=St.Z.div(Gx||(Gx=(0,r.Z)(["\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin: 10px;\n    h3 {\n        margin-left: 10px;\n        font-size: 1em;\n        color: ",";\n    }\n"])),(function(e){return e.theme.textColor})),db=(0,St.Z)(Xx)(Kx||(Kx=(0,r.Z)(["\n    background: none;\n    padding: 0;\n    color: ",";\n"])),(function(e){return e.theme.textColor}));function fb(e){var n=e.isDisabled,t=e.onClick,r=e.isMobile,i=e.alterText,a=e.loading,o=void 0!==a&&a,l=(0,vi.F)();return(0,ze.jsx)(I.a,{theme:l,children:(0,ze.jsx)(rb,{disabled:n,type:"submit",onClick:t,isMobile:r,loading:o||!1,children:o?(0,ze.jsx)(ze.Fragment,{children:"Loading..."}):(0,ze.jsx)(ze.Fragment,{children:i||"Show Results"})})})}function pb(e){var n=e.isDisabled,t=e.onClick,r=e.isMobile,i=e.alterText,a=(0,vi.F)();return(0,ze.jsx)(I.a,{theme:a,children:(0,ze.jsx)(eb,{disabled:n,type:"submit",onClick:t,isMobile:r,children:i||"Show Logs Rate"})})}function vb(e){return e&&"{"!==e&&"}"!==e}var hb,gb,mb,xb,bb,yb,Zb,wb,Sb,jb,kb,Cb,Tb={JSONClone:function(e){var n=JSON.stringify(e);return JSON.parse(n)},updateLabel:function(e,n){var t,r=[],i=(0,s.Z)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.name===n?r.push((0,l.Z)((0,l.Z)({},a),{},{selected:!a.selected})):r.push(a)}}catch(o){i.e(o)}finally{i.f()}return r},updateLabelSelected:function(e,n){return e.some((function(e){return e===n}))?e.filter((function(e){return e!==n})):e.concat(n)}},_b=function(e,n){var t={expr:"",dataSourceId:e,queryId:n};try{var r=JSON.parse(localStorage.getItem("queryData")||"[]")||[];if(r&&(null===r||void 0===r?void 0:r.length)>0){var i=null===r||void 0===r?void 0:r.find((function(t){return t.dataSourceId===e&&t.queryId===n}));return i&&(t=(0,l.Z)({},i)),t}return t}catch(a){return console.error(a),t}},Ib=function(e){try{var n=JSON.parse(localStorage.getItem("dataSources")||"[]");return null===n||void 0===n?void 0:n.find((function(n){return n.id===e}))}catch(t){return{}}},Db=function(e,n,t){var r={expr:e,queryId:n,dataSourceId:t},i=function(){try{return JSON.parse(localStorage.getItem("queryData")||"[]")}catch(e){return[]}}(),a=[];a=i&&i.length>0&&Array.isArray(i)&&i.some((function(e){return e.dataSourceId===t&&e.queryId===n}))?i.map((function(e){return e.queryId===n&&e.dataSourceId===t?(0,l.Z)({},r):e})):[].concat((0,H.Z)(i),[r]),localStorage.setItem("queryData",JSON.stringify(a))},Nb=(St.Z.div(hb||(hb=(0,r.Z)(["\n    padding-top: 5px;\n    height: 100%;\n    width: 100%;\n    display: flex;\n    flex:1;\n    flex-direction: column;\n    background-color: "," !important;\n    &::-webkit-scrollbar-corner {\n        background: transparent;\n      }\n    &::-webkit-scrollbar-thumb {\n        border-radius: 5px;\n        background: "," !important;\n    }\n"])),(function(e){return e.theme.mainBgColor}),(function(e){return e.theme.scrollbarThumb})),St.Z.div(gb||(gb=(0,r.Z)(["\n    display: flex;\n    align-items:center;\n"])))),Mb=(St.Z.div(mb||(mb=(0,r.Z)(["\n    display: flex;\n    align-items: center;\n"]))),St.Z.div(xb||(xb=(0,r.Z)(["\n    display: flex;\n    flex: 1;\n    flex-direction: column;\n\n  \n    background: ",";\n"])),(function(e){return e.theme.widgetContainer})),St.Z.div(bb||(bb=(0,r.Z)(["\n    margin: 20px;\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n"]))),St.Z.label(yb||(yb=(0,r.Z)(["\n    font-size: 11px;\n    white-space: nowrap;\n    color: ",";\n    margin-left: 10px;\n"])),(function(e){return e.theme.textColor}))),Eb=St.Z.div(Zb||(Zb=(0,r.Z)(["\n    display: flex;\n    margin-right: 10px;\n"]))),Rb=St.Z.div(wb||(wb=(0,r.Z)(["\n    color: ",";\n    background: ",";\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 11px;\n    white-space: nowrap;\n    padding: 0px 10px;\n"])),(function(e){return e.theme.textColor}),(function(e){return e.theme.buttonInactive})),Ob=St.Z.input(Sb||(Sb=(0,r.Z)(["\n    flex: 1;\n    background: ",";\n    color: ",";\n    border: 1px solid ",";\n    border-radius: 3px;\n    max-width: 60px;\n    padding-left: 8px;\n"])),(function(e){return e.theme.inputBg}),(function(e){return e.theme.textColor}),(function(e){return e.theme.buttonBorder}));function Lb(e){var n=(0,i.I0)(),t=e.data.id,r=e.name,a=(0,i.v9)((function(e){return e[r]})),o=(0,f.useState)(e.data.limit),l=(0,u.Z)(o,2),s=l[0],c=l[1],d=(0,f.useMemo)((function(){return e.data.limit}),[e.data.limit]);return(0,f.useEffect)((function(){c(d)}),[d,c]),(0,ze.jsxs)(Eb,{children:[(0,ze.jsx)(Rb,{children:"Query Limit"}),(0,ze.jsx)(D.Z,{title:"max 20000",children:(0,ze.jsx)(Ob,{type:"number",value:s,onChange:function(e){var i=e.target.value;i>2e4&&(i=2e4);var o=(0,H.Z)(a);o.forEach((function(e){e.id===t&&(e.limit=i)})),n(function(e,n){return"left"===e?m(n):x(n)}(r,o))}})})]})}var Vb=St.Z.div(jb||(jb=(0,r.Z)(["\n    color: ",";\n    background: ",";\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 11px;\n    white-space: nowrap;\n    padding: 0px 10px;\n"])),(function(e){return e.theme.textColor}),(function(e){return e.theme.buttonInactive})),zb=St.Z.div(kb||(kb=(0,r.Z)(["\n    display: flex;\n    align-items: center;\n    font-size: 12px;\n    background-color: ",";\n\n    border: 1px solid ",";\n    color: ",";\n    border-radius: 3px;\n    margin-right: 10px;\n"])),(function(e){return e.theme.buttonInactive}),(function(e){return e.theme.buttonBorder}),(function(e){return e.theme.textColor})),Fb=St.Z.div(Cb||(Cb=(0,r.Z)(["\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    background: ",";\n    border-left: ",";\n    border-right: ",";\n    border-radius: ",";\n    flex: 1;\n    height: 90%;\n\n    padding: 0px 12px;\n    font-size: 12px;\n    line-height: 20px;\n"])),(function(e){return e.selected?e.theme.buttonDefault:e.theme.buttonInactive}),(function(e){return"last"===e.position?"1px solid ".concat(e.theme.buttonBorder):"none"}),(function(e){return"first"===e.position?"1px solid ".concat(e.theme.buttonBorder):"none"}),(function(e){var n=e.position;return"first"===n?"3px 0px 0px 3px":"last"===n?"0px 3px 3px 0px":"0px"})),Bb=function(e,n){var t=n.length;return 0===e?"first":e===t-1?"last":"center"};function Hb(e){var n=e.options,t=e.defaultActive,r=e.label,i=e.onChange,a=(0,f.useMemo)((function(){return t}),[t]),o=(0,f.useState)(a),l=(0,u.Z)(o,2),s=l[0],c=l[1];return(0,f.useEffect)((function(){c(t)}),[t]),(0,ze.jsxs)(ze.Fragment,{children:[(0,ze.jsx)(Vb,{children:r}),(0,ze.jsx)(zb,{children:n&&n.map((function(e,n,r){return(0,ze.jsx)(Fb,{selected:e.value===s,defaultActive:t,position:Bb(n,r),onClick:function(n){return function(e){c(e),i(e)}(e.value)},children:e.label},n)}))})]})}var Pb,qb=t(70024),Ab=St.Z.div(Pb||(Pb=(0,r.Z)(["\n    display: flex;\n    padding: 4px 8px;\n   // background: ",";\n    color: ",";\n    height: 26px;\n"])),(function(e){return e.theme.widgetContainer}),(function(e){return e.color}));function Qb(e,n){return"left"===e?m(n):x(n)}var Wb=[{value:"range",label:"Range"},{value:"instant",label:"Instant"}],Ub=[{value:"forward",label:"Forward"},{value:"backwards",label:"Backwards"}];function Jb(e){var n=(0,i.I0)(),t=e.name,r=e.data,a=(0,vr.Fg)(),o=(0,i.v9)((function(e){return e[t]})),s=(0,i.v9)((function(e){return e.responseType})),c=(0,p.TH)().hash,d=r.id,v=r.queryType,h=r.tableView,g=r.idRef,m=r.isShowTs,x=r.isBuilder,b=r.isLogsVolume,y=r.direction,Z=r.dataSourceType,w=r.isShowStats,S=r.hasStats,j=(0,f.useState)(h),k=(0,u.Z)(j,2),C=k[0],T=k[1],_=(0,f.useState)(m||!1),D=(0,u.Z)(_,2),N=D[0],M=D[1],E=(0,f.useState)(x||!1),R=(0,u.Z)(E,2),O=R[0],L=R[1],V=(0,f.useState)(b||!1),z=(0,u.Z)(V,2),F=z[0],B=z[1],P=(0,f.useState)(w||!1),q=(0,u.Z)(P,2),A=q[0],Q=q[1],W=(0,f.useState)(v),U=(0,u.Z)(W,2),J=U[0],G=U[1],K=(0,f.useState)(y||"forward"),Y=(0,u.Z)(K,2),X=Y[0],$=Y[1];return(0,f.useEffect)((function(){var e=new URLSearchParams(c.replace(/#/,"")).get(t),r=JSON.parse(decodeURIComponent(e)||"[]");if((null===r||void 0===r?void 0:r.length)>0){var i=r.find((function(e){return e.idRef===g}));if(i){var a=(0,H.Z)(o);a.forEach((function(e){e.idRef===g&&(e.queryType=i.queryType,e.direction=i.direction)})),n(Qb(t,a))}}}),[]),(0,f.useEffect)((function(){T(e.data.tableView)}),[T,e.data.tableView]),(0,f.useEffect)((function(){M(e.data.isShowTs)}),[M,e.data.isShowTs]),(0,f.useEffect)((function(){L(e.data.isBuilder)}),[L,e.data.isBuilder]),(0,f.useEffect)((function(){B(e.data.isLogsVolume)}),[B,e.data.isLogsVolume]),(0,ze.jsx)(I.a,{theme:a,children:(0,ze.jsxs)(Ab,{children:[(0,ze.jsx)(Wi.Z,{section:"Query Options",localProps:e}),(0,ze.jsx)(Hb,{label:"Query Type",options:Wb,onChange:function(e){var r=(0,H.Z)(o);r.forEach((function(n){n.id===d&&(n.queryType=e)})),n(Qb(t,r)),G(e)},defaultActive:J}),(0,ze.jsx)(Hb,{label:"Direction",options:Ub,onChange:function(e){var r=(0,H.Z)(o);r.forEach((function(n){n.id===d&&(n.direction=e)})),n(Qb(t,r)),$(e)},defaultActive:X}),(0,ze.jsx)(Lb,(0,l.Z)({},e)),"flux"===Z&&(0,ze.jsxs)("div",{className:"options-input",children:[(0,ze.jsx)(Mb,{children:"Chart View"}),(0,ze.jsx)(qb.Z,{checked:C,size:"small",onChange:function(){var e=(0,H.Z)(o);e.forEach((function(e){e.id===d&&(e.tableView=!C)})),n(Qb(t,e))},inputProps:{"aria-label":"controlled"}})]}),"vector"!==s&&(0,ze.jsxs)(ze.Fragment,{children:[(0,ze.jsxs)(Nb,{children:[(0,ze.jsx)(Mb,{children:"Timestamp"}),(0,ze.jsx)(qb.Z,{checked:N,size:"small",onChange:function(){var e=(0,H.Z)(o);e.forEach((function(e){e.id===d&&(e.isShowTs=!N)})),n(Qb(t,e))},inputProps:{"aria-label":"controlled-ts"}})]}),(0,ze.jsxs)(Nb,{children:[(0,ze.jsx)(Mb,{children:"Query Builder"}),(0,ze.jsx)(qb.Z,{checked:O,size:"small",onChange:function(){var e=(0,H.Z)(o);e.forEach((function(e){e.id===d&&(e.isBuilder=!O)})),n(Qb(t,e))},inputProps:{"aria-label":"controlled-ts"}})]}),(0,ze.jsxs)(Nb,{children:[(0,ze.jsx)(Mb,{children:"Logs Volume"}),(0,ze.jsx)(qb.Z,{checked:F,size:"small",onChange:function(){var e=(0,H.Z)(o);e.forEach((function(e){e.id===d&&(e.isLogsVolume=!F)})),n(Qb(t,e))},inputProps:{"aria-label":"controlled-ts"}})]}),S&&(0,ze.jsxs)(Nb,{children:[(0,ze.jsx)(Mb,{children:"Stats Info"}),(0,ze.jsx)(qb.Z,{checked:A,size:"small",onChange:function(e){var r=e.target.checked;Q((function(){return r}));var i=(0,H.Z)(o);i.forEach((function(e){e.id===d&&(e.isShowStats=!A)})),n(Qb(t,i))},inputProps:{"aria-label":"controlled-ts"}})]})]})]})})}var Gb,Kb=function(e){var n=(0,i.I0)(),t=(0,i.v9)((function(e){return e.responseType})),r=(0,p.TH)().hash,a=e.data,o=a.id,s=a.idRef,c=a.dataSourceType,d=a.isBuilder,v=e.open,h=e.handleClose,g=e.actPanel,m=e.name,x=(0,f.useState)(e.data.tableView),b=(0,u.Z)(x,2),y=b[0],Z=b[1],w=(0,f.useState)(e.data.isShowTs),S=(0,u.Z)(w,2),j=S[0],k=S[1],C=(0,f.useState)(d||!1),T=(0,u.Z)(C,2),_=T[0],I=T[1],D=(0,f.useState)(e.data.queryType),N=(0,u.Z)(D,2),M=N[0],E=N[1],R=(0,f.useState)(e.data.traceQueryType||"traceId"),O=(0,u.Z)(R,2),L=O[0],V=O[1],z=(0,f.useState)(e.data.direction),F=(0,u.Z)(z,2),B=F[0],P=F[1];(0,f.useEffect)((function(){var e=new URLSearchParams(r.replace(/#/,"")).get(m),t=JSON.parse(decodeURIComponent(e));if((null===t||void 0===t?void 0:t.length)>0){var i=t.find((function(e){return e.idRef===s}));if(i){var a=(0,H.Z)(g),o=A(a,s);"undefined"!==typeof o&&(o.queryType=i.queryType,o.direction=i.direction,n(yj(m,a)))}}}),[]);var q=function(e,n){return e.find((function(e){return e.id===n}))},A=function(e,n){return e.find((function(e){return e.id===n}))};function Q(e){var t=(0,H.Z)(g),r=q(t,o);"undefined"!==typeof r&&(r.traceQueryType=e,n(yj(m,t))),V((function(n){return e}))}(0,f.useEffect)((function(){Z(e.data.tableView)}),[Z,e.data.tableView]),(0,f.useEffect)((function(){k(e.data.isShowTs)}),[k,e.data.isShowTs]),(0,f.useEffect)((function(){I(e.data.isBuilder)}),[I,e.data.isBuilder]);return(0,ze.jsx)(lr.Z,{open:v,onClose:h,PaperProps:{classes:{root:pr.ht}},children:(0,ze.jsxs)(lb,{children:[(0,ze.jsxs)(cb,{children:[(0,ze.jsx)("h3",{children:"Query Options"}),(0,ze.jsxs)(db,{onClick:h,children:[" ",(0,ze.jsx)(xr.Z,{})," "]})]}),(0,ze.jsxs)(sb,{children:[(0,ze.jsx)("div",{className:"options-input",children:(0,ze.jsx)(Hb,{label:"Trace Type",options:jj,onChange:Q,defaultActive:L})}),(0,ze.jsx)("div",{className:"options-input",children:(0,ze.jsx)(Hb,{label:"Query Type",options:wj,onChange:function(e){var t=(0,H.Z)(g),r=q(t,o);"undefined"!==typeof r&&(r.queryType=e,n(yj(m,t))),E(e)},defaultActive:M})}),(0,ze.jsx)("div",{className:"options-input",children:(0,ze.jsx)(Hb,{label:"Direction",options:Sj,onChange:function(e){var t=(0,H.Z)(g),r=q(t,o);"undefined"!==typeof r&&(r.direction=e,n(yj(m,t))),P(e)},defaultActive:B})}),(0,ze.jsx)("div",{className:"options-input",children:(0,ze.jsx)(Lb,(0,l.Z)({},e))}),"flux"===c&&(0,ze.jsxs)("div",{className:"options-input",children:[(0,ze.jsx)(ub,{children:"Chart View"}),(0,ze.jsx)(qb.Z,{checked:y,size:"small",onChange:function(){var e=(0,H.Z)(g),t=q(e,o);"undefined"!==typeof t&&(t.tableView=!y,n(yj(m,e)))},inputProps:{"aria-label":"controlled"}})]}),"vector"!==t&&(0,ze.jsxs)("div",{className:"options-input",children:[(0,ze.jsxs)(ob,{children:[(0,ze.jsx)(ub,{children:"Timestamp"}),(0,ze.jsx)(qb.Z,{checked:j,size:"small",onChange:function(){var e=(0,H.Z)(g);e.forEach((function(e){e.id===o&&(e.isShowTs=!j)})),n(yj(m,e))},inputProps:{"aria-label":"controlled-ts"}})]}),(0,ze.jsxs)(ob,{children:[(0,ze.jsx)(ub,{children:"Query Builder"}),(0,ze.jsx)(qb.Z,{checked:_,size:"small",onChange:function(){var e=(0,H.Z)(g);e.forEach((function(e){e.id===o&&(e.isBuilder=!_)})),n(yj(m,e))},inputProps:{"aria-label":"controlled-ts"}})]})]})]})]})})};var Yb=(0,Ve.iv)(Gb||(Gb=(0,r.Z)(["\n    height: 18px !important;\n    width: 18px !important;\n"])));function Xb(e){var n=(0,i.I0)(),t=e.name,r=e.data,a=r.id,o=r.browserOpen,l=(0,f.useMemo)((function(){return o}),[o]),s=(0,vi.F)(),c=((0,i.v9)((function(e){return e.labels})),(0,i.v9)((function(e){return e[t]}))),d=(0,f.useState)(l),p=(0,u.Z)(d,2),v=p[0],h=p[1];(0,f.useEffect)((function(){h(l)}),[l]);return(0,ze.jsx)(I.a,{theme:s,children:(0,ze.jsx)(D.Z,{title:function(n){var t;return(null===(t=e.labels)||void 0===t?void 0:t.length)>0?"Show / Hide Labels":"Labels Not Available"}(),children:(0,ze.jsxs)(nb,{onClick:function(){var e=(0,H.Z)(c);e.forEach((function(e){e.id===a&&(e.browserOpen=!v)})),n(function(e,n){return"left"===e?m(n):x(n)}(t,e)),h(l)},browserActive:v,isMobile:e.isMobile,children:[function(e){return e?(0,ze.jsx)(ha.Z,{className:(0,Ve.cx)(Yb)}):(0,ze.jsx)(gt.Z,{className:(0,Ve.cx)(Yb)})}(v),"Labels"]})})})}function $b(e){var n=e.disabled,t=e.onClick,r=e.isMobile,i=(0,vi.F)();return(0,ze.jsx)(I.a,{theme:i,children:(0,ze.jsx)(ib,{disabled:n,type:"submit",onClick:t,isMobile:r,children:"Options"})})}function ey(e){var n=e.queryLength,t=e.handleHistoryClick,r=e.isMobile,i=(0,f.useState)(!1),a=(0,u.Z)(i,2),o=a[0],l=a[1],s=(0,vi.F)();return(0,f.useEffect)((function(){l(n>0)}),[n]),(0,ze.jsx)(I.a,{theme:s,children:(0,ze.jsx)(D.Z,{title:"Query History ("+n+")",children:(0,ze.jsxs)(eb,{isMobile:r,onClick:t,children:[(0,ze.jsx)($x,{color:o?s.textColor:s.textOff}),r&&(0,ze.jsx)("span",{children:"History"})]})})})}var ny,ty,ry,iy,ay,oy,ly,sy,uy,cy,dy,fy,py,vy=["isSplit","onShowQuerySettings","queryHistory","handleHistoryClick","queryValid","onSubmit","onSubmitRate","data","name","loading","hasStats","showStatsOpen","handleStatsOpen"],hy=function(e){var n=(0,i.I0)(),t=e.isSplit,r=e.onShowQuerySettings,a=e.queryHistory,o=e.handleHistoryClick,s=e.queryValid,c=e.onSubmit,d=e.onSubmitRate,p=e.data,v=e.name,h=e.loading,g=e.hasStats,m=e.showStatsOpen,x=e.handleStatsOpen,b=(0,Lo.Z)(e,vy),y=p.id,Z=p.dataSourceType,w=(0,f.useState)(e.data.chartView),S=(0,u.Z)(w,2),j=S[0],k=S[1];(0,f.useEffect)((function(){k(e.data.chartView)}),[k,e.data.chartView]);var C,T=(0,i.v9)((function(e){return e[v]}));return(0,ze.jsxs)(ab,{children:[(C=Z,"flux"!==C&&"metrics"!==C&&"traces"!==C?(0,ze.jsxs)(ze.Fragment,{children:[(0,ze.jsx)(Xb,(0,l.Z)((0,l.Z)({},e),{},{isMobile:!0})),(0,ze.jsx)($b,(0,l.Z)((0,l.Z)({},b),{},{isSplit:t,isMobile:!0,onClick:r}))]}):null),(0,ze.jsx)(ey,{queryLength:null===a||void 0===a?void 0:a.length,handleHistoryClick:o,isMobile:!0}),"logs"===Z&&(0,ze.jsx)(pb,{disabled:!s,onClick:d,isMobile:!1}),"logs"===Z&&g&&t&&(0,ze.jsxs)("div",{className:"options-input",children:[(0,ze.jsx)(ub,{children:"Show Stats"}),(0,ze.jsx)(qb.Z,{checked:m,size:"small",onChange:x,inputProps:{"aria-label":"controlled-switch"}})]}),(0,ze.jsx)(fb,{disabled:!s,onClick:c,isMobile:!0,loading:h||!1}),"flux"===Z&&(0,ze.jsxs)("div",{className:"options-input",children:[(0,ze.jsx)(ub,{children:"Chart View"}),(0,ze.jsx)(qb.Z,{checked:j,size:"small",onChange:function(){var e=(0,H.Z)(T),t=function(e,n){return e.find((function(e){return e.id===n}))}(e,y);"undefined"!==typeof t&&(t.chartView=!j,n(yj(v,e)))},inputProps:{"aria-label":"controlled"}})]})]})},gy=t(28048),my=t(32720),xy=t(55386),by=t(19803),yy=t.n(by),Zy=(t(68293),t(66940),(0,St.Z)(my.CX)(ny||(ny=(0,r.Z)(["\n    flex: 1;\n    background: ",";\n    border: 1px solid ",";\n    color: ",";\n    padding: 4px 8px;\n    font-size: 12px;\n    font-family: monospace;\n    margin: 0px 5px;\n    border-radius: 3px;\n    line-height: 1.5;\n    line-break: anywhere;\n    overflow-y: scroll;\n"])),(function(e){return e.theme.inputBg}),(function(e){return e.theme.buttonBorder}),(function(e){return e.theme.textColor}))),wy=St.Z.div(ty||(ty=(0,r.Z)(["\n    display: flex;\n    align-items: center;\n    flex: 1;\n    max-width: 100%;\n"])));function Sy(e){var n=e.attributes,t=e.children,i=e.leaf,a=(0,vi.F)();return(0,ze.jsx)("span",(0,l.Z)((0,l.Z)({},n),{},{className:(0,Ve.iv)(ry||(ry=(0,r.Z)(["\n                font-family: monospace;\n                // background: black;\n                ","\n                ","\n        ","\n        ","\n        ","\n        ","\n        ","\n        ","\n          ","\n          ","\n            "])),i.comment&&(0,Ve.iv)(iy||(iy=(0,r.Z)(["\n                    color: blue;\n                "]))),(i.operator||i.url)&&(0,Ve.iv)(ay||(ay=(0,r.Z)(["\n                    color: ",";\n                "])),a.textOff),i.keyword&&(0,Ve.iv)(oy||(oy=(0,r.Z)(["\n                    color: #57aed4;\n                "]))),(i.variable||i.regex)&&(0,Ve.iv)(ly||(ly=(0,r.Z)(["\n                    color: #e90;\n                "]))),(i.number||i.boolean||i.tag||i.constant||i.symbol||i["attr-name"]||i.selector)&&(0,Ve.iv)(sy||(sy=(0,r.Z)(["\n                    color: #dd4a68;\n                "]))),i.punctuation&&(0,Ve.iv)(uy||(uy=(0,r.Z)(["\n                    color: orange;\n                "]))),(i.string||i.char)&&(0,Ve.iv)(cy||(cy=(0,r.Z)(["\n                    color: green;\n                "]))),(i.function||i["class-name"]||i["attr-name"])&&(0,Ve.iv)(dy||(dy=(0,r.Z)(["\n                    color: #dd4a68;\n                "]))),i["context-labels"]&&(0,Ve.iv)(fy||(fy=(0,r.Z)(["\n                    color: orange;\n                "]))),i["label-key"]&&(0,Ve.iv)(py||(py=(0,r.Z)(["\n                    color: green;\n                "])))),children:t}))}function jy(e){var n;return"string"===typeof e?null===e||void 0===e?void 0:e.length:"string"===typeof(null===e||void 0===e?void 0:e.content)?null===e||void 0===e?void 0:e.content.length:null===e||void 0===e||null===(n=e.content)||void 0===n?void 0:n.reduce((function(e,n){return e+jy(n)}),0)}function ky(e){var n=e.onQueryChange,t=e.value,r=e.onKeyDown,i=(e.defaultValue,e.isSplit,(0,vi.F)()),a=(0,f.useCallback)((function(e){return(0,ze.jsx)(Sy,(0,l.Z)({},e))}),[]),o=(0,f.useMemo)((function(){return(0,xy.VC)((0,my.BU)((0,gy.Jh)()))}),[]),c=(0,f.useRef)(null),d=(0,f.useState)("sql"),p=(0,u.Z)(d,1)[0],v=(0,f.useCallback)((function(e){var n=(0,u.Z)(e,2),t=n[0],r=n[1],i=[];if(!gy.xv.isText(t)||(null===t||void 0===t?void 0:t.length)<1)return i;var a,o=yy().tokenize(t.text,yy().languages[p]),l=0,c=(0,s.Z)(o);try{for(c.s();!(a=c.n()).done;){var d,f=a.value,v=l+jy(f);if("string"!==typeof f)i.push((d={},(0,B.Z)(d,f.type,!0),(0,B.Z)(d,"anchor",{path:r,offset:l}),(0,B.Z)(d,"focus",{path:r,offset:v}),d));l=v}}catch(h){c.e(h)}finally{c.f()}return i}),[p]),h=(0,f.useState)(t),g=(0,u.Z)(h,2),m=g[0],x=g[1];return(0,f.useEffect)((function(){x(t)}),[]),(0,f.useEffect)((function(){x(t),o.children=t}),[t,x]),(0,ze.jsx)(I.a,{theme:i,children:(0,ze.jsx)(wy,{ref:c,children:(0,ze.jsx)(my.mH,{editor:o,value:m,onChange:n,children:(0,ze.jsx)(Zy,{decorate:v,renderLeaf:a,placeholder:"",onKeyDown:r,spellCheck:"false"})})})})}var Cy=function(e){var n,t=e.isTabletOrMobile,r=e.isBuilder,a=e.dataSourceType,s=e.handleQueryChange,u=e.expr,c=e.queryValue,d=e.handleInputKeyDown,f=e.queryHistory,p=e.handleHistoryClick,v=e.queryValid,h=e.onSubmit,g=e.onSubmitRate,m=e.loading,x=(0,i.v9)((function(e){return e.isSplit}));return(0,ze.jsxs)(tb,{children:[!t&&!x&&!r&&(n="logs",a===n)&&(0,ze.jsx)(Xb,(0,l.Z)({},e)),("logs"!==a||!r)&&"metrics"!==a&&(0,ze.jsx)(ky,{onQueryChange:s,defaultValue:o().sanitize(u||""),value:c,onKeyDown:d}),!x&&"flux"!==a&&"traces"!==a&&"logs"===a&&!r&&!t&&(0,ze.jsxs)(ze.Fragment,{children:[(0,ze.jsx)(ey,{queryLength:f.length,handleHistoryClick:p}),"logs"===a&&!r&&(0,ze.jsx)(pb,{disabled:!v,onClick:g,isMobile:!1}),(0,ze.jsx)(fb,{disabled:!v,onClick:h,isMobile:!1,loading:m||!1})]}),("traces"===a||"metrics"===a)&&(0,ze.jsx)(ze.Fragment,{children:(0,ze.jsx)(fb,{disabled:!v,onClick:h,isMobile:!1,loading:m||!1})})]})},Ty=t(9964),_y=t(9820),Iy=t(53132);var Dy=t(48268);function Ny(e){var n,t=(0,Dy.Uc)(e),r=(0,l.Z)((0,l.Z)({},t),{},{"Content-Type":"application/json"}),i={},a={};if(null===e||void 0===e||null===(n=e.auth)||void 0===n?void 0:n.basicAuth.value){var o,u,c,d=null===e||void 0===e||null===(o=e.auth)||void 0===o||null===(u=o.fields)||void 0===u?void 0:u.basicAuth,f=(0,s.Z)(d);try{for(f.s();!(c=f.n()).done;){var p=c.value;"user"===p.name&&(a.username=p.value),"password"===p.name&&(a.password=p.value)}}catch(v){f.e(v)}finally{f.f()}i.auth=a}return i.options={method:"GET"},i.headers=r,i}var My,Ey,Ry,Oy,Ly,Vy,zy,Fy,By,Hy,Py,qy,Ay=t(17527),Qy=t(74092),Wy=function(e,n,t){return{container:function(e){return(0,l.Z)((0,l.Z)({},e),{},{flex:t?1:""})},menu:function(n){return(0,l.Z)((0,l.Z)({},n),{},{fontSize:"12px",color:e.textColor})},control:function(r){return(0,l.Z)((0,l.Z)({},r),{},{fontSize:"12px",height:28,minHeight:28,boxShadow:"none",color:e.textColor,border:"1px solid ".concat(e.buttonBorder),minWidth:n,flex:t?1:""})},input:function(n){return(0,l.Z)((0,l.Z)({},n),{},{fontSize:"12px",color:e.textColor})},indicatorSeparator:function(e){return{display:"none"}},dropdownIndicator:function(n){return{padding:0,svg:{height:12},color:e.textColor}},clearIndicator:function(e){return{padding:0,svg:{height:12}}},singleValue:function(n){return(0,l.Z)((0,l.Z)({},n),{},{fontSize:"12px",height:30,minHeight:30,margin:0,padding:0,marginTop:"4px",color:e.textColor})},valueContainer:function(e){return(0,l.Z)((0,l.Z)({},e),{},{display:"flex",flex:t?1:""})}}},Uy=(0,Ve.iv)(My||(My=(0,r.Z)(["\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n    gap: 3px;\n"]))),Jy=(0,Ve.iv)(Ey||(Ey=(0,r.Z)(["\n    display: flex;\n    align-items: center;\n"]))),Gy=function(e){return(0,Ve.iv)(Ry||(Ry=(0,r.Z)(["\n    color: ",";\n    border: 1px solid ",";\n    margin-left: 3px;\n    cursor: pointer;\n\n    padding: 6px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    border-radius: 3px;\n"])),e.textColor,e.buttonBorder)},Ky=function(e){return(0,Ve.iv)(Oy||(Oy=(0,r.Z)(["\n    display: flex;\n    align-items: center;\n    margin-top: 3px;\n    margin-left: 3px;\n    cursor: pointer;\n    color: ",";\n    padding: 0px 12px;\n    border-radius: 3px;\n    height: 28px;\n    small {\n        font-size: 12px;\n        margin: 0;\n        padding: 0;\n    }\n"])),e.textColor)},Yy=function(e){return(0,Ve.iv)(Ly||(Ly=(0,r.Z)(["\n    color: ",";\n    margin-right: 2px;\n"])),e.textColor)},Xy=(0,Ve.iv)(Vy||(Vy=(0,r.Z)(["\n    display: flex;\n    flex-wrap: wrap;\n    gap: 4px;\n    margin: 0px 0px;\n"]))),$y=(0,Ve.iv)(zy||(zy=(0,r.Z)(["\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n"]))),eZ=(0,Ve.iv)(Fy||(Fy=(0,r.Z)(["\n    display: flex;\n    flex-wrap: wrap;\n    align-items: center;\n"]))),nZ=((0,Ve.iv)(By||(By=(0,r.Z)(["\n    display: flex;\n    margin: 10px 0px;\n"]))),(0,Ve.iv)(Hy||(Hy=(0,r.Z)(["\n    display: flex;\n    flex-direction: column;\n    margin-top: 10px;\n"])))),tZ=(0,Ve.iv)(Py||(Py=(0,r.Z)(["\n    //align-items:center;\n    display: flex;\n    flex-wrap: wrap;\n    flex-direction: column;\n"]))),rZ=function(e){return(0,Ve.iv)(qy||(qy=(0,r.Z)(["\n    background: ",";\n    border: 1px solid ",";\n    border-radius: 3px;\n    color: ",";\n    margin-left: 5px;\n    transition: 0.25s all;\n    justify-content: center;\n    padding: 3px 12px;\n    margin-top: 5px;\n    height: 30px;\n    display: flex;\n    align-items: center;\n    align-self: flex-end;\n    max-width: 200px;\n    cursor: pointer;\n    &:hover {\n        background: ",";\n    }\n"])),e.primaryDark,e.primaryBorder,e.buttonText,e.primaryLight)},iZ=75,aZ={display:"flex",alignItems:"center",flex:1,width:"100%"},oZ={display:"flex",alignItems:"flex-end",flex:1,width:"100%"};function lZ(e){var n=e.defaultValue,t=e.options,r=(0,f.useMemo)((function(){var e=null===t||void 0===t?void 0:t.find((function(e){return(null===e||void 0===e?void 0:e.value)===n}));return{label:null===e||void 0===e?void 0:e.label}}),[n,t]);return(0,ze.jsx)("div",{style:oZ,children:(0,ze.jsx)("div",{children:r.label})})}var sZ,uZ=function(e){var n=Ay.c.Option,t=e.data.label;return(0,ze.jsx)(n,(0,l.Z)((0,l.Z)({},e),{},{children:(0,ze.jsx)("div",{style:aZ,children:(0,ze.jsx)("span",{style:{fontSize:"12px"},children:t})})}))},cZ=function(e){var n=e.data.label;return(0,ze.jsx)("div",{style:oZ,children:(0,ze.jsx)("div",{children:n})})},dZ=(0,f.forwardRef)((function(e,n){var t=e.options,r=e.onSelectChange,i=e.label,a=e.labelWidth,o=(0,vr.Fg)();return(0,ze.jsxs)("div",{style:{marginTop:"5px",display:"flex",alignItems:"center",flex:1,whiteSpace:"nowrap"},children:[(0,ze.jsx)("label",{style:{width:"".concat(a,"px"),fontSize:"12px",color:o.textColor,padding:"0px 10px"},children:i}),(0,ze.jsx)(Qy.ZP,{styles:Wy(o,100,!0),placeholder:(0,ze.jsx)(lZ,(0,l.Z)({},e)),options:t,ref:n,components:{Option:uZ,SingleValue:cZ},theme:function(e){return(0,Dy.Pu)(e,o)},onChange:r})]})}));function fZ(e){var n=e.name,t=e.data,r=t.id,a=t.dataSourceId,s=t.dataSourceType,c=t.dataSourceURL,d=t.expr,p=e.onSearchChange,v=(0,i.I0)(),h=function(e){var n=e.id,t=(0,i.v9)((function(e){return e.dataSources})),r=(0,f.useState)({data:{tagValues:[]}}||{}),a=(0,u.Z)(r,2),o=a[0],l=a[1],s=(0,f.useMemo)((function(){return t.find((function(e){return e.id===n}))}),[t,n]);return(0,f.useEffect)((function(){if("traces"===s.type&&null!==s&&void 0!==s&&s.url&&""!==(null===s||void 0===s?void 0:s.url)){var e=Ny(s),n="".concat(s.url,"/api/search/tag/service.name/values"),t=function(){var t=(0,F.Z)((0,z.Z)().mark((function t(){var r;return(0,z.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.Z.get(n,e);case 3:r=t.sent,l(r||[]),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Error at loading Service Names",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();t()}}),[]),(0,f.useMemo)((function(){var e;return null!==o&&void 0!==o&&null!==(e=o.data)&&void 0!==e&&e.tagValues?[{name:"Select Service Name",value:"",label:"Select Service Name"}].concat(o.data.tagValues.map((function(e){return{name:e,value:e,label:e}}))):[{name:"",value:""}]}),[o])}({id:a}),g=function(e){var n=e.id,t=(0,i.v9)((function(e){return e.dataSources})),r=(0,f.useState)({data:{tagValues:[]}}||{}),a=(0,u.Z)(r,2),o=a[0],l=a[1],s=(0,f.useMemo)((function(){return t.find((function(e){return e.id===n}))}),[t,n]);return(0,f.useEffect)((function(){if("traces"===s.type&&null!==s&&void 0!==s&&s.url&&""!==(null===s||void 0===s?void 0:s.url)){var e=Ny(s),n="".concat(s.url,"/api/search/tag/name/values"),t=function(){var t=(0,F.Z)((0,z.Z)().mark((function t(){var r;return(0,z.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.Z.get(n,e);case 3:r=t.sent,l(r||[]),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Error at loading Span Names",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();t()}}),[]),(0,f.useMemo)((function(){var e;return null!==o&&void 0!==o&&null!==(e=o.data)&&void 0!==e&&e.tagValues?[{name:"Search Span Name",value:"",label:"Search Span Name"}].concat(o.data.tagValues.map((function(e){return{name:e,value:e,label:e}}))):[{name:"",value:"",label:""}]}),[o])}({id:a}),m=(0,f.useState)({name:"",value:"",label:""}),x=(0,u.Z)(m,2),b=x[0],y=x[1],Z=(0,f.useState)(g[0]||{name:"",value:"",label:""}),w=(0,u.Z)(Z,2),S=w[0],j=w[1],k=(0,vr.Fg)(),C=(0,f.useState)({searchName:b.value||"",name:S.value||"",tags:"",minDuration:"",maxDuration:"",limit:20}),T=(0,u.Z)(C,2),_=T[0],I=T[1],D=(0,f.useState)(""),N=(0,u.Z)(D,2),M=N[0],E=N[1];(0,f.useEffect)((function(){h.length>0&&E(function(e){var n=e.searchName,t=e.name,r=e.minDuration,i=e.maxDuration,a=e.tags,o=e.limit,l="";(null===n||void 0===n?void 0:n.length)>0&&(l=' service.name="'.concat(n,'"'));var s="";(null===a||void 0===a?void 0:a.length)>0&&(s=" ".concat(a));var u="";(null===t||void 0===t?void 0:t.length)>0&&(u=' name="'.concat(t,'"'));var c="";(null===r||void 0===r?void 0:r.length)>0&&(c="&minDuration=".concat(r));var d="";(null===i||void 0===i?void 0:i.length)>0&&(d="&maxDuration=".concat(i));var f="";o&&(f="&limit=".concat(o));var p=encodeURIComponent("".concat(s).concat(l).concat(u));return"search?tags=".concat(p).concat(c).concat(d).concat(f)}(_))}),[_]);var R=function(){return{dataSourceType:s,expr:d,queryType:"trace-search",limit:_.limit,name:n,id:r,open:!0,direction:"forward",dataSourceId:a,url:"".concat(c,"/api/").concat(M)}},O=function(e,n){var t,r=(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)||"";I((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,B.Z)({},n,r))})),p(R())};return(0,ze.jsx)("div",{className:(0,Ve.cx)(nZ),children:(0,ze.jsxs)("div",{className:(0,Ve.cx)(tZ),children:[(0,ze.jsx)(dZ,(0,l.Z)((0,l.Z)({},e),{},{defaultValue:"",label:"Service Name",options:h,onSelectChange:function(e){var n=(null===e||void 0===e?void 0:e.value)||"";y({name:n,value:n,label:n}),I((function(e){return(0,l.Z)((0,l.Z)({},e),{},{searchName:n})})),p(R())},labelWidth:iZ})),(0,ze.jsx)(dZ,(0,l.Z)((0,l.Z)({},e),{},{defaultValue:"",label:"Span Name",options:g,onSelectChange:function(e){var n=(null===e||void 0===e?void 0:e.value)||"";j({name:n,value:n,label:n}),I((function(e){return(0,l.Z)((0,l.Z)({},e),{},{name:n})})),p(R())},labelWidth:iZ})),(0,ze.jsx)(Iy.gN,{label:"Tags",placeholder:"http.status_code=200 error=true",onChange:function(e){return O(e,"tags")},value:o().sanitize(_.tags),labelWidth:iZ}),(0,ze.jsx)(Iy.gN,{label:"Limit",placeholder:"Set limit, default 20",onChange:function(e){return O(e,"limit")},value:o().sanitize(String(_.limit)),labelWidth:iZ}),(0,ze.jsx)(Iy.gN,{label:"Min Duration",placeholder:"e.g. 1.2s, 100ms",onChange:function(e){return O(e,"minDuration")},value:o().sanitize(_.minDuration),labelWidth:iZ}),(0,ze.jsx)(Iy.gN,{label:"Max Duration",placeholder:"e.g. 1.2s, 100ms",onChange:function(e){return O(e,"maxDuration")},value:o().sanitize(_.maxDuration),labelWidth:iZ}),(0,ze.jsx)("button",{className:(0,Ve.cx)(rZ(k)),onClick:function(){c&&""!==c&&v(Cn(s,d,"trace-search",_.limit,n,r,"forward",a,"".concat(c,"/api/").concat(M)))},children:"Search Traces"})]})})}var pZ=(0,Ve.iv)(sZ||(sZ=(0,r.Z)(["\n    display: flex;\n    height:30px;\n"]))),vZ=[{label:"Search",value:"search"},{label:"TraceID",value:"traceId"}];function hZ(e){var n=e.value,t=e.onChange,r=(0,f.useState)(n||"traceId"),i=(0,u.Z)(r,2),a=i[0],o=i[1];return(0,ze.jsx)("div",{className:(0,Ve.cx)(pZ),children:(0,ze.jsx)(Hb,{label:"Query Type",options:vZ,onChange:function(e){o((function(n){return e})),t(e)},defaultActive:a})})}function gZ(e,n,t,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",a=(0,f.useState)(!1),o=(0,u.Z)(a,2),l=o[0],s=o[1],c=(0,f.useState)([]),d=(0,u.Z)(c,2),p=d[0],v=d[1],h=(0,vr.mm)(n),g=(0,vr.uk)(t),m=(0,vr.qX)(e,r,i),x=(0,f.useMemo)((function(){return(0,Dy.Bp)(m.url,h,g)}),[m.url,h,g]);return(0,f.useEffect)((function(){(0,Dy.jY)(m,x,s,v)}),[m]),{loading:l,logsResponse:(0,f.useMemo)((function(){var e,n,t;return null!==p&&void 0!==p&&null!==(e=p.data)&&void 0!==e&&e.data&&Array.isArray(null===p||void 0===p||null===(n=p.data)||void 0===n?void 0:n.data)?null===(t=p.data.data)||void 0===t?void 0:t.map((function(e){return{label:e,value:e}})):[{label:"",value:""}]}),[p])}}var mZ,xZ,bZ,yZ=t(81400),ZZ=t(23860),wZ=t(24754),SZ=t.n(wZ),jZ=t(64664),kZ=t(31852),CZ=function(e){return(0,Ve.iv)(mZ||(mZ=(0,r.Z)(["\n    display: flex;\n    flex-direction: column;\n    .operation-header {\n        background: ",";\n        color: ",";\n        padding: 0px 8px;\n        border-bottom: 1px solid ",";\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        height: 28px;\n        span {\n            //  font-weight: bold;\n            font-size: 12px;\n        }\n        .operation-tools {\n            display: none;\n            align-items: center;\n        }\n        &:hover .operation-tools {\n            display: flex;\n        }\n    }\n    .operation-body {\n        padding: 8px;\n    }\n"])),e.viewBg,e.textColor,e.buttonBorder)},TZ=function(e){return(0,Ve.iv)(xZ||(xZ=(0,r.Z)(["\n    display: flex;\n    flex-direction: column;\n    gap: 3px;\n    .input-group {\n        display: flex;\n        align-items: center;\n        gap: 3px;\n        justify-content: space-between;\n    }\n    .col {\n        flex-direction: column;\n    }\n    .end {\n        justify-content: flex-end;\n    }\n    .wrap {\n        display: table;\n    }\n    label {\n        font-size: 12px;\n        color: ",";\n    }\n    input {\n        height: 26px;\n        color: ",";\n        background: ",";\n        border: 1px solid ",";\n        border-radius: 3px;\n        padding: 0px 6px;\n        max-width: 100px;\n        &.checkbox {\n            font-size: 12px;\n            height: 12px;\n        }\n    }\n\n    select {\n        height: 26px;\n        color: ",";\n        background: ",";\n        border: 1px solid ",";\n        border-radius: 3px;\n        padding: 0px 6px;\n    }\n    button {\n        height: 26px;\n        color: ",";\n        background: ",";\n        border: 1px solid ",";\n        border-radius: 3px;\n        padding: 4px 8px;\n        cursor: pointer;\n        font-size: 12px;\n    }\n\n    .binary-operation-bar {\n        display: flex;\n        align-items: center;\n        justify-content: space-between;\n        background: ",";\n        border-radius: 3px;\n        padding: 6px;\n        .binary-operation-cont {\n            display: flex;\n            align-items: center;\n            gap: 6px;\n        }\n    }\n"])),e.textColor,e.textColor,e.inputBg,e.buttonBorder,e.textColor,e.inputBg,e.buttonBorder,e.textColor,e.inputBg,e.buttonBorder,e.widgetContainer)},_Z=(0,Ve.iv)(bZ||(bZ=(0,r.Z)(["\n    margin: 0px;\n    padding: 0px;\n    height: 12px;\n    width: 12px;\n    cursor: pointer;\n"]))),IZ=function(e){var n=e.initial,t=e.onChange,r=(0,f.useMemo)((function(){var e;return null===(e=["$__interval","1m","5m","10m","1h","24h"])||void 0===e?void 0:e.map((function(e){return{name:e,value:e}}))}),[]);return(0,ze.jsx)("select",{defaultValue:n,onChange:t,children:r.map((function(e,n){return(0,ze.jsx)("option",{value:e.value,children:e.name},n)}))})},DZ=function(e){var n=e.initial,t=e.onChange,r=(0,f.useMemo)((function(){var e;return null===(e=["0.25","0.5","0.75","0.9","0.99"])||void 0===e?void 0:e.map((function(e){return{name:e,value:e}}))}),[]);return(0,ze.jsx)("select",{defaultValue:n,onChange:t,children:r.map((function(e,n){return(0,ze.jsx)("option",{value:e.value,children:e.name},n)}))})},NZ=function(e){var n=e.initial,t=e.onChange,r=e.opts;return(0,ze.jsx)("select",{defaultValue:n,onChange:t,children:r.map((function(e,n){return(0,ze.jsx)("option",{value:e.value,children:e.name},n)}))})},MZ=function(e){var n=e.initial,t=e.onChange,r=(0,f.useMemo)((function(){var e;return null===(e=["duration","duration_seconds","bytes",""])||void 0===e?void 0:e.map((function(e){return{name:e,value:e}}))}),[]);return(0,ze.jsx)("select",{defaultValue:n,onChange:t,children:r.map((function(e,n){return(0,ze.jsx)("option",{value:e.value,children:e.name},n)}))})},EZ=function(e){var n=e.initial,t=e.onChange,r=e.labels,i=(0,f.useMemo)((function(){return(null===r||void 0===r?void 0:r.map((function(e){return{name:e,value:e}})))||[{name:"Select Label",value:""}]}),[]);return(0,ze.jsx)("select",{defaultValue:n,onChange:t,children:i.map((function(e,n){return(0,ze.jsx)("option",{value:e.value,children:e.name},n)}))})};function RZ(e){var n,t={};if((null===e||void 0===e||null===(n=e.headers)||void 0===n?void 0:n.length)>0){var r,i=(0,s.Z)(e.headers);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=(0,B.Z)({},String(a.header),a.value);t=(0,l.Z)((0,l.Z)({},t),o)}}catch(u){i.e(u)}finally{i.f()}}return t}var OZ=function(e){var n,t=RZ(e),r={headers:(0,l.Z)((0,l.Z)({},t),{},{"Content-Type":"application/json"})},i={};if(null===e||void 0===e||null===(n=e.auth)||void 0===n?void 0:n.basicAuth.value){var a,o,u,c=null===e||void 0===e||null===(a=e.auth)||void 0===a||null===(o=a.fields)||void 0===o?void 0:o.basicAuth,d=(0,s.Z)(c);try{for(d.s();!(u=d.n()).done;){var f=u.value;"user"===f.name&&(i.username=f.value),"password"===f.name&&(i.password=f.value)}}catch(p){d.e(p)}finally{d.f()}}return{basicAuth:i,options:r,headers:(0,l.Z)((0,l.Z)({},t),{},{"Content-Type":"application/json"})}},LZ=function(){var e=(0,F.Z)((0,z.Z)().mark((function e(n,t,r,i,a){var o,s;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.prev=1,o=(0,l.Z)((0,l.Z)({},t),{},{auth:r}),e.next=5,P.Z.get(n,o);case 5:(s=e.sent)&&a(s||[]),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),console.error("Error fetching labels"),console.error(e.t0);case 13:i(!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(n,t,r,i,a){return e.apply(this,arguments)}}();function VZ(){return(VZ=(0,F.Z)((0,z.Z)().mark((function e(n,t,r,i){var a,o,l;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.url||""===n.url){e.next=4;break}return a=OZ(n),o=a.basicAuth,l=a.options,e.next=4,LZ(t,l,o,r,i);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var zZ,FZ,BZ,HZ,PZ,qZ,AZ,QZ,WZ,UZ,JZ,GZ=function(e){return(0,f.useMemo)((function(){return e.getTime()+"000000"}),[e])},KZ=function(e,n,t,r){return(0,f.useMemo)((function(){return function(e,n,t,r){return"".concat(e).concat("/loki/api/v1/series?match").concat(encodeURIComponent("[]"),"=").concat(encodeURIComponent(n),"&start=").concat(t,"&end=").concat(r)}(e,n,t,r)}),[e,t,r,n])},YZ=function(e){return(0,f.useMemo)((function(){var n,t,r,i;return null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.data&&Array.isArray(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.data)&&(null===e||void 0===e||null===(r=e.data)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.length)>0?function(e){var n;return Array.from(new Set(null===(n=e.map((function(e){return Object.keys(e)})))||void 0===n?void 0:n.flat()))}(e.data.data):[]}),[e])},XZ=function(e,n){return(0,f.useMemo)((function(){var e;return null!==n&&void 0!==n&&n.labelOpts&&(null===(e=n.labelOpts)||void 0===e?void 0:e.filter((function(e){return"__name__"!==e})))||[]}),[e,n])},$Z=function(e){var n=e.setOperations,t=e.id,r=(0,vr.Fg)(),i=(0,f.useState)([]),a=(0,u.Z)(i,2),l=a[0],s=a[1],c=(0,f.useCallback)((function(e,r){s((function(n){var t,i=(0,H.Z)(n);return i[r]=null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value,i})),n((function(n){var i=(0,H.Z)(n);return null===i||void 0===i?void 0:i.map((function(n){return n.id===t?(n.expressions[r]=e.target.value,n):n}))}))}),[]);return(0,ze.jsxs)("div",{className:(0,Ve.cx)(TZ(r)),children:[Array.isArray(l)&&(null===l||void 0===l?void 0:l.length)>0?null===l||void 0===l?void 0:l.map((function(e,r){return(0,ze.jsxs)("div",{className:"input-group",children:[" ",(0,ze.jsx)("input",{className:"expression-input",value:o().sanitize(e),onChange:function(e){return c(e,r)}})," ",(0,ze.jsx)("button",{onClick:function(e){return function(e,r){s((function(e){var n=(0,H.Z)(e);return null===n||void 0===n?void 0:n.filter((function(e,n){return n!==r}))})),n((function(e){var n=(0,H.Z)(e);return null===n||void 0===n?void 0:n.map((function(e){var n;return e.id===t?(e.expressions=null===(n=(0,H.Z)(null===e||void 0===e?void 0:e.expressions))||void 0===n?void 0:n.filter((function(e,n){return n!==r})),e):e}))}))}(0,r)},children:"x"})," "]},r)})):null,(0,ze.jsx)("button",{onClick:function(){s((function(e){return[].concat((0,H.Z)(e),[""])})),n((function(e){var n=(0,H.Z)(e);return null===n||void 0===n?void 0:n.map((function(e){return e.id===t?(e.expressions=[].concat((0,H.Z)(e.expressions),[""]),e):e}))}))},children:"Add Expression"})]})},ew=function(e){var n=e.setOperations,t=e.id,r=(0,f.useState)(""),i=(0,u.Z)(r,2),a=i[0],l=i[1],s=(0,vr.Fg)(),c=(0,f.useCallback)((function(e){l(e.target.value),n((function(n){var r=(0,H.Z)(n);return null===r||void 0===r?void 0:r.map((function(n){return n.id===t?(n.expressions[0]=e.target.value,n):n}))}))}),[a]);return(0,ze.jsx)("div",{className:(0,Ve.cx)(TZ(s)),children:(0,ze.jsx)("input",{value:o().sanitize(a),placeholder:"<pattern|expression>",onChange:c})})},nw=function(e){var n=e.setOperations,t=e.id,r=(0,vr.Fg)(),i=(0,f.useState)(""),a=(0,u.Z)(i,2),l=a[0],s=a[1],c=(0,f.useCallback)((function(e){s(e.target.value),n((function(n){var r=(0,H.Z)(n);return null===r||void 0===r?void 0:r.map((function(n){return n.id===t?(n.labelValue=e.target.value,n):n}))}))}),[l]),d=(0,f.useCallback)((function(e){n((function(n){var r=(0,H.Z)(n);return null===r||void 0===r?void 0:r.map((function(n){return n.id===t?(n.conversion_function=e.target.value,n):n}))}))}),[]);return(0,ze.jsxs)("div",{className:(0,Ve.cx)(TZ(r)),children:[(0,ze.jsx)("input",{value:o().sanitize(l),placeholder:"Unrap Label",onChange:c}),(0,ze.jsx)(MZ,{initial:"",onChange:d,className:"expression-input"})]})},tw=function(e){var n=e.setOperations,t=e.id,r=(0,f.useState)(""),i=(0,u.Z)(r,2),a=i[0],l=i[1],s=(0,vr.Fg)(),c=(0,f.useCallback)((function(e){l(e.target.value),n((function(n){var r=(0,H.Z)(n);return null===r||void 0===r?void 0:r.map((function(n){return n.id===t?(n.expressions[0]=e.target.value,n):n}))}))}),[a]);return(0,ze.jsx)("div",{className:(0,Ve.cx)(TZ(s)),children:(0,ze.jsx)("input",{value:o().sanitize(a),placeholder:"<re>",onChange:c})})},rw=function(e){var n=e.setOperations,t=e.id,r=(0,f.useState)(""),i=(0,u.Z)(r,2),a=i[0],l=i[1],s=(0,vr.Fg)(),c=(0,f.useCallback)((function(e){l(e.target.value),n((function(n){var r=(0,H.Z)(n);return null===r||void 0===r?void 0:r.map((function(n){return n.id===t?(n.expressions[0]=e.target.value,n):n}))}))}),[a]);return(0,ze.jsx)("div",{className:(0,Ve.cx)(TZ(s)),children:(0,ze.jsx)("input",{value:o().sanitize(a),placeholder:"{{.status_code}}",onChange:c})})},iw=function(e){var n=e.setOperations,t=e.id,r=(0,f.useState)("1"),i=(0,u.Z)(r,2),a=i[0],l=i[1],s=(0,f.useState)("1"),c=(0,u.Z)(s,2),d=c[0],p=c[1],v=(0,vr.Fg)();return(0,f.useEffect)((function(){var e=[a,d].join(",");n((function(n){var r=(0,H.Z)(n);return null===r||void 0===r?void 0:r.map((function(n){return n.id===t?(n.after_args=","+e,n):n}))}))}),[a,d]),(0,ze.jsxs)("div",{className:(0,Ve.cx)(TZ(v)),children:[(0,ze.jsxs)("div",{className:"input-group",children:[(0,ze.jsx)("label",{children:"Minimum Scalar"}),(0,ze.jsx)("input",{value:o().sanitize(a),placeholder:"1",onChange:function(e){l((function(n){return e.target.value}))}})]}),(0,ze.jsxs)("div",{className:"input-group",children:[(0,ze.jsx)("label",{children:"Maximum Scalar"}),(0,ze.jsx)("input",{value:o().sanitize(d),placeholder:"1",onChange:function(e){p((function(n){return e.target.value}))}})]})]})},aw=function(e){var n=e.setOperations,t=e.id,r=(0,f.useState)("1"),i=(0,u.Z)(r,2),a=i[0],l=i[1],s=(0,vr.Fg)();return(0,f.useEffect)((function(){var e=[a].join(",");n((function(n){var r=(0,H.Z)(n);return null===r||void 0===r?void 0:r.map((function(n){return n.id===t?(n.after_args=","+e,n):n}))}))}),[a]),(0,ze.jsx)("div",{className:(0,Ve.cx)(TZ(s)),children:(0,ze.jsxs)("div",{children:[(0,ze.jsx)("label",{children:"Minimum Scalar"}),(0,ze.jsx)("input",{value:o().sanitize(a),placeholder:"1",onChange:function(e){l((function(n){return e.target.value}))}})]})})},ow=function(e){var n=e.setOperations,t=e.id,r=(0,f.useState)("1"),i=(0,u.Z)(r,2),a=i[0],l=i[1],s=(0,vr.Fg)();return(0,f.useEffect)((function(){var e=[a].join(",");n((function(n){var r=(0,H.Z)(n);return null===r||void 0===r?void 0:r.map((function(n){return n.id===t?(n.after_args=","+e,n):n}))}))}),[a]),(0,ze.jsx)("div",{className:(0,Ve.cx)(TZ(s)),children:(0,ze.jsxs)("div",{children:[(0,ze.jsx)("label",{children:"Maximum Scalar"}),(0,ze.jsx)("input",{value:o().sanitize(a),placeholder:"1",onChange:function(e){l((function(n){return e.target.value}))}})]})})},lw=function(e){var n=e.setOperations,t=e.id,r=(0,f.useState)("1"),i=(0,u.Z)(r,2),a=i[0],l=i[1],s=(0,vr.Fg)();return(0,f.useEffect)((function(){n((function(e){var n=(0,H.Z)(e);return null===n||void 0===n?void 0:n.map((function(e){return e.id===t?(e.prev_args=a+", ",e):e}))}))}),[a]),(0,ze.jsx)("div",{className:(0,Ve.cx)(TZ(s)),children:(0,ze.jsxs)("div",{children:[(0,ze.jsx)("label",{children:"Quantile"}),(0,ze.jsx)("input",{value:o().sanitize(a),placeholder:"1",onChange:function(e){l((function(){return e.target.value}))}})]})})},sw=function(e){var n=e.setOperations,t=e.id,r=(0,f.useState)("1"),i=(0,u.Z)(r,2),a=i[0],l=i[1],s=(0,vr.Fg)();return(0,f.useEffect)((function(){n((function(e){var n=(0,H.Z)(e);return null===n||void 0===n?void 0:n.map((function(e){return e.id===t?(e.after_args=","+a,e):e}))}))}),[a]),(0,ze.jsx)("div",{className:(0,Ve.cx)(TZ(s)),children:(0,ze.jsxs)("div",{children:[(0,ze.jsx)("label",{children:"Nearest Scalar"}),(0,ze.jsx)("input",{value:o().sanitize(a),placeholder:"1",onChange:function(e){l((function(n){return e.target.value}))}})]})})},uw=function(e){var n=e.setOperations,t=e.id,r=(0,f.useState)(""),i=(0,u.Z)(r,2),a=i[0],l=i[1],s=(0,f.useState)("$1"),c=(0,u.Z)(s,2),d=c[0],p=c[1],v=(0,f.useState)(""),h=(0,u.Z)(v,2),g=h[0],m=h[1],x=(0,f.useState)("(.*)"),b=(0,u.Z)(x,2),y=b[0],Z=b[1],w=(0,vr.Fg)();return(0,f.useEffect)((function(){n((function(e){var n=(0,H.Z)(e);return null===n||void 0===n?void 0:n.map((function(e){return e.id===t?(e.after_args=', "'+a+'", "'+d+'", "'+g+'", "'+y+'"',e):e}))}))}),[a,d,g,y]),(0,ze.jsxs)("div",{className:(0,Ve.cx)(TZ(w)),children:[(0,ze.jsxs)("div",{className:"input-group",children:[(0,ze.jsx)("label",{children:"Destination Label"}),(0,ze.jsx)("input",{value:o().sanitize(a),placeholder:a,onChange:function(e){l(e.target.value)}})]}),(0,ze.jsxs)("div",{className:"input-group",children:[(0,ze.jsx)("label",{children:"Replacement"}),(0,ze.jsx)("input",{value:o().sanitize(d),placeholder:d,onChange:function(e){p(e.target.value)}})]}),(0,ze.jsxs)("div",{className:"input-group",children:[(0,ze.jsx)("label",{children:"Source Label"}),(0,ze.jsx)("input",{value:o().sanitize(g),placeholder:g,onChange:function(e){m(e.target.value)}})]}),(0,ze.jsxs)("div",{className:"input-group",children:[(0,ze.jsx)("label",{children:"Regex"}),(0,ze.jsx)("input",{value:o().sanitize(y),placeholder:y,onChange:function(e){Z(e.target.value)}})]})]})},cw=function(e){return(0,ze.jsx)(ze.Fragment,{})},dw=function(e){var n=e.setOperations,t=e.id,r=(0,f.useState)(e.range),i=(0,u.Z)(r,2),a=i[0],o=i[1],l=(0,vr.Fg)(),s=(0,f.useCallback)((function(e){var r=e.target.value;o(r),n((function(e){var n=(0,H.Z)(e);return null===n||void 0===n?void 0:n.map((function(e){return e.id===t?(e.range=r,e):e}))}))}),[a]);return(0,ze.jsx)("div",{className:(0,Ve.cx)(TZ(l)),children:(0,ze.jsx)(IZ,{onChange:s,initial:a})})},fw=function(e){var n=e.setOperations,t=e.id,r=(0,f.useState)(e.quantile),i=(0,u.Z)(r,1)[0];(0,f.useEffect)((function(){n((function(n){var r=(0,H.Z)(n);return null===r||void 0===r?void 0:r.map((function(n){return n.id===t?(n.prev_args="".concat(e.quantile,","),n):n}))}))}),[e.quantile]);var a=(0,vr.Fg)(),o=(0,f.useCallback)((function(e){var r=e.target.value;n((function(e){var n=(0,H.Z)(e);return null===n||void 0===n?void 0:n.map((function(e){return e.id===t?(e.quantile=r,e):e}))}))}),[i]);return(0,ze.jsx)("div",{className:(0,Ve.cx)(TZ(a)),children:(0,ze.jsx)(DZ,{onChange:o,initial:e.quantile})})},pw=function(e){var n=e.setOperations,t=e.id,r=XZ(t,e),i=(0,f.useState)(""),a=(0,u.Z)(i,2),l=a[0],s=a[1],c=(0,f.useState)(e.labels||[""]),d=(0,u.Z)(c,2),p=d[0],v=d[1],h=(0,f.useState)(","),g=(0,u.Z)(h,2),m=g[0],x=g[1],b=(0,vr.Fg)(),y=(0,f.useCallback)((function(e,n){v((function(e){var t=(0,H.Z)(e);return null===t||void 0===t?void 0:t.filter((function(e,t){return t!==n}))}))}),[p]);return(0,f.useEffect)((function(){var e=p.join('"'+m+'"');n((function(n){var r=(0,H.Z)(n);return null===r||void 0===r?void 0:r.map((function(n){return n.id===t?(n.after_args=', "'+l+'", "'+m+'", "'+e+'"',n):n}))}))}),[l,p,m]),(0,ze.jsxs)("div",{className:(0,Ve.cx)(TZ(b)),children:[(0,ze.jsxs)("div",{className:"input-group",children:[(0,ze.jsx)("label",{children:"Destination Label"}),(0,ze.jsx)(EZ,{initial:"",onChange:function(e){s((function(){return e.target.value}))},className:"expression-input",labels:r})]}),(0,ze.jsxs)("div",{className:"input-group",children:[(0,ze.jsx)("label",{children:"Replacement"}),(0,ze.jsx)("input",{value:o().sanitize(m),placeholder:m,onChange:function(e){x((function(){return e.target.value}))}})]}),(0,ze.jsx)("div",{className:"input-group col",children:null===p||void 0===p?void 0:p.map((function(e,n){return(0,ze.jsxs)("div",{className:"input-group",children:[(0,ze.jsx)("label",{children:"Source Label"}),(0,ze.jsx)(EZ,{initial:"",onChange:function(e){return function(e,n){v((function(t){var r,i=(0,H.Z)(t);return i[n]=null===e||void 0===e||null===(r=e.target)||void 0===r?void 0:r.value,i}))}(e,n)},className:"expression-input",labels:r}),(0,ze.jsx)("button",{onClick:function(e){return y(e,n)},children:"x"})," "]},n)}))}),(0,ze.jsx)("div",{className:"input-group end",children:(0,ze.jsx)("button",{onClick:function(e){v((function(e){return[].concat((0,H.Z)(e),[""])}))},children:"+ Add Source Label"})})]})},vw=function(e){var n=e.setOperations,t=e.id,r=XZ(t,e),i=(0,f.useState)(e.labels||[]),a=(0,u.Z)(i,2),l=a[0],s=a[1],c=(0,f.useState)(e.range),d=(0,u.Z)(c,2),p=d[0],v=d[1],h=(0,f.useState)(e.quantile),g=(0,u.Z)(h,2),m=g[0],x=g[1],b=(0,vr.Fg)(),y=(0,f.useCallback)((function(e,r){s((function(e){var n=(0,H.Z)(e);return null===n||void 0===n?void 0:n.filter((function(e,n){return n!==r}))})),n((function(e){var n=(0,H.Z)(e);return null===n||void 0===n?void 0:n.map((function(e){var n;return e.id===t?(e.labels=null===(n=(0,H.Z)(null===e||void 0===e?void 0:e.labels))||void 0===n?void 0:n.filter((function(e,n){return n!==r})),e):e}))}))}),[l]),Z=(0,f.useCallback)((function(e,r){s((function(n){var t,i=(0,H.Z)(n);return i[r]=null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value,i})),n((function(n){var i=(0,H.Z)(n);return null===i||void 0===i?void 0:i.map((function(n){return n.id===t?(n.labels[r]=e.target.value,n):n}))}))}),[l]),w=(0,f.useCallback)((function(e){var r=e.target.value;x(r),n((function(e){var n=(0,H.Z)(e);return null===n||void 0===n?void 0:n.map((function(e){return e.id===t?(e.quantile=r,e):e}))}))}),[p]),S=(0,f.useCallback)((function(e){var r=e.target.value;v(r),n((function(e){var n=(0,H.Z)(e);return null===n||void 0===n?void 0:n.map((function(e){return e.id===t?(e.range=r,e):e}))}))}),[p]);return(0,ze.jsxs)("div",{className:(0,Ve.cx)(TZ(b)),children:[Array.isArray(l)&&(null===l||void 0===l?void 0:l.length)>0?null===l||void 0===l?void 0:l.map((function(e,n){return(0,ze.jsxs)("div",{className:"input-group",children:[(0,ze.jsx)(EZ,{initial:"",onChange:function(e){return Z(e,n)},className:"expression-input",labels:r}),(0,ze.jsx)("button",{onClick:function(e){return y(e,n)},children:"x"})," "]},n)})):null,"Quantile Over Time"===e.header&&(0,ze.jsx)("input",{onChange:w,value:o().sanitize(m)}),(0,ze.jsx)("button",{onClick:function(e){s((function(e){return[].concat((0,H.Z)(e),[""])}))},children:"Add Label"}),(0,ze.jsx)(IZ,{onChange:S,initial:p})]})},hw=function(e){var n,t=e.setOperations,r=e.id,i=e.aggrType,a=XZ(r,e),l=(0,f.useState)([""]),s=(0,u.Z)(l,2),c=s[0],d=s[1],p=(0,f.useState)(e.kValue||[]),v=(0,u.Z)(p,2),h=v[0],g=v[1],m=(0,vr.Fg)(),x=(0,f.useCallback)((function(e,n){d((function(e){var t=(0,H.Z)(e);return null===t||void 0===t?void 0:t.filter((function(e,t){return t!==n}))})),t((function(e){var t=(0,H.Z)(e);return null===t||void 0===t?void 0:t.map((function(e){var t;return e.id===r?(e.labels=null===(t=(0,H.Z)(null===e||void 0===e?void 0:e.labels))||void 0===t?void 0:t.filter((function(e,t){return t!==n})),e):e}))}))}),[c]),b=(0,f.useCallback)((function(e,n){d((function(t){var r,i=(0,H.Z)(t);return i[n]=null===e||void 0===e||null===(r=e.target)||void 0===r?void 0:r.value,i})),t((function(t){var i=(0,H.Z)(t);return null===i||void 0===i?void 0:i.map((function(t){return t.id===r?(t.labels[n]=e.target.value,t):t}))}))}),[c]),y=(0,f.useCallback)((function(e){g(e.target.value),t((function(n){var t=(0,H.Z)(n);return null===t||void 0===t?void 0:t.map((function(n){return n.id===r?(n.kValue=e.target.value,n):n}))}))}),[h]);return(0,ze.jsxs)("div",{className:(0,Ve.cx)(TZ(m)),children:[(n=i,("topk"===n||"bottomk"===n)&&(0,ze.jsx)("input",{type:"number",value:o().sanitize(String(h)),placeholder:"<pattern|expression>",onChange:y})),Array.isArray(c)&&(null===c||void 0===c?void 0:c.length)>0?null===c||void 0===c?void 0:c.map((function(e,n){return(0,ze.jsxs)("div",{className:"input-group",children:[(0,ze.jsx)(EZ,{initial:"",onChange:function(e){return b(e,n)},className:"expression-input",labels:a}),(0,ze.jsx)("button",{onClick:function(e){return x(e,n)},children:"x"})," "]},n)})):null,(0,ze.jsx)("button",{onClick:function(e){d((function(e){return[].concat((0,H.Z)(e),[""])})),t((function(e){var n=(0,H.Z)(e);return null===n||void 0===n?void 0:n.map((function(e){return e.id===r?(e.labels=(0,H.Z)(c),e):e}))}))},children:"Add Label"})]})},gw=function(e){var n=e.setOperations,t=e.id,r=(0,f.useState)({label:"",operator:"equals",value:""}),i=(0,u.Z)(r,2),a=i[0],s=i[1],c=(0,vr.Fg)(),d=(0,f.useMemo)((function(){return[{name:"=",value:"equals"},{name:"!=",value:"not_equals"},{name:"=~",value:"regex_equals"},{name:"!~",value:"regex_not_equals"},{name:">",value:"more"},{name:"<",value:"less"},{name:">=",value:"more_equals"},{name:"<=",value:"less_equals"}]}),[]);(0,f.useEffect)((function(){n((function(e){var n=(0,H.Z)(e);return null===n||void 0===n?void 0:n.map((function(e){return e.id===t?(e.labelFilter=(0,l.Z)({},a),e):e}))}))}),[a]);var p=(0,f.useCallback)((function(e,n){s((function(t){return(0,l.Z)((0,l.Z)({},t),{},(0,B.Z)({},n,e.target.value))}))}),[]);return"No Pipeline Errors"!==e.header?(0,ze.jsxs)("div",{className:(0,Ve.cx)(TZ(c)),children:[(0,ze.jsx)("input",{value:o().sanitize(a.label),placeholder:"Text Filter",onChange:function(e){return p(e,"label")}}),(0,ze.jsx)("select",{defaultValue:"equals",onChange:function(e){return p(e,"operator")},children:d.map((function(e,n){return(0,ze.jsx)("option",{value:o().sanitize(e.value),children:e.name},n)}))}),(0,ze.jsx)("input",{value:o().sanitize(a.value),placeholder:"Text Filter",onChange:function(e){return p(e,"value")}})]}):null},mw=function(e){var n=e.setOperations,t=e.id,r=e.binaryOperation,i=(0,vr.Fg)(),a=(0,f.useState)(r||{value:0,bool:!1}),s=(0,u.Z)(a,2),c=s[0],d=s[1],p=(0,f.useCallback)((function(e,r){var i="value"===r?e.target.value:!!e.target.checked;d((function(e){return(0,l.Z)((0,l.Z)({},e),{},(0,B.Z)({},r,i))})),n((function(e){var n=(0,H.Z)(e);return null===n||void 0===n?void 0:n.map((function(e){return e.id===t?(e.binaryOperation=(0,l.Z)((0,l.Z)({},e.binaryOperation),{},(0,B.Z)({},r,i)),e):e}))}))}),[c]);return(0,ze.jsxs)("div",{className:(0,Ve.cx)(TZ(i)),children:[(0,ze.jsx)("input",{value:o().sanitize(c.value),placeholder:"Value",onChange:function(e){return p(e,"value")}}),(0,ze.jsxs)("div",{className:"input-group",children:[(0,ze.jsx)("label",{children:"Boolean"}),(0,ze.jsx)("input",{type:"checkbox",className:"checkbox",checked:c.bool||!1,value:o().sanitize("Boolean"),onChange:function(e){return p(e,"bool")}})]})]})},xw=function(e){var n=e.setOperations,t=e.id,r=(0,f.useState)(""),i=(0,u.Z)(r,2),a=i[0],l=i[1],s=(0,vr.Fg)(),c=(0,f.useCallback)((function(e){l(e.target.value),n((function(n){var r=(0,H.Z)(n);return null===r||void 0===r?void 0:r.map((function(n){return n.id===t?(n.filterText=e.target.value,n):n}))}))}),[t,n]);return(0,ze.jsx)("div",{className:(0,Ve.cx)(TZ(s)),children:(0,ze.jsx)("input",{value:o().sanitize(a),placeholder:"Text Filter",onChange:c})})},bw=["rate","rate_counter","count_over_time","sum_over_time","bytes_rate","bytes_over_time","absent_over_time"],yw=["avg_over_time","max_over_time","min_over_time","first_over_time","last_over_time","stdvar_over_time","stddev_over_time","quantile_over_time",""],Zw=["sum","min","max","avg","stddev","stdvar","count"],ww=["topk","bottomk"],Sw=function(e,n){return bw.includes(e)?(0,ze.jsx)(dw,(0,l.Z)({},n)):yw.includes(e)?(0,ze.jsx)(vw,(0,l.Z)({},n)):null},jw=function(e,n,t){switch(e){case"formats":return function(e,n){switch(e){case"json":return(0,ze.jsx)($Z,(0,l.Z)({},n));case"pattern":return(0,ze.jsx)(ew,(0,l.Z)({},n));case"regexp":return(0,ze.jsx)(tw,(0,l.Z)({},n));case"line_format":return(0,ze.jsx)(rw,(0,l.Z)({},n));case"unwrap":return(0,ze.jsx)(nw,(0,l.Z)({},n));default:return(0,ze.jsx)(cw,(0,l.Z)({},n))}}(n,t);case"range_functions":default:return Sw(n,t);case"aggregations":return function(e,n){return Zw.includes(e)||ww.includes(e)?(0,ze.jsx)(hw,(0,l.Z)((0,l.Z)({},n),{},{aggrType:e})):void 0}(n,t);case"line_filters":return(0,ze.jsx)(xw,(0,l.Z)({},t));case"label_filters":return(0,ze.jsx)(gw,(0,l.Z)({},t));case"binary_operations":return(0,ze.jsx)(mw,(0,l.Z)({},t));case"functions":return function(e,n){return"histogram_quantile"===e?(0,ze.jsx)(fw,(0,l.Z)({},n)):"clamp"===e?(0,ze.jsx)(iw,(0,l.Z)({},n)):"clamp_max"===e?(0,ze.jsx)(ow,(0,l.Z)({},n)):"clamp_min"===e?(0,ze.jsx)(aw,(0,l.Z)({},n)):"quantile"===e?(0,ze.jsx)(lw,(0,l.Z)({},n)):"round"===e?(0,ze.jsx)(sw,(0,l.Z)({},n)):"label_replace"===e?(0,ze.jsx)(uw,(0,l.Z)({},n)):"label_join"===e?(0,ze.jsx)(pw,(0,l.Z)({},n)):Sw(e,n)}(n,t)}},kw=t(3860),Cw=t(32519),Tw=t(70042),_w=t(38499),Iw=(t(22252),t(63185),t(41434)),Dw=(0,Ve.F4)(zZ||(zZ=(0,r.Z)(["\n  from {\n    opacity: 0;\n  }\n"]))),Nw=(0,Ve.F4)(FZ||(FZ=(0,r.Z)(["\n  to {\n    opacity: 0;\n  }\n"]))),Mw=((0,Ve.iv)(PZ||(PZ=(0,r.Z)(["\n    display: flex;\n    flex: 1;\n    align-items: center;\n    justify-content: space-between;\n"]))),function(e){return(0,Ve.iv)(qZ||(qZ=(0,r.Z)(["\n    background: ",";\n    color: ",";\n    border: 1px solid ",";\n    border-radius: 3px;\n    padding: 6px;\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n    margin-top:4px;\n    margin: 3px;\n"])),e.inputBg,e.textColor,e.buttonBorder)}),Ew=(0,Ve.iv)(AZ||(AZ=(0,r.Z)(["\n    animation: "," 0.15s ease-out;\n"])),Dw),Rw=(0,Ve.iv)(QZ||(QZ=(0,r.Z)(["\n    animation: "," 0.2s ease-out forwards;\n"])),Nw),Ow=function(e,n){var t=e.hover;e.disabled;return Ls()(function(e){return(0,Ve.iv)(WZ||(WZ=(0,r.Z)(["\n    // color:white;\n    background: "," !important;\n    color: "," !important;\n    border-radius: 3px;\n    padding: 0.275rem 0.525rem;\n    &:hover {\n        background: "," !important;\n    }\n"])),e.inputBg,e.textColor,e.widgetContainer)}(n),(0,B.Z)({},function(e){return(0,Ve.iv)(UZ||(UZ=(0,r.Z)(["\n    //  color: white !important;\n    color: ",";\n    background: "," !important;\n"])),e.textColor,e.widgetContainer)}(n),t))},Lw=function(e,n){return Ls()(Ow(e,n),function(e){return(0,Ve.iv)(HZ||(HZ=(0,r.Z)(["\n    position: relative;\n    font-size: 12px;\n    color: "," !important;\n    background: "," !important;\n    &::after {\n        // content: <NavigateNextIcon/>;\n        position: absolute;\n        width: 4px;\n        right: 0.625rem;\n    }\n    &:hover {\n        background: "," !important;\n    }\n"])),e.textColor,e.inputBg,e.widgetContainer)}(n))},Vw=function(e,n){var t;return Ls()(function(e){return(0,Ve.iv)(BZ||(BZ=(0,r.Z)(["\n    font-family: sans-serif;\n    font-size: 12px;\n    user-select: none;\n    color: "," !important;\n    background: "," !important;\n    box-shadow: 1px 1px 20px 1px rgba(0, 0, 0, 0.1);\n    border-radius: 3px;\n    padding: 6px;\n    min-width: 10rem;\n"])),e.textColor,e.inputBg)}(n),(t={},(0,B.Z)(t,Ew,"opening"===e.state),(0,B.Z)(t,Rw,"closing"===e.state),t))},zw=function(e){var n=e.theme;return(0,ze.jsx)(kw.W,(0,l.Z)((0,l.Z)({},e),{},{menuClassName:function(e){return Vw(e,n)},itemProps:{className:function(e){return Lw(e,n)}}}))},Fw={Aggregations:["Sum","Min","Max","Avg","Stddev","Stdvar","Count","Topk","Bottomk"],"Range Functions":["Rate","Rate Counter","Count Over Time","Sum Over Time","Bytes Rate","Bytes Over Time","Absent Over Time","Avg Over Time","Max Over Time","Min Over Time","First Over Time","Last Over Time","Quantile Over Time"],Formats:["Json","Logfmt","Regexp","Pattern","Unpack","Line Format","Unwrap"],"Binary Operations":["Add Scalar","Subtract Scalar","Multiply by scalar","Divide by scalar","Modulo by scalar","Exponent","Equal To","Not Equal To","Greater Than","Less Than","Greater Or Equal To","Less Or Equal To","Binary Operation With Query"],"Label Filters":["Label Filter Expression","IP Label Filter Expression","No Pipeline Errors"],"Line Filters":["Line Contains","Line Does Not Contain","Line Contains Case Insensitive","Line Does Not Contain Case Insensitive","Line Contains Regex Match","Line Does Not Match Regex","IP Line Filter Expression","IP Line Not Filter Expression"],Trigonometric:["Acos","Acosh","Asin","Asinh","Atan","Atanh","Cos","Cosh","Sin","Sinh","Tan","Tanh"],"Time Functions":["Day Of Month","Day Of Week","Days In Month"],Functions:["Histogram Quantile","Label Replace","Ln","absent","Ceil","Clamp","Clamp max","Clamp min","Deg","Exp","Floor","Group","Hour","Label join","Log10","Log2","Minute","Pi","Quantile","Rad","Round","Scalar","Sgn","Sort","Sort desc","Sqrt","Stddev","Time","Timestamp","Vector","Year"]};var Bw=function(e){return(0,Ve.iv)(JZ||(JZ=(0,r.Z)(["\n    margin-bottom: 6px;\n    .szh-menu {\n        background: "," !important;\n        color: "," !important;\n    }\n    .szh-menu__item {\n        &:hover {\n            background: "," !important;\n        }\n    }\n"])),e.inputBg,e.textColor,e.widgetContainer)};function Hw(e){var n=e.menuClick,t=(0,f.useMemo)((function(){return Object.keys(Fw)}),[]),r=(0,vr.Fg)();return(0,ze.jsx)(Cw.v,{className:(0,Ve.cx)(Bw(r)),menuButton:(0,ze.jsxs)(Tw.j,{className:(0,Ve.cx)(Mw(r)),children:[" ",(0,ze.jsx)(Iw.Z,{style:{height:"13px",width:"13px"}}),(0,ze.jsx)("span",{style:{fontSize:"12px",fontFamily:"sans-serif"},children:"Add Operator"})]}),children:null===t||void 0===t?void 0:t.map((function(e,t){var i;return(0,ze.jsx)(zw,{label:e,theme:r,children:null===(i=Fw[e])||void 0===i?void 0:i.map((function(t,r){return(0,ze.jsx)(_w.s,{onClick:function(r){return n(r,t,e)},style:{fontSize:"12px"},children:t},r)}))},t)}))})}function Pw(e){var n,t=e.opType,r=e.onOperationSelect,i=(0,vr.Fg)();return(0,ze.jsx)(Cw.v,{className:(0,Ve.cx)(Bw(i)),menuButton:(0,ze.jsx)(ha.Z,{style:{height:"13px",width:"13px",margin:"0px 12px",cursor:"pointer"}}),children:null===(n=Fw[t])||void 0===n?void 0:n.map((function(e,n){return(0,ze.jsx)(_w.s,{onClick:function(n){return r(n,e)},style:{fontSize:"12px"},children:e},n)}))})}function qw(e){var n=e.id,t=e.opType,r=e.header,i=e.removeItem,a=e.index,o=e.setOperations,s=(0,vr.Fg)(),c=(0,f.useState)(r),d=(0,u.Z)(c,2),p=d[0],v=d[1];(0,f.useEffect)((function(){v(r)}),[r,v]);var h=(0,f.useCallback)((function(e,t){v(t),o((function(e){var r=(0,H.Z)(e);return null===r||void 0===r?void 0:r.map((function(e){return e.id===n?e=(0,l.Z)((0,l.Z)({},e),{},{header:t,name:t.toLowerCase().split(" ").join("_")}):e}))}))}),[p]),g=function(e){var n,t;return(null===e||void 0===e||null===(n=e.toLowerCase())||void 0===n||null===(t=n.split(" "))||void 0===t?void 0:t.join("_"))||""};return r&&"string"===typeof r?(0,ze.jsxs)("div",{className:(0,Ve.cx)(CZ(s)),children:[(0,ze.jsxs)("div",{className:"operation-header",children:[(0,ze.jsx)("span",{children:p}),(0,ze.jsxs)("div",{className:"operation-tools",children:[(0,ze.jsx)(Pw,{opType:t,onOperationSelect:h}),(0,ze.jsx)(xr.Z,{className:(0,Ve.cx)(_Z),onClick:function(e){return i(a)}})]})]}),(0,ze.jsx)("div",{className:"operation-body",children:jw(g(t),g(r),(0,l.Z)({},e))})]}):null}var Aw,Qw="card",Ww=function(e){return{border:"1px solid ".concat(e.buttonBorder),backgroundColor:"".concat(e.inputBg),fontSize:"12px",cursor:"move",display:"flex",margin:"4px",borderRadius:"3px"}},Uw=function(e){var n=e.id,t=e.header,r=e.rate,i=e.opType,a=e.index,o=e.body,s=e.moveItem,c=e.removeItem,d=e.kValue,p=e.quantile,v=e.labelFilter,h=e.filterText,g=e.lineFilter,m=e.conversion_function,x=e.labelValue,b=e.labelOpts,y=e.binaryOperation,Z=(0,f.useRef)(null),w=(0,vr.Fg)(),S=(0,jZ.L)({accept:Qw,collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,n){var t;if(Z.current){var r=e.index,i=a;if(r!==i){var o=null===(t=Z.current)||void 0===t?void 0:t.getBoundingClientRect(),l=(o.right-o.left)/2,u=n.getClientOffset().x-o.left;r<i&&u<l||r>i&&u>l||(s(r,i),e.index=i)}}}}),j=(0,u.Z)(S,2),k=j[0].handlerId,C=j[1],T=(0,kZ.c)({type:Qw,item:function(){return{id:n,index:a}},collect:function(e){return{isDragging:e.isDragging()}}}),_=(0,u.Z)(T,2),I=_[0].isDragging?.5:1;return(0,_[1])(C(Z)),(0,ze.jsx)("div",{ref:Z,style:(0,l.Z)((0,l.Z)({},Ww(w)),{},{opacity:I}),"data-handler-id":k,children:(0,ze.jsx)(qw,(0,l.Z)((0,l.Z)({},e),{},{rate:r,id:n,header:t,opType:i,body:o,index:a,kValue:d,quantile:p,labelFilter:v,binaryOperation:y,conversion_function:m,labelValue:x,lineFilter:g,labelOpts:b,filterText:h,removeItem:c}))})},Jw=(0,Ve.iv)(Aw||(Aw=(0,r.Z)(["\n    width: 100%;\n    display: flex;\n    flex-wrap:wrap;\n"]))),Gw=function(e){var n=e.operations,t=e.setOperations,r=(0,f.useCallback)((function(e,n){t((function(t){return SZ()(t,{$splice:[[e,1],[n,0,t[e]]]})}))}),[]),i=(0,f.useCallback)((function(e){t((function(n){return SZ()(n,{$splice:[[e,1]]})}))}),[]),a=(0,f.useCallback)((function(n,t){return(0,f.createElement)(Uw,(0,l.Z)((0,l.Z)({},e),{},{key:n.id,index:t,id:n.id,opType:n.opType,header:n.header,kValue:n.kValue,quantile:n.quantile,labelValue:n.labelValue,conversion_function:n.conversion_function,binaryOperation:n.binaryOperation,labelOpts:n.labelOpts,lineFilter:n.lineFilter,body:n.body||(0,ze.jsx)(ze.Fragment,{}),moveItem:r,removeItem:i}))}),[]);return(0,ze.jsx)(yZ.W,{backend:ZZ.PD,children:(0,ze.jsx)("div",{className:(0,Ve.cx)(Jw),children:n.map((function(e,n){return a(e,n)}))})})},Kw=function(e){var n=e.mainTheme,t=e.resetLabelsState;return(0,ze.jsxs)("div",{className:(0,Ve.cx)(Ky(n)),onClick:t,children:[(0,ze.jsx)(Iw.Z,{className:(0,Ve.cx)(Yy(n)),fontSize:"small",style:{height:"14px",width:"14px"}})," ",(0,ze.jsx)("small",{children:"Add Labels"})]})},Yw=t(13074),Xw=t(53052),$w=(0,f.forwardRef)((function(e,n){var t=e.selectOpts,r=e.mainTheme,i=e.minWidth,a=e.onChange,o=e.defaultValue,l=e.type,s=e.keyVal,c=e.objId,d=e.labelsLength,p=(0,vr.LS)(o,l,s),v=(0,f.useState)(p||Xw.NQ),h=(0,u.Z)(v,2),g=h[0],m=h[1],x=(0,vr.sd)(l,s);(0,f.useEffect)((function(){(0,Dy.j6)(m,l,s)}),[d]);return(0,ze.jsx)(Qy.ZP,{id:c,isMulti:x,options:t,styles:Wy(r,i),value:g,ref:n,defaultValue:p,theme:function(e){return(0,Dy.Pu)(e,r)},onChange:function(e){m((function(){return e})),a({value:e,id:c})}})}));var eS=function(e){var n=e.keyVal,t=e.labelOpts,r=e.labelAdd,a=e.labelRemove,s=e.onChange,c=e.labelValuesLength,d=e.id,p=e.dataSourceId,v=(0,f.useRef)(null),h=(0,f.useRef)(null),g=(0,f.useRef)(null),m=(0,vr.Fg)(),x=(0,f.useState)(n),b=(0,u.Z)(x,2),y=b[0],Z=b[1],w=(0,f.useState)(t[0]||{label:"Select Option",value:""}),S=(0,u.Z)(w,2),j=S[0],k=S[1],C=function(e,n){var t=(0,i.v9)((function(e){return e})),r=t.start,a=t.stop,o=(0,i.v9)((function(e){return e.dataSources})),l=(0,f.useState)(!1),s=(0,u.Z)(l,2),c=s[0],d=s[1],p=(0,f.useState)([]),v=(0,u.Z)(p,2),h=v[0],g=v[1],m=(0,f.useMemo)((function(){return o.find((function(n){return n.id===e}))}),[o,e]),x=(0,vr.mm)(r),b=(0,vr.uk)(a),y=(0,f.useMemo)((function(){return(0,Dy.c8)(m.url,n,x,b)}),[m.url,x,b,n]),Z=(0,vr.QL)(h);return(0,f.useEffect)((function(){return n&&""!==n&&(0,Dy.jY)(m,y,d,g),function(){g([]),d(!1)}}),[y,m]),{logsResponse:Z,loading:c}}(p,j.value),T=C.logsResponse,_=(0,f.useState)({label:"=",value:"equals"}),I=(0,u.Z)(_,2),D=I[0],N=I[1],M=(0,f.useMemo)((function(){return"regexequals"===D.value||"regexexclude"===D.value}),[D.value]);return c>0?(0,ze.jsxs)("div",{id:d,className:(0,Ve.cx)(Uy),children:[(0,ze.jsx)($w,{ref:v,type:"label",isMulti:!1,defaultValue:o().sanitize(n.label),selectOpts:t,mainTheme:m,onChange:function(e){var n=e.value,t=e.id;k((function(){return{value:null===n||void 0===n?void 0:n.value,label:null===n||void 0===n?void 0:n.value}}));var r=JSON.parse(JSON.stringify(y)),i=(0,l.Z)((0,l.Z)({},r),{},{label:null===n||void 0===n?void 0:n.label,value:n.value,id:t});s(i),Z((function(e){return(0,l.Z)((0,l.Z)({},e),{},{label:null===n||void 0===n?void 0:n.value})}))},keyVal:n,objId:d,minWidth:100,labelsLength:c}),(0,ze.jsx)($w,{ref:h,type:"operator",isMulti:!1,defaultValue:o().sanitize(n.operator),selectOpts:Xw.bn,keyVal:n,mainTheme:m,onChange:function(e){var n=e.value,t=e.id,r=JSON.parse(JSON.stringify(y)),i=(0,l.Z)((0,l.Z)({},r),{},{operator:null===n||void 0===n?void 0:n.value,id:t});s(i),N((function(){return(0,l.Z)({},n)})),Z((function(e){return(0,l.Z)((0,l.Z)({},e),{},{operator:null===n||void 0===n?void 0:n.value})}))},objId:d,minWidth:60,labelsLength:c}),(0,ze.jsxs)("div",{className:(0,Ve.cx)(Jy),children:[(0,ze.jsx)($w,{ref:g,type:"value",isMulti:M,defaultValue:o().sanitize(n.values),selectOpts:T,keyVal:n,mainTheme:m,onChange:function(e){var n=e.value,t=e.id,r=[],i=null!==n?n:{label:"",value:""};r=M&&Array.isArray(i)?null===i||void 0===i?void 0:i.map((function(e){return e.value})):[i.value];var a=JSON.parse(JSON.stringify(y)),o=(0,l.Z)((0,l.Z)({},a),{},{values:r,id:t});s(o),Z((function(e){return(0,l.Z)((0,l.Z)({},e),{},{values:r})}))},objId:d,minWidth:250,labelsLength:c}),(0,ze.jsx)(Yw.Z,{className:(0,Ve.cx)(Gy(m)),style:{height:"14px",width:"14px"},onClick:function(){null!==v&&void 0!==v&&v.current&&null!==h&&void 0!==h&&h.current&&null!==g&&void 0!==g&&g.current&&a(n.id)}}),(0,ze.jsx)(Iw.Z,{className:(0,Ve.cx)(Gy(m)),style:{height:"14px",width:"14px"},onClick:r})]})]}):null},nS=function(e,n){var t=(0,i.v9)((function(e){return e})),r=t.start,a=t.stop,o=(0,i.v9)((function(e){return e.dataSources})),l=(0,f.useState)({}),s=(0,u.Z)(l,2),c=s[0],d=s[1],p=(0,f.useState)(!1),v=(0,u.Z)(p,2),h=v[0],g=v[1],m=function(e,n){return(0,f.useMemo)((function(){return e.find((function(e){return e.id===n}))}),[e,n])}(o,e),x=GZ(r),b=GZ(a),y=KZ(m.url,n,x,b);return(0,f.useEffect)((function(){""!==n&&"{}"!==n&&function(e,n,t,r){VZ.apply(this,arguments)}(m,y,g,d)}),[y,m,g,d,n]),{loading:h,labelSeries:YZ(c)}},tS=function(e){return{result:"",range:"",setRange:function(e){this.range=e},setRate:function(){this.result+=" [".concat(this.range,"])")},setFn:function(n){this.result="".concat(e,"(").concat(n)},build:function(e){return this.setFn(e),this.setRate(),this.result}}},rS=function(e){return{result:"",range:"",quantile:.5,labels:[],labelsString:"",setQuantile:function(e){this.quantile=e},setRange:function(e){this.range=e},setRate:function(){this.result+=" [".concat(this.range,"])")},setFn:function(n){this.result="".concat(e,"(").concat(n)},build:function(e){return this.setFn(e),this.setRate(),this.result}}},iS=function(e){return{result:"",range:"",labels:[],labelsString:"",quantile:.99,setFn:function(n){this.result="quantile_over_time"!==e?"".concat(e,"(").concat(n):"".concat(e,"(").concat(this.quantile,", ").concat(n)},updRange:function(e){this.range=e},setRange:function(){this.result+="[".concat(this.range,"])")},addLabel:function(e){this.labels=[].concat((0,H.Z)(this.labels),[e])},setQuantile:function(e){this.quantile=e},setLabels:function(){this.labelsString=this.labels.join(",")},build:function(e){return this.setFn(e),this.setRange(),this.labels.length>0?(this.setLabels(),this.result+=" by(".concat(this.labelsString,")")):this.result}}},aS=function(e){return{result:"",labels:[],labelString:"",aggrType:"by",aggrTypeString:"",setAggrType:function(e){this.aggrType=e},addLabel:function(e){this.labels=[].concat((0,H.Z)(this.labels),[e])},setLabels:function(){this.labelString=this.labels.join(",")},setAggrTypeString:function(){this.aggrTypeString="".concat(this.aggrType,"(").concat(this.labelString,")")},setFn:function(n){this.result="".concat(e,"(").concat(n,")")},build:function(n){return this.setFn(n),this.labels.length>0&&(this.setLabels(),this.setAggrTypeString(),this.result="".concat(e," ").concat(this.aggrTypeString," (").concat(n,")")),this.result}}},oS=function(e){return{result:"",labels:[],labelString:"",kvalue:5,aggrType:"by",aggrTypeString:"",setAggrType:function(e){this.aggrType=e},setAggrTypeString:function(){this.aggrTypeString="".concat(this.aggrType,"(").concat(this.labelString,")")},addLabel:function(e){this.labels=[].concat((0,H.Z)(this.labels),[e])},setLabels:function(){this.labelString=this.labels.join(",")},setKValue:function(e){this.kvalue=e},setFn:function(n){this.result="".concat(e," (").concat(this.kvalue,", ").concat(n,")")},build:function(n){return this.setFn(n),this.labels.length>0&&(this.setLabels(),this.setAggrTypeString(),this.result="".concat(e," ").concat(this.aggrTypeString," (").concat(this.kvalue,", ").concat(n,")")),this.result}}},lS={line_contains:"|= `",line_does_not_contain:"!= `",line_contains_regex_match:"|~ `",line_does_not_match_regex:"!~ `",line_contains_case_insensitive:"|~ `(?i)",line_does_not_contain_case_insensitive:"!~ `(?i)",ip_line_filter_expression:"|= ip(`",ip_line_not_filter_expression:"!= ip(`"},sS=function(e){return e.includes("ip_")},uS=function(e){return{result:"",filterText:"",lineFilter:lS[e],setFilterText:function(e){this.filterText=e},setFn:function(e){this.result="".concat(e," ").concat(this.lineFilter).concat(this.filterText)},closeFn:function(){var n=sS(e)?"`)":"`";this.result+="".concat(n)},build:function(e){return this.setFn(e),this.closeFn(),this.result}}},cS={equals:"=",not_equals:"!=",regex_equals:"=~",regex_not_equals:"!~",more:">",less:"<",more_equals:">=",less_equals:"<="},dS=function(e){return{result:"",label:"",operator:"=",value:"",labelValueString:"",setLabel:function(e){this.label=e},setOperator:function(e){this.operator=cS[e]},setValue:function(e){this.value=e},setFilterType:function(n){return sS(e)?"ip(`"+n+"`)":"`"+n+"`"},setLabelValueString:function(){this.labelValueString=" "+this.label+" "+this.operator+this.setFilterType(this.value)},setFn:function(n){"no_pipeline_errors"!==e?(this.setLabelValueString(),this.result="".concat(n," |").concat(this.labelValueString)):this.result=n+" | __error__=``"},build:function(e){return this.setFn(e),this.result}}},fS={add_scalar:"+",subtract_scalar:"-",multiply_by_scalar:"*",divide_by_scalar:"/",modulo_by_scalar:"%",exponent:"^",equal_to:"==",not_equal_to:"!=",greater_than:">",less_than:"<",greater_or_equal_to:">=",less_or_equal_to:"<=",binary_operation_with_query:""},pS=function(e){return{result:"",value:"",bool:!1,boolString:"",setValue:function(e){this.value=e},setBoolean:function(e){this.bool=e},setBooleanString:function(){this.boolString=this.bool?"bool ":""},setFn:function(n){this.result="".concat(n," ").concat(fS[e]," ").concat(this.boolString).concat(this.value)},build:function(e){return this.setBooleanString(),this.setFn(e),this.result}}},vS=function(e){return{result:"",setFn:function(n){this.result="".concat(e,"(").concat(n,")")},build:function(e){return this.setFn(e),this.result}}},hS=function(e){return{result:"",setFn:function(n){this.result="".concat(e,"(").concat(n,")")},build:function(e){return this.setFn(e),this.result}}},gS=function(e){return{result:"",prev_args:"",after_args:"",setPrevArgs:function(e){this.prev_args=e},setAfterArgs:function(e){this.after_args=e},setFn:function(n){this.result="".concat(e,"(").concat(this.prev_args).concat(n).concat(this.after_args,")")},setEditableParams:function(e){"string"===typeof(null===e||void 0===e?void 0:e.after_args)&&""!==(null===e||void 0===e?void 0:e.after_args)&&this.setAfterArgs(e.after_args),"string"===typeof(null===e||void 0===e?void 0:e.prev_args)&&""!==(null===e||void 0===e?void 0:e.prev_args)&&this.setPrevArgs(e.prev_args)},build:function(e){return this.setFn(e),this.result}}},mS={json:function(){return{result:"",expressions:[],expressionsString:"",setJSON:function(e){return""!==e&&(this.result+=e+" | json"),this.result},addExpression:function(e){this.expressions=[].concat((0,H.Z)(this.expressions),[e])},setExpressions:function(){this.expressionsString=this.expressions.join(" ")},build:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return this.setJSON(e),this.expressions.length>0?(this.setExpressions(),this.result+" "+this.expressionsString):this.result}}},logfmt:function(){return{result:"",setLogFmt:function(){return this.result+=" | logfmt",this.result},build:function(e){return this.result+=e+this.setLogFmt(),this.result}}},unpack:function(){return{result:"",setUnPack:function(){return this.result+=" | unpack",this.result},build:function(e){return this.result+=e+this.setUnPack(),this.result}}},regexp:function(){return{result:"",expression:"",setRegex:function(e){this.result=e+" | regexp"},setExpression:function(e){this.expression=e||""},setText:function(){this.result+=" `"+this.expression+"`"},build:function(e){return this.setRegex(e),this.setText(),this.result}}},pattern:function(){return{result:"",expression:"",setPattern:function(e){this.result=e+" | pattern"},setExpression:function(e){this.expression=e||""},setText:function(){this.result+=" `"+this.expression+"`"},build:function(e){return this.setPattern(e),this.setText(),this.result}}},line_format:function(){return{result:"",expression:"",setLine:function(e){this.result=e+" | line_format"},setExpression:function(e){this.expression=e||""},setText:function(){this.result+=" `"+this.expression+"`"},build:function(e){return this.setLine(e),this.setText(),this.result}}},unwrap:function(){return{result:"",labelValue:"",conversion_function:"",setLabelValue:function(e){this.labelValue=e},setConversionFn:function(e){this.conversion_function=e},setConversionFnString:function(){this.labelValue=this.conversion_function+"("+this.labelValue+")"},setUnwrapFmt:function(){this.result=" | unwrap ",""!==this.labelValue&&""===this.conversion_function&&(this.result+=" ".concat(this.labelValue)),""!==this.conversion_function&&(this.setConversionFnString(),this.result+="".concat(this.labelValue))},build:function(e){return this.setUnwrapFmt(),e+this.result}}}},xS=function(e){return{range:tS(e),label_range:iS(e)}},bS=function(e){return{aggr:aS(e),aggr_btk:oS(e)}},yS=function(e){return{metric_functions:hS(e),editable_functions:gS(e)}},ZS=["json","logfmt","regexp","pattern","unpack","line_format","label_format","unwrap"],wS=["duration","duration_seconds","bytes",""],SS=["rate","rate_counter","count_over_time","sum_over_time","bytes_rate","bytes_over_time","absent_over_time"],jS=["changes","irate","increase","idelta","delta","holt winters","predict linear","quantile over time","deriv","resets","avg_over_time","min_over_time","max_over_time","last_over_time","present_over_time","stddev_over_time"],kS=["avg_over_time","max_over_time","min_over_time","first_over_time","last_over_time","stdvar_over_time","stddev_over_time","quantile_over_time"],CS=["line_contains","line_does_not_contain","line_contains_regex_match","line_does_not_match_regex","line_contains_case_insensitive","line_does_not_contain_case_insensitive","ip_line_filter_expression","ip_line_not_filter_expression"],TS=["add_scalar","subtract_scalar","multiply_by_scalar","divide_by_scalar","modulo_by_scalar","exponent","equal_to","not_equal_to","greater_than","less_than","greater_or_equal_to","less_or_equal_to","binary_operation_with_query"],_S=["no_pipeline_errors","ip_label_filter_expression","label_filter_expression"],IS=["acos","acosh","asin","asinh","atan","atanh","cos","cosh","sin","sinh","tan","tanh"],DS=["sum","min","max","avg","stddev","stdvar","count","count_values"],NS=["topk","bottomk"],MS=["day_of_month","day_of_week","days_in_month"],ES=["ln","absent","ceil","deg","exp","floor","group","hour","log10","log2","minute","pi","rad","scalar","sgn","sort","sort_desc","sqrt","stddev","time","timestamp","vector","year"],RS=["histogram_quantile","label_replace","clamp","clamp_max","clamp_min","label_join","quantile","round"],OS=function(e,n){return""===e?JSON.parse(JSON.stringify(n)):JSON.parse(JSON.stringify(e))},LS=function(e,n){Array.isArray(n)&&(null===n||void 0===n?void 0:n.length)>0&&n.forEach((function(n){e.addLabel(n)}))},VS=function(e,n){var t="";if(e&&"string"===typeof e){var r=(0,Dy.lo)(JSON.parse(e));(null===n||void 0===n?void 0:n.length)>0?n.forEach((function(e){if(ZS.includes(e.name)){var n=OS(t,r);if(t=mS[e.name](),"unwrap"===e.name&&(""!==(null===e||void 0===e?void 0:e.labelValue)&&"string"===typeof e.labelValue&&t.setLabelValue(e.labelValue),""!==(null===e||void 0===e?void 0:e.conversion_function)&&"string"===typeof e.conversion_function&&wS.includes(e.conversion_function)&&t.setConversionFn(e.conversion_function)),"json"===e.name)!function(e,n){Array.isArray(n)&&n.length>0&&n.forEach((function(n){e.addExpression(n)}))}(t,e.expressions);else if(i=e.name,["line_format","regexp","pattern"].includes(i)){""!==(0,u.Z)(e.expressions,1)[0]&&t.setExpression(e.expressions[0])}t=t.build(n)}var i,a,o,l,s,c;if(SS.includes(e.name)){var d=OS(t,r);(t=xS(e.name).range).setRange(e.range||"$__interval"),t=t.build(d)}if(jS.includes(e.name)){var f=OS(t,r);(t=(a=e.name,{range_function:rS(a)}).range_function).setRange(e.range||"$__interval"),t=t.build(f)}if(ES.includes(e.name)){var p=OS(t,r);t=(t=yS(e.name).metric_functions).build(p)}if(RS.includes(e.name)){var v=OS(t,r);(t=yS(e.name).editable_functions).setEditableParams(e),t=t.build(v)}if(IS.includes(e.name)){var h=OS(t,r);t=function(e){return{trigonometric:(n=e,{result:"",setFn:function(e){this.result="".concat(n,"(").concat(e,")")},build:function(e){return this.setFn(e),this.result}})};var n}(e.name).trigonometric,t=t.build(h)}if(kS.includes(e.name)){var g=OS(t,r);t=xS(e.name).label_range,LS(t,e.labels),t.updRange(e.range||"$__interval"),"quantile_over_time"===e.name&&t.setQuantile(e.quantile),t=t.build(g)}if(DS.includes(e.name)){var m=OS(t,r);t=bS(e.name).aggr,LS(t,e.labels),t=t.build(m)}if(NS.includes(e.name)){var x=OS(t,r);t=bS(e.name).aggr_btk,LS(t,e.labels),function(e,n){e.setKValue(n)}(t,e.kValue),t=t.build(x)}if(CS.includes(e.name)){var b=OS(t,r);(t=(o=e.name,{line_filter:uS(o)}).line_filter).setFilterText(e.filterText||""),t=t.build(b)}if(_S.includes(e.name)&&null!==e&&void 0!==e&&e.labelFilter){var y,Z,w,S,j=OS(t,r);(t=null===(l=e.name,y={label_filter:dS(l)})||void 0===y?void 0:y.label_filter).setLabel((null===e||void 0===e||null===(Z=e.labelFilter)||void 0===Z?void 0:Z.label)||""),t.setOperator((null===e||void 0===e||null===(w=e.labelFilter)||void 0===w?void 0:w.operator)||"equals"),t.setValue((null===e||void 0===e||null===(S=e.labelFilter)||void 0===S?void 0:S.value)||""),t=t.build(j)}if(MS.includes(e.name)){var k,C=OS(t,r);t=(t=null===(s=e.name,k={time_function:vS(s)})||void 0===k?void 0:k.time_function).build(C)}if(TS.includes(e.name)&&null!==e&&void 0!==e&&e.binaryOperation){var T,_,I,D=OS(t,r);(t=null===(c=e.name,T={binary_operation:pS(c)})||void 0===T?void 0:T.binary_operation).setValue((null===e||void 0===e||null===(_=e.binaryOperation)||void 0===_?void 0:_.value)||1),t.setBoolean((null===e||void 0===e||null===(I=e.binaryOperation)||void 0===I?void 0:I.bool)||!1),t=t.build(D)}})):t=r}return t},zS=function(e){var n=e.dataSourceId,t=e.logsResponse,r=e.theme,i=e.setFinalQuery,a=e.setLabelsString,o=e.labelValueString,s=e.setLabelValueString,c=e.setBuilders,d=e.index,p=(0,f.useState)(e.labelValuesState||[(0,l.Z)({},Xw.eW)]),v=(0,u.Z)(p,2),h=v[0],g=v[1],m=function(e){g((function(n){var t=JSON.parse(JSON.stringify(n))||[];return null===t||void 0===t?void 0:t.filter((function(n){return n.id!==e}))})),s((function(n){var t,r=[];(null===n||void 0===n?void 0:n.length)>1&&(r=JSON.parse(n||JSON.stringify("[]")));var i=null===(t=r)||void 0===t?void 0:t.filter((function(n){return n.id!==e}));return JSON.stringify(i)}))},x=function(e){g((function(e){return[].concat((0,H.Z)(e),[(0,l.Z)((0,l.Z)({},Xw.e5),{},{id:(0,_e.x0)()})])}))},b=function(e){var n=null===h||void 0===h?void 0:h.some((function(n){return n.id===e.id}));1!==(null===h||void 0===h?void 0:h.length)||n||(g((function(){return[e]})),s((function(){return JSON.stringify([e])})));var t=(0,H.Z)(h),r=null===t||void 0===t?void 0:t.map((function(n){return n.id===e.id?(0,l.Z)({},e):n}));n&&(g((function(){return(0,H.Z)(r)})),s((function(){return JSON.stringify(r)})))};(0,f.useEffect)((function(){var e=o||JSON.stringify(""),n=(0,Dy.lo)(JSON.parse(e));a(n),i(n)}),[o]),(0,f.useEffect)((function(){c((function(e){var n=(0,H.Z)(e);return n.map((function(e){return n.indexOf(e)===d?(0,l.Z)((0,l.Z)({},e),{},{labelValuesState:(0,H.Z)(h),logsVolumeQuery:(t=(0,Dy.lo)(h),"sum by(level) (count_over_time(".concat(t,"[$__interval]))"))}):e;var t}))}))}),[h]);return Array.isArray(h)?(0,ze.jsxs)("div",{className:(0,Ve.cx)(Xy),children:[(null===h||void 0===h?void 0:h.length)>0&&(null===h||void 0===h?void 0:h.map((function(e,r){return(0,ze.jsx)(eS,{dataSourceId:n,id:e.id,keyVal:e,labelOpts:t,labelAdd:x,labelRemove:m,onChange:b,currentState:h,labelValuesLength:h.length||0},r)}))),BS(r,(function(){g((function(){return[(0,l.Z)({},Xw.eW)]}))}),(null===h||void 0===h?void 0:h.length)||0)]}):null},FS=function(e){var n=e.dataSourceId,t=e.setFinalQuery,r=e.labelsString,i=e.labelValueString,a=e.addBinary,o=e.setBuilders,s=e.index,c=nS(n,r).labelSeries,d=(0,f.useState)(e.operations||[]),p=(0,u.Z)(d,2),v=p[0],h=p[1];(0,f.useEffect)((function(){if(""!==i){var e=VS(i,v);t(e)}}),[v,i]);var g=(0,f.useCallback)((function(e,n,t){if("Binary Operation With Query"!==n){var r=(0,Dy.hf)(n,t,c,v);h((function(e){return(0,Dy.HA)(t,r,e)}))}else a(s)}),[v,c,r]);return(0,f.useEffect)((function(){o((function(e){var n=(0,H.Z)(e);return n.map((function(e){return n.indexOf(e)===s?(0,l.Z)((0,l.Z)({},e),{},{operations:(0,H.Z)(v)}):e}))}))}),[v]),(0,ze.jsxs)("div",{className:(0,Ve.cx)(Xy),children:[(0,ze.jsx)(Hw,{menuClick:g}),(0,ze.jsx)(Gw,(0,l.Z)((0,l.Z)({},e),{},{setOperations:h,operations:v}))]})},BS=function(e,n,t){return t<1?(0,ze.jsx)(Kw,{mainTheme:e,resetLabelsState:n}):null};function HS(e){var n,t=function(e){var n,t={};if((null===e||void 0===e||null===(n=e.headers)||void 0===n?void 0:n.length)>0){var r,i=(0,s.Z)(e.headers);try{for(i.s();!(r=i.n()).done;){var a=r.value,o=(0,B.Z)({},String(a.header),a.value);t=(0,l.Z)((0,l.Z)({},t),o)}}catch(u){i.e(u)}finally{i.f()}}return t}(e),r={},i={};if(null===e||void 0===e||null===(n=e.auth)||void 0===n?void 0:n.basicAuth.value){var a,o,u,c=null===e||void 0===e||null===(a=e.auth)||void 0===a||null===(o=a.fields)||void 0===o?void 0:o.basicAuth,d=(0,s.Z)(c);try{for(d.s();!(u=d.n()).done;){var f=u.value;"user"===f.name&&(i.username=f.value),"password"===f.name&&(i.password=f.value)}}catch(p){d.e(p)}finally{d.f()}r.auth=i}return r.options={method:"GET"},r.headers=(0,l.Z)((0,l.Z)({},t),{},{"Content-Type":"application/json"}),r}function PS(e){var n=(0,i.v9)((function(e){return e.dataSources})),t=(0,i.v9)((function(e){return e.start})),r=(0,i.v9)((function(e){return e.stop})),a=(0,f.useMemo)((function(){return{start:c(t).unix(),end:c(r).unix()}}),[t,r]),o=(0,f.useState)([]),l=(0,u.Z)(o,2),s=l[0],d=l[1],p=(0,f.useMemo)((function(){return n.find((function(n){return n.id===e}))}),[n,e]);return(0,f.useEffect)((function(){if("metrics"===p.type&&null!==p&&void 0!==p&&p.url&&""!==(null===p||void 0===p?void 0:p.url)){var e=HS(p),n="".concat(p.url,"/api/v1/label/__name__/values?start=").concat(a.start,"&end=").concat(a.end),t=function(){var t=(0,F.Z)((0,z.Z)().mark((function t(){var r,i;return(0,z.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,P.Z.get(n,e);case 3:200===(null===(r=t.sent)||void 0===r?void 0:r.status)&&d((null===r||void 0===r||null===(i=r.data)||void 0===i?void 0:i.data)||[]),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Error at loading Span Names",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}();t()}}),[]),(0,f.useMemo)((function(){return(null===s||void 0===s?void 0:s.length)>0?s.map((function(e){return{label:e,value:e}})):[{label:"",value:""}]}),[s])}var qS=function(e){var n=e.keyVal,t=e.labelOpts,r=e.valuesOpts,i=e.labelAdd,a=e.labelRemove,s=e.onChange,c=e.labelValuesLength,d=e.id,p=e.metric,v=(0,f.useRef)(null),h=(0,f.useRef)(null),g=(0,f.useRef)(null),m=(0,vr.Fg)(),x=(0,f.useState)(n),b=(0,u.Z)(x,2),y=b[0],Z=b[1],w=(0,f.useState)(t[0]||{label:"Select Option",value:""}),S=(0,u.Z)(w,2),j=S[0],k=S[1],C=(0,vr.ZX)(r,j),T=(0,f.useState)({label:"=",value:"equals"}),_=(0,u.Z)(T,2),I=_[0],D=_[1],N=(0,f.useMemo)((function(){return"regexequals"===I.value||"regexexclude"===I.value}),[I.value]);return c>0?(0,ze.jsxs)("div",{id:d,className:(0,Ve.cx)(Uy),children:[(0,ze.jsx)($w,{ref:v,type:"label",isMulti:!1,defaultValue:o().sanitize(n.label),selectOpts:t,mainTheme:m,onChange:function(e){var n=e.value,t=e.id;k((function(){return{value:null===n||void 0===n?void 0:n.value,label:null===n||void 0===n?void 0:n.value}}));var r=JSON.parse(JSON.stringify(y)),i=(0,l.Z)((0,l.Z)({},r),{},{metric:p,label:null===n||void 0===n?void 0:n.label,value:n.value,id:t});s(i),Z((function(e){return(0,l.Z)((0,l.Z)({},e),{},{label:null===n||void 0===n?void 0:n.value,metric:p})}))},keyVal:n,objId:d,minWidth:100,labelsLength:c}),(0,ze.jsx)($w,{ref:h,type:"operator",isMulti:!1,defaultValue:o().sanitize(n.operator),selectOpts:Xw.bn,keyVal:n,mainTheme:m,onChange:function(e){var n=e.value,t=e.id,r=JSON.parse(JSON.stringify(y)),i=(0,l.Z)((0,l.Z)({},r),{},{operator:null===n||void 0===n?void 0:n.value,id:t});s(i),D((function(){return(0,l.Z)({},n)})),Z((function(e){return(0,l.Z)((0,l.Z)({},e),{},{operator:null===n||void 0===n?void 0:n.value})}))},objId:d,minWidth:60,labelsLength:c}),(0,ze.jsxs)("div",{className:(0,Ve.cx)(Jy),children:[(0,ze.jsx)($w,{ref:g,type:"value",isMulti:N,defaultValue:o().sanitize(n.values),selectOpts:C,keyVal:n,mainTheme:m,onChange:function(e){var n=e.value,t=e.id,r=[],i=null!==n?n:{label:"",value:"",metric:p};r=N&&Array.isArray(i)?null===i||void 0===i?void 0:i.map((function(e){return e.value})):[i.value];var a=JSON.parse(JSON.stringify(y)),o=(0,l.Z)((0,l.Z)({},a),{},{values:r,id:t});s(o),Z((function(e){return(0,l.Z)((0,l.Z)({},e),{},{values:r})}))},objId:d,minWidth:250,labelsLength:c}),(0,ze.jsx)(Yw.Z,{className:(0,Ve.cx)(Gy(m)),style:{height:"14px",width:"14px"},onClick:function(e){null!==v&&void 0!==v&&v.current&&null!==h&&void 0!==h&&h.current&&null!==g&&void 0!==g&&g.current&&a(n.id)}}),(0,ze.jsx)(Iw.Z,{className:(0,Ve.cx)(Gy(m)),style:{height:"14px",width:"14px"},onClick:i})]})]}):null};function AS(e){var n=e.dataSourceId,t=e.value,r=e.metricValueChange,a=e.onChange,o=e.setBuilders,s=e.index,c=e.setFinalQuery,p=e.labelValueString,v=e.setLabelValueString,h=function(e,n){var t=(0,i.v9)((function(e){return e.dataSources})),r=(0,i.v9)((function(e){return e.start})),a=(0,i.v9)((function(e){return e.stop})),o=(0,f.useMemo)((function(){return{start:d()(r).unix(),end:d()(a).unix()}}),[r,a]),l=(0,f.useState)([]),s=(0,u.Z)(l,2),c=s[0],p=s[1],v=(0,f.useMemo)((function(){return t.find((function(n){return n.id===e}))}),[t,e]),h=(0,f.useMemo)((function(){var e=encodeURIComponent('{__name__="'.concat(n,'"}')),t="match".concat(encodeURIComponent("[]"));if(n)return"".concat(t,"=").concat(e)}),[n]);return(0,f.useEffect)((function(){if("metrics"===v.type&&null!==v&&void 0!==v&&v.url&&""!==(null===v||void 0===v?void 0:v.url)&&n&&""!==n){var e=(0,Dy.wU)(v),t="".concat(v.url,"/api/v1/series?start=").concat(o.start,"&end=").concat(o.end,"&").concat(h),r=function(){var n=(0,F.Z)((0,z.Z)().mark((function n(){var r,i;return(0,z.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,P.Z.get(t,e);case 3:200===(null===(r=n.sent)||void 0===r?void 0:r.status)&&p((null===r||void 0===r||null===(i=r.data)||void 0===i?void 0:i.data)||[]),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log("Error at loading Span Names",n.t0);case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(){return n.apply(this,arguments)}}();r()}}),[v,o.end,o.start,h]),(0,f.useMemo)((function(){if((null===c||void 0===c?void 0:c.length)>0){var e=(0,H.Z)(c),n={};return e.forEach((function(e){Object.keys(e).forEach((function(t){var r;null!==(r=n[t])&&void 0!==r&&r.some((function(n){return n===e[t]}))||(n[t]=[].concat((0,H.Z)(n[t]||[]),[e[t]]))}))})),n}return{}}),[c])}(n,t),g=(0,f.useState)(e.labelValuesState||[(0,l.Z)((0,l.Z)({},Xw.eW),{},{metric:t})]),m=(0,u.Z)(g,2),x=m[0],b=m[1],y=(0,vr.Fg)(),Z=(0,vr.Af)(h),w=function(e){b((function(n){var t=JSON.parse(JSON.stringify(n))||[];return null===t||void 0===t?void 0:t.filter((function(n){return n.id!==e}))})),v((function(n){var t,r=[];(null===n||void 0===n?void 0:n.length)>1&&(r=JSON.parse(n||JSON.stringify("[]")));var i=null===(t=r)||void 0===t?void 0:t.filter((function(n){return n.id!==e}));return JSON.stringify(i)}))},S=function(){b((function(e){return[].concat((0,H.Z)(e),[(0,l.Z)((0,l.Z)({},Xw.e5),{},{metric:t,id:(0,_e.x0)()})])}))},j=function(e){var n=null===x||void 0===x?void 0:x.some((function(n){return n.id===e.id}));1!==(null===x||void 0===x?void 0:x.length)||n||(b((function(){return[e]})),v((function(){return JSON.stringify([e])})));var t=(0,H.Z)(x),r=null===t||void 0===t?void 0:t.map((function(n){return n.id===e.id?(0,l.Z)({},e):n}));n&&(b((function(){return(0,H.Z)(r)})),v((function(){return JSON.stringify(r)}))),a(e)},k=function(){b((function(e){return[(0,l.Z)((0,l.Z)({},Xw.eW),{},{metric:t})]}))};(0,f.useEffect)((function(){var e=p||JSON.stringify(""),n=(0,Dy.Gh)(t,JSON.parse(e));r(n),c(n)}),[p,t]),(0,f.useEffect)((function(){o((function(e){var n=(0,H.Z)(e);return n.map((function(e){return n.indexOf(e)===s?(0,l.Z)((0,l.Z)({},e),{},{labelValuesState:(0,H.Z)(x)}):e}))}))}),[x]);return(0,ze.jsx)(I.a,{theme:y,children:(0,ze.jsxs)("div",{className:(0,Ve.cx)(Xy),children:[(null===x||void 0===x?void 0:x.length)>0&&(null===x||void 0===x?void 0:x.map((function(e,n){return(0,ze.jsx)(qS,{id:e.id,idx:n,metric:t,keyVal:e,labelOpts:Z,valuesOpts:h,labelAdd:S,labelRemove:w,onChange:j,currentState:x,useValueSelectOpts:vr.ZX,labelValuesLength:(null===x||void 0===x?void 0:x.length)||0},n)}))),(null===x||void 0===x?void 0:x.length)<1?(0,ze.jsx)(Kw,{mainTheme:y,resetLabelsState:k}):null]})})}var QS,WS,US,JS,GS,KS,YS,XS,$S,ej,nj,tj,rj,ij=function(e){var n=(0,vr.Fg)(),t=e.builders,r=e.setBuilders,i=e.dataSourceId,a=e.logsResponse;return(0,ze.jsx)("div",{className:(0,Ve.cx)($y),children:null===t||void 0===t?void 0:t.map((function(t,o){return(0,f.createElement)(oj,(0,l.Z)((0,l.Z)({},e),{},{builder:t,dataSourceId:i,logsResponse:a,key:o,idx:o,theme:n,setBuilders:r}))}))})},aj=function(e){var n=e.onBinaryClose,t=e.theme,r=e.onBinaryOptChange,i=e.binaryValue,a=(0,f.useState)(i.vectValue||""),l=(0,u.Z)(a,2),s=l[0],c=l[1],d=(0,f.useCallback)((function(e,n){c(e.target.value),r(e,n)}),[s]),p=(0,f.useMemo)((function(){return Object.entries(Xw.lX).map((function(e){var n=(0,u.Z)(e,2);return{value:n[0],name:n[1]}}))}),[Xw.lX]),v=(0,f.useMemo)((function(){return Object.entries(Xw.fs).map((function(e){var n=(0,u.Z)(e,2);return{value:n[0],name:n[1]}}))}),[Xw.lX]);return(0,ze.jsx)("div",{children:(0,ze.jsx)("div",{className:(0,Ve.cx)(TZ(t)),children:(0,ze.jsxs)("div",{className:"binary-operation-bar",children:[(0,ze.jsxs)("div",{className:"binary-operation-cont",children:[(0,ze.jsx)("label",{children:"Operator"})," ",(0,ze.jsx)(NZ,{initial:i.binaryOpt||"divide",onChange:function(e){return r(e,"binaryOpt")},opts:p}),(0,ze.jsx)("label",{children:"Label Matches"}),(0,ze.jsx)(NZ,{initial:i.vectOpt||"on",onChange:function(e){return r(e,"vectOpt")},opts:v}),(0,ze.jsx)("input",{value:o().sanitize(s),onChange:function(e){return d(e,"vectValue")}})]}),(0,ze.jsx)("button",{onClick:n,children:" X"})]})})})},oj=function(e){var n=e.builder,t=e.theme,r=e.idx,i=e.setBuilders,a=e.logsResponse,s=e.dataSourceId,c=(0,f.useState)((0,Dy.lo)(n.labelValuesState)||""),d=(0,u.Z)(c,2),p=d[0],v=d[1],h=(0,f.useMemo)((function(){if(null!==n&&void 0!==n&&n.labelValuesState){var e=(0,Dy.yv)(null===n||void 0===n?void 0:n.labelValuesState);return"{".concat(e,"}")||0}return{}}),[n.labelValuesState]),g=PS(s),m=(0,f.useState)(g[0]||{label:"",value:""}),x=(0,u.Z)(m,2),b=x[0],y=x[1],Z=(0,f.useState)(n.builderResult||""),w=(0,u.Z)(Z,2),S=w[0],j=w[1],k=(0,f.useState)(JSON.stringify(n.labelValuesState)||""),C=(0,u.Z)(k,2),T=C[0],_=C[1];(0,f.useEffect)((function(){_(JSON.stringify(n.labelValuesState))}),[n]);var I=(0,f.useCallback)((function(e){i((function(n){return(0,H.Z)(n).map((function(n,t){return t===r?(0,l.Z)((0,l.Z)({},n),{},{builderResult:e}):n}))})),j(e)}),[]);return(0,ze.jsxs)("div",{className:(0,Ve.cx)($y),children:[n.isBinary&&(0,ze.jsx)(aj,{theme:t,binaryValue:o().sanitize(n.binaryValue),onBinaryOptChange:function(e,n){i((function(t){return(0,H.Z)(t).map((function(t,i){return i===r?(0,l.Z)((0,l.Z)({},t),{},{binaryValue:(0,l.Z)((0,l.Z)({},t.binaryValue),{},(0,B.Z)({},n,e.target.value))}):t}))}))},onBinaryClose:function(){i((function(e){return(0,H.Z)(e).filter((function(e,n){return n!==r}))}))}}),(0,ze.jsx)("div",{className:(0,Ve.cx)(eZ),children:!0===n.isMetrics?(0,ze.jsxs)(ze.Fragment,{children:[(0,ze.jsx)(lj,{theme:t,onMetricChange:function(e){var n=e.value;y((function(e){return{value:null===n||void 0===n?void 0:n.value,label:null===n||void 0===n?void 0:n.value}}))},dataSourceId:s}),(0,ze.jsx)(AS,{index:r,onChange:function(e){},dataSourceId:s,value:o().sanitize(b.value),setBuilders:i,finalQuery:S,builder:n,setFinalQuery:I,labelValueString:T,setLabelValueString:_,metricValueChange:function(e){}})]}):(0,ze.jsx)(zS,(0,l.Z)((0,l.Z)({},n),{},{dataSourceId:s,logsResponse:a,setLabelsString:v,finalQuery:S,setFinalQuery:I,labelValueString:T,setLabelValueString:_,setBuilders:i,index:r,theme:t}))}),(0,ze.jsx)(FS,(0,l.Z)((0,l.Z)((0,l.Z)({},e),n),{},{setBuilders:i,dataSourceId:s,labelsString:function(e,n,t){return e.isMetrics?t:n}(n,p,h),labelValueString:T,setFinalQuery:I,finalQuery:S,index:r}))]},r)},lj=function(e){var n=e.dataSourceId,t=e.theme,r=e.onMetricChange,i=PS(n);return(0,ze.jsx)($w,{isMulti:!1,type:"metric",defaultValue:o().sanitize("Select Metric..."),selectOpts:i,mainTheme:t,onChange:r,minWidth:250,labelValuesLength:0})},sj=function(e){return(0,Ve.iv)(QS||(QS=(0,r.Z)(["\n    padding: 8px;\n    display: flex;\n    flex: 1;\n    gap:4px;\n    flex-direction: column;\n    border-bottom: 1px solid ",";\n    background: ",";\n    label {\n        font-size: 11px;\n        color: ",";\n\n        padding: 4px 10px;\n    }\n    .action-buttons {\n        display: flex;\n        align-items: center;\n        flex-direction: row;\n        justify-content:flex-end;\n        gap:2px;\n    }\n    @media (min-width: 420px) {\n        flex-direction: row;\n        align-items: center;\n        &.action-buttons {\n            margin-top: 0px;\n        }\n    }\n"])),e.buttonBorder,e.widgetContainer,e.textColor)},uj=function(e){return(0,Ve.iv)(WS||(WS=(0,r.Z)(["\n    flex: 1;\n    background: ",";\n    color: ",";\n    padding: 3px 6px;\n    font-size: 12px;\n    font-family: monospace;\n    margin: 0px 5px;\n    border-radius: 3px;\n    line-height: 1.5;\n    line-break: anywhere;\n    overflow-y: scroll;\n    @media (max-width: 420px) {\n      margin:0px;\n    }\n"])),e.inputBg,e.textColor)};function cj(e){var n=e.attributes,t=e.children,i=e.leaf,a=e.theme;return(0,ze.jsx)("span",(0,l.Z)((0,l.Z)({},n),{},{className:(0,Ve.iv)(US||(US=(0,r.Z)(["\n                font-family: monospace;\n                // background: black;\n                ","\n                ","\n        ","\n        ","\n        ","\n        ","\n        ","\n        ","\n          ","\n          ","\n            "])),i.comment&&(0,Ve.iv)(JS||(JS=(0,r.Z)(["\n                    color: blue;\n                "]))),(i.operator||i.url)&&(0,Ve.iv)(GS||(GS=(0,r.Z)(["\n                    color: ",";\n                "])),a.textOff),i.keyword&&(0,Ve.iv)(KS||(KS=(0,r.Z)(["\n                    color: #57aed4;\n                "]))),(i.variable||i.regex)&&(0,Ve.iv)(YS||(YS=(0,r.Z)(["\n                    color: #e90;\n                "]))),(i.number||i.boolean||i.tag||i.constant||i.symbol||i["attr-name"]||i.selector)&&(0,Ve.iv)(XS||(XS=(0,r.Z)(["\n                    color: #dd4a68;\n                "]))),i.punctuation&&(0,Ve.iv)($S||($S=(0,r.Z)(["\n                    color: orange;\n                "]))),(i.string||i.char)&&(0,Ve.iv)(ej||(ej=(0,r.Z)(["\n                    color: green;\n                "]))),(i.function||i["class-name"]||i["attr-name"])&&(0,Ve.iv)(nj||(nj=(0,r.Z)(["\n                    color: #dd4a68;\n                "]))),i["context-labels"]&&(0,Ve.iv)(tj||(tj=(0,r.Z)(["\n                    color: orange;\n                "]))),i["label-key"]&&(0,Ve.iv)(rj||(rj=(0,r.Z)(["\n                    color: green;\n                "])))),children:t}))}function dj(e){var n;return"string"===typeof e?null===e||void 0===e?void 0:e.length:"string"===typeof(null===e||void 0===e?void 0:e.content)?null===e||void 0===e?void 0:e.content.length:null===e||void 0===e||null===(n=e.content)||void 0===n?void 0:n.reduce((function(e,n){return e+dj(n)}),0)}function fj(e){var n=(0,vr.Fg)(),t=e.queryText,r=e.searchButton,i=e.logsRateButton,a=e.queryInput,c=(0,f.useState)([{type:"paragraph",children:[{text:o().sanitize(t)}]}]),d=(0,u.Z)(c,2),p=d[0],v=d[1],h=(0,f.useState)("sql"),g=(0,u.Z)(h,1)[0],m=(0,f.useCallback)((function(e){var n=(0,u.Z)(e,2),t=n[0],r=n[1],i=[];if(!gy.xv.isText(t)||(null===t||void 0===t?void 0:t.length)<1)return i;var a,o=yy().tokenize(t.text,yy().languages[g]),l=0,c=(0,s.Z)(o);try{for(c.s();!(a=c.n()).done;){var d,f=a.value,p=l+dj(f);if("string"!==typeof f)i.push((d={},(0,B.Z)(d,f.type,!0),(0,B.Z)(d,"anchor",{path:r,offset:l}),(0,B.Z)(d,"focus",{path:r,offset:p}),d));l=p}}catch(v){c.e(v)}finally{c.f()}return i}),[g]),x=(0,f.useCallback)((function(e){return(0,ze.jsx)(cj,(0,l.Z)((0,l.Z)({},e),{},{theme:n}))}),[]);(0,f.useEffect)((function(){v([{type:"paragraph",children:[{text:o().sanitize(e.queryText)}]}]),y.children=[{text:o().sanitize(e.queryText)}]}),[e.queryText]);var b=(0,f.useCallback)((function(e){v(e)}),[p]);(0,f.useEffect)((function(){p!==a&&""!==a&&(v([{type:"paragraph",children:[{text:o().sanitize(a)}]}]),y.children=[{text:o().sanitize(a)}])}),[a]);var y=(0,f.useMemo)((function(){return(0,xy.VC)((0,my.BU)((0,gy.Jh)()))}),[]);return(0,ze.jsxs)("div",{className:(0,Ve.cx)(sj(n)),children:[(0,ze.jsx)("label",{children:"Raw Query"}),(0,ze.jsx)(my.mH,{editor:y,value:p,onChange:b,children:(0,ze.jsx)(my.CX,{renderLeaf:x,decorate:m,className:(0,Ve.cx)(uj(n)),readOnly:!0,placeholder:t})}),(0,ze.jsxs)("div",{className:"action-buttons",children:[i,r]})]})}function pj(e){var n=e.dataSourceId,t=e.labelValueChange,r=e.searchButton,a=e.logsRateButton,o=e.queryInput,s=(0,i.v9)((function(e){return e.dataSources})),c=(0,i.v9)((function(e){return e})),d=gZ(n,c.start,c.stop,s).logsResponse,p=(0,f.useState)(""),v=(0,u.Z)(p,2),h=v[0],g=v[1],m=(0,I.u)(),x=(0,f.useState)([Xw.DJ]),b=(0,u.Z)(x,2),y=b[0],Z=b[1],w=(0,f.useCallback)((function(e){Z((function(n){return[].concat((0,H.Z)(n),[(0,l.Z)((0,l.Z)({},n[e]),{},{isBinary:!0})])}))}),[y]);(0,f.useEffect)((function(){t(h)}),[h]),(0,f.useEffect)((function(){Z((function(e){return(0,H.Z)(e).map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{logsResponse:d})}))}))}),[d]);var S=function(e){var n="";return e.forEach((function(e){e.isBinary?n+="".concat(function(e){var n=e.binaryValue,t=n.binaryOpt,r=n.vectOpt,i=n.vectValue,a="";return""!==i&&(a="".concat(r,"(").concat(i,")"))," ".concat(Xw.lX[t]," ").concat(a)}(e)," ").concat(e.builderResult):n+=e.builderResult})),n};return(0,f.useEffect)((function(){g(S(y))}),[y]),(0,ze.jsx)(I.a,{theme:m,children:(0,ze.jsxs)("div",{className:(0,Ve.cx)($y),children:[(0,ze.jsx)(ij,{type:"metrics_search",addBinary:w,dataSourceId:n,logsResponse:d,setBuilders:Z,builders:y,finalQuery:h}),(0,ze.jsx)(fj,{queryText:h,searchButton:r,logsRateButton:a,queryInput:o})]})})}function vj(e){var n=e.handleMetricValueChange,t=e.data,r=t.dataSourceId,a=t.hasStats,o=e.searchButton,s=e.statsSwitch,u=e.logsRateButton,c=(0,vr.Fg)(),d=(0,i.v9)((function(e){return e.isSplit}));return(0,ze.jsxs)(I.a,{theme:c,children:[(0,ze.jsx)("div",{className:(0,Ve.cx)(Xy),children:(0,ze.jsx)(pj,(0,l.Z)((0,l.Z)({},e),{},{dataSourceId:r,labelValueChange:function(e){n(e)},searchButton:o,logsRateButton:u}))}),a&&d&&(0,ze.jsx)("div",{style:{display:"flex",margin:"10px 0px"},children:s})]})}var hj,gj={operations:[],labelsState:[],binaryValue:{binaryOpt:"divide",vectOpt:"on",vectValue:""},builderResult:"",logsVolumeQuery:"",isBinary:!1},mj={minus:"-",plus:"+",by:"*",divide:"/",exp:"^",equals:"==",not_equals:"!=",modulo:"%",more:"<",less:">",less_equals:"<=",more_equals:">="};function xj(e){var n=e.dataSourceId,t=e.labelValueChange,r=e.handleLogsVolumeChange,a=e.searchButton,o=e.queryInput,s=(0,i.v9)((function(e){return e.dataSources})),c=(0,i.v9)((function(e){return e})),d=gZ(n,c.start,c.stop,s).logsResponse,p=(0,f.useState)(""),v=(0,u.Z)(p,2),h=v[0],g=v[1],m=(0,I.u)(),x=(0,f.useState)([gj]),b=(0,u.Z)(x,2),y=b[0],Z=b[1],w=(0,f.useCallback)((function(e){Z((function(n){return[].concat((0,H.Z)(n),[(0,l.Z)((0,l.Z)({},n[e]),{},{isBinary:!0})])}))}),[y]);(0,f.useEffect)((function(){""!==y[0].logsVolumeQuery&&r(y[0].logsVolumeQuery)}),[y]),(0,f.useEffect)((function(){t(h)}),[h]),(0,f.useEffect)((function(){Z((function(e){return(0,H.Z)(e).map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{logsResponse:d})}))}))}),[d]);var S=function(e){var n="";return e.forEach((function(e){e.isBinary?n+="".concat(function(e){var n=e.binaryValue,t=n.binaryOpt,r=n.vectOpt,i=n.vectValue,a="";return""!==i&&(a="".concat(r,"(").concat(i,")"))," ".concat(mj[t]," ").concat(a)}(e)," ").concat(e.builderResult):n+=e.builderResult})),n};return(0,f.useEffect)((function(){g(S(y))}),[y]),(0,ze.jsx)(I.a,{theme:m,children:(0,ze.jsxs)("div",{className:(0,Ve.cx)($y),children:[(0,ze.jsx)(ij,{type:"logs_search",addBinary:w,dataSourceId:n,logsResponse:d,setBuilders:Z,builders:y,finalQuery:h}),(0,ze.jsx)(fj,{queryText:h,searchButton:a,queryInput:o})]})})}function bj(e){var n=e.handleLogValueChange,t=e.data,r=t.dataSourceId,a=t.hasStats,o=e.searchButton,s=e.statsSwitch,u=(0,vr.Fg)(),c=(0,i.v9)((function(e){return e.isSplit}));return(0,ze.jsxs)(I.a,{theme:u,children:[(0,ze.jsx)("div",{className:(0,Ve.cx)(Ja),children:(0,ze.jsx)(xj,(0,l.Z)((0,l.Z)({},e),{},{dataSourceId:r,labelValueChange:function(e){n(e)},searchButton:o}))}),a&&c&&(0,ze.jsx)("div",{style:{display:"flex",margin:"10px 0px"},children:s})]})}function yj(e,n){return"left"===e?m(n):x(n)}var Zj,wj=[{value:"range",label:"Range"},{value:"instant",label:"Instant"}],Sj=[{value:"forward",label:"Forward"},{value:"backwards",label:"Backwards"}],jj=[{value:"traceId",label:"TraceId"},{value:"search",label:"Search"}],kj=(0,Ve.iv)(hj||(hj=(0,r.Z)(["\n    max-width: 100%;\n"]))),Cj=function(e){var n=e.data,t=e.name,r=e.width,a=e.launchQuery,s=n.queryType,c=n.limit,d=n.id,v=n.dataSourceType,h=n.direction,g=n.dataSourceId,m=n.splitted,x=e.data,b=x.loading,y=x.hasStats,Z=x.isShowStats,S=x.isBuilder,j=x.isLogsVolume,k=x.logsVolumeQuery,C=_b,T=Ib,D=Db,N=(0,p.TH)().hash,M=(0,i.I0)(),E=(0,Zt.Z)(),R=(0,L.Z)().historyStore(),O=(0,vr.Fg)(),z=(0,i.v9)((function(e){return e})),F=z.historyOpen,B=z.isEmbed,P=z.queryHistory,q=z.start,Q=z.stop,W=(0,i.v9)((function(e){return e.isSplit})),U=(0,i.v9)((function(e){return e[t]})),J=(0,_.useMediaQuery)({query:"(max-width: 1070px)"}),G=(0,f.useState)(n.expr),K=(0,u.Z)(G,2),Y=K[0],X=K[1],$=(0,f.useState)(!1),ee=(0,u.Z)($,2),ne=ee[0],te=ee[1],re=(0,f.useState)(n.expr.split(/[  ]+/).map((function(e){return{children:[{text:o().sanitize(e)}]}}))||[{children:[{text:o().sanitize("Enter a cLoki Query")}]}]),ie=(0,u.Z)(re,2),ae=ie[0],oe=ie[1],le=(0,f.useState)("traceId"),se=(0,u.Z)(le,2),ue=se[0],ce=se[1],de=(0,f.useState)([]),fe=(0,u.Z)(de,1)[0],pe=(0,f.useState)({}),ve=(0,u.Z)(pe,2),he=(ve[0],ve[1]),ge=(0,f.useState)(Z||!1),me=(0,u.Z)(ge,2),xe=me[0],be=me[1],ye=(0,f.useState)(!1),Ze=(0,u.Z)(ye,2),we=Ze[0],Se=Ze[1],je=(0,i.v9)((function(e){return e.dataSources})),ke=(0,i.v9)((function(e){return e[t]})),Ce=(0,f.useMemo)((function(){return _y.E7.find((function(e){return e.id===g}))}),[g]);function Te(e,n){if(n&&""!==e){var t=e.match(/[^{\}]+(?=})/g);if(Array.isArray(t)&&(null===t||void 0===t?void 0:t.length)>0){var r="{".concat(null===t||void 0===t?void 0:t.join(","),"}"),i="sum by(level) (count_over_time(".concat(r,"[$__interval]))");Ie(i)}}}function _e(e){oe(e),Ne(e)}(0,f.useEffect)((function(){var e,n=(C(g,d)||"").expr,r=T(g);X(n),oe([{children:[{text:n}]}]),Te(n,j);var i=function(e,n){return null===e||void 0===e?void 0:e.find((function(e){return e.id===g}))}(je),a={};if(r&&(null===r||void 0===r?void 0:r.url)!==Ce&&""!==(null===r||void 0===r?void 0:r.url)){a=(0,l.Z)({},r);var o=(0,H.Z)(ke);o.forEach((function(e){e.id===d&&(e.dataSourceId=a.id,e.dataSourceType=a.type,e.dataSourceURL=a.url)})),M(yj(t,o));var u=(0,H.Z)(je);u.forEach((function(e){e.id===g&&(e=a)})),M((0,Ty.Z)(u))}else i&&""!==i.url&&(a=(0,l.Z)({},i));B&&M(Cn(v,Y,s,c,t,d,h,g,null===(e=a)||void 0===e?void 0:e.url))}),[]),(0,f.useEffect)((function(){X(n.expr),oe([{children:[{text:o().sanitize(n.expr)}]}])}),[n.expr]),(0,f.useEffect)((function(){var e=ae[0].children[0].text;X(e)}),[ae]),(0,f.useEffect)((function(){J&&W&&M(w(!1))}),[J]),(0,f.useEffect)((function(){var e=(C(g,d)||"").expr,n=T(g);X(e),oe([{children:[{text:o().sanitize(e)}]}]),j&&k&&Te(e,j);var r=null===je||void 0===je?void 0:je.find((function(e){return e.id===g})),i={};if(n&&(null===n||void 0===n?void 0:n.url)!==Ce&&""!==(null===n||void 0===n?void 0:n.url)){i=(0,l.Z)({},n);var a=(0,H.Z)(ke);a.forEach((function(e){e.id===d&&(e.dataSourceId=i.id,e.dataSourceType=i.type,e.dataSourceURL=i.url)})),M(yj(t,a));var u=(0,H.Z)(je);u.forEach((function(e){e.id===g&&(e=i)})),M((0,Ty.Z)(u))}else r&&""!==r.url&&(i=(0,l.Z)({},r));var f,p=Le(e).isMatrix;""!==e&&(null===e||void 0===e?void 0:e.length)>6&&M(Cn(v,e,s,c,t,d,h,g,null===(f=i)||void 0===f?void 0:f.url));j&&null!==k&&void 0!==k&&k.query&&""!==(null===k||void 0===k?void 0:k.query)&&"logs"===v&&!p&&M(Cn(v,k.query,s,c,t,d,h,g,i.url,k.customStep,!0))}),[g,d]),(0,f.useEffect)((function(){"string"===typeof Y&&(X(Y),oe([{children:[{text:o().sanitize(Y)}]}]),Ne(),j&&Te(Y,!0))}),[Y]),(0,f.useEffect)((function(){"string"===typeof a&&""!==a&&(X(a),oe([{children:[{text:o().sanitize(a)}]}]),Ne(),j&&Te(a,!0))}),[a]),(0,f.useEffect)((function(){Te(Y,j)}),[Y]);var Ie=function(e){var n=function(e,n,t,r){var i="",a=0;if(e.includes("$__interval")){var o=(r.getTime()-t.getTime())/1e3/30/Number((n/window.innerWidth).toFixed(1)),l=Math.round(o*Number(window.devicePixelRatio.toFixed(2)));i=e.replace(/\[\$__interval\]/,"[".concat(l,"s]")),a=l}else i=e;return{query:i,customStep:a}}(e,r,q,Q),t=n.query,i=n.customStep;Me({query:t,customStep:i})},De=function(e){e.preventDefault();var n=je.find((function(e){return e.id===g}));if(vb(Y)&&n)try{Re(n.type,Y,s,c,d,h,n.id,n.url),j&&!k&&Te(Y,j),Oe(Y,!0),Fe(),D(Y,d,g)}catch(e){console.error(e)}else M(A(!0)),console.log("Please make a log query",Y)},Ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if((null===e||void 0===e?void 0:e.length)>0){var n=new URLSearchParams(N.replace(/#/,"")),r=null===e||void 0===e?void 0:e.map((function(e){return e.children[0].text})).join("\n"),i=(0,H.Z)(U);i.forEach((function(e){e.id===d&&r&&(e.expr=r)})),M(yj(t,i)),n.set(t,JSON.stringify(i)),D(Y,d,g)}},Me=function(e){var n=(0,H.Z)(U);n.forEach((function(n){n.id===d&&e&&""!==e.query&&(n.logsVolumeQuery={query:e.query,customStep:e.customStep})})),M(yj(t,n))};var Ee=function(e){e.preventDefault();var n="";0===Y.length||(n=function(e){var n="";if(0!==e.length){var t=e.startsWith("rate(");n="metrics"===v?t?(n=e.replace(/{([^}]+)}/g,"{}")).replace(/\[\d+ms\]/,"[$__interval]"):"rate(".concat(e.replace(/{([^}]+)}/g,"{}"),"[$__interval])"):t?e.replace(/\[\d+ms\]/,"[$__interval]"):"rate(".concat(e,"[$__interval])")}return n}(Y),X(n),oe([{children:[{text:o().sanitize(n)}]}]),te(vb(n))),vb(n)&&function(n){var t=je.find((function(e){return e.id===g}));try{Re(t.type,n,s,c,d,h,t.id,t.url),Fe()}catch(e){console.error(e)}}(n)};var Re=function(e,n,r,i,a,o,l,s){var u=R.add({data:JSON.stringify({type:e,queryInput:n,queryType:r,limit:i,direction:o,dataSourceId:l,url:s,panel:t,id:a}),url:window.location.hash},10);M(V(u))},Oe=function(e,n){var r=je.find((function(e){return e.id===g})),i=(0,H.Z)(U);"logs"===v&&i.forEach((function(e){e.id===d&&(e.browserOpen=!1)})),M(yj(t,i));var a=Le(e),o=a.querySubmit,l=a.customStep,u=a.isMatrix;n&&""!==o&&(null===o||void 0===o?void 0:o.length)>6&&M(Cn(v,o,s,c,t,d,h,g,r.url,l,j&&!u)),j&&null!==k&&void 0!==k&&k.query&&""!==(null===k||void 0===k?void 0:k.query)&&!u&&M(Cn(v,k.query,s,c,t,d,h,g,r.url,k.customStep,!0))};function Le(e){var n="",t=0,i=!1;if(null!==e.match(/\((.*?)\)/)&&(i=!0),e.includes("$__interval")){i=!0;var a=(Q.getTime()-q.getTime())/1e3/30/Number((r/window.innerWidth).toFixed(1)),o=Math.round(a*Number(window.devicePixelRatio.toFixed(2)));n=e.replace(/\[\$__interval\]/,"[".concat(o,"s]")),t=o}else n=e;return{customStep:t,querySubmit:n,isMatrix:i}}var Fe=function(){var e=je.find((function(e){return e.id===g})),n=E.add({data:{href:window.location.href,url:e.url,type:v,queryInput:Y,queryType:s,limit:c,panel:t,id:d},description:"From Query Submit"},10);M((0,wt.Z)(n))};function Be(e){M(ot(!F))}function He(){Se(!we)}function Pe(e){var n=e.target.checked;be((function(){return n}));var r=JSON.parse(JSON.stringify(ke)),i=null===r||void 0===r?void 0:r.map((function(e){return e.id===d?(0,l.Z)((0,l.Z)({},e),{},{isShowStats:n}):e}));M(yj(t,i))}var qe=function(e){ce((function(){return e}))};if(B)return null;return B?null:(0,ze.jsx)("div",{className:(0,Ve.cx)(kj),id:d,children:(0,ze.jsxs)(I.a,{theme:O,children:["metrics"!==v&&"traces"!==v&&(J||W)&&(0,ze.jsx)(hy,(0,l.Z)((0,l.Z)({},e),{},{isSplit:m,dataSourceType:v,onShowQuerySettings:He,queryHistory:P,handleHistoryClick:Be,isTabletOrMobile:J,queryValid:ne,onSubmit:De,onSubmitRate:Ee,labels:fe,loading:b||!1,hasStats:y,showStatsOpen:xe,handleStatsOpen:Pe})),function(e,n,t,r,i,a){return"traces"===e?(0,ze.jsxs)(ze.Fragment,{children:[(0,ze.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",paddingRight:"15px",marginBottom:"4px"},children:(0,ze.jsx)(hZ,{value:"traceId",onChange:qe})}),"traceId"===ue&&t,"search"===ue&&n]}):"metrics"===e?(0,ze.jsxs)(ze.Fragment,{children:[r,t]}):"logs"===e?(0,ze.jsxs)(ze.Fragment,{children:[S&&i,t]}):t}(v,(0,ze.jsx)(fZ,(0,l.Z)((0,l.Z)({},e),{},{onSearchChange:function(e){he((function(){return e}))}})),(0,ze.jsx)(Cy,(0,l.Z)((0,l.Z)({},e),{},{isSplit:m,isBuilder:S,dataSourceType:v,handleQueryChange:_e,expr:Y,queryValue:ae,handleInputKeyDown:function(e){"Enter"===e.code&&e.ctrlKey&&De(e)},queryHistory:P,handleHistoryClick:Be,queryValid:ne,onSubmit:De,onSubmitRate:Ee,isTabletOrMobile:J,labels:fe,loading:b||!1})),(0,ze.jsx)(vj,(0,l.Z)((0,l.Z)({},e),{},{queryInput:Y,searchButton:(0,ze.jsx)(fb,{disabled:!ne,loading:b||!1,onClick:De,isMobile:!1,alterText:"Use Query"}),logsRateButton:(0,ze.jsx)(pb,{disabled:!ne,onClick:Ee,isMobile:!1,alterText:"Use as Rate Query"}),statsSwitch:(0,ze.jsxs)("div",{className:"options-input",children:[(0,ze.jsx)(ub,{children:"Show Stats"}),(0,ze.jsx)(qb.Z,{checked:xe,size:"small",onChange:Pe,inputProps:{"aria-label":"controlled"}})]}),handleMetricValueChange:function(e){_e([{children:[{text:o().sanitize(e)}]}])}})),(0,ze.jsx)(bj,(0,l.Z)((0,l.Z)({},e),{},{queryInput:Y,isBuilder:S,searchButton:(0,ze.jsx)(fb,{disabled:!ne,loading:b||!1,onClick:De,isMobile:!1,alterText:"Use Query"}),logsRateButton:(0,ze.jsx)(pb,{disabled:!ne,onClick:Ee,isMobile:!1,alterText:"Use as Rate Query"}),statsSwitch:(0,ze.jsxs)("div",{className:"options-input",children:[(0,ze.jsx)(ub,{children:"Show Stats"}),(0,ze.jsx)(qb.Z,{checked:xe,size:"small",onChange:Pe,inputProps:{"aria-label":"controlled"}})]}),handleLogValueChange:function(e){_e([{children:[{text:o().sanitize(e)}]}])},handleLogsVolumeChange:Ie}))),!W&&function(e,n,t,r){return!t&&!n&&("metrics"===e||"logs"===e)?r:null}(v,m,J,(0,ze.jsx)(Jb,(0,l.Z)({},e))),function(e,n,t,r){return e||n||"flux"!==t||"traces"!==t?r:null}(J,m,v,(0,ze.jsx)(Kb,(0,l.Z)((0,l.Z)({},e),{},{open:we,handleClose:function(){He()},actPanel:U,name:t})))]})})},Tj=Cj,_j=function(e){var n=St.Z.div(Zj||(Zj=(0,r.Z)(["\n        color: ",";\n        padding: 10px;\n    "])),(function(e){return e.theme.textColor}));return(0,ze.jsx)(n,{children:"No labels available, please adjust API"})};function Ij(e){var n=e.label,t=e.type,r=(0,f.useState)(e.selected),i=(0,u.Z)(r,2),a=i[0],o=i[1];(0,f.useEffect)((function(){o(e.selected)}),[e.selected]);var l=(0,f.useMemo)((function(){return a?{borderColor:"#11abab",color:"#11abab"}:{}}),[a]);return(0,ze.jsx)("small",{className:t,style:l,onClick:function(t){return e.onClick(n)},children:n})}function Dj(e){var n=e.labels,t=e.data.dataSourceType,r=function(n){"Select Metric"===n?e.onLabelSelected("__name__"):e.onLabelSelected(n)},i=(0,f.useMemo)((function(){return"metrics"!==t?n:null===n||void 0===n?void 0:n.filter((function(e){return"__name__"!==e.name}))}),[t,n]);return(0,ze.jsxs)("div",{className:"valuelist-content",children:[i&&(0,ze.jsx)(ze.Fragment,{children:i.map((function(e,n){return(0,ze.jsx)(Ij,{label:e.name,selected:e.selected,onClick:r},n)}))}),!i&&(0,ze.jsx)(_j,(0,l.Z)({},e))]})}function Nj(e){return e.getTime()+"000000"}var Mj,Ej,Rj,Oj=function(e,n,t,r,i){return{metrics:"".concat(e,"/api/v1/label/").concat(t,"/values"),logs:"".concat(e,"/loki/api/v1/label/").concat(t,"/values?start=").concat(r,"&end=").concat(i)}[n]};var Lj=St.Z.div(Mj||(Mj=(0,r.Z)(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    flex: 1;\n    width: 100%;\n    height: 100%;\n"]))),Vj=(0,St.Z)(la.Z)(Ej||(Ej=(0,r.Z)(["\n    width: 30px;\n    height: 30px;\n"]))),zj=St.Z.input(Rj||(Rj=(0,r.Z)(["\n    background: ",";\n    color: ",";\n    font-size: 10px;\n    border: 1px solid ",";\n    border-radius: 3px;\n    outline: none;\n"])),(function(e){return e.theme.inputBg}),(function(e){return e.theme.textColor}),(function(e){return e.theme.buttonBorder}));function Fj(e,n){return"left"===e?m(n):x(n)}var Bj={borderColor:"#11abab",color:"#11abab"},Hj=function(e){var n=e.value,t=e.data,r=e.onValueClick,i=(0,f.useMemo)((function(){return n.selected}),[n.selected]),a=(0,f.useState)(i),o=(0,u.Z)(a,2),s=o[0],c=o[1],d=(0,f.useMemo)((function(){return s||(null===t||void 0===t?void 0:t.metric)===n.name?Bj:{}}),[s,n.selected,t.metric,n.name]);(0,f.useEffect)((function(){c(n.selected)}),[n.selected]);return(0,ze.jsx)("small",{className:"label-value",style:d,onClick:function(){var e=!1;c((function(n){return e=!n,!n}));var t=(0,l.Z)((0,l.Z)({},n),{},{selected:e});r(t)},children:n.name})},Pj=function(e){var n=(0,i.I0)(),t=e.name,r=e.data,a=e.labelsSelected,o=e.label,c=e.queries,d=r.dataSourceId,p=r.start,v=r.stop,h=r.labels,g=(0,f.useState)(""),m=(0,u.Z)(g,2),x=m[0],b=m[1],y=function(e,n,t,r){var a,o=(0,i.v9)((function(e){return e.dataSources})),c=(0,f.useMemo)((function(){return o.find((function(n){return n.id===e}))}),[o,e]),d=null===c||void 0===c||null===(a=c.auth)||void 0===a?void 0:a.basicAuth.value,p={},v={};if(d){var h,g,m,x=null===c||void 0===c||null===(h=c.auth)||void 0===h||null===(g=h.fields)||void 0===g?void 0:g.basicAuth,b=(0,s.Z)(x);try{for(b.s();!(m=b.n()).done;){var y=m.value;"user"===y.name&&(p.username=y.value),"password"===y.name&&(p.password=y.value)}}catch(q){b.e(q)}finally{b.f()}v.auth=p}var Z=Nj(t),w=Nj(r),S=new AbortController,j=(0,f.useState)(),k=(0,u.Z)(j,2),C=k[0],T=k[1];(0,f.useEffect)((function(){T(Oj(c.url,c.type,n,Z,w))}),[n,T,c]);var _=RZ(c),I=(0,f.useState)((0,l.Z)((0,l.Z)({},_),{},{"Content-Type":"application/json"})),D=(0,u.Z)(I,1)[0],N=(0,f.useMemo)((function(){return{signal:S.signal,method:"GET"}}),[]);v.options=N,v.headers=D;var M=(0,f.useState)([]),E=(0,u.Z)(M,2),R=E[0],O=E[1],L=(0,f.useState)(!1),V=(0,u.Z)(L,2),B=V[0],H=V[1];return(0,f.useEffect)((function(){if("flux"!==c.type&&""!==n){var e=function(){var e=(0,F.Z)((0,z.Z)().mark((function e(){var n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(H(!0),!C||""===C){e.next=12;break}return e.prev=2,e.next=5,P.Z.get(C,v);case 5:n=e.sent,O(n||[]),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:H(!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();e()}}),[c,C,n]),{response:R,controller:N.signal,loading:B}}(d,o,new Date(p),new Date(v)),Z=y.response,w=y.loading,S=(0,f.useState)([]),j=(0,u.Z)(S,2),k=j[0],C=j[1];(0,f.useEffect)((function(){var e,n=null===r||void 0===r||null===(e=r.labels)||void 0===e?void 0:e.find((function(e){return e.name===e})),t=null===n||void 0===n?void 0:n.values;"undefined"!==typeof t&&C(t)}),[c]);var T=(0,f.useMemo)((function(){var n,t;if((null===e||void 0===e||null===(n=e.data)||void 0===n||null===(t=n.labels)||void 0===t?void 0:t.length)<1)return[];var r=e.data.labels.find((function(e){return e.name===o}));return r?null===r||void 0===r?void 0:r.values:[]}),[e.data.labels]),_=(0,f.useMemo)((function(){var e,n;if((null===Z||void 0===Z||null===(e=Z.data)||void 0===e||null===(n=e.data)||void 0===n?void 0:n.length)>0){var t,i,a,s=null===r||void 0===r||null===(t=r.labels)||void 0===t?void 0:t.find((function(e){return e.name===o})),u=null===s||void 0===s?void 0:s.values,c=new Map;return null===u||void 0===u||u.forEach((function(e){c.set(e.name,(0,l.Z)((0,l.Z)({},e),{},{label:o}))})),null===Z||void 0===Z||null===(i=Z.data)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.map((function(e){var n,t;return{label:o,name:e,selected:(null===(n=c.get(e))||void 0===n?void 0:n.selected)||!1,inverted:!1,type:"value",id:(null===(t=c.get(e))||void 0===t?void 0:t.id)||(0,_e.x0)()}}))}return[]}),[Z]),I=(0,f.useState)(_),D=(0,u.Z)(I,2),N=D[0],M=D[1],E=(0,f.useState)(N),R=(0,u.Z)(E,2),O=R[0],L=R[1];(0,f.useEffect)((function(){M(_)}),[_,M]),(0,f.useEffect)((function(){L(N)}),[N,L]),(0,f.useEffect)((function(){if(_&&T){var e=function(e){var n=JSON.stringify(e);return JSON.parse(n)}(_),n=[];e.forEach((function(e){if(T.some((function(n){return n.name===e.name}))){var t=T.find((function(n){return n.name===e.name}));n.push((0,l.Z)({},t))}else n.push(e)})),M(n)}}),[T,_,M]);var V=function(r){var i=[];k.length>0&&(i=function(e,n){return n.some((function(n){return n.name===e.name}))?n.filter((function(n){return n.name!==e.name})):n.some((function(n){return n.name===e.name}))?void 0:[].concat((0,H.Z)(n),[(0,l.Z)({},e)])}(r,k),"metrics"===r.type&&M((function(e){var n=e.some((function(e){return e.id===r.id})),t=(0,H.Z)(e);if(n)return null===t||void 0===t?void 0:t.map((function(e){return e.id===r.id?(0,l.Z)((0,l.Z)({},e),{},{selected:!1}):(0,l.Z)((0,l.Z)({},e),{},{selected:!0})}))}))),i=[].concat((0,H.Z)(i),[(0,l.Z)({},r)]);var u=[];if((null===h||void 0===h?void 0:h.length)<1)u=[{name:o,selected:a.includes(o)&&i.length>0,values:(0,H.Z)(i)}];else if(h.some((function(e){return e.name===o}))){var d,f=(0,s.Z)(h);try{for(f.s();!(d=f.n()).done;){var p=d.value;p.name===o?(p={name:o,selected:a.includes(o)&&i.length>0,values:(0,H.Z)(i)},u.push(p)):u.push(p)}}catch(m){f.e(m)}finally{f.f()}}else u=[].concat((0,H.Z)(h),[{name:o,selected:a.includes(o)&&i.length>0,values:(0,H.Z)(i)}]);var v=null===a||void 0===a?void 0:a.map((function(e){return u.some((function(n){return n.name===e}))?u.find((function(n){return n.name===e})):{name:e,selected:!0,values:[]}})),g=(0,H.Z)(c);g.forEach((function(n){n.id===e.data.id&&(n.labels=v)})),n(Fj(t,g)),C(i)},B=(0,f.useCallback)((function(e){var n=e.target.value;b((function(e){return n})),L(""!==e?function(){return N.filter((function(e){return e.name.toLowerCase().includes(n.toLowerCase())}))}:function(){return N})}),[x]);return(0,ze.jsxs)("div",{className:"values-column",children:[(0,ze.jsx)("div",{className:"values-column-title",children:(0,ze.jsx)(qj,{resp:_,label:o,onClear:function(i){var a=so(r.expr||"",i||o,null,"=","value"),l=(0,H.Z)(c);l.forEach((function(n){n.id===e.data.id&&(n.expr=a)})),n(Fj(t,l))},filterState:x,onFilterChange:B})}),(0,ze.jsxs)("div",{className:"valuelist-content column",children:[w&&(0,ze.jsx)(Lj,{children:(0,ze.jsx)(Vj,{})}),(null===N||void 0===N?void 0:N.length)>0&&(null===O||void 0===O?void 0:O.map((function(n,t){return(0,f.createElement)(Hj,(0,l.Z)((0,l.Z)({},e),{},{key:t,value:n,actPanel:c,onValueClick:V}))})))]})]})},qj=function(e){var n=e.resp,t=e.label,r=e.onClear,i=e.filterState,a=e.onFilterChange;return(0,ze.jsxs)(ze.Fragment,{children:[(0,ze.jsxs)("span",{children:[(0,ze.jsx)("span",{className:"key",children:t})," | ",null===n||void 0===n?void 0:n.length]}),(0,ze.jsx)("span",{children:(0,ze.jsx)(zj,{placeholder:"Search For Values...",value:i,onChange:a})}),(0,ze.jsx)("span",{className:"close-column",onClick:function(e){return r(t)},children:"clear"})]})};function Aj(e){var n=e.data,t=e.name,r=n.dataSourceType,a=(0,i.I0)(),o=(0,i.v9)((function(e){return e[t]})),c=(0,f.useState)(e.labelsSelected),d=(0,u.Z)(c,2),p=d[0],v=d[1],h=(0,f.useMemo)((function(){return"metrics"===r?p.filter((function(e){return"__name__"!==e.name})):p}),[p,r]),g=(0,f.useMemo)((function(){return"metrics"===r?p.filter((function(e){return"__name__"===e.name})):null}),[p,r]);return(0,f.useEffect)((function(){v(e.labelsSelected)}),[e.labelsSelected,v]),(0,ze.jsxs)("div",{className:"values-container",children:[(0,ze.jsxs)("div",{className:"values-container-column",children:[null!==g&&p.length>0&&(0,ze.jsx)(Pj,(0,l.Z)((0,l.Z)({},e),{},{label:"__name__",type:"metrics"})),p&&(null===h||void 0===h?void 0:h.map((function(n,t){return(0,f.createElement)(Pj,(0,l.Z)((0,l.Z)({},e),{},{label:n,key:t,type:"logs"}))})))]}),(0,ze.jsx)("div",{style:{margin:"3px",marginBottom:"6px"},children:(0,ze.jsx)(fb,{onClick:function(){var r=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=n,a=i.split("{")[0],o="";if(t){o=i.split("}")[1];var l=i.split(/[|json]/);if(io.some((function(e){return l[1].includes(e)}))){var u=" | ".concat(r);o=o.toString().concat(u.toString())}}else o=i.split("}")[1];var c,d=[],f=(0,s.Z)(e);try{var p=function(){var e=c.value;if(e.selected&&e.values&&e.values.length>0){var n=e.values.filter((function(e){return e.selected&&!e.inverted})).map((function(e){return e.name})),t=e.values.filter((function(e){return e.selected&&e.inverted})).map((function(e){return e.name}));n.length>1?d.push("".concat(e.name,'=~"').concat(n.join("|"),'"')):1===n.length&&d.push("".concat(e.name,'="').concat(n[0],'"')),t.forEach((function(n){d.push("".concat(e.name,'!="').concat(n,'"'))}))}};for(f.s();!(c=f.n()).done;)p()}catch(v){f.e(v)}finally{f.f()}return[a,"{",d.join(","),"}",o].join("")}(n.labels,n.expr),i=(0,H.Z)(o);i.forEach((function(t){t.id===e.data.id&&(t.expr=r,t.labels=n.labels)})),a(function(e,n){return"left"===e?m(n):x(n)}(t,i))},isMobile:!1,alterText:"Use Query",loading:!1})})]})}function Qj(e){return e.getTime()+"000000"}function Wj(e){return Math.round(e.getTime()/1e3)}var Uj,Jj=function(e,n,t,r){return"metrics"===n?"".concat(e,"/api/v1/labels"):"".concat(e,"/loki/api/v1/label?start=").concat(t,"&end=").concat(r)},Gj=function(e,n){return{metrics:Wj(e),logs:Qj(e)}[n]};var Kj,Yj,Xj=St.Z.div(Uj||(Uj=(0,r.Z)(["\n    background: ",";\n\n    .valuesList {\n        transition: 0.02s all;\n        display: flex;\n        flex-wrap: wrap;\n        flex: 1;\n        flex-direction: column;\n        font-size: 12px;\n        border-radius: 4px;\n        transition: 0.02s all;\n        .valuelist-title {\n            display: flex;\n            flex-direction: column;\n            flex: 1;\n            justify-content: space-between;\n            font-size: 1em;\n            flex: 1;\n            margin: 5px;\n        }\n        .valuelist-content {\n            display: flex;\n            font-size: 14px;\n            align-items: center;\n            flex-wrap: wrap;\n            max-height: 500px;\n            overflow: auto;\n            .metric-label {\n                background: gray;\n            }\n        }\n        .valuelist-filter {\n            display: flex;\n            flex: 1;\n            flex-direction: column;\n\n            .valuelist-filter-title {\n                font-size: 0.75em;\n            }\n            input {\n                color: white;\n                background: $black-quoise;\n                padding: 6px 3px;\n                border-radius: 4px;\n                flex: 1;\n                margin: 0px 3px;\n                outline: none;\n                border: none;\n            }\n        }\n        &::-webkit-scrollbar {\n            width: 10px;\n        }\n        &::-webkit-scrollbar-corner {\n            background: transparent;\n        }\n        &::-webkit-scrollbar-thumb {\n            border-radius: 10px;\n            background: $grey-light;\n        }\n    }\n\n    .valuelist-content {\n        small {\n            color: ",";\n            background: ",";\n            border: 1px solid ",";\n\n            margin: 2px;\n            padding: 2px 7px;\n            border-radius: 3px;\n            line-height: 1.5;\n            font-size: 12px;\n            cursor: pointer;\n            align-items: center;\n            white-space: nowrap;\n            text-overflow: ellipsis;\n            overflow: hidden;\n            max-width: 40ch;\n            transition: .5s all;\n            &:hover {\n                background: ",";\n            }\n            &.metric {\n                color: ",";\n                background: ",";\n            }\n        }\n    }\n\n\n    \n    .values-container {\n        .values-container-column {\n            display: flex;\n            flex-wrap: wrap;\n            max-width: 100%;\n            .values-column {\n                margin: 5px;\n                border-radius: 3px;\n                height: fit-content;\n                min-width: 278px;\n                max-width: 278px;\n                flex: 1;\n                background: ",";\n\n                .column {\n                    border: 1px solid ",";\n                    background: ",";\n                    border-top: none;\n                    max-height: 350px;\n                    &::-webkit-scrollbar {\n                        width: 10px;\n                        color: #58585898;\n                        background: #ffffff1f;\n                    }\n                    &::-webkit-scrollbar-corner {\n                        background: transparent;\n                    }\n                    &::-webkit-scrollbar-thumb {\n                        border-radius: 10px;\n                        background: $grey-light;\n                    }\n                }\n                .values-column-title {\n                    padding: 4px;\n                    font-size: 1em;\n                    border-radius: 4px 4px 0px 0px;\n                    display: flex;\n                    flex: 1;\n                    transition: 0.02s all;\n                    justify-content: space-between;\n                    color: ",";\n                    background: ",";\n                    border: 1px solid ",";\n                    .close-column {\n                        align-self: flex-end;\n                        justify-self: end;\n                        cursor: pointer;\n                        padding: 2px;\n                        border-radius: 10px;\n                        display: flex;\n                        align-items: center;\n                        justify-content: center;\n\n                        font-size: 10px;\n                        &:hover {\n                            background: $dark-quoise-hover;\n\n                            color: black;\n                        }\n                    }\n                }\n            }\n        }\n    }\n"])),(function(e){return e.theme.widgetContainer}),(function(e){return e.theme.textColor}),(function(e){return e.theme.buttonDefault}),(function(e){return e.theme.buttonBorder}),(function(e){return e.theme.buttonHover}),(function(e){return e.theme.buttonText}),(function(e){return e.theme.primaryDark}),(function(e){return e.theme.buttonHover}),(function(e){return e.theme.buttonBorder}),(function(e){return e.theme.widgetContainer}),(function(e){return e.theme.textColor}),(function(e){return e.theme.widgetContainer}),(function(e){return e.theme.buttonBorder})),$j=function(e,n){return"left"===e?m(n):x(n)};function ek(e){var n=e.data,t=e.name,r=e.queries,a=(0,i.I0)(),o=n.dataSourceId,c=n.labels,d=n.start,p=n.stop,h=n.id,g=Tb.updateLabelSelected,m=(0,f.useState)([]),x=(0,u.Z)(m,2),b=x[0],y=x[1],Z=(0,f.useState)([]),w=(0,u.Z)(Z,2),S=w[0],j=w[1],k=(0,vi.F)(),C=function(e){var n,t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,c=(0,i.I0)(),d=a||new Date(Date.now()+3e4),p=o||new Date(Date.now()),h=(0,i.v9)((function(e){return e.dataSources})),g=(0,f.useMemo)((function(){var n=h.find((function(n){return n.id===e}));return""!==r&&(n.url=r),n}),[e,h]),m=(0,f.useState)(g.type||""),x=(0,u.Z)(m,2),b=x[0],y=x[1];(0,f.useEffect)((function(){y(g.type)}),[g,y]),n=Gj(new Date(d),b),t=Gj(new Date(p),b);var Z=(0,f.useState)(Jj(g.url,b,n,t)),w=(0,u.Z)(Z,2),S=w[0],j=w[1];(0,f.useEffect)((function(){j(Jj(g.url,b,n,t))}),[j,b,g]);var k=(0,f.useState)([]),C=(0,u.Z)(k,2),T=C[0],_=C[1],I=(0,f.useState)(!1),D=(0,u.Z)(I,2),N=D[0],M=D[1];return(0,f.useEffect)((function(){if("flux"!==g.type&&g.url&&""!==g.url){var e,n=(0,Dy.Uc)(g),t=null===g||void 0===g||null===(e=g.auth)||void 0===e?void 0:e.basicAuth.value,r={},i={};if(t){var a,o,u,d=null===g||void 0===g||null===(a=g.auth)||void 0===a||null===(o=a.fields)||void 0===o?void 0:o.basicAuth,f=(0,s.Z)(d);try{for(f.s();!(u=f.n()).done;){var p=u.value;"user"===p.name&&(i.username=p.value),"password"===p.name&&(i.password=p.value)}}catch(m){f.e(m)}finally{f.f()}r.auth=i}r.options={method:"GET"},r.headers=(0,l.Z)((0,l.Z)({},n),{},{"Content-Type":"application/json"});var h=function(){var e=(0,F.Z)((0,z.Z)().mark((function e(){var n;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),e.prev=1,e.next=4,P.Z.get(S,r).then((function(e){return e})).catch((function(e){var n="";n=e.response?"Error "+e.response.status+"at Labels ":e.request?e.request:e.message,console.log("error requesting labels"),console.log(e),c((0,v.el)({type:_r.m.error,message:n}))}));case 4:n=e.sent,_(n||[]),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("Error fetching labels"),console.log(e.t0);case 12:M(!1);case 13:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}();h()}}),[S,g]),{response:T,loading:N}}(o,"",d,p),T=C.response,_=C.loading,D=(0,f.useMemo)((function(){return(null===c||void 0===c?void 0:c.length)>0?c.map((function(e){return{name:e.name,selected:e.selected}})):[]}),[c]);(0,f.useEffect)((function(){var e,n;null!==T&&void 0!==T&&null!==(e=T.data)&&void 0!==e&&e.data&&y(null===T||void 0===T||null===(n=T.data)||void 0===n?void 0:n.data)}),[T,y]);var N=(0,f.useMemo)((function(){if((null===b||void 0===b?void 0:b.length)>0)return null===b||void 0===b?void 0:b.map((function(e){return{name:e,selected:!1}}))}),[b]);(0,f.useEffect)((function(){N&&O(N)}),[N]);var M=(0,f.useState)(N),E=(0,u.Z)(M,2),R=E[0],O=E[1];(0,f.useEffect)((function(){if(N&&D){var e=JSON.parse(JSON.stringify(N)).map((function(e){var n=D.find((function(n){return n.name===e.name}));return n?(0,l.Z)({},n):e})),n=e.filter((function(e){return e.selected})).map((function(e){return e.name}));j(n),O(e)}}),[D,N,O]);var L=(0,f.useCallback)((function(e){var n=function(e,n){var t,r=[],i=(0,s.Z)(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;a.name===n?r.push((0,l.Z)((0,l.Z)({},a),{},{selected:!a.selected})):r.push(a)}}catch(o){i.e(o)}finally{i.f()}return r}(R,e),i=g(S,e);!function(e,n,i){var o=(0,H.Z)(n),s=null===n||void 0===n?void 0:n.filter((function(n){var t=null===e||void 0===e?void 0:e.find((function(e){return e.name===n.name}));return null===t||void 0===t?void 0:t.selected}));if((null===o||void 0===o?void 0:o.length)>0&&null!==n&&void 0!==n&&n.some((function(e){return e.name===i}))){var u=(0,H.Z)(r),c=null===u||void 0===u?void 0:u.map((function(e){return e.id===h?(0,l.Z)((0,l.Z)({},e),{},{labels:s}):e}));a($j(t,c))}}(n,c,e),O(n),j(i)}),[R,S,c]);return n?(0,ze.jsx)(I.a,{theme:k,children:(0,ze.jsx)(Xj,{children:(0,ze.jsxs)("div",{className:"valuesList",children:[(0,ze.jsx)("div",{className:"valuelist-title",children:!_&&(0,ze.jsx)(Dj,(0,l.Z)((0,l.Z)({},e),{},{labels:R,onLabelSelected:L}))}),(0,ze.jsx)(Aj,(0,l.Z)((0,l.Z)({},e),{},{labelsSelected:S}))]})})}):null}St.Z.div(Kj||(Kj=(0,r.Z)(["\n    padding: 20px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n"]))),St.Z.div(Yj||(Yj=(0,r.Z)(["\n    padding: 10px;\n    color: orangered;\n    border: 1px solid orangered;\n    border-radius: 3px;\n    font-size: 1em;\n"])));var nk,tk,rk,ik,ak,ok,lk,sk=function(e){var n=(0,vi.F)(),t=e.data.browserOpen,r=(0,f.useState)(t),i=(0,u.Z)(r,2),a=i[0],o=i[1];return(0,f.useEffect)((function(){o(t)}),[t]),a&&(0,ze.jsx)(I.a,{theme:n,children:(0,ze.jsx)(ek,(0,l.Z)({},e))})},uk=function(e){var n=e.data,t=n.dataSourceType,r=n.isShowStats,a=n.isBuilder,o=e.launchQuery,s=(0,i.v9)((function(e){return e.isEmbed})),u=(0,f.useMemo)((function(){return!a}),[a]);return(0,ze.jsxs)("div",{style:{margin:"3px 0px"},children:[(0,ze.jsx)(Tj,(0,l.Z)((0,l.Z)({},e),{},{launchQuery:o})),function(n,t,r){return!n&&"logs"===t&&!r&&(0,ze.jsx)(sk,(0,l.Z)({},e))}(s,t,a),function(n,t){return n&&t&&(0,ze.jsx)(Rx,(0,l.Z)({},e))}(r,u)]})},ck=t(72453),dk=t(47518),fk=St.Z.div(nk||(nk=(0,r.Z)(["\n    background: ",";\n    color: ",";\n    display: flex;\n    flex-direction:column;\n    border-radius: 3px;\n    margin-bottom: 3px;\n    padding:5px;\n    .query-title {\n        display: flex;\n        align-items: center;\n    }\n    .query-tools-cont {\n        display:flex;\n        align-items:center;\n        justify-content:space-between;\n        flex-wrap:wrap;\n    }\n    .query-tools {\n        display: flex;\n        align-items: center;\n        flex-wrap:wrap;\n        justify-content:space-between;\n        flex:1;\n        gap:2px;\n        margin-top:4px;\n        \n    }\n    .query-id {\n        font-size: 13px;\n        font-weight: bold;\n        margin-left: 5px;\n    }\n    .query-title-tabs {\n        display:flex;\n        align-items:center;\n    }\n"])),(function(e){var n=e.theme;return"".concat(n.secondaryWidgetContainer)}),(function(e){var n=e.theme;return"".concat(n.textColor)})),pk=St.Z.button(tk||(tk=(0,r.Z)(["\n    background: none;\n    border: none;\n    padding: 0px 2px;\n    cursor: pointer;\n"]))),vk=(0,St.Z)(bt.Z)(rk||(rk=(0,r.Z)(["\n    font-size: 13px;\n    color: ",";\n"])),(function(e){return e.theme.textColor})),hk=(0,St.Z)(dk.Z)(ik||(ik=(0,r.Z)(["\n    font-size: 13px;\n    color: ",";\n"])),(function(e){return e.theme.textColor})),gk=(St.Z.div(ak||(ak=(0,r.Z)(["\n    display: flex;\n    margin-right: 10px;\n    flex-direction: row;\n    margin-top: 5px;\n    align-items: center;\n    select {\n        background: ",";\n        color:  ",";\n        border: 1px solid ",";\n        border-radius:3px;\n        font-size:12px;\n        height:26px;\n    }\n"])),(function(e){return e.theme.inputBg}),(function(e){return e.theme.textColor}),(function(e){return e.theme.buttonBorder})),St.Z.div(ok||(ok=(0,r.Z)(["\n    color: ",";\n    display: flex;\n    align-items: center;\n    font-size: 12px;\n    padding: 0px 10px;\n    flex: 0;\n    white-space: nowrap;\n\n    border-radius: 3px 0px 0px 3px;\n"])),(function(e){return e.theme.textColor})),function(e){return(0,Ve.iv)(lk||(lk=(0,r.Z)(["\n    margin-left: 20px;\n    font-family: monospace;\n    font-size: 12px;\n    text-overflow: ellipsis;\n    overflow: hidden;\n    max-width: 100px;\n    color: ",";\n    background: transparent;\n    border: none;\n    outline: none;\n"])),e.textColor)});function mk(e){var n=(0,f.useState)(!1),t=(0,u.Z)(n,2),r=t[0],i=t[1],a=(0,f.useState)(e.idRef),l=(0,u.Z)(a,2),s=l[0],c=l[1],d=(0,vr.Fg)();return!0===r?(0,ze.jsx)(ze.Fragment,{children:(0,ze.jsx)(D.Z,{title:s,children:(0,ze.jsx)("input",{className:(0,Ve.cx)(gk(d)),value:o().sanitize(s),placeholder:s,onChange:function(e){e.preventDefault();var n=e.target.value;c(n)},onKeyDown:function(n){"Enter"===n.key&&(e.onIdRefUpdate(s),i(!1))},onBlur:function(n){e.onIdRefUpdate(s),i(!1)}})})}):(0,ze.jsxs)(ze.Fragment,{children:[" ",(0,ze.jsx)(D.Z,{title:s,children:(0,ze.jsx)("p",{className:(0,Ve.cx)(gk(d)),onClick:function(e){return i(!0)},children:s})})]})}var xk={height:"18px",width:"18px",marginRight:"3px"},bk={display:"flex",alignItems:"center"},yk={display:"flex",alignItems:"flex-end"},Zk={height:"14px",width:"14px",marginRight:"3px"};function wk(e){var n=e.defaultValue,t=e.options,r=(0,f.useMemo)((function(){var e=null===t||void 0===t?void 0:t.find((function(e){return(null===e||void 0===e?void 0:e.value)===n}));return{icon:null===e||void 0===e?void 0:e.icon,label:null===e||void 0===e?void 0:e.label}}),[n,t]);return(0,ze.jsxs)("div",{style:yk,children:[(0,ze.jsx)(Iy.JO,{icon:r.icon,style:Zk}),(0,ze.jsx)("div",{children:r.label})]})}var Sk,jk,kk=function(e){var n=Ay.c.Option,t=e.data,r=t.label,i=t.icon;return(0,ze.jsx)(n,(0,l.Z)((0,l.Z)({},e),{},{children:(0,ze.jsxs)("div",{style:bk,children:[(0,ze.jsx)(Iy.JO,{icon:i,style:xk}),(0,ze.jsx)("span",{style:{fontSize:"14px"},children:r})]})}))},Ck=function(e){var n=e.data,t=n.icon,r=n.label;return(0,ze.jsxs)("div",{style:yk,children:[(0,ze.jsx)(Iy.JO,{icon:t,style:Zk}),(0,ze.jsx)("div",{children:r})]})},Tk=(0,f.forwardRef)((function(e,n){var t=e.options,r=e.onSelectChange,i=(0,vr.Fg)();return(0,ze.jsx)(Qy.ZP,{styles:Wy(i,100),placeholder:(0,ze.jsx)(wk,(0,l.Z)({},e)),options:t,ref:n,components:{Option:kk,SingleValue:Ck},theme:function(e){return(0,Dy.Pu)(e,i)},onChange:r})})),_k=function(e){var n=e.value,t=e.onChange,r=e.opts,i=e.extValue,a=(0,f.useRef)(null);(0,f.useEffect)((function(){(null===n||void 0===n?void 0:n.value)!==i&&""!==i&&(a.current.value=i)}),[]),(0,f.useEffect)((function(){(null===n||void 0===n?void 0:n.value)!==i&&""!==i&&null!==a&&void 0!==a&&a.current&&a.current.setValue(i)}),[i]);var o=(0,f.useMemo)((function(){return r.map((function(e){return{value:null===e||void 0===e?void 0:e.value,label:null===e||void 0===e?void 0:e.name,icon:null===e||void 0===e?void 0:e.icon}}))}),[r]);return r?(0,ze.jsx)(Tk,{ref:a,defaultValue:i,options:o,onSelectChange:function(e){t({target:{value:null===e||void 0===e?void 0:e.value}})}}):null},Ik=St.Z.button(Sk||(Sk=(0,r.Z)(["\npadding:3px 12px;\nfont-size: 12px;\nline-height:20px;\ncursor:pointer;\nuser-select: none;\nborder:none;\nborder-radius: 3px;\nfont-weight: 500;\nwhite-space: nowrap;\ndisplay:flex;\nalign-items: center;\n"]))),Dk=(0,St.Z)(Ik)(jk||(jk=(0,r.Z)(["\n    background: ",";\n    border:1px solid ",";\n    color: ",";\n    cursor: pointer;\n    text-overflow: ellipsis;\n    transition: 0.2s all;\n    height:26px;\n    margin: 0px 6px;\n    span {\n        margin-left: 4px;\n        color: ",";\n    }\n    &:hover {\n        background: ",";\n    }\n"])),(function(e){return e.theme.buttonDefault}),(function(e){return e.theme.buttonBorder}),(function(e){return e.theme.textColor}),(function(e){return e.theme.textColor}),(function(e){return e.theme.buttonHover}));function Nk(e){var n=e.type,t=e.side,r=void 0===t?"left":t,a=e.onDeleteQuery,o=e.isSplit,s=(0,i.v9)((function(e){return e[r]})),c=(0,i.v9)((function(e){return e.left})),d=(0,i.v9)((function(e){return e.right})),f=(0,i.v9)((function(e){return e[r]})),p=(0,i.I0)(),v=(0,i.v9)((function(e){return e.isSplit})),h=function(e){(e.preventDefault(),e.stopPropagation(),o||v)?(!function(e,n,t,r){var i=(0,u.Z)(e,2),a=i[0],o=i[1],s=(0,H.Z)(t),c=null===s||void 0===s?void 0:s.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{open:!1})}));"left"===n&&o&&r(m((0,H.Z)(c))),"right"===n&&a&&r(x((0,H.Z)(c)))}([c[0].open,d[0].open],r,s,p),p(w(!1))):(!function(e,n){var t=(0,u.Z)(e,2),r=t[0],i=t[1],a=(0,H.Z)(r),o=(0,H.Z)(i),s=function(e){return null===e||void 0===e?void 0:e.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{open:!0})}))},c=s(a),d=s(o);n(m(c)),n(x(d))}([c,d],p),p(w(!0)))},g=o?"Close Split View":"Split View";return(0,ze.jsx)(ze.Fragment,{children:"split"===n?(0,ze.jsx)(D.Z,{title:g,children:(0,ze.jsx)(Dk,{onClick:h,children:o?"Close":"Split"})}):(0,ze.jsx)(st.Z,{style:{fontSize:"15px",cursor:"pointer",padding:"3px"},onClick:function(e){(null===f||void 0===f?void 0:f.length)>1&&void 0!==a?a():v&&h(e)}})})}var Mk,Ek=t(88564),Rk=t(28485),Ok=t(65280),Lk=(0,Ek.ZP)((function(e){return(0,ze.jsx)(Rk.Z,(0,l.Z)((0,l.Z)({},e),{},{TabIndicatorProps:{children:(0,ze.jsx)("span",{className:"MuiTabs-indicatorSpan"})}}))}))((function(e){var n=e.theme;return{"& .MuiButtonBase-root-MuiTab-root":{maxHeight:"20px"},"& .MuiTabs-indicator":{display:"flex",justifyContent:"center",backgroundColor:"transparent"},"& .MuiTabs-indicatorSpan":{maxWidth:40,width:"100%",backgroundColor:null===n||void 0===n?void 0:n.primaryDark}}})),Vk=(0,Ek.ZP)((function(e){return(0,ze.jsx)(Ok.Z,(0,l.Z)({disableRipple:!0},e))}))((function(e){var n=e.theme;return{textTransform:"none",fontWeight:n.typography.fontWeightRegular,fontSize:"12px",padding:0,marginRight:"8px",color:n.textOff,"&.Mui-selected":{color:n.textColor},"&.Mui-focusVisible":{backgroundColor:"rgba(100, 95, 228, 0.32)"}}})),zk=function(e){return(0,Ve.iv)(Mk||(Mk=(0,r.Z)(["\n    background: ",";\n    .MuiTabs-root {\n        height: 20px !important;\n        min-height: 20px;\n    }\n    .MuiButtonBase-root {\n        min-height: 0;\n    }\n"])),e.WidgetBg)},Fk={fontSize:"15px",cursor:"pointer",padding:"3px",marginLeft:"10px"};function Bk(e){var n,t,r,a,o,l=(0,i.I0)(),s=e.onTabChange,c=e.tabsValue,d=e.isTabs,p=e.activeTabs,v=e.children,h=e.data,g=h.expr,b=h.id,y=h.start,Z=h.stop,w=h.label,S=h.pickerOpen,j=h.idRef,k=e.isQueryOpen,C=(0,vi.F)(),T=(0,i.v9)((function(e){return e.left})),I=(0,i.v9)((function(e){return e.right})),N=(0,i.v9)((function(n){return n[e.name]})),M=(0,i.v9)((function(e){return e.isEmbed})),E=(0,i.v9)((function(e){return e.isSplit})),R=(0,i.v9)((function(e){return e.dataSources})),O=(0,_.useMediaQuery)({query:"(max-width: 1013px)"}),L=(0,f.useState)(e.data.dataSourceId),V=(0,u.Z)(L,2),z=V[0],F=V[1],B=(0,f.useMemo)((function(){return R.length>0?R.map((function(e){return{value:e.id,name:e.name,type:e.type,icon:e.icon}})):null}),[R]);(0,f.useEffect)((function(){F(e.data.dataSourceId)}),[]),(0,f.useEffect)((function(){var n;null!==e&&void 0!==e&&null!==(n=e.data)&&void 0!==n&&n.dataSourceId&&F(e.data.dataSourceId)}),[e.data.dataSourceId]);var P=(0,f.useState)({value:(null===e||void 0===e||null===(n=e.data)||void 0===n?void 0:n.dataSourceId)||"32D16h5uYBqUUzhD",name:(null===R||void 0===R||null===(t=R.find((function(n){var t;return(null===n||void 0===n?void 0:n.id)===(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.dataSourceId)})))||void 0===t?void 0:t.name)||(null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.dataSourceId),type:null===e||void 0===e||null===(a=e.data)||void 0===a?void 0:a.dataSourceType,icon:(null===R||void 0===R||null===(o=R.find((function(n){var t;return n.id===(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.dataSourceId)})))||void 0===o?void 0:o.icon)||(null===e||void 0===e?void 0:e.data.dataSourceId)}),q=(0,u.Z)(P,2),A=q[0],Q=q[1],W=function(e,n){return"left"===e?m(n):x(n)};var U=function(e,n){e.forEach((function(e){e.start=y,e.stop=Z,e.label=w})),l(W(n,e))};return(0,ze.jsxs)(fk,{children:[(0,ze.jsxs)("div",{className:"query-tools-cont",children:[(0,ze.jsxs)("div",{className:"query-title-tabs",children:[(0,ze.jsx)(Hk,{isEmbed:M,idRef:j,expr:g,onIdRefUpdate:function(n){var t=(0,H.Z)(N);t.forEach((function(t){t.id===e.data.id&&(t.idRef=n)})),l(W(e.name,t))},isQueryOpen:k}),d&&(0,ze.jsx)("div",{className:(0,Ve.cx)(zk(C)),children:(0,ze.jsxs)(Lk,{value:c,onChange:s,children:[(0,ze.jsx)(Vk,{label:"Search"}),(null===p||void 0===p?void 0:p.length)>0&&(null===p||void 0===p?void 0:p.map((function(e,n){return(0,ze.jsx)(Vk,{label:e.name},n)})))]})})]}),!M&&(0,ze.jsxs)("div",{className:"query-tools",children:[(0,ze.jsx)("div",{style:{display:"flex",alignItems:"center"}}),(0,ze.jsxs)("div",{style:{display:"flex",alignItems:"center",justifySelf:"flex-end"},children:[(0,ze.jsx)(Wi.Z,{section:"Query Toolbar",localProps:e}),!O&&(0,ze.jsx)(Nk,{type:"split",isSplit:E,side:e.name}),(0,ze.jsx)(Ri,{id:b,onStopChange:function(n){var t=(0,H.Z)(N);t.forEach((function(t){t.id===e.data.id&&(t.stop=n)})),l(W(e.name,t))},onStartChange:function(n){var t=(0,H.Z)(N);t.forEach((function(t){t.id===e.data.id&&(t.start=n)})),l(W(e.name,t))},onLabelChange:function(n){var t=(0,H.Z)(N);t.forEach((function(t){t.id===e.data.id&&(t.label=n)})),l(W(e.name,t))},onPickerOpen:function(n){var t=(0,H.Z)(N);t.forEach((function(t){t.id===e.data.id&&(t.pickerOpen=n)})),l(W(e.name,t))},startTs:y,stopTs:Z,label:w,pickerOpen:S}),(0,ze.jsx)(D.Z,{title:"Sync Time Ranges",children:(0,ze.jsx)(ck.Z,{style:Fk,onClick:function(){var e=(0,H.Z)(T),n=(0,H.Z)(I);U(e,"left"),U(n,"right")}})}),(0,ze.jsx)(_k,{extValue:z,value:A,onChange:function(n){var t,r,i=n.target.value,a=R.find((function(e){return(null===e||void 0===e?void 0:e.id)===i})),o=JSON.parse(JSON.stringify(N)),s=B.find((function(e){return e.value===i})),u=function(){try{var e;return(e=localStorage.getItem("dsSelected"))?JSON.parse(e):[]}catch(n){console.log(n)}}(),c=[];(null===u||void 0===u?void 0:u.length)>0?c=(null===u||void 0===u?void 0:u.find((function(n){var t;return(null===n||void 0===n?void 0:n.queryId)===(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.id)})))||!1?u.map((function(n){var t;return n.queryId===(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.id)?{queryId:null===n||void 0===n?void 0:n.queryId,dataSourceId:null===a||void 0===a?void 0:a.id}:n})):[].concat((0,H.Z)(u),[{queryId:null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.id,dataSourceId:null===a||void 0===a?void 0:a.id}]):c=[].concat((0,H.Z)(u),[{queryId:null===e||void 0===e||null===(r=e.data)||void 0===r?void 0:r.id,dataSourceId:null===a||void 0===a?void 0:a.id}]);localStorage.setItem("dsSelected",JSON.stringify(c)),Q((function(e){return s})),o.forEach((function(n){var t;(null===n||void 0===n?void 0:n.id)===(null===e||void 0===e||null===(t=e.data)||void 0===t?void 0:t.id)&&(n.dataSourceId=null===a||void 0===a?void 0:a.id,n.dataSourceType=null===a||void 0===a?void 0:a.type,n.dataSourceURL=null===a||void 0===a?void 0:a.url)})),l(W(e.name,o))},opts:B,label:""}),(0,ze.jsx)(Iw.Z,{style:Fk,onClick:e.onAddQuery}),(0,ze.jsx)(Nk,{type:"remove",onDeleteQuery:e.onDeleteQuery,side:e.name})]})]})]}),v]})}var Hk=function(e){var n=e.isEmbed,t=e.expr,r=e.isQueryOpen;return(0,ze.jsxs)("div",{className:"query-title",children:[!n&&(0,ze.jsx)(pk,{onClick:function(){r[1](!r[0])},children:r[0]?(0,ze.jsx)(vk,{}):(0,ze.jsx)(hk,{})}),(0,ze.jsx)(mk,(0,l.Z)({},e)),n&&(0,ze.jsx)("p",{style:{marginLeft:"20px",fontFamily:"monospace"},children:t})]})},Pk=t(4760),qk=function(e){var n=e.section,t=e.localProps,r=e.name;return(0,ze.jsx)("div",{className:"renderer-content",children:function(e,r){return(0,ze.jsx)(r,{localProps:t,section:n,name:e})}(r,Pk.Q$.getPlugin(n,r).Component)})},Ak=function(){try{var e=JSON.parse(localStorage.getItem("queryData")||"[]")||[];return(0,H.Z)(e)}catch(n){return[]}};function Qk(e,n){return(null===e||void 0===e?void 0:e.length)>1?null===e||void 0===e?void 0:e.filter((function(e){return(null===e||void 0===e?void 0:e.id)!==n})):e}var Wk=function(e){localStorage.setItem("queryData",JSON.stringify(e))},Uk=function(e,n){return e.filter((function(e){return function(e,n){return e.queryId!==n}(e,n)}))},Jk=function(e,n,t){var r=function(e){return e[e.length-1].lastIdx}(e),i=function(e,n){return e>n.length-1?"".concat(n[0]).concat(e):n[e]}(r,t);return function(e,n,t,r){var i=(0,l.Z)((0,l.Z)({},r),{},{id:(0,_e.x0)(),idRef:t,labels:[],expr:"",lastIdx:e+1,cp:0});return[].concat((0,H.Z)(n),[i])}(r,e,i,n)},Gk=function(e,n){return"left"===e?(r=n,function(e){e({type:"SET_LEFT_PANEL",left:r})}):(t=n,function(e){e({type:"SET_RIGHT_PANEL",right:t})});var t,r},Kk=["children","value","index"];function Yk(e){var n=e.children,t=e.value,r=e.index,i=(0,Lo.Z)(e,Kk);return(0,ze.jsx)("div",(0,l.Z)((0,l.Z)({role:"tabpanel",hidden:t!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r)},i),{},{children:t===r&&(0,ze.jsx)(ze.Fragment,{children:n})}))}var Xk,$k,eC,nC,tC,rC,iC,aC,oC=function(e){var n=e.name,t=e.data,r=t.id,a=(0,f.useState)(""),o=(0,u.Z)(a,2),s=o[0],c=o[1],d=(0,i.I0)(),p=(0,i.v9)((function(e){return e["".concat(n,"DataView")]})),v=(0,i.v9)((function(e){return e[n]})),h=(0,f.useState)(!0),g=function(e){return(0,f.useMemo)((function(){return Array.from(Array(26)).map((function(e,n){return n+65})).map((function(n){var t;return(null===e||void 0===e||null===(t=e.slice(0,1))||void 0===t?void 0:t.toUpperCase())+"-"+String.fromCharCode(n)}))}),[])}(n),m=(0,vi.F)(),x=(0,f.useState)(0),b=(0,u.Z)(x,2),y=b[0],Z=b[1],w=(0,Pk.lu)("Query Item"),S=w.activeTabs,j=w.isActiveTabs;return(0,ze.jsx)(I.a,{theme:m,children:(0,ze.jsx)(Bk,(0,l.Z)((0,l.Z)({},e),{},{isQueryOpen:h,onDeleteQuery:function(){var e,t=Qk(v,r),i=Qk(p,r),a=Ak();(null===a||void 0===a?void 0:a.length)>0&&function(){var e=Ak();if((null===e||void 0===e?void 0:e.length)>0){var n=Uk(e,r);Wk(n)}}(),t&&d(Gk(n,t)),i&&d(function(e,n){return"left"===e?(r=n,function(e){e({type:"SET_LEFT_DATAVIEW",leftDataView:r})}):(t=n,function(e){e({type:"SET_RIGHT_DATAVIEW",rightDataView:t})});var t,r}(n,i)),"right"===n&&0===t.length&&d((e=!1,function(n){n({type:"SET_SPLIT_VIEW",isSplit:e})}))},onAddQuery:function(){var e=Jk(v,t,g);d(Gk(n,e))},onTabChange:function(e,n){Z((function(){return n}))},tabsValue:y,isTabs:j,activeTabs:S,children:j?(0,ze.jsxs)("div",{children:[(0,ze.jsx)(Yk,{value:y,index:0,children:h[0]&&(0,ze.jsx)(uk,(0,l.Z)((0,l.Z)({},e),{},{launchQuery:s}))}),null===S||void 0===S?void 0:S.map((function(n,t){return(0,ze.jsx)(Yk,{value:y,index:t+1,children:(0,ze.jsx)(qk,{name:n.name,section:"Query Item",localProps:{props:e,setLaunchQuery:c}})},t)}))]}):(0,ze.jsx)(ze.Fragment,{children:h[0]&&(0,ze.jsx)(uk,(0,l.Z)((0,l.Z)({},e),{},{launchQuery:s}))})}))})},lC=function(e){return(0,Ve.iv)(Xk||(Xk=(0,r.Z)(["\n    background: ",";\n    border: 1px solid ",";\n    border-radius: 3px;\n    margin: 6px;\n"])),e.mainBgColor,e.buttonBorder)},sC=function(e){var n=e.queries,t=(0,vi.F)();return n&&Array.isArray(n)&&(null===n||void 0===n?void 0:n.length)>0?(0,ze.jsxs)("div",{className:(0,Ve.cx)(lC(t)),children:[null===n||void 0===n?void 0:n.map((function(n,t){return(0,f.createElement)(oC,(0,l.Z)((0,l.Z)({},e),{},{data:n,key:t}))})),(0,ze.jsx)(Wi.Z,{section:"Queries",localProps:{queries:n,theme:t}})]}):null},uC=St.Z.div($k||($k=(0,r.Z)(["\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n    width: 100%;\n    min-width:50%;\n"]))),cC=function(e){var n,t=e.name,r=(0,i.I0)(),a=(0,i.v9)((function(e){return e.isSplit})),o=(0,i.v9)((function(e){return e[t]})),s=(0,p.TH)().hash,c=(0,f.useRef)(null),d=(0,f.useState)(0),v=(0,u.Z)(d,2),h=v[0],g=v[1];return(0,f.useEffect)((function(){var e,n=new URLSearchParams(s.replace(/#/,"")).get(t),i=[];n&&(i=JSON.parse(decodeURIComponent(n))),(null===(e=i)||void 0===e?void 0:e.length)>0&&r(function(e,n){return"left"===e?(t=n,function(e){e({type:"SET_LEFT_PANEL",left:t})}):(r=n,function(e){e({type:"SET_RIGHT_PANEL",right:r})});var t,r}(t,i));var a=function(){g(c.current.clientWidth)};return window.addEventListener("resize",a),function(){window.removeEventListener("resize",a)}}),[]),(0,f.useEffect)((function(){var e;"number"===typeof(null===c||void 0===c||null===(e=c.current)||void 0===e?void 0:e.clientWidth)&&g(c.current.clientWidth)}),[null===c||void 0===c||null===(n=c.current)||void 0===n?void 0:n.clientWidth]),(0,ze.jsx)(ze.Fragment,{children:(0,ze.jsxs)(uC,{isSplit:a,ref:c,children:[(0,ze.jsx)(sC,(0,l.Z)((0,l.Z)({},e),{},{width:h,queries:o})),(0,ze.jsx)(Wi.Z,{section:"Panel",localProps:{props:e,panel:o,width:h}}),(0,ze.jsx)(Cx,(0,l.Z)((0,l.Z)({},e),{},{splitted:a}))]})})},dC=(0,St.Z)(vt.Z)(eC||(eC=(0,r.Z)(["\n    background: ",";\n"])),(function(e){return e.theme.inputBg})),fC=(0,St.Z)(kt.Z)(nC||(nC=(0,r.Z)(["\n    color: ",";\n    background: ",";\n    border: 1px solid ",";\n    cursor: pointer;\n    font-size: 13px;\n    background-color: transparent;\n    padding: 6px 10px;\n    border: none;\n    border-radius: 3px 3px 0px 0px;\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    border-bottom: 1px solid transparent;\n    transition: 0.2s all;\n\n    &:hover {\n        background-color: ",";\n    }\n\n    &:focus {\n        color: ",";\n        background: ",";\n        border-radius: 3px 3px 0px 0px;\n\n        outline-offset: 2px;\n    }\n\n    &."," {\n        border-bottom: 1px solid ",";\n    }\n\n    &."," {\n        opacity: 0.5;\n        cursor: not-allowed;\n    }\n    @media screen and (max-width: 360px) {\n        span {\n            display: none;\n        }\n        padding: 5px 20px;\n    }\n"])),(function(e){return e.theme.textColor}),(function(e){return e.theme.buttonDefault}),(function(e){return e.theme.buttonBorder}),(function(e){return e.theme.buttonHover}),(function(e){return e.theme.textColor}),(function(e){return e.theme.buttonDefault}),Ct.Z.selected,(function(e){return e.theme.primaryDark}),jt.Z.disabled),pC=(St.Z.div(tC||(tC=(0,r.Z)(["\n    padding: 0px 15px;\n    font-size: 13px;\n    display: flex;\n    align-items: center;\n    color: ",";\n    justify-content: space-between;\n    background: ",";\n    height: 37px;\n"])),(function(e){return e.theme.textColor}),(function(e){return e.theme.tabHeader})),(0,St.Z)(Nt.Z)(rC||(rC=(0,r.Z)(["\n    width: 100%;\n    background: ",";\n    height: inherit;\n"])),(function(e){return e.theme.widgetContainer}))),vC=(0,St.Z)(Dt.Z)(iC||(iC=(0,r.Z)(["\n    min-width: 320px;\n    background: ",";\n    border-bottom: 4px solid ",";\n    display: flex;\n    align-items: center;\n    align-content: space-between;\n"])),(function(e){return e.theme.tabHeader}),(function(e){return e.theme.historyRow}));function hC(){return(0,ze.jsxs)(dC,{defaultValue:0,children:[(0,ze.jsxs)(vC,{children:[(0,ze.jsx)(fC,{children:(0,ze.jsx)("span",{children:"Left"})}),(0,ze.jsx)(fC,{children:(0,ze.jsx)("span",{children:"Right"})})]}),(0,ze.jsx)(pC,{value:0,children:(0,ze.jsx)(cC,{name:"left"})}),(0,ze.jsx)(pC,{value:1,children:(0,ze.jsx)(cC,{name:"right"})})]})}var gC=St.Z.div(aC||(aC=(0,r.Z)(["\n    position: absolute;\n    display: flex;\n    flex-direction: column;\n    height: inherit;\n    width: 100%;\n    flex: 1;\n\n    background-color: "," !important;\n    &::-webkit-scrollbar-corner {\n        background: transparent;\n    }\n    &::-webkit-scrollbar-thumb {\n        border-radius: 5px;\n        background: "," !important;\n    }\n    .panels-container {\n        display: flex;\n        background: ",";\n        height: calc(100vh - 45px);\n    }\n"])),(function(e){return e.theme.mainBgColor}),(function(e){return e.theme.scrollbarThumb}),(function(e){return e.theme.shBgColor}));function mC(e){var n=e.theme;return(0,ze.jsxs)(I.a,{theme:n,children:[(0,ze.jsx)(gC,{children:(0,ze.jsx)(hC,{})}),(0,ze.jsx)(Qi,{})]})}function xC(e){var n=e.theme,t=(e.isEmbed,e.isSplit),r=e.settingsDialogOpen,a=(0,f.useState)(0),o=(0,u.Z)(a,2),l=o[0],s=o[1],c=(0,f.useState)(0),d=(0,u.Z)(c,2),p=d[0],v=d[1],h=(0,f.useState)(0),g=(0,u.Z)(h,2),m=g[0],x=g[1],b=(0,f.useState)(0),y=(0,u.Z)(b,2),Z=y[0],w=y[1],S=(0,f.useState)(0),j=(0,u.Z)(S,2),k=j[0],C=j[1],T=(0,f.useState)(0),_=(0,u.Z)(T,2),D=_[0],N=_[1],M=(0,f.useState)(!1),E=(0,u.Z)(M,2),R=E[0],O=E[1],L=(0,f.useState)(!1),V=(0,u.Z)(L,2),z=V[0],F=V[1],B=(0,f.useRef)(null);(0,f.useEffect)((function(){var e=B.current.clientWidth;s(B.current.clientWidth),v(e/(t?2:1)),t&&x(e/2),N(t?e/4>370?e/4:370:e)}),[v,x,s,N,D,t]),(0,f.useEffect)((function(){var e=B.current.clientWidth;w(p/e),t&&C(m/e)}),[p,m,t]),(0,f.useEffect)((function(){var e=function(){var e=B.current.clientWidth;s(e),v(e*Z),t&&x(e*k)};return window.addEventListener("resize",e),function(){window.removeEventListener("resize",e)}}),[l,p,m,Z,k,t]);var H=(0,i.v9)((function(e){return e.left})),P=(0,i.v9)((function(e){return e.right}));(0,f.useEffect)((function(){O(H[0].open),F(P[0].open)}),[H[0].open,P[0].open]);return(0,ze.jsxs)(I.a,{theme:n,children:[(0,ze.jsx)(gC,{children:function(e,n){return(0,ze.jsxs)("div",{className:"panels-container",ref:B,children:[!0===e&&(0,ze.jsx)(cC,{name:"left"}),!0===n&&(0,ze.jsx)(cC,{name:"right"})]})}(R,z)}),(0,ze.jsx)(pr.ZP,{open:r}),(0,ze.jsx)(Qi,{})]})}var bC=t(46271);var yC=function(e){return function(n){n({type:"SHOW_DATA_SOURCE_SETTING",showDataSourceSetting:e})}};var ZC=function(e){var n={},t=(null===e||void 0===e?void 0:e.cors)||!1,r=RZ(e),i=(0,l.Z)((0,l.Z)({},r),{},{"Content-Type":"application/json",Accept:"application/json"}),a={method:"GET",headers:i};return!0===t&&(a.mode="cors"),n.options=a,n.headers=i,n.validateStatus=function(e){return e>=200&&e<400||404===e||500===e},n},wC=function(){var e=(0,F.Z)((0,z.Z)().mark((function e(n,t,r){return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.Z.get("".concat(n,"/ready"),t).then((function(e){var n,t;if(e&&null!==e&&void 0!==e&&e.status&&null!==e&&void 0!==e&&e.headers)return r={status:e.status,contentType:null===e||void 0===e||null===(n=e.headers)||void 0===n?void 0:n["content-type"],contentLength:null===e||void 0===e||null===(t=e.headers)||void 0===t?void 0:t["content-length"]}})).catch((function(e){return e})).finally((function(){return r}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(n,t,r){return e.apply(this,arguments)}}();function SC(e,n,t,r){return jC.apply(this,arguments)}function jC(){return jC=(0,F.Z)((0,z.Z)().mark((function e(n,t,r,i){var a,o,s;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={},o=ZC(t),s=(0,l.Z)({},o),""!==(null===r||void 0===r?void 0:r.username)&&i&&(s.auth=r),e.abrupt("return",new Promise(function(){var e=(0,F.Z)((0,z.Z)().mark((function e(t){var r,i;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wC(n,s,a);case 3:r=e.sent,a=r,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(!1);case 10:return e.prev=10,a&&200===(null===(i=a)||void 0===i?void 0:i.status)?t(!0):t(!1),e.finish(10);case 13:case"end":return e.stop()}}),e,null,[[0,7,10,13]])})));return function(n){return e.apply(this,arguments)}}()));case 5:case"end":return e.stop()}}),e)}))),jC.apply(this,arguments)}function kC(e){var n,t,r={username:"",password:""},i=null===e||void 0===e||null===(n=e.basicAuth)||void 0===n?void 0:n.value,a=null===e||void 0===e||null===(t=e.fields)||void 0===t?void 0:t.basicAuth,o=(null===a||void 0===a?void 0:a.length)>0;if(i&&o){var l,u=(0,s.Z)(a);try{for(u.s();!(l=u.n()).done;){var c=l.value;"user"===(null===c||void 0===c?void 0:c.name)&&(r.username=(null===c||void 0===c?void 0:c.value)||""),"password"===(null===c||void 0===c?void 0:c.name)&&(r.password=(null===c||void 0===c?void 0:c.value)||"")}}catch(d){u.e(d)}finally{u.f()}}return{isBasicAuth:i,auth:r}}function CC(e,n,t){var r,i=(0,H.Z)(n),a=JSON.parse(JSON.stringify(i)),o=null===a||void 0===a?void 0:a.map((function(e){return(0,l.Z)((0,l.Z)({},e),{},{url:t})}));r=o,localStorage.setItem("dataSources",JSON.stringify(r)),e((0,Ty.Z)(o))}function TC(){return(TC=(0,F.Z)((0,z.Z)().mark((function e(n,t,r){var i,a,o,l,s;return(0,z.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=window.location.origin,!1,a=n.find((function(e){return"logs"===e.type})),o=kC(null===a||void 0===a?void 0:a.auth),l=o.isBasicAuth,s=o.auth,""!==(null===a||void 0===a?void 0:a.url)){e.next=11;break}return e.next=7,SC(a.url,a,s,l);case 7:e.sent?CC(t,n,i):r("datasources"),e.next=15;break;case 11:return e.next=13,SC(a.url,a,s,l);case 13:e.sent||r("datasources");case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _C,IC=t(42520),DC=function(e){return(0,Ve.iv)(_C||(_C=(0,r.Z)(["\n    background: ",";\n"])),e.widgetContainer)};function NC(){var e=(0,p.s0)(),n=(0,i.v9)((function(e){return e.dataSources})),t=(0,p.TH)().hash,r=(0,f.useMemo)((function(){return new URLSearchParams(t.replace(/#/,""))}),[t]);!function(){var e=(0,f.useMemo)((function(){return window.matchMedia("(prefers-color-scheme: light)").matches}),[]),n=(0,i.I0)(),t=(0,i.v9)((function(e){return e.urlQueryParams})),r=(0,i.v9)((function(e){return e.start})),a=(0,i.v9)((function(e){return e.stop})),d=(0,i.v9)((function(e){return e.label})),_=(0,i.v9)((function(e){return e.from})),I=(0,i.v9)((function(e){return e.to})),D=(0,i.v9)((function(e){return e.step})),N=(0,i.v9)((function(e){return e.isSubmit})),M=(0,i.v9)((function(e){return e.isEmbed})),E=(0,i.v9)((function(e){return e.time})),R=(0,i.v9)((function(e){return e.left})),O=(0,i.v9)((function(e){return e.right})),L=(0,i.v9)((function(e){return e.theme})),V=(0,i.v9)((function(e){return e.autoTheme})),z=(0,i.v9)((function(e){return e.isSplit})),F=(0,f.useState)(e?"light":L),B=(0,u.Z)(F,2),H=B[0],P=B[1];(0,f.useEffect)((function(){P(L)}),[L]);var q={start:r,step:D,stop:a,label:d,from:_,to:I,time:E,isSubmit:N,isEmbed:M,theme:L,autoTheme:V,left:R,right:O,isSplit:z},A={start:v.qv,step:v.F1,stop:v.wW,label:v.Xn,from:h,to:b,time:v.HN,isSubmit:v.E9,isEmbed:g,theme:v.Dc,left:m,right:x,isSplit:w,autoTheme:v.XD},Q=function(e){return(null===e||void 0===e?void 0:e.getTime())+"000000"},W=function(e,n){try{var t=JSON.parse(e);return t&&void 0!==t?t:n}catch(r){return n}},U=(0,p.TH)().hash;(0,f.useEffect)((function(){var e=new URLSearchParams(U.replace(/#/,""));if(U.length>0){var r,i=t,a=(0,s.Z)(e.entries());try{for(a.s();!(r=a.n()).done;){var d=(0,u.Z)(r.value,2),f=d[0],p=d[1];i[f]=p}}catch(v){a.e(v)}finally{a.f()}Object.keys(i).length>0&&(n(Z((0,l.Z)((0,l.Z)({},t),{},{startParams:i}))),n(y(o().sanitize(U))),Object.keys(i).forEach((function(e){if((S.includes(e)||j.includes(e))&&""!==i[e])n(A[e](o().sanitize(i[e])));else if("theme"===e)n(A[e](o().sanitize(H)));else if(C.includes(e)&&""!==i[e]){var t=i[e]/1e6,r=new Date(c(t).format("YYYY-MM-DDTHH:mm:ss.SSSZ"));n(A[e](r))}else if(T.includes(e))try{var a=W(i[e],!1);n(A[e](a))}catch(s){console.log(s)}else if(k.includes(e))try{var l=W(decodeURIComponent(i[e]),[]);(null===l||void 0===l?void 0:l.length)>0&&n(A[e](l))}catch(s){console.log(s)}})))}else S.concat(C).concat(T).concat(k).forEach((function(n){var t;if(S.includes(n))e.set(n,o().sanitize(null===(t=q[n])||void 0===t?void 0:t.toString()));else if("theme"===n)e.set(n,o().sanitize(H.toString()));else if(C.includes(n)){var r,i=1e6*(null===(r=q[n])||void 0===r?void 0:r.getTime());e.set(n,o().sanitize(i.toString()))}else if(T.includes(n))try{e.set(n,W(q[n],!1))}catch(l){console.log(l)}else if(k.includes(n))try{var a=JSON.stringify(q[n]);e.set(n,a)}catch(l){console.log(l)}})),window.location.hash=e}),[]),(0,f.useEffect)((function(){if(U.length>0){var e,n=new URLSearchParams(U.replace(/#/,"")),t={},r=(0,s.Z)(n.entries());try{for(r.s();!(e=r.n()).done;){var i=(0,u.Z)(e.value,2),a=i[0],l=i[1];t[a]=l}}catch(c){r.e(c)}finally{r.f()}Object.keys(q).forEach((function(e){if(S.includes(e)&&t[e]!==q[e]){var r=o().sanitize(q[e].toString().trim());n.set(e,r)}else if(C.includes(e)&&t[e]!==Q(q[e])){var i=Q(q[e]);n.set(e,o().sanitize(i))}else if(T.includes(e)&&t[e]!==q[e])try{n.set(e,W(q[e],!1))}catch(s){console.error(s)}else if("left"===e){var a=JSON.stringify(R);n.set("left",o().sanitize(a))}else if("right"===e){var l=JSON.stringify(O);n.set("right",o().sanitize(l))}})),window.location.hash=n}}),[q])}();var a=function(e){var n="",t=!1,r=(0,i.v9)((function(e){return e.currentUser})),a=(0,f.useMemo)((function(){return e.has("cookie")||!1}),[e]),l=(0,f.useMemo)((function(){return a?o().sanitize(e.get("cookie")):""}),[e,a]),s=(0,bC.Z)([l]),c=(0,u.Z)(s,2),d=c[0],p=(c[1],(0,bC.Z)(["user-cookie"])),v=(0,u.Z)(p,2),h=v[0],g=(v[1],r);if(null!==h&&void 0!==h&&h["user-cookie"])try{g=atob(h["user-cookie"])}catch(m){console.log("could not parse user cookie")}return d[l]&&""!==d[l]&&(n=d[l],t=!0),{cookieAuth:n,cookiesAvailable:t,cookieUser:g}}(r),d=a.cookiesAvailable,I=a.cookieAuth,D=a.cookieUser,N=function(e){var n=(0,f.useMemo)((function(){return e.has("url")}),[e]);return{url:(0,f.useMemo)((function(){return n?o().sanitize(e.get("url")):""}),[e,n]),urlAvailable:n}}(r),M=N.urlAvailable,E=N.url;(0,f.useEffect)((function(){d&&!M||!d&&M||d&&""!==I&&M&&""!==M?function(e,n,t,r,i,a){var o="",s=!1,c=!1,d={};if(r&&(c=!0),i){var f=t.split("@"),p=(0,u.Z)(f,2),v=p[0],h=(p[1],v.split(":")),g=(0,u.Z)(h,2),m=g[0],x=g[1];""!==m&&""!==x&&(d={user:m,password:x},s=!0)}!r&&s&&(o=window.location.protocol+"//"+window.location.host,c=!0),""===o&&(c=!0,o=decodeURIComponent(n));var b=(0,H.Z)(a),y=JSON.parse(JSON.stringify(b)),Z=null===y||void 0===y?void 0:y.map((function(e){var n;return(0,l.Z)((0,l.Z)({},e),{},{url:c?o:e.url,auth:(0,l.Z)((0,l.Z)({},e.auth),{},{basicAuth:(0,l.Z)((0,l.Z)({},e.auth.basicAuth),{},{value:s}),fields:(0,l.Z)((0,l.Z)({},e.auth.fields),{},{basicAuth:s?null===(n=(0,H.Z)(e.auth.fields.basicAuth))||void 0===n?void 0:n.map((function(e){return"user"===e.name?(0,l.Z)((0,l.Z)({},e),{},{value:d.user}):"password"===e.name?(0,l.Z)((0,l.Z)({},e),{},{value:d.password}):e})):(0,H.Z)(e.auth.fields.basicAuth)})})})}));t&&d&&e(yC(!1)),localStorage.setItem("dataSources",JSON.stringify(Z)),e((0,Ty.Z)(Z))}(L,E,I,M,d,n):function(e,n,t){TC.apply(this,arguments)}(n,L,e)}),[]),(0,f.useEffect)((function(){if(D&&"string"===typeof D)try{L((0,IC.l)(JSON.parse(D)))}catch(e){console.log(e)}}),[D]),(0,f.useEffect)((function(){var e={url:o().sanitize(window.location.hash),cookiesAvailable:d};localStorage.setItem(btoa("cookie-location"),btoa(JSON.stringify(e)))}),[d]);var R=(0,_.useMediaQuery)({query:"(max-width: 1013px)"}),O=(0,_.useMediaQuery)({query:"(prefers-color-scheme: dark)"}),L=(0,i.I0)(),V=(0,i.v9)((function(e){return e.isSplit})),z=(0,i.v9)((function(e){return e.isEmbed})),F=(0,vi.F)(),B=(0,i.v9)((function(e){return e.autoTheme})),P=(0,i.v9)((function(e){return e.settingsDialogOpen}));(0,f.useEffect)((function(){if(B){var e=O?"dark":"light";L((0,v.Dc)(e)),localStorage.setItem("theme",JSON.stringify({theme:e,auto:B}))}}),[O,B,L]);return(0,ze.jsx)("div",{className:(0,Ve.cx)(DC(F)),children:function(e,n,t,r){return e?(0,ze.jsx)(mC,{isEmbed:t,theme:F,settingsDialogOpen:r}):(0,ze.jsx)(xC,{isEmbed:t,isSplit:n,theme:F,settingsDialogOpen:r})}(R,z,V,P)})}},42520:function(e,n,t){t.d(n,{l:function(){return r}});var r=function(e){return function(n){return n({type:"SET_CURRENT_USER",currentUser:e})}}}}]);