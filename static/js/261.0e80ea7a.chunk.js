"use strict";(self.webpackChunkqryn_view=self.webpackChunkqryn_view||[]).push([[261],{31238:function(n,e,r){r.d(e,{F:function(){return l}});var t=r(47313),o=r(56352),i=r(60065),l=function(){var n=(0,o.v9)((function(n){return n.theme}));return(0,t.useMemo)((function(){return i.n[n]}),[n])}},82261:function(n,e,r){r.r(e),r.d(e,{getUsersFromLocal:function(){return Z},setLocalUsers:function(){return U}});var t,o,i=r(93433),l=r(1413),s=r(29439),a=r(30168),c=r(47313),u=r(62975),d=r(31238),p=r(82751),x=r(29826),f=r(17498),v=r(46271),g=r(70024),m=r(56352),h=r(42520),b=r(16806),k=r.n(b),y=r(46417),C="superAdmin",j="store_user",Z=function(){var n=[];try{var e=localStorage.getItem(j);if(e&&"string"===typeof e){var r=JSON.parse(e);if(r&&(null===r||void 0===r?void 0:r.length)>0)return n=r}return n}catch(t){return console.log("Error on retrieving users from localstorage: ",t),n}},U=function(n){try{localStorage.setItem(j,JSON.stringify(n))}catch(e){console.log("Error storing users data",e)}},w=function(n){return(0,u.iv)(t||(t=(0,a.Z)(["\n    background: ",";\n    padding: 10px;\n    display: flex;\n    flex: 1;\n    flex-direction: column;\n    align-items: center;\n    .cont {\n        display: flex;\n        width: 100%;\n        border-radius: 3px;\n        max-width: 1280px;\n        background: ",";\n        border: 1px solid ",";\n        flex: 1;\n        flex-direction: column;\n    }\n    .user-row {\n        display: flex;\n        align-items: center;\n        margin: 5px;\n        justify-content: space-between;\n        border: 1px solid ",";\n        padding: 10px;\n        border-radius: 3px;\n        height: 30px;\n\n        p {\n            color: ",";\n            font-size: 10px;\n            letter-spacing: 1px;\n            text-transform: uppercase;\n            display: flex;\n            align-items: center;\n        }\n        .avatar {\n            color: ",";\n            font-size: 10px;\n            letter-spacing: 1px;\n            display: flex;\n            align-items: center;\n            gap: 4px;\n            text-transform: uppercase;\n        }\n\n        select {\n            margin-left: 4px;\n            font-size: 12px;\n            color: ",";\n            padding: 4px;\n            border-radius: 3px;\n            background: ",";\n        }\n\n        .user-role {\n            display: flex;\n            align-items: center;\n            font-size: 10px;\n            text-transform: uppercase;\n            color: ",";\n            p {\n                margin-left: 4px;\n            }\n        }\n\n        .name-input {\n            display: flex;\n            align-items: center;\n            padding: 4px;\n            border: 1px solid ",";\n            border-radius: 3px;\n            background: ",";\n            color: ",";\n            height: 28px;\n            font-size: 12px;\n        }\n\n        .action-buttons {\n            display: flex;\n            align-items: center;\n            gap: 4px;\n            width: 80px;\n            button {\n                display: flex;\n                align-items: center;\n                flex: 1;\n                background: ",";\n                border: 1px solid ",";\n                border-radius: 3px;\n                cursor: pointer;\n                color: ",";\n                max-width: 25px;\n                &:hover {\n                    background: ",";\n                }\n                .cookie-icon {\n                    font-size: 15px;\n                    color: ",";\n                }\n            }\n        }\n    }\n"])),n.viewBg,n.widgetContainer,n.buttonBorder,n.buttonBorder,n.textColor,n.textColor,n.textColor,n.inputBg,n.textColor,n.buttonBorder,n.inputBg,n.textColor,n.widgetContainer,n.buttonBorder,n.textColor,n.mainBgColor,n.textColor)},N=function(n,e){return(0,u.iv)(o||(o=(0,a.Z)(["\n    padding: 4px;\n    border-radius: 3px;\n    font-size: 10px;\n    text-transform: uppercase;\n    color: "," !important;\n    color: ",";\n    cursor: pointer;\n    display: flex;\n    align-items: center;\n    border: 1px solid transparent;\n    &:hover {\n        border: 1px solid ",';\n    }\n    &:after {\n        content: "";\n        margin-left: 4px;\n        display: flex;\n        width: 10px;\n        height: 10px;\n        border-radius: 3px;\n        background: ',";\n        border: 1px solid ",";\n    }\n"])),e?n.primaryDark:n.textColor,n.inputBg,n.buttonBorder,e?n.primaryDark:n.widgetContainer,n.primaryDark)},S=function(n){var e=n.user,r=n.onUserAdd,t=n.onUserChange,o=n.onUserRemove,i=n.onUserCookie,a=n.onUserSelect,p=e.name,v=e.role,m=e.active,h=e.id,b=v===C,j=(0,d.F)(),Z=(0,c.useState)(!1),U=(0,s.Z)(Z,2),w=U[0],S=U[1];return(0,y.jsxs)("div",{className:"user-row",children:[w?(0,y.jsx)("p",{children:(0,y.jsx)("input",{className:"name-input",value:p,onChange:function(n){var r,o=null===n||void 0===n||null===(r=n.target)||void 0===r?void 0:r.value;""===o.trim()&&(o="Qryn ".concat(v));var i=(0,l.Z)((0,l.Z)({},e),{},{name:k().sanitize(o)});t(n,i)},onKeyDown:function(n){"Enter"===n.key&&(console.log("do validate"),S((function(){return!1})))}})}):(0,y.jsxs)("div",{onClick:function(n){b||S((function(n){return!n}))},className:"avatar",children:[(0,y.jsx)(x.ZP,{name:p,size:"30px",round:"3px"})," ",(0,y.jsx)("span",{children:p})]}),(0,y.jsxs)("div",{className:"user-role",children:["Role:"," ",b?(0,y.jsx)("p",{children:"Super Admin"}):(0,y.jsxs)("select",{onChange:function(n){var r,o=null===n||void 0===n||null===(r=n.target)||void 0===r?void 0:r.value,i=(0,l.Z)((0,l.Z)({},e),{},{role:o});t(n,i)},defaultValue:v,children:[(0,y.jsx)("option",{value:"user",children:"User"}),(0,y.jsx)("option",{value:"admin",children:"Admin"}),(0,y.jsx)("option",{value:"guest",children:"Guest"})]})]}),(0,y.jsxs)("p",{children:["Active"," ",!b&&(0,y.jsx)(g.Z,{checked:m,size:"small",inputProps:{"aria-label":"controlled"},onChange:function(n){var r,o=null===n||void 0===n||null===(r=n.target)||void 0===r?void 0:r.checked,i=(0,l.Z)((0,l.Z)({},e),{},{active:o});t(n,i)}})]}),(0,y.jsxs)("div",{onClick:function(n){return a(n,e)},className:(0,u.cx)(N(j,e.selected)),children:["Current User"," "]}),(0,y.jsxs)("div",{className:"action-buttons",children:[(0,y.jsx)("button",{title:"generate cookie from user",onClick:function(n){return i(n,e)},children:(0,y.jsx)(f.Z,{className:"cookie-icon"})}),(0,y.jsx)("button",{title:"add user",onClick:r,children:"+"}),!b&&(0,y.jsx)("button",{title:"remove user",onClick:function(n){return o(n,h)},children:"-"})]})]})},z=function(){var n=(0,m.I0)(),e=(0,m.v9)((function(n){return n.currentUser})),r=(0,c.useMemo)((function(){return Z()}),[]),t=(0,c.useState)((null===r||void 0===r?void 0:r.length)>0?r:[{id:(0,p.x0)(),name:"Qryn Admin",role:"superAdmin",active:!0,selected:!0}]),o=(0,s.Z)(t,2),a=o[0],u=o[1],d=(0,v.Z)(["user-cookie"]),x=(0,s.Z)(d,2),f=x[0],g=x[1];console.log(f);var b=function(n){u((function(n){var e=[].concat((0,i.Z)(n),[{id:(0,p.x0)(),name:"Qryn User",role:"user",active:!0,selected:!1}]);return U(e),e}))},k=function(e,r){u((function(n){var e=(0,i.Z)(n),t=null===e||void 0===e?void 0:e.map((function(n){return n.id===r.id?(0,l.Z)((0,l.Z)({},r),{},{selected:!0}):(0,l.Z)((0,l.Z)({},n),{},{selected:!1})}));return U(t),t})),n((0,h.l)((0,l.Z)((0,l.Z)({},r),{},{selected:!0})))},C=function(n,e){var r,t=null===(r=(0,i.Z)(a))||void 0===r?void 0:r.filter((function(n){return n.id!==e}));u((function(){return U(t),t}))},j=function(r,t){var o=(0,i.Z)(a),l=null===o||void 0===o?void 0:o.map((function(n){return n.id===t.id?t:n}));t.id===e.id&&n((0,h.l)(t)),u((function(){return l})),U(l)},w=function(n,e){try{g("user-cookie",btoa(JSON.stringify(e)))}catch(n){console.log(n,"Error on setting user cookie")}};return(0,y.jsx)(y.Fragment,{children:(null===a||void 0===a?void 0:a.length)>0&&a.map((function(n,e){return(0,y.jsx)(S,{user:n,onUserAdd:b,onUserChange:j,onUserRemove:C,onUserCookie:w,onUserSelect:k},e)}))})};e.default=function(){var n=(0,d.F)();return(0,y.jsx)("div",{className:(0,u.cx)(w(n)),children:(0,y.jsx)("div",{className:"cont",children:(0,y.jsx)(z,{})})})}},42520:function(n,e,r){r.d(e,{l:function(){return t}});var t=function(n){return function(e){return e({type:"SET_CURRENT_USER",currentUser:n})}}}}]);