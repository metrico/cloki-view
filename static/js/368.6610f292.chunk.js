(self.webpackChunkqryn_view=self.webpackChunkqryn_view||[]).push([[368],{64368:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return yn},getURlParams:function(){return jn}});var i,r,a,u,s=t(29439),o=t(37762),l=t(36426),c=t(47313),d=t(56352),f=t(79644),v=t(58467),h=t(1413),x=t(93433),p=t(30168),m=t(62975),g=t(46271),Z=t(87975),S=t(60065),j=t(25026),y=t(82751),b=t(9964),N=t(53132),k=t(41434),z=t(95334),w=t(16450),C=function(n){return function(e){e({type:"SET_IS_DATASOURCE_SAVED",isDsSaved:n})}},O=t(43262),J=t(59236),I=t(46417),T=(0,m.iv)(i||(i=(0,p.Z)(["\n    height: 12px !important;\n    width: 12px !important;\n    color: white;\n    margin: 0px 4px;\n"]))),A=function(n){return(0,m.iv)(r||(r=(0,p.Z)(["\n    display: flex;\n    align-items: center;\n    background: ",";\n    color: white;\n    font-size: 11px;\n    padding: 4px;\n    border-radius: 3px;\n    margin-right: 10px;\n    cursor: pointer;\n    span {\n        margin-right: 4px;\n        font-weight: bold;\n    }\n"])),n.primaryDark)},_=(0,m.iv)(a||(a=(0,p.Z)(["\n    display: flex;\n    align-items: center;\n    background: #b62c14;\n    color: white;\n    font-size: 12px;\n    padding: 4px;\n    border-radius: 3px;\n    margin-right: 10px;\n    cursor: pointer;\n    span {\n        margin-right: 4px;\n        font-weight: bold;\n    }\n"]))),E=(0,m.iv)(u||(u=(0,p.Z)(["\n    display: flex;\n    align-items: center;\n    font-size: 12px;\n    &.loading-icon {\n        height: 14px;\n        width: 14px;\n    }\n"]))),L=function(n){var e=n.setIsSaved,t=(0,O.Fg)();return(0,I.jsxs)("div",{className:(0,m.cx)(A(t)),onClick:function(n){return e(!1)},children:[(0,I.jsx)(w.Z,{className:(0,m.cx)(T)})," ",(0,I.jsx)("span",{children:"Saved"})]})},D=function(n){var e=n.errorText;return(0,I.jsxs)("div",{className:(0,m.cx)(_),children:[(0,I.jsx)(J.Z,{className:(0,m.cx)(T)})," ",(0,I.jsx)("span",{children:e})]})};function F(n){var e=n.onClickAdd,t=n.isAdd,i=n.title,r=n.isEditing,a=n.fieldErrors,u=(0,d.I0)(),o=(0,c.useState)(!1),l=(0,s.Z)(o,2),v=l[0],h=l[1];return(0,c.useEffect)((function(){return r&&(setTimeout((function(){h(!0),u(C(!0))}),800),h(!1)),h(!1),function(){h(!1)}}),[r]),(0,I.jsxs)(f.Af,{children:[i,(0,I.jsxs)("div",{className:"edit-buttons",children:[r&&(0,I.jsxs)("div",{className:E,children:[(0,I.jsx)(z.Z,{style:{height:"13px",width:"13px"}})," ","Saving ..."]}),(null===a||void 0===a?void 0:a.protocol)&&(0,I.jsx)(D,{errorText:"Insecure Mixed Content. Mixing HTTP and HTTPS is insecure and is not supported."}),(null===a||void 0===a?void 0:a.url)&&(0,I.jsx)(D,{errorText:"Please complete API URL"}),v&&(0,I.jsx)(L,{setIsSaved:h}),t&&(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(k.Z,{fontSize:"small",style:{cursor:"pointer",display:"flex"},onClick:e})})]})]})}var M=t(16806),U=t.n(M),P=t(70024),R=function(n){var e=(0,d.I0)(),t=(0,d.v9)((function(n){return n.dataSources})),i=(0,c.useState)(!1),r=(0,s.Z)(i,2),a=r[0],u=r[1],o=n.headers,l=n.id,v=(0,c.useState)((null===n||void 0===n?void 0:n.cors)||!1),p=(0,s.Z)(v,2),m=p[0],g=p[1],Z=function(n,i,r){u((function(){return!0}));var a=n.target.value,s=(t.find((function(n){return n.id===l})).headers||[]).map((function(n){return n.id===i?(n[r]=a,n):n})),o=t.map((function(n){return n.id===l&&(n.headers=(0,x.Z)(s)),n}));localStorage.setItem("dataSources",JSON.stringify(o)),e((0,b.Z)(o)),setTimeout((function(){u((function(){return!1}))}),800)};return(0,I.jsx)("div",{className:"",children:o&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(F,{title:"Custom HTTP Headers",isEdit:!1,isAdd:!0,isEditing:a,onClickAdd:function(n){n.preventDefault();var i=null===t||void 0===t?void 0:t.find((function(n){return n.id===l})),r=i.headers,a=JSON.parse(JSON.stringify((0,x.Z)(t)));if(o.length>0){var u=(0,h.Z)((0,h.Z)({},r[r.length-1]),{},{id:(0,y.x0)()}),s=(0,h.Z)((0,h.Z)({},i),{},{headers:[].concat((0,x.Z)(i.headers),[u])}),c=null===a||void 0===a?void 0:a.map((function(n){return n.id===l?(0,h.Z)({},s):n}));localStorage.setItem("dataSources",JSON.stringify(c)),e((0,b.Z)(c))}}}),(0,I.jsxs)(f.zs,{children:[(0,I.jsx)(f.__,{children:"Use CORS"})," ",(0,I.jsx)(P.Z,{size:"small",checked:m,onChange:function(n){var i=n.target.checked,r=t.map((function(n){return n.id===l&&(n.cors=i),n}));g((function(){return i})),localStorage.setItem("dataSources",JSON.stringify(r)),e((0,b.Z)(r))}})]}),null===o||void 0===o?void 0:o.map((function(n,i){return(0,I.jsx)(f.zs,{children:(0,I.jsxs)(f.BZ,{children:[(0,I.jsx)(N.gN,{label:"header",value:U().sanitize(n.header),onChange:function(e){return Z(e,n.id,"header")}}),(0,I.jsx)(N.gN,{label:"value",value:U().sanitize(n.value),onChange:function(e){return Z(e,n.id,"value")}}),(0,I.jsx)(j.Z,{onClick:function(i){return function(n,i){var r=null===t||void 0===t?void 0:t.find((function(n){return n.id===l})),a=(0,x.Z)(o).filter((function(n){return n.id!==i})),u=(0,h.Z)((0,h.Z)({},r),{},{headers:(0,x.Z)(a)}),s=null===t||void 0===t?void 0:t.map((function(n){return n.id===l?(0,h.Z)({},u):n}));localStorage.setItem("dataSources",JSON.stringify(s)),e((0,b.Z)(s))}(0,n.id)},style:{cursor:"pointer",marginLeft:"10px"},fontSize:"small"})]})},i)}))]})})};function q(n){var e=(0,v.s0)(),t=(0,O.Fg)(),i=(0,d.v9)((function(n){return n.urlLocation})),r=(0,d.I0)(),a=n.title,u=(0,d.v9)((function(n){return n.isDsSaved})),s=(0,c.useMemo)((function(){return u?"Save":"Back"}),[u]);return(0,I.jsxs)("div",{className:"ds-header",children:[(0,I.jsx)("div",{style:{display:"flex",alignItems:"center"},children:(0,I.jsxs)("div",{style:{display:"flex",flexDirection:"column"},children:[(0,I.jsxs)("div",{style:{display:"flex"},children:[(0,I.jsx)(N.D8,{}),(0,I.jsx)("h1",{children:a})]}),(0,I.jsxs)("p",{style:{color:t.textColor,fontSize:"10px",marginTop:"5px",marginLeft:"10px",opacity:".5"},children:["v","0.25.5"]})]})}),(0,I.jsx)(N.zx,{value:U().sanitize(s),onClick:function(){var n=(null===i||void 0===i?void 0:i.length)>0;r(C(!1)),e(!n&&"Back"!==s||"DataSources"===a?"/":-1)},editing:!0,primary:u})]})}var B=t(4942),H=function(n){var e=n.id,t=n.name,i=n.regex,r=n.urlLabel,a=n.internalLink,u=n.linkType,s=n.locked,o=n.dataSourceId,l=n.fieldEditing,v=(0,d.I0)(),p=(0,d.v9)((function(n){return n.dataSources})),m=(0,c.useMemo)((function(){return p.map((function(n){return{name:n.name,value:n.id}}))}),[p]),g=function(n,t){l();var i=JSON.parse(JSON.stringify(p)),r=i.find((function(n){return n.id===o})).linkedFields.map((function(i){return i.id===e?(0,h.Z)((0,h.Z)({},i),{},(0,B.Z)({},n,t)):i}));return i.map((function(n){return n.id===o?(0,h.Z)((0,h.Z)({},n),{},{linkedFields:r}):n}))},Z=function(n,e){l();var t=n.target.value,i=g(e,t);localStorage.setItem("dataSources",JSON.stringify(i)),v((0,b.Z)(i))};return(0,I.jsxs)(f.X9,{children:[(0,I.jsxs)(f.zs,{children:[(0,I.jsx)(N.gN,{value:U().sanitize(t),label:"Name",onChange:function(n){return Z(n,"name")}}),(0,I.jsx)(N.gN,{value:U().sanitize(i),label:"Regex",onChange:function(n){return Z(n,"regex")}}),(0,I.jsx)(N.gN,{value:U().sanitize(r),label:"URL Label",onChange:function(n){return Z(n,"urlLabel")}}),(0,I.jsx)(j.Z,{onClick:function(n){l();var t=JSON.parse(JSON.stringify(p)),i=t.find((function(n){return n.id===o})).linkedFields.filter((function(n){return n.id!==e})),r=t.map((function(n){return n.id===o?(0,h.Z)((0,h.Z)({},n),{},{linkedFields:(0,x.Z)(i)}):n}));localStorage.setItem("dataSources",JSON.stringify(r)),v((0,b.Z)(r))},fontSize:"small",style:{marginLeft:"10px",cursor:"pointer",display:s?"none":"inline-block"}})]}),(0,I.jsxs)(f.zs,{className:"internal",children:[(0,I.jsx)(N.ll,{value:a,label:"Internal Link",onChange:function(n){return function(n,e){l();var t=Boolean(n.target.checked),i=g(e,t);localStorage.setItem("dataSources",JSON.stringify(i)),v((0,b.Z)(i))}(n,"internalLink")}}),(0,I.jsx)(N.Ph,{label:"",value:U().sanitize(u),opts:m,selectType:"linkedField",onChange:function(n){return Z(n,"linkID")}})]})]})},V=t(15671),$=t(43144),W=function(){function n(){(0,V.Z)(this,n),this.id=void 0,this.dataSource=void 0,this.ds_id=void 0,this.name=void 0,this.regex=void 0,this.query=void 0,this.urlLabel=void 0,this.url=void 0,this.internalLink=void 0,this.linkType=void 0,this.id=(0,y.x0)(),this.dataSource="Logs",this.ds_id="logs",this.name="traceID",this.regex='^.*?"traceID" ="(w+)".*$/',this.query="${__value.raw}",this.urlLabel="",this.url="",this.internalLink=!0,this.linkType="Traces"}return(0,$.Z)(n,[{key:"create",value:function(){return{id:this.id,dataSource:this.dataSource,ds_id:this.ds_id,name:this.name,regex:this.regex,query:this.query,urlLabel:this.urlLabel,url:this.url,internalLink:this.internalLink,linkType:this.linkType}}}]),n}(),G=function(n){var e=n.linkedFields,t=n.name,i=n.id,r=(0,d.v9)((function(n){return n.dataSources})),a=(0,d.I0)(),u=(0,c.useState)(!1),o=(0,s.Z)(u,2),l=o[0],v=o[1],p=function(){v((function(){return!0})),setTimeout((function(){v((function(){return!1}))}),800)};return(null===e||void 0===e?void 0:e.length)>0?(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(F,{title:"Linked Fields",isEdit:!0,isAdd:!0,onClickAdd:function(){var n=new W;n.dataSource=t,n.create();var u=JSON.parse(JSON.stringify(e)),s=[].concat((0,x.Z)(u),[(0,h.Z)({},n)]),o=JSON.parse(JSON.stringify(r)),l=null===o||void 0===o?void 0:o.map((function(n){return n.id===i?(0,h.Z)((0,h.Z)({},n),{},{linkedFields:s}):n}));localStorage.setItem("dataSources",JSON.stringify(l)),a((0,b.Z)(l))},isEditing:l}),(0,I.jsx)(f.VJ,{children:null===e||void 0===e?void 0:e.map((function(n,e){return(0,I.jsx)(H,(0,h.Z)((0,h.Z)({},n),{},{dataSourceId:i,locked:!1,fieldEditing:p}),e)}))})]}):null};function K(n){var e=n.value,t=n.label,i=n.onChange,r=n.placeholder;return(0,I.jsxs)(f.BZ,{children:[(0,I.jsx)(f.__,{children:t}),(0,I.jsx)(f.Kx,{className:"ds-input",onChange:i,placeholder:r,value:U().sanitize(e)})]})}function Q(n){var e=n.auth,t=n.id,i=(0,d.I0)(),r=(0,d.v9)((function(n){return n.dataSources})),a=(0,c.useState)([]),u=(0,s.Z)(a,2),o=u[0],l=u[1],v=(0,c.useState)(!1),p=(0,s.Z)(v,2),m=p[0],g=p[1],Z=(0,c.useMemo)((function(){var n;return null===(n=Object.entries(e))||void 0===n?void 0:n.map((function(n){var e=(0,s.Z)(n,2),t=e[0],i=e[1];return(0,h.Z)({name:t},i)})).filter((function(n){return"fields"!==n.name}))}),[e]),S=(0,c.useMemo)((function(){var n;return null===(n=Object.entries(e))||void 0===n?void 0:n.map((function(n){var e=(0,s.Z)(n,2),t=e[0],i=e[1];return(0,h.Z)({name:t},i)})).find((function(n){return"fields"===n.name}))}),[e]),j=function(n,a){var u=JSON.parse(JSON.stringify(e));u[a].value=n;var s=JSON.parse(JSON.stringify(r)).map((function(n){return n.id===t?(0,h.Z)((0,h.Z)({},n),{},{auth:(0,h.Z)({},u)}):n}));return localStorage.setItem("dataSources",JSON.stringify(s)),i((0,b.Z)(s)),s};(0,c.useEffect)((function(){var n,e,t=null===(n=Z.filter((function(n){return"switch"===n.form_type&&!(null===n||void 0===n||!n.value)})))||void 0===n||null===(e=n.filter((function(n){return!!n.withFields})))||void 0===e?void 0:e.map((function(n){return n.name}));l(t)}),[Z,l]);var y=function(n,a,u){var s;g((function(){return!0}));var o=n.target.value,l=JSON.parse(JSON.stringify(e)),c=(0,h.Z)((0,h.Z)({},l),{},{fields:(0,h.Z)((0,h.Z)({},l.fields),{},(0,B.Z)({},u,null===l||void 0===l||null===(s=l.fields[u])||void 0===s?void 0:s.map((function(n){return n.name===a?(n.value=o,(0,h.Z)({},n)):n}))))}),d=JSON.parse(JSON.stringify((0,x.Z)(r))),f=null===d||void 0===d?void 0:d.map((function(n){return n.id===t?(n.auth=c,n):n}));localStorage.setItem("dataSources",JSON.stringify(f)),i((0,b.Z)(f)),setTimeout((function(){g((function(){return!1}))}),600)};return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(F,{title:"HTTP Auth Fields",isEditing:m,isEdit:!1,isAdd:!1}),(0,I.jsxs)(f.VJ,{children:[Z&&Z.map((function(n,e){return"select"===n.form_type?(0,I.jsx)(N.Ph,{value:U().sanitize(n.value),name:U().sanitize(n.name),onChange:function(e){return function(n,e){g((function(){return!0}));var t=n.target.value;j(t,e),setTimeout((function(){g((function(){return!1}))}),800)}(e,n.name)},locked:!1,opts:n.options,label:n.label},e):"switch"===n.form_type?(0,I.jsx)(N.ll,{label:n.label,value:n.value,onChange:function(e){return function(n,e){g((function(){return!0}));var t=n.target.checked;j(t,e),setTimeout((function(){g((function(){return!1}))}),800)}(e,n.name)}},e):null})),(0,I.jsx)(f.zs,{children:o&&o.map((function(n,e){var t;return(0,I.jsx)(f.zs,{children:S[n]&&(null===(t=S[n])||void 0===t?void 0:t.map((function(e,t){return"input"===e.form_type||"password"===e.form_type?(0,I.jsx)(N.gN,{onChange:function(t){return y(t,e.name,n)},type:e.form_type,value:U().sanitize(e.value),label:e.label,placeholder:e.placeholder},t):"textarea"===e.form_type?(0,I.jsx)(K,{onChange:function(t){return y(t,e.name,n)},value:U().sanitize(e.value),label:e.label,placeholder:e.placeholder},t):null})))},e)}))})]})]})}var X,Y=t(41801).Z.div(X||(X=(0,p.Z)(["\n    position: absolute;\n    left: 0;\n    top: 0;\n    background: ",";\n    display: flex;\n    flex-direction: culumn;\n    justify-content: center;\n    color: ",";\n    flex: 1;\n    height: 100%;\n    width: 100%;\n\n    .body-cont {\n        max-width: 1440px;\n        padding: 10px;\n        margin: 10px;\n        border-radius: 3px;\n        flex: 1;\n        background: ",";\n        overflow-y: auto;\n        overflow-x: hidden;\n    }\n    .ds-header {\n        padding: 10px;\n        padding-bottom: 20px;\n        font-size: 24px;\n        flex: 1;\n        display: flex;\n        width: 100%;\n        justify-content: space-between;\n        align-items: center;\n        padding-left: 0px;\n        .logo {\n            margin-right: 10px;\n        }\n    }\n    .ds-cont {\n        margin-bottom: 10px;\n        border: 1px solid ",";\n        border-radius: 3px;\n        overflow-y: auto;\n    }\n    .ds-item {\n        padding: 10px;\n        //    margin-bottom: 10px;\n        border-radius: 3px 3px 0px 0px;\n        padding-bottom: 14px;\n        display: flex;\n        .logo {\n            padding: 10px;\n            padding-right: 20px;\n            padding-left: 0px;\n        }\n        .ds-text {\n            display: flex;\n            flex-direction: column;\n            flex: 1;\n        }\n        .ds-type {\n            font-size: 18px;\n            padding: 10px;\n            padding-left: 0px;\n            color: ",";\n        }\n        small {\n            font-size: 12px;\n        }\n        .setting-icon {\n            justify-self: flex-end;\n            cursor: pointer;\n        }\n        .ds-settings {\n            background: ",";\n        }\n    }\n"])),(function(n){return n.theme.viewBg}),(function(n){return n.theme.textColor}),(function(n){return n.theme.widgetContainer}),(function(n){return n.theme.buttonBorder}),(function(n){return n.theme.textColor}),(function(n){return n.theme.viewBg})),nn=t(2135);function en(){var n=(0,d.v9)((function(n){return n.dataSources}));return(null===n||void 0===n?void 0:n.length)>0?(0,I.jsx)("div",{style:{margin:"10px"},children:n.map((function(n,e){var t=n.icon,i=n.id,r=n.name,a=n.type,u=n.url;return(0,I.jsx)("div",{className:"ds-cont",children:(0,I.jsx)(nn.rU,{to:i,children:(0,I.jsxs)("div",{className:"ds-item",children:[(0,I.jsx)(N.JO,{icon:t}),(0,I.jsxs)("div",{className:"ds-text",children:[(0,I.jsx)("div",{className:"ds-type",children:r}),(0,I.jsxs)("span",{children:[(0,I.jsxs)("small",{children:[a," | "," "]}),(0,I.jsx)("small",{style:{userSelect:"all"},children:u})]})]})]})})},e)}))}):(0,I.jsx)("div",{children:(0,I.jsx)("h1",{children:"No Data Sources Found."})})}var tn,rn=function(n){var e=n.headers,t=n.id,i=n.linkedFields,r=n.name,a=n.url,u=n.cors,o=(0,d.I0)(),l=(0,d.v9)((function(n){return n.dataSources})),v=(0,c.useState)({url:!1,protocol:!1}),x=(0,s.Z)(v,2),p=x[0],m=x[1],g=function(n,e){var i=e;if("url"===n){var r=e.replace(/\/$/,"");i=r}var a=JSON.parse(JSON.stringify(l));return a.forEach((function(e){e.id===t&&(e[n]=i)})),a},Z=(0,c.useState)(!1),S=(0,s.Z)(Z,2),j=S[0],y=S[1],k=function(n,e){y((function(){return!0}));var t=n.target.value;if("url"===e){var i=function(e){try{return{value:window.location.protocol===new URL(e).protocol,error:""}}catch(n){return{value:!1,error:"url"}}}(t);if("url"===(null===i||void 0===i?void 0:i.error)&&m((function(n){return(0,h.Z)((0,h.Z)({},n),{},{url:!0})})),null!==i&&void 0!==i&&i.value||""!==(null===i||void 0===i?void 0:i.error)||m((function(n){return(0,h.Z)((0,h.Z)({},n),{},{protocol:!0})})),""===(null===i||void 0===i?void 0:i.error)&&null!==i&&void 0!==i&&i.value){m((function(n){return(0,h.Z)((0,h.Z)({},n),{},{protocol:!1,url:!1})}));var r=g(e,t);localStorage.setItem("dataSources",JSON.stringify(r)),o((0,b.Z)(r)),setTimeout((function(){y((function(){return!1}))}),800)}}var a=g(e,t);localStorage.setItem("dataSources",JSON.stringify(a)),o((0,b.Z)(a)),setTimeout((function(){y((function(){return!1}))}),800)};return(0,I.jsxs)(f.jy,{children:[(0,I.jsx)(F,{isEditing:j,isEdit:!0,isAdd:!1,title:"DataSource Settings",fieldErrors:p}),(0,I.jsx)(f.VJ,{children:(0,I.jsxs)(f.zs,{children:[(0,I.jsx)(N.gN,{value:U().sanitize(r),label:"Name",onChange:function(n){return k(n,"name")}}),(0,I.jsx)(N.gN,{value:U().sanitize(a),label:"URL",error:p.url||p.protocol,onChange:function(n){return k(n,"url")}})]})}),(0,I.jsx)(Q,(0,h.Z)({},n)),(0,I.jsx)(R,{cors:u,headers:e,id:t}),(0,I.jsx)(G,(0,h.Z)((0,h.Z)({},n),{},{linkedFields:i}))]})},an=(0,m.iv)(tn||(tn=(0,p.Z)(["\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    margin-right: 20px;\n"])));function un(n){var e=n.url,t=n.auth,i=t.basicAuth,r=(0,s.Z)(t.fields.basicAuth,2),a=r[0],u=r[1],o=(0,g.Z)(["qryn-dev-cookie","qryn-settings"]),l=(0,s.Z)(o,2),c=(l[0],l[1]),f=(0,d.I0)(),v=(0,d.v9)((function(n){return n.dataSources}));return(0,I.jsxs)("div",{className:"ds-cont",children:[(0,I.jsxs)("div",{className:(0,m.cx)(an),children:[(0,I.jsx)(fn,(0,h.Z)({},n)),(0,I.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,I.jsx)(N.zx,{title:"Set Cookie with name: qryn-settings",value:U().sanitize("Save Cookie"),onClick:function(){var n=new Date;(new Date).setDate(n.getDate()+1);var t=JSON.stringify({url:e});try{c("qryn-settings","".concat(btoa(a.value),":").concat(btoa(u.value),"@").concat(btoa(t),"&&").concat(btoa("admin")),{path:"/"})}catch(i){console.log(i)}},primary:!0}),(0,I.jsx)(N.zx,{title:"Use same URL and Basic Auth for all Data Sources",value:U().sanitize("Use For All"),onClick:function(){var n=(0,x.Z)(v),t=JSON.parse(JSON.stringify(n)),r=null===t||void 0===t?void 0:t.map((function(n){var t;return(0,h.Z)((0,h.Z)({},n),{},{url:U().sanitize(e),auth:(0,h.Z)((0,h.Z)({},n.auth),{},{basicAuth:(0,h.Z)((0,h.Z)({},n.auth.basicAuth),{},{value:i.value}),fields:(0,h.Z)((0,h.Z)({},n.auth.fields),{},{basicAuth:null===(t=(0,x.Z)(n.auth.fields.basicAuth))||void 0===t?void 0:t.map((function(n){return"user"===n.name?(0,h.Z)((0,h.Z)({},n),{},{value:U().sanitize(a.value)}):"password"===n.name?(0,h.Z)((0,h.Z)({},n),{},{value:U().sanitize(u.value)}):n}))})})})}));localStorage.setItem("dataSources",JSON.stringify(r)),f((0,b.Z)(r)),f((0,Z.el)({type:"success",message:"Set same URL and Basic Auth for All Data Sources"}))},primary:!0})]})]}),(0,I.jsx)("div",{className:"ds-settings",children:(0,I.jsx)(rn,(0,h.Z)({},n))})]})}var sn,on,ln,cn,dn,fn=function(n){var e=n.icon,t=n.name,i=n.type,r=n.url;return(0,I.jsxs)("div",{className:"ds-item",children:[(0,I.jsx)(N.JO,{icon:e}),(0,I.jsxs)("div",{className:"ds-text",children:[(0,I.jsx)("div",{className:"ds-type",children:t}),(0,I.jsxs)("small",{children:[U().sanitize(i)," | ",U().sanitize(r)]})]})]})};function vn(){var n=(0,v.UO)().id,e=(0,d.v9)((function(n){return n})).theme,t=(0,d.v9)((function(n){return n.dataSources})),i=(0,c.useMemo)((function(){return t&&0!==t.length&&t.find((function(e){return e.id===n}))||{}}),[n,t]),r=S.n;return(0,I.jsx)(l.a,{theme:r[e],children:(0,I.jsx)(Y,{children:(0,I.jsxs)("div",{className:"body-cont",children:[(0,I.jsx)(q,{title:"DataSource Settings",datasource:i}),(0,I.jsx)("div",{className:"datasource-body",children:(0,I.jsx)(un,(0,h.Z)({},i))})]})})})}var hn=function(n){return(0,m.iv)(sn||(sn=(0,p.Z)(["\n    display: flex;\n    flex-direction: column;\n    flex: 1;\n    flex-wrap: wrap;\n    width: 400px;\n    border: 1px solid ",";\n    padding: 5px;\n    border-radius: 3px;\n    margin-left:10px;\n"])),n.buttonBorder)},xn=(0,m.iv)(on||(on=(0,p.Z)(["\n    display: flex;\n    padding: 4px 12px;\n    font-size: 14px;\n    border-radius: 4px;\n    white-space: nowrap;\n    align-items: center;\n    justify-content: space-between;\n"]))),pn=(0,m.iv)(ln||(ln=(0,p.Z)(["\n    margin: 5px;\n"]))),mn=(0,m.iv)(cn||(cn=(0,p.Z)(["\n    margin-left: 20px;\n    display: flex;\n    align-items: center;\n    span {\n        font-size: 12px;\n    }\n"]))),gn=(0,m.iv)(dn||(dn=(0,p.Z)(["\n    align-items: center;\n    width: 100%;\n    display: flex;\n    margin-top: 10px;\n    justify-content: space-between;\n    flex: 1;\n"]))),Zn=function(n){var e=(0,c.useState)(""),t=(0,s.Z)(e,2),i=t[0],r=t[1],a=(0,c.useState)(""),u=(0,s.Z)(a,2),o=u[0],l=u[1],f=(0,c.useState)(""),v=(0,s.Z)(f,2),p=v[0],g=v[1],Z=(0,c.useState)(!1),S=(0,s.Z)(Z,2),j=S[0],y=S[1],k=(0,c.useState)(!1),z=(0,s.Z)(k,2),w=z[0],C=z[1],J=(0,d.v9)((function(n){return n.dataSources})),T=(0,d.I0)(),A=(0,O.Fg)();return(0,I.jsxs)("div",{className:(0,m.cx)(hn(A)),children:[(0,I.jsxs)("div",{className:(0,m.cx)(xn),children:["Use one setting for all Data Sources",(0,I.jsx)(P.Z,{checked:j,size:"small",onChange:function(n){y((function(){return n.target.checked}))}})]}),j&&(0,I.jsxs)("div",{className:(0,m.cx)(pn),children:[(0,I.jsx)(N.gN,{value:U().sanitize(i),label:"url",onChange:function(n){var e,t=((null===n||void 0===n||null===(e=n.target)||void 0===e?void 0:e.value)||"").replace(/\/$/,"");r((function(){return t}))},placeholder:"http://qryn.dev"}),w&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(N.gN,{value:U().sanitize(o),label:"user",onChange:function(n){l((function(){return n.target.value}))},placeholder:"default"}),(0,I.jsx)(N.gN,{value:U().sanitize(p),label:"password",onChange:function(n){g((function(){return n.target.value}))},type:"password",placeholder:""})]}),(0,I.jsxs)("div",{className:(0,m.cx)(gn),children:[(0,I.jsxs)("div",{className:(0,m.cx)(mn),children:[(0,I.jsx)("span",{children:"Use Basic Auth"})," ",(0,I.jsx)(P.Z,{checked:w,size:"small",onChange:function(n){C((function(){return n.target.checked}))}})," "]}),(0,I.jsx)(N.zx,{value:U().sanitize("Save"),onClick:function(n){var e=JSON.parse(JSON.stringify(J)),t=null===e||void 0===e?void 0:e.map((function(n){var e;return(0,h.Z)((0,h.Z)({},n),{},{url:i,auth:(0,h.Z)((0,h.Z)({},n.auth),{},{basicAuth:(0,h.Z)((0,h.Z)({},n.auth.basicAuth),{},{value:w}),fields:(0,h.Z)((0,h.Z)({},n.auth.fields),{},{basicAuth:null===(e=(0,x.Z)(n.auth.fields.basicAuth))||void 0===e?void 0:e.map((function(n){return"user"===n.name?(0,h.Z)((0,h.Z)({},n),{},{value:o}):"password"===n.name?(0,h.Z)((0,h.Z)({},n),{},{value:p}):n}))})})})}));localStorage.setItem("dataSources",JSON.stringify(t)),T((0,b.Z)(t))},editing:!1,primary:!0})]})]})]})},Sn=t(66367);function jn(n){var e,t=n.replace(/#/,""),i=decodeURIComponent(t),r=new URLSearchParams(i),a={left:"",right:""},u=(0,o.Z)(r);try{for(u.s();!(e=u.n()).done;){var l=(0,s.Z)(e.value,2),c=l[0],d=l[1];"left"!==c&&"right"!==c||(a[c]=JSON.parse(d))}}catch(f){u.e(f)}finally{u.f()}}function yn(){var n=(0,Sn.useMediaQuery)({query:"(prefers-color-scheme: dark)"}),e=(0,d.I0)(),t=(0,O.Fg)(),i=(0,d.v9)((function(n){return n.autoTheme}));return(0,c.useEffect)((function(){if(i){var t=n?"dark":"light";e((0,Z.Dc)(t)),localStorage.setItem("theme",JSON.stringify({theme:t,auto:i}))}}),[n,i,e]),(0,I.jsxs)(l.a,{theme:t,children:[(0,I.jsx)(f._z,{children:(0,I.jsxs)("div",{className:"cont",children:[(0,I.jsx)(en,{}),(0,I.jsx)("div",{style:{display:"flex",flex:1},children:(0,I.jsx)("div",{style:{height:"40px"},children:(0,I.jsx)(Zn,{})})})]})}),(0,I.jsx)(v.Z5,{children:(0,I.jsx)(v.AW,{path:":id",element:(0,I.jsx)(vn,{})})})]})}},9964:function(n,e){"use strict";e.Z=function(n){return function(e){e({type:"SET_DATA_SOURCES",dataSources:n})}}},95334:function(n,e,t){"use strict";var i=t(64836);e.Z=void 0;var r=i(t(45045)),a=t(46417),u=(0,r.default)((0,a.jsx)("path",{d:"m19 8-4 4h3c0 3.31-2.69 6-6 6-1.01 0-1.97-.25-2.8-.7l-1.46 1.46C8.97 19.54 10.43 20 12 20c4.42 0 8-3.58 8-8h3l-4-4zM6 12c0-3.31 2.69-6 6-6 1.01 0 1.97.25 2.8.7l1.46-1.46C15.03 4.46 13.57 4 12 4c-4.42 0-8 3.58-8 8H1l4 4 4-4H6z"}),"CachedOutlined");e.Z=u},16450:function(n,e,t){"use strict";var i=t(64836);e.Z=void 0;var r=i(t(45045)),a=t(46417),u=(0,r.default)((0,a.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckCircle");e.Z=u},25026:function(n,e,t){"use strict";var i=t(64836);e.Z=void 0;var r=i(t(45045)),a=t(46417),u=(0,r.default)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM8 9h8v10H8V9zm7.5-5-1-1h-5l-1 1H5v2h14V4h-3.5z"}),"DeleteOutlineOutlined");e.Z=u},59236:function(n,e,t){"use strict";var i=t(64836);e.Z=void 0;var r=i(t(45045)),a=t(46417),u=(0,r.default)((0,a.jsx)("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"ErrorOutline");e.Z=u},45045:function(n,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return i.createSvgIcon}});var i=t(28308)},47228:function(n,e,t){"use strict";t.d(e,{Z:function(){return i}});var i=function(n){var e,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function i(){for(var i=this,r=arguments.length,a=new Array(r),u=0;u<r;u++)a[u]=arguments[u];clearTimeout(e),e=setTimeout((function(){n.apply(i,a)}),t)}return i.clear=function(){clearTimeout(e)},i}},28308:function(n,e,t){"use strict";t.r(e),t.d(e,{capitalize:function(){return r.Z},createChainedFunction:function(){return a},createSvgIcon:function(){return u.Z},debounce:function(){return s.Z},deprecatedPropType:function(){return o},isMuiElement:function(){return c},ownerDocument:function(){return d.Z},ownerWindow:function(){return f.Z},requirePropFactory:function(){return v},setRef:function(){return h},unstable_ClassNameGenerator:function(){return y},unstable_useEnhancedEffect:function(){return x.Z},unstable_useId:function(){return p.Z},unsupportedProp:function(){return m},useControlled:function(){return g.Z},useEventCallback:function(){return Z.Z},useForkRef:function(){return S.Z},useIsFocusVisible:function(){return j.Z}});var i=t(41271),r=t(91615),a=t(84246).Z,u=t(81171),s=t(47228);var o=function(n,e){return function(){return null}},l=t(47313);var c=function(n,e){return l.isValidElement(n)&&-1!==e.indexOf(n.type.muiName)},d=t(6106),f=t(23533);t(87462);var v=function(n,e){return function(){return null}},h=t(89265).Z,x=t(24993),p=t(17677);var m=function(n,e,t,i,r){return null},g=t(53800),Z=t(73236),S=t(86983),j=t(47037),y={configure:function(n){i.Z.configure(n)}}},6106:function(n,e,t){"use strict";var i=t(49081);e.Z=i.Z},23533:function(n,e,t){"use strict";var i=t(93282);e.Z=i.Z},24993:function(n,e,t){"use strict";var i=t(2678);e.Z=i.Z},17677:function(n,e,t){"use strict";var i=t(33362);e.Z=i.Z},84246:function(n,e,t){"use strict";function i(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return e.reduce((function(n,e){return null==e?n:function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];n.apply(this,i),e.apply(this,i)}}),(function(){}))}t.d(e,{Z:function(){return i}})},49081:function(n,e,t){"use strict";function i(n){return n&&n.ownerDocument||document}t.d(e,{Z:function(){return i}})},93282:function(n,e,t){"use strict";t.d(e,{Z:function(){return r}});var i=t(49081);function r(n){return(0,i.Z)(n).defaultView||window}},33362:function(n,e,t){"use strict";var i;t.d(e,{Z:function(){return o}});var r=t(29439),a=t(47313),u=0;var s=(i||(i=t.t(a,2))).useId;function o(n){if(void 0!==s){var e=s();return null!=n?n:e}return function(n){var e=a.useState(n),t=(0,r.Z)(e,2),i=t[0],s=t[1],o=n||i;return a.useEffect((function(){null==i&&s("mui-".concat(u+=1))}),[i]),o}(n)}},64836:function(n){n.exports=function(n){return n&&n.__esModule?n:{default:n}},n.exports.__esModule=!0,n.exports.default=n.exports}}]);